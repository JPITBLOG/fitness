(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinSaveButtonCommon","FacebookCommon","FacebookDialogCommon","ScriptCommon"],{"/TEi":function(e,t,n){const r={get(e){(()=>n.e("ScriptCommon").then(n.bind(null,"91Tc")))().then(({default:t})=>{t.load([],"https://apis.google.com/js/client:platform.js","gplus"),t.ready("gplus",()=>{e(window.gapi)})})}};t.a=r},"0Wmr":function(e,t,n){n.d(t,"c",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n("UhjI"),o=n("ePT2");const a="collaborator_approve_invite";function i(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function s(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return n=>{return o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{r.a.trackEvent(a,"success")}).catch(()=>r.a.trackEvent(a,"error"))}}function l(e,t,n){return t=>{const r=e.invited_user,a=e.status,i=e.board.id;return o.a.create("accepted"===a?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:i,field_set_key:"boardEdit",invited_user_id:r.id}).callDelete({showError:!1})}}},"1/M5":function(e,t,n){n.d(t,"a",function(){return d});var r=n("GyhR"),o=n.n(r),a=n("OLQZ"),i=n.n(a);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=200,l=({scrollTop:e,clientHeight:t,scrollHeight:n},r)=>{return e+t+(r?r(t):2*t)>n};class d extends o.a.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",e=>{this.containerRef=e}),s(this,"fetchMoreIfNecessary",i()(()=>{const e=this.props,t=e.fetchMore,n=e.scrollBuffer;t&&this.containerRef&&l(this.containerRef,n)&&t()},c))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){return(0,this.props.children)({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},"3Wjl":function(e,t,n){function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function a(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a})},"5Iwg":function(e,t,n){var r=n("GyhR"),o=n.n(r),a=n("+U6O");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends r.Component{constructor(...e){super(...e),i(this,"state",{isHovering:!1}),i(this,"onHover",()=>{this.setState({isHovering:!0})}),i(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const e=this.props,t=e.name,n=e.selected,r=e.image;return e.inFlyoutExp?o.a.createElement(a.b,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover},o.a.createElement(a.b,null,o.a.createElement(a.t,{height:40,width:40,shape:"rounded"},this.state.isHovering&&r?o.a.createElement(a.o,{alt:"",color:"",fit:"cover",naturalHeight:r.height,naturalWidth:r.width,src:r.url}):o.a.createElement(a.b,{color:"lightGray",height:40,width:40}))),o.a.createElement(a.b,{padding:2},o.a.createElement(a.J,{bold:!0,size:"xl"},t))):o.a.createElement(a.b,{alignItems:"center",color:n?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2},o.a.createElement(a.b,null,o.a.createElement(a.m,{color:n?"darkGray":"gray",icon:"add",accessibilityLabel:""})),o.a.createElement(a.b,{marginLeft:3},o.a.createElement(a.J,{color:n?"darkGray":"gray",bold:!0,size:"lg"},t)))}}var c=n("Qo1m"),l=n("SMmS"),d=n("lixz"),u=n("NmcB");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=-1;t.a=Object(l.b)({name:"BoardTitleSuggestionsResource",options:({pinId:e})=>({pin_id:e}),key:"boards"})(class extends r.Component{constructor(e){super(e),h(this,"_processSuggestions",e=>e&&e.length?e.map(e=>e.title):[]),h(this,"handleClick",e=>{const t=this.state.suggestedBoardsNames;(0,this.props.onBoardSelected)(t[e],!1),Object(u.a)(101,{component:13025,element:23})}),h(this,"handleMouseEnter",e=>{this.setState({selectedIndex:e})}),h(this,"handleMouseLeave",()=>{this.setState({selectedIndex:p})}),h(this,"renderSuggestionRow",(e,t)=>{const n=this.state.selectedIndex===t;return o.a.createElement("li",{key:t},o.a.createElement(a.O,{onTouch:()=>this.handleClick(t),onMouseEnter:()=>this.handleMouseEnter(t),onMouseLeave:this.handleMouseLeave},o.a.createElement(s,{selected:n,name:e,inFlyoutExp:this.props.inFlyoutExp,image:this.props.image})))}),this.state={selectedIndex:p,suggestedBoardsNames:this._processSuggestions(e.boards)}}UNSAFE_componentWillReceiveProps(e){this.setState({suggestedBoardsNames:this._processSuggestions(e.boards)})}componentDidUpdate(e){!e.resourceLoaded&&this.props.resourceLoaded&&this.props.inFirstBoardCreateGestaltExp&&this.setPWTLoadingEnd()}setPWTLoadingEnd(){Object(d.f)(16,{error:!!this.props.error})}renderGestaltBoardSuggestionList(){return c.a._("Suggested board names","text above suggested board names list"),o.a.createElement(a.b,null,o.a.createElement(a.b,{marginTop:5,marginLeft:6,marginBottom:3},o.a.createElement(a.J,{size:"md"},c.a._("Suggested board names"))),o.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}renderPreviewBoardSuggestionList(){return o.a.createElement("div",null,o.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}render(){const e=this.props,t=e.inFirstBoardCreateGestaltExp,n=e.inFlyoutExp,r=e.minHeight;if(!e.resourceLoaded)return o.a.createElement(a.b,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:r||""},o.a.createElement(a.F,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions"),show:!0}));const i=this.state.suggestedBoardsNames;return i&&i.length?n?this.renderPreviewBoardSuggestionList():t?this.renderGestaltBoardSuggestionList():o.a.createElement(a.b,null,o.a.createElement(a.b,{marginTop:2,paddingX:5},o.a.createElement(a.J,null,c.a._("Suggested board names"))),o.a.createElement("ul",null,i.map(this.renderSuggestionRow))):null}})},"8WpO":function(e,t,n){var r=n("GyhR"),o=n.n(r),a=n("+U6O");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=["#4A90E2","#0FA573","#B469EB","#F13535","#E2780D"],c=120,l=800,d=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),u=e=>e*(Math.PI/180);class h extends r.PureComponent{constructor(...e){super(...e),i(this,"animationTimer",null),i(this,"canvasRemovalTimer",null),i(this,"containerRef",Object(r.createRef)()),i(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;const e=this.containerRef.current.getBoundingClientRect(),t=e.height,n=e.width,r=2.5*t,o=document.createElement("canvas");return o.style.position="absolute",o.style.left=`${0-(r-n)/2}px`,o.style.top=`${0-(r-t)/2}px`,o.style.pointerEvents="none",o.style.width=`${r}px`,o.style.height=`${r}px`,o.style.overflow="visible",o.width=r,o.height=r,o}),i(this,"explode",()=>{const e=this.buildCanvas();if(!e)return;const t=this.containerRef.current,n=e.getContext("2d");t.prepend(e);const r=Array.from(Array(c)).map((t,n)=>({x:e.width/2,y:e.height/2,radius:Math.round(d(10,30)),color:s[Math.floor(Math.random()*s.length)],degree:Number(d(0,360).toFixed(1)),speed:Math.round(d(0,25)),friction:.9,opacity:Number(d(0,.5).toFixed(1)),yVel:0,gravity:.04})),o=(e,t,n,r)=>{window.requestAnimationFrame(()=>o(e,t,n,r)),t.clearRect(0,0,n,r),e.forEach((e,n)=>{e.x+=e.speed*Math.cos(u(e.degree)),e.y+=e.speed*Math.sin(u(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};o(r,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},this.props.delay+l)})}componentDidUpdate(e){const t=this.props,n=t.delay,r=t.startAnimation,o=e.startAnimation;r&&o!==r&&(this.animationTimer=setTimeout(this.explode,n))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return o.a.createElement(a.b,{ref:this.containerRef,position:"relative"},this.props.children)}}i(h,"defaultProps",{delay:0}),t.a=h},"91Tc":function(e,t,n){n.r(t);var r=n("xk7t"),o=n.n(r);const a={ready:function(e,t){o.a.ready(e,t)},load:function(e,t,n){a.ready(e,()=>{0===t.lastIndexOf("//",0)&&(t=window.location.protocol+t),o()(t,n)})},done:function(e){o.a.done(e)}};t.default=a},A6bX:function(e,t,n){n.d(t,"a",function(){return o});var r=n("7Iyi");function o(e,t){return n=>n(Object(r.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},CAUj:function(e,t,n){n.d(t,"e",function(){return o}),n.d(t,"f",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n("7Iyi");const o=(e,t)=>n=>n(Object(r.a)("BoardResource",{board_id:e,field_set_key:t})),a=e=>o(e,"pin_count"),i=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),s=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),c=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),l=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},CpsV:function(e,t,n){n.d(t,"b",function(){return c});var r=n("GyhR"),o=n("UHkV"),a=n("D+W/"),i=n("Qo1m"),s=n("+U6O");function c(e,t){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,o,a)=>{if(n.length>0&&e&&e.length){const i=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(r.createElement("em",{key:a,style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"}},t.substring(i,i+e.length)),o)}return[o]},[]):t}t.a=function(e){const t=e.disabled,n=e.item,l=e.isSection,d=e.isSelectMode,u=e.isWithinSectionPicker,h=e.saveState,p=e.searchQuery,m=e.selected,b=e.size,f=void 0===b?"md":b,g=l?null:n,y=l?n:null,_=y&&y.title||g&&g.name||"";let v="",E=!1,w="",S=0;if(g){v=g.image_cover_url,E=g.is_collaborative,w=g.privacy;var O=g.section_count;S=void 0===O?0:O}const I=c(p,_),C=w===a.a.BoardPrivacy.SECRET,x=!t&&(m||!!h),R=!u&&S>0,k=S>0?"boardWithSection":"boardWithoutSection",P=d?i.a._("Select","Board select button label"):i.a._("Save","Pin save button label");return r.createElement(s.b,{alignItems:"center",color:x?"lightGray":"white",display:"flex",paddingX:"lg"===f?4:6,paddingY:2,"data-test-id":k},r.createElement(s.b,{height:"lg"===f?40:36,width:"lg"===f?40:36,color:"lightGray",overflow:"hidden",shape:"rounded",marginRight:2,flex:"none"},v?r.createElement(s.o,{src:v,alt:_,fit:"cover",naturalWidth:1,naturalHeight:1}):r.createElement("span",null)),r.createElement(s.b,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow"},r.createElement(s.J,{color:t?"gray":"darkGray",bold:!0,size:"lg"===f?"xl":"md",truncate:!0},I),(R||!x)&&r.createElement(s.b,{alignItems:"center",display:"flex"},C&&r.createElement(o.a,{type:"secret"}),E&&r.createElement(o.a,{type:"group"}),R&&r.createElement(o.a,{type:"sections"})),!R&&x&&!h&&r.createElement(s.b,{alignItems:"center","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,dangerouslySetInlineStyle:{__style:{backgroundColor:"#e60023",borderRadius:"4px"}}},!d&&r.createElement(s.b,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},r.createElement(s.m,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})),r.createElement(s.J,{bold:!0,color:"white",size:"sm",overflow:"normal"},P)),!R&&x&&"loading"===h&&r.createElement(s.b,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35},r.createElement(s.F,{accessibilityLabel:i.a._("Saving","Accessibility label for saving a pin to a board"),show:!0}))))}},FGWo:function(e,t,n){var r=n("GyhR"),o=n("Ivf5"),a=n("hvnN"),i=n.n(a),s=n("dBWR"),c=n("XXWR");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1};t.a=((e,t={},n)=>a=>{const u=function(e){return t=>({experience:t.experiences.eligibleExperiences[e]})}(e);n=Object.assign({},d,n);const h=function(e,t,n=!0,o=!0,a){var d,u;return u=d=class extends r.Component{constructor(e){super(e),l(this,"state",{}),l(this,"setExtraContextState",e=>this.setState({extraContext:e}))}componentDidMount(){this.dispatchPlacementMount(!1)}UNSAFE_componentWillUpdate(n,r){const o=n.dispatch,a=n.experience;let i=t;if("function"==typeof t){const e=r.extraContext||{};i=t(n,e)}if(!Object(c.e)(a)&&"function"==typeof t&&i&&Object.keys(i).length){const n=t(this.props,this.state);JSON.stringify(n)!==JSON.stringify(i)&&o(Object(s.c)(e,i))}!a||this.props.experience&&a.id===this.props.experience.id||o(Object(s.i)(e,i))}componentWillUnmount(){(0,this.props.dispatch)(Object(s.k)(e))}dispatchPlacementMount(n){const r=this.props.dispatch;let o={};o="function"==typeof t?t(this.props,this.state):Object.assign({},t),r(Object(s.j)(e,o,n))}render(){const e=this.props.experience;return r.createElement(a,Object.assign({},this.props,{setPlacementExtraContext:this.setExtraContextState,experience:Object(c.e)(e)?e:null}))}},l(d,"propTypes",{dispatch:i.a.func.isRequired,experience:i.a.shape(c.a)}),u}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,a);return Object(o.connect)(u)(h)})},Fbxa:function(e,t,n){n.d(t,"a",function(){return l});var r=n("GyhR"),o=n("Mr4W"),a=n.n(o),i=n("1/M5"),s=(n("MNJ6"),n("+U6O"));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends r.Component{constructor(e,t){super(e,t),c(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),c(this,"handleIndexUpdate",e=>{const t=this.props.indexManager;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),c(this,"handleSelectItem",e=>()=>{const t=this.props,n=t.disabled,r=t.onSelectItem;n||r(e)}),c(this,"handleMouseEnter",e=>({event:t})=>{const n=this.props,r=n.disabled,o=n.indexManager;r||o.updateIndex(e)}),c(this,"handleMouseLeave",({event:e})=>{const t=this.props,n=t.disabled,r=t.indexManager;n||r.setInactive()}),c(this,"renderItems",(e,t)=>{const n=this.props.renderItem,o=this.state.selectedIndex||{},a=o.row,i=o.section,c=e.customProps,l=void 0===c?{}:c,d=e.items,u=e.renderItem,h=l.isDisabled,p=void 0===h?e=>!1:h,m=t===i,b=u||n;return b&&d.map((e,n)=>{const o=p(e),i={section:t,row:n},c=m&&n===a;return r.createElement("div",{"data-test-id":"board-selection",key:n,ref:!o&&c&&this.setSelectedItemRef},o?b({item:e,hovered:c,sectionProps:l}):r.createElement(s.O,{onMouseEnter:this.handleMouseEnter(i),onMouseLeave:this.handleMouseLeave,onTouch:this.handleSelectItem(e),fullWidth:!1,shape:"rounded"},b({item:e,hovered:c,sectionProps:l})))})}),c(this,"renderSections",()=>{const e=this.props,t=e.renderSectionHeader;return e.sections.map((e,n)=>r.createElement(s.b,{key:n},t&&t(e,n),this.renderItems(e,n)))});const n=this.props.indexManager;this.state={selectedIndex:n.getIndex(),selectionMovedByKeyboard:!1},n.setUpdateCallback(this.handleIndexUpdate)}UNSAFE_componentWillReceiveProps(e){this.props.indexManager!==e.indexManager&&e.indexManager.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(){const e=this.containerRef;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&e){const t=a.a.findDOMNode(this.selectedItemRef);if(!(t instanceof HTMLElement))return;const n=t.getBoundingClientRect(),r=n.top,o=n.bottom,i=e.getBoundingClientRect(),s=i.top;o>=i.bottom?t.scrollIntoView(!1):r<=s&&t.scrollIntoView(!0)}}render(){const e=this.props,t=e.grow,n=void 0!==t&&t,o=e.maxHeight,a=e.fetchMore;return r.createElement(i.a,{fetchMore:a},({setRef:e,onScroll:t})=>r.createElement(s.b,{flex:n?"grow":void 0,height:n?"100%":void 0,maxHeight:o,onScroll:t,overflow:"auto",ref:t=>{this.containerRef=t,e(t)}},this.renderSections()))}}},"H++a":function(e,t,n){n.r(t);var r=n("oFGA"),o=n("bWet"),a=n("CYq4"),i=n.n(a),s=n("ePT2"),c=n("q579"),l=n("aqOH");const d={open(e){const t=i()(e,d._validParams),n=d._getDialogType(e),r=d.generateFbRef(),a=e.object_type&&e.object_id&&"feed"===n;let u=c.a.absolutify(e.path);const h=c.a.getQueryStringParams();if(h.ptrf&&(u=c.a.appendQueryString(u,{ptrf:h.ptrf})),a&&(u=c.a.appendQueryString(u,{fb_ref:r})),t.method=n,"feed"===t.method){const n=d.getWindowOptions(e.width||580,e.height||400);let r="http://www.facebook.com/sharer/sharer.php?u="+u;t.picture&&(r+="&picture="+t.picture),t.name&&(r+="&title="+t.name),t.description&&(r+="&description="+t.description),t.caption&&(r+="&caption="+t.caption),window.open(encodeURI(r),"sharer",n)}else"send"===t.method?t.link=u:"share"===t.method&&(t.href=u),o.default.ensureInit(n=>{n.getLoginStatus(()=>{if("send"===t.method){n.ui(t);let r,o=10;const a=setInterval(()=>{!(r=function(){const e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(!e.length)return;if(1===e.length)return e[0];const t=e.splice(0,e.length-1);for(let n=0;n<t.length;n+=1)t[n].parentNode.removeChild(t[n]);return e[0]}())&&o||(clearInterval(a),r&&d.executeMessengerCallback(r,e.callback)),o-=1},1e3)}else"share"===t.method&&n.ui(t,t=>{if(a&&t&&!t.error_message){const t=s.a.create("LogFacebookFeedShare",{});t.options={object_type:e.object_type,object_id:e.object_id,fb_ref:r},t.callCreate({showError:!1})}e.callback&&e.callback(t)})})},l.default)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,t){let n=10;const r=setInterval(()=>{"0px"!==e.style.width&&n||(clearInterval(r),e.style.width="575px"),n-=1},1e3);t&&t()},generateFbRef(){let e="";for(;e.length<20;)e+=Math.floor(65535*Math.random()).toString(16);return(l.default.id||r.a.instance.unauth_id)+":"+e},_getDialogType:e=>d._validOptions.includes(e.type)?e.type:"feed",getWindowOptions(e,t){const n=e||580,r=t||400,o=screen.width,a=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+n+",height="+r+",left="+Math.round((o-n)/2)+",top="+(a>r?Math.round((a-r)/2):0)}};t.default=d},"J+kV":function(e,t,n){n.d(t,"d",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return c});function r(e){return function(t,n){const r=[];t&&/\S/.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function o(e){return function(t,n){const r=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i"),o=[];(t=t&&t.trim())&&!t.match(r)&&o.push(e.message);const a={errors:o,warnings:[]};return n&&n(a),a}}function a(e){return function(t,n){const r=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function i(e){return function(t,n){const r=[];(e.should_trim||!1)&&(t=t&&t.trim());const o=t.length;e.min&&o<e.min?r.push(e.minErrorString):e.max&&o>e.max&&r.push(e.maxErrorString);const a={errors:r,warnings:[]};return n&&n(a),a}}function s(e){return function(t,n){const r=[];e.pattern.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function c(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}},JXQe:function(e,t,n){var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("hvnN"),s=n.n(i),c=n("vBbO"),l=n("SMmS"),d=n("VSY/"),u=n("+U6O");function h(e){const t=e.body,n=e.img,o=e.onClick,i=e.selected,s=e.title,c=e.username,l=e.valid,d=c||t;return r.createElement(u.b,{marginBottom:4},r.createElement(u.O,{onTouch:o},r.createElement(u.b,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,r.createElement(u.b,{marginLeft:3,flex:"grow",marginRight:2},r.createElement(u.b,{marginBottom:1},r.createElement(u.J,{bold:!0,size:"md",truncate:!0},s)),r.createElement(u.J,{size:"xs",truncate:!0},d)),r.createElement(u.b,{marginLeft:2},((e,t)=>{if(c)return e?r.createElement(u.m,{icon:"check-circle",color:"red",accessibilityLabel:a.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):r.createElement(u.b,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});{const n={text:a.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return e||(n.text=a.a._("Invite","Add board collaborator invite"),n.disabled=Boolean(!t)),r.createElement(u.c,n)}})(i,l)))))}var p=n("0Wmr");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n){const r=e.id;return t===n.findIndex(e=>e.id===r)}class f extends r.Component{constructor(...e){super(...e),m(this,"state",{selectedCollaborators:[],showCollabList:!1,showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""}),m(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),m(this,"handleCollaboratorClick",e=>{const t=e.id,n=e.type;this.isIdSelected[t]=!this.isIdSelected[t];const r=this.state.selectedCollaborators.concat([e]),o="email"===n?p.c:p.d;this.props.onSelectedCollaboratorsChange({id:t,resource:o}),this.setState({selectedCollaborators:r})}),m(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})}),m(this,"handleToggleCollabList",()=>{this.setState(e=>({showCollabList:!e.showCollabList}))}),m(this,"isIdSelected",{})}render(){const e=this.state,t=e.value,n=e.showCollabList,i=this.props.inCollabInBoardCreateExperiment,s=(""===t?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:t,valid:Object(d.g)(t)}).concat(this.props.shareSuggestions).filter(b)).map((e,t)=>(function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){const o=r.createElement(u.a,{name:e.title||e.full_name,src:e.image_medium_url,size:"md"});return r.createElement(h,{img:o,onClick:()=>n(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const o=e.id,i=e.valid,s=r.createElement(u.b,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},r.createElement(u.m,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:a.a._("Email icon","Email icon on board create modal")})),c=Object(d.c)(a.a._("Email {{ email }}"),{email:o});let l,p;return t?(l=a.a._("Done!","Text that lets the user know we sent the board invite email"),p=(()=>void 0)):(l=i?a.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):a.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),p=(()=>i?n(e):void 0)),r.createElement(h,{body:l,img:s,onClick:p,selected:t,title:c,valid:i})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick)).map((e,t)=>o.a.createElement("li",{key:t},e)),l=i?o.a.createElement(u.O,{onTouch:this.handleToggleCollabList},o.a.createElement(u.d,null,o.a.createElement(u.b,{display:"flex",alignItems:"center",justifyContent:"between",paddingX:3,marginTop:3,marignBottom:1,paddingY:3},o.a.createElement(u.J,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")),o.a.createElement(u.m,{accessibilityLabel:"",icon:n?"arrow-down":"arrow-forward"})))):o.a.createElement(u.b,{paddingX:3,marginBottom:4,marginTop:3,paddingY:3},o.a.createElement(u.J,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")));return o.a.createElement(u.b,{display:"flex",direction:"column",height:"100%"},l,(i&&n||!i)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u.b,{paddingX:3,marginTop:2,marginBottom:4,width:"100%"},o.a.createElement(u.b,{flex:"grow"},o.a.createElement(c.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:t},o.a.createElement(u.C,{id:"CollaboratorInviteSearchField",accessibilityLabel:a.a._("Search for collaborators by name or email"),onChange:this.handleTextFieldChange,placeholder:a.a._("Search by name or email"),value:t})))),o.a.createElement(u.b,{paddingX:3,overflow:"scrollY"},o.a.createElement("ul",null,s))))}}m(f,"propTypes",{onSelectedCollaboratorsChange:s.a.func.isRequired,resourceLoaded:s.a.bool.isRequired,shareSuggestions:s.a.arrayOf(s.a.shape({id:s.a.string})).isRequired}),m(f,"defaultProps",{shareSuggestions:[]});t.a=Object(l.b)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(f)},MNJ6:function(e,t,n){n.d(t,"a",function(){return i});const r={row:0,section:0},o={row:-1,section:-1},a=()=>void 0;class i{constructor(e){this.index=Object.assign({},r),this.sections=e,this.updateCallback=a,this.selectItem=a}getIndex(){return this.index}isAtStart(){const e=this.index,t=e.row,n=e.section;return 0===t&&0===n}isAtEnd(){const e=this.index,t=e.row,n=e.section,r=this.sections[n]||[];return this.sections.length===n+1&&r.length===t+1}next(){if(this.isAtEnd())return;const e=this.index,t=e.row,n=e.section;t===o.row&&n===o.section?this.index=Object.assign({},r):this.sections[n].length>t+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const e=this.index,t=e.row,n=e.section;if(t===o.row&&n===o.section)this.index=Object.assign({},r);else if(t>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const e=this.index,t=e.row,n=e.section;this.selectItem((this.sections[n]||[])[t])}setInactive(){this.index=Object.assign({},o),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},OUI7:function(e,t,n){n.d(t,"a",function(){return a});const r={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},o=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=r[e.charAt(n)]||e.charAt(n);return t},a=(e,t,n="name")=>{const r=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),r=e.split(" ");let a=0;for(let i=0;i<r.length;i+=1)(o(r[i]).includes(n[a])||r[i].includes(n[a]))&&(a+=1);return a===n.length})(e[n].toLowerCase(),r))}},P4K9:function(e,t,n){var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("z/1d"),s=n("ePT2"),c=n("qFs9"),l=n("Irlq"),d=n("+U6O");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=5,p=27,m=38,b=40,f=13;t.a=Object(c.a)(class extends o.a.Component{constructor(...e){super(...e),u(this,"state",{isOpen:this.props.editing,recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",()=>{this.setState({isOpen:!1})}),u(this,"mounted",!1),u(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),u(this,"handleKeyDown",e=>{e.keyCode===m?this.handlePrevHashtag(e):e.keyCode===b?this.handleNextHashtag(e):e.keyCode===p?this.handleClose(e):e.keyCode===f&&this.handleSubmit(e)}),u(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),u(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),u(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),u(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),u(this,"callResource",e=>{(0,this.props.makeCancelablePromise)(s.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,h),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}UNSAFE_componentWillReceiveProps(e){e.query!==this.props.query&&""!==e.query&&this.callResource(e.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const e=this.state,t=e.recommendations,n=e.resourceLoaded,r=e.selectedIndex,s=this.props,c=s.anchor,u=s.idealDirection,h=t.filter(e=>e.query),p=u||"down",m="flyout_"+h.length;return n&&h.length>0?o.a.createElement("div",{className:"HashtagFlyout"},o.a.createElement(d.j,{key:m,anchor:c,idealDirection:p,onDismiss:this.onDismiss,size:"sm"},o.a.createElement("div",{className:"HashtagRecommendations"},h.length>0?h.map((e,t)=>o.a.createElement("div",{className:"HashtagItem",key:e.query},o.a.createElement(d.O,{onTouch:t=>this.addHashtag(e.query),fullWidth:!1},o.a.createElement(d.b,{display:"flex",justifyContent:"between",alignItems:"center",color:t===r?"lightGray":"transparent",deprecatedPadding:1},o.a.createElement(d.b,{flex:"grow"},o.a.createElement(d.J,{inline:!0,size:"sm",bold:!0},e.query)),o.a.createElement(d.b,{flex:"none"},o.a.createElement(d.J,{inline:!0,size:"xs"},Object(l.b)(a.a.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout"),{count:o.a.createElement(i.a,{value:Number(e.pin_count),key:"pinCount"})}))))))):null))):null}})},Reqc:function(e,t,n){n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n("GyhR"),o=n("+U6O");function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const i={__style:{borderRadius:4}},s={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function c(){return r.createElement(o.b,{alignItems:"center",color:"red",dangerouslySetInlineStyle:i,display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},r.createElement(o.b,{dangerouslySetInlineStyle:s,display:"inlineBlock",height:18,position:"relative",shape:"circle",width:18}))}function l(e){let t=e.disabled,n=e.submitting,i=e.text,s=a(e,["disabled","submitting","text"]);return r.createElement(o.b,{display:"flex",position:"relative"},n&&r.createElement(c,null),r.createElement(o.c,Object.assign({},s,{inline:!0,color:"red",type:"submit",text:i,disabled:t||n})))}},SMmS:function(e,t,n){n.d(t,"a",function(){return m}),n.d(t,"c",function(){return y});var r=n("GyhR"),o=n("Ivf5"),a=n("jlBG"),i=n("E56J"),s=n("hvnN"),c=n.n(s),l=n("7Iyi");function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=(e,t)=>JSON.stringify(e)===JSON.stringify(t);function m(e,t){return Object(a.a)("function"==typeof e?e(t):e||{})}const b=(e,t={})=>n=>{var o,a;return a=o=class extends r.Component{constructor(...n){super(...n),h(this,"loadData",n=>{const r=t;e.forEach(({options:e,name:t})=>{const o="function"==typeof e?e(n):e;n.dispatch(Object(l.a)(t,o,void 0,void 0,r.traceLoggerHandlerName))})}),h(this,"loadMoreData",n=>{const r=t;e.forEach(({options:e,name:t})=>{const o="function"==typeof e?e(n):e;n.dispatch(Object(l.d)(t,o,void 0,void 0,r.traceLoggerHandlerName))})}),h(this,"resourcesHash",JSON.stringify(e.map(e=>u({},e,{options:m(e.options,this.props)}))))}componentDidMount(){!1!==t.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}shouldComponentUpdate(e){const t=[...Object.keys(this.props),...Object.keys(e)];for(const n of t)if("resourceData"===n){if(!p(this.props.resourceData,e.resourceData))return!0}else if(this.props[n]!==e[n])return!0;return!1}UNSAFE_componentWillUpdate(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);const n=JSON.stringify(e.map(e=>u({},e,{options:m(e.options,t)})));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}render(){const e=this.props,t=e.error,o=e.isAtEnd,a=e.isFetching,i=e.resourceData,s=e.resourceLoaded,c=d(e,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete c.onResourceError,delete c.onResourceLoaded,r.createElement(n,Object.assign({},i,c,{error:t,fetchMoreData:()=>this.loadMoreData(this.props),isAtEnd:o,isFetching:a,refreshData:()=>this.loadData(this.props),resourceLoaded:s}))}},h(o,"WrappedComponent",n),h(o,"displayName",1===e.length?e[0].name:`${e.length} resources`),h(o,"propTypes",{dispatch:c.a.func.isRequired,error:c.a.any,isFetching:c.a.bool.isRequired,onResourceError:c.a.func,onResourceLoaded:c.a.func,resourceData:c.a.objectOf(c.a.any).isRequired,resourceLoaded:c.a.bool.isRequired}),a},f=(e,t={})=>n=>{const r={name:e.name,options:e.options||{},key:e.key||"data"};return Object(o.connect)((e=>{const t={};return e=>(n,r)=>{const o=n.resources,a=o.fetching,s=o.data,c=e.some(({name:e,options:t})=>a[e]&&a[e][m(t,r)]),l={};let d;const u=[];e.forEach(({name:e,options:n,key:o})=>{if(s[e]){const a=m(n,r);if(t[e]||(a in s[e]?i.default.increment("webapp.withResource.cache-hit",.05,{resource:e,cache_size:Object.keys(s[e]).length,level:"success",v:1}):Object.keys(s[e]).length?i.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:e,cache_size:Object.keys(s[e]).length,level:"error",v:1,xFoundKeys:JSON.stringify(Object.keys(s[e])),xExpectedKey:a}):i.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:e,cache_size:Object.keys(s[e]).length,level:"warn",v:1,xFoundKeys:null,xExpectedKey:a})),t[e]=!0,s[e][a]){const t=s[e][a],n=t.data,r=t.nextBookmark,i=t.error;l[o]=n,u.push(r),i&&(d=i)}}else i.default.increment("webapp.withResource.no-cache",.05,{resource:e,cache_size:0,level:"error",v:1})});const h=e.every(({key:e})=>void 0!==l[e]);return{resourceLoaded:h,isAtEnd:h&&!c&&u.every(e=>"-end-"===e),isFetching:c,nextBookmark:u[0],resourceData:l,error:d}}})()([r]))(b([r],t)(n))};t.b=f;const g=({name:e,options:t})=>(n,r)=>{const o=n.resources.data;if(o[e]){const n=m(t,r);if(o[e][n]){return{data:o[e][n].data}}}return{data:null}};function y({name:e,options:t}){return Object(o.connect)(g({name:e,options:t||{}}))}},TYRv:function(e,t,n){var r=n("GGL+"),o=n.n(r),a=n("POeB"),i=n("/TEi"),s=n("Qo1m"),c=n("D+W/"),l=n("ggpB");const d={scope:"profile email",client_id:c.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,app_package_name:c.a.GEN.templateConst.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},u=e=>(Object(l.a)("unauth_web.gapi_auth2_load.success"),e()),h=e=>{Object(l.a)(`unauth_web.init_google.sdk.${e}`)};var p=()=>new Promise((e,t)=>{h("start"),window.gapi.auth2?(h("exists"),window.gapi.auth2.init(d).then(()=>u(e))):(h("load"),window.gapi.load("auth2",{callback:()=>{h("load_success"),window.gapi.auth2.init(d).then(()=>u(e))},onerror:()=>{h("load_error"),t()},timeout:15e3,ontimeout:()=>{h("load_timeout"),t()}}))}),m=n("GrJN"),b=n("aqOH");function f(){}let g;Object.assign(f.prototype,o.a),Object.assign(f.prototype,{connect(e,t){(t=Object.assign({},{success(){},error(){},complete(){}},t)).rerequest_facebook_email?(()=>n.e("FacebookCommon").then(n.bind(null,"bWet")))().then(({default:e})=>{e.ensureInit(e=>{e.login(e=>{const n=e.authResponse;let r,o;n&&(r=(r=n.grantedScopes)?r.split(","):[],o=n.userID);const a=r.find(e=>"email"===e),i={id:o};"connected"===e.status&&a?t.success(i):t.error(i),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},b.default)}):"gplus"===e?i.a.get(e=>{p().then(()=>{e.auth2.getAuthInstance().grantOfflineAccess().then(e=>{t.success({one_time_code:e.code,redirect_uri:"postmessage"})}).catch(e=>{t.error(e)})})}):(()=>n.e("FacebookDialogCommon").then(n.bind(null,"H++a")))().then(({default:n})=>{const r=t.windowOptions||n.getWindowOptions(),o=window.open("/connect/"+e+"/","",r);if(!o)return a.default.showError(s.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});const i=m.a.setInterval(()=>{o.closed&&(clearInterval(i),this.handleComplete({network:e,error_message:"Window closed."}))},1e3);this.once("connect:"+e,e=>{clearInterval(i),e.error_message?t.error(e):t.success(e),t.complete()})})},complete(e){this.handleComplete(e)},handleComplete(e){const t="connect:"+e.network;if("facebook"===e.network){const t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}this.trigger(t,e)}}),Object.assign(f,{instance:()=>(g||(g=new f),g),FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy",DROPBOX:"dropbox"}),window.addEventListener("message",e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&f.instance().complete(e.data)});t.a=f},UHkV:function(e,t,n){var r=n("GyhR"),o=n("Qo1m"),a=n("+U6O");t.a=function({type:e}){const t={group:{accessibilityLabel:o.a._("group board","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:o.a._("protected board","Board picker protected board icon"),icon:"lock"},secret:{accessibilityLabel:o.a._("secret board","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon"),icon:"arrow-down"}}[e];return r.createElement(a.b,{marginLeft:1},r.createElement(a.b,{marginStart:2},"sections"===e||"sectionsInline"===e?r.createElement(a.m,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):r.createElement(a.m,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})))}},"VEO/":function(e,t,n){},ay7J:function(e,t,n){var r=n("GyhR"),o=n.n(r),a=n("Mr4W"),i=n.n(a),s=n("D+W/"),c=n("Qo1m"),l=(n("MNJ6"),n("+U6O"));t.a=class extends r.Component{constructor(...e){var t,n,r;super(...e),r=(e=>{const t=this.props,n=t.disabled,r=t.indexManager;if(!n)switch(e.which){case s.a.KeyCode.ENTER:case s.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),r.select();break;case s.a.KeyCode.UP:e.preventDefault(),r.prev();break;case s.a.KeyCode.DOWN:e.preventDefault(),r.next()}}),(n="handleKeyDown")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}componentDidMount(){const e=this._input;if(e){const t=i.a.findDOMNode(e);if(t instanceof HTMLElement){const e=t.querySelector("input");e&&e.focus()}}}render(){const e=this.props,t=e.onChange,n=e.value;return o.a.createElement("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"}},o.a.createElement(l.C,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:e})=>t(e),placeholder:c.a._("Search","search bar placeholder text"),ref:e=>{this._input=e},value:n}))}}},bWet:function(e,t,n){n.r(t);var r=n("TzVy"),o=n("2EPj"),a=n.n(o),i=n("ePT2"),s=n("91Tc"),c=n("aqOH");n("k9eC");let l=!1;const d={ensureInit(e,t=c.default,n="en_US",r){s.default.load([],`//connect.facebook.net/${n}/sdk.js`,"fb"),s.default.ready("fb",()=>{this._fbCallback(e,t,r)}),window.fb_init=1},_fbCallback(e,t,n){const r=window.FB;r&&(l||(n&&(n.check("enabled_fb_and_prevent_google_one_tap_error_refresh")||n.check("enabled_scroll_and_prevent_google_one_tap_error_refresh")||n.check("enabled_load_secondary_content_after_user_scroll")||n.check("enabled_load_secondary_content_after_fb_success"))?r.init({appId:a.a.FB_KEY,status:!0,xfbml:!0,version:"v2.7"}):r.init({appId:a.a.FB_KEY,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",e=>{d.refreshAccessToken(t)}),l=!0,window.fb_init=2),e(r))},ensureLoggedIn(e,t){d.ensureInit(t=>{d.logIn(t,e)},t)},logIn(e,t){e&&(e.getUserID()?t(e):e.login(()=>{t(e)}))},refreshAccessToken(e){e.isAuthenticated()&&e.attributes.facebook_id&&!e.isLimitedLogin()&&d.ensureInit(e=>{if(e.getUserID()){const t=e.getAccessToken();if(t){i.a.create("UserSocialNetworkResource",{facebook_token:t}).callUpdate({showError:!1})}}},e)},injectTrackingPixel(e){!function(){const e=window._fbq||(window._fbq=[]);if(!e.loaded){const t=document.createElement("script");t.async=!0,t.src="//connect.facebook.net/en_US/fbds.js";const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),e.loaded=!0}}(),window._fbq=window._fbq||[],window._fbq.push(["track",e,{value:"0.00",currency:"USD"}])}};t.default=r.a.expose("Facebook",d)},c61H:function(e,t,n){n.d(t,"a",function(){return c});var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=n("H3Xe");const s=e=>({isLimitedLogin:e.viewer.isLimitedLogin,isAuth:e.viewer.isAuth});function c(e){const t=t=>{const n=t.dispatch,r=t.isAuth,a=t.isLimitedLogin,s=!r||a?e=>e=>{e&&e.stopPropagation(),n(i.a)}:e=>e;return o.a.createElement(e,Object.assign({authAction:s},t))};return t.displayName=`WithAuthenticatedAction(${String(e.displayName||e.name)})`,Object(a.connect)(s)(t)}},cSL5:function(e,t,n){var r=n("GyhR"),o=n.n(r),a=n("CpsV"),i=n("5Iwg"),s=n("Qo1m"),c=n("tsSC"),l=n("+U6O");var d=Object(c.a)(function(e){const t=e.buttonLabel,n=e.isHovering,o=e.isRowItem,a=e.hasHoverState,i=e.hoverHandlers,c=e.name,d=e.onClick,u=c||t||s.a._("Create board");return r.createElement(l.O,{onMouseEnter:i.onMouseOver,onMouseLeave:i.onMouseLeave,onTouch:d},r.createElement(l.b,{alignItems:"center",color:a&&n?"lightGray":"white",display:"flex",flex:o?"shrink":"none",height:64,width:"100%"},r.createElement(l.b,{marginLeft:6,marginRight:3,"data-test-id":"createBoardButton"},r.createElement(l.m,{accessibilityLabel:s.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})),c?r.createElement(l.b,{margin:1},r.createElement(l.J,{inline:!0,overflow:"normal",__dangerouslyIncreaseLineHeight:!0}," ",s.a._("Create: ")," ")):null,r.createElement(l.J,{truncate:!0,align:"center",bold:!0,inline:!0,__dangerouslyIncreaseLineHeight:!0}," ",u," ")))}),u=n("MNJ6"),h=n("ay7J"),p=n("lixz"),m=n("Fbxa");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return g});const f="",g=2;t.b=class extends r.Component{constructor(...e){super(...e),b(this,"state",{searchQuery:f}),b(this,"handleSelectItem",e=>{const t=this.props,n=t.onCreate,r=t.onSelected;!e&&n?n(this.state.searchQuery):e&&r(e),(n||e)&&this.setState({searchQuery:""})}),b(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),b(this,"renderSectionHeader",(e,t)=>e.title?o.a.createElement(l.b,null,t>0&&o.a.createElement(l.i,null),o.a.createElement(l.b,{deprecatedPadding:{x:3,y:1}},o.a.createElement(l.J,{size:"sm"},e.title))):null),b(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const r=this.props,i=r.boardSavedTo,s=r.isSelectMode,c=r.disabledRowId,l=this.state.searchQuery,d=n.inSectionSelection,u=void 0!==d&&d,h=i&&i.board===e.id?i&&i.state:null,p="board_section"===e.type;return o.a.createElement(a.a,{isSelectMode:s,disabled:e.id===c&&u,item:e,isSection:p,isWithinSectionPicker:u,saveState:h,searchQuery:l,selected:t,size:"md"})})}componentDidUpdate(e){!e.isLoaded&&this.props.isLoaded&&this.setPWTLoadingEnd()}setPWTLoadingEnd(){Object(p.f)(16,{error:this.props.hasLoadError})}render(){const e=this.props,t=e.boardSavedTo,n=e.createButtonLabel,r=e.hasLowBoardCount,a=e.getSections,c=e.isLoaded,p=e.onCreate,b=e.pinId;if(c){const e=this.state.searchQuery,s=a(e);return this.indexManager=new u.a(s.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),o.a.createElement(l.b,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}}},!r&&o.a.createElement(l.b,null,o.a.createElement(l.b,{paddingX:6,marginBottom:4,marginTop:1},o.a.createElement(h.a,{disabled:!!t,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:e})),o.a.createElement(l.i,null)),o.a.createElement(m.a,{disabled:!!t,grow:!r&&!e,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:s}),o.a.createElement(l.i,null),p&&o.a.createElement(d,{buttonLabel:n,hasHoverState:!0,name:e,onClick:()=>p(e)}),r&&b&&o.a.createElement(i.a,{onBoardSelected:p,pinId:b}))}return o.a.createElement(l.b,{deprecatedPadding:{y:5}},o.a.createElement(l.F,{accessibilityLabel:s.a._("loading section picker","accessibility label for the loading spinner the repin picker"),show:!0}))}}},cjc9:function(e,t,n){function r(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,"a",function(){return r})},ekcn:function(e,t,n){},evwu:function(e,t,n){n.d(t,"g",function(){return f}),n.d(t,"h",function(){return g}),n.d(t,"b",function(){return y}),n.d(t,"i",function(){return _}),n.d(t,"e",function(){return v}),n.d(t,"d",function(){return E}),n.d(t,"m",function(){return w}),n.d(t,"f",function(){return O}),n.d(t,"c",function(){return I}),n.d(t,"a",function(){return C}),n.d(t,"l",function(){return x}),n.d(t,"j",function(){return R}),n.d(t,"k",function(){return k});var r=n("UhjI"),o=n("wCwf"),a=n("E56J"),i=n("ePT2"),s=n("eB/M"),c=n("j/DJ"),l=n("3Wjl"),d=n("7Iyi");function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p="board_create",m="board_delete",b="board_edit";function f(){return{type:"BOARDS_FETCH_ALL_IF_NEEDED",payload:{}}}function g(){return{type:"BOARDS_FETCH_LAST_PINNED_TO_IF_NEEDED",payload:{}}}function y(e,t){return Object(d.a)("BoardResource",{board_id:e,field_set_key:t})}function _(){return(e,t)=>{const n=t().viewer;n.isAuth&&Object(c.b)(n.username).forEach(t=>{e(t)})}}function v(e){const t=u({},e);return n=>(n({type:"BOARD_CREATE",payload:{board:e}}),i.a.create("BoardResource",t).callCreate().then(e=>{r.a.trackEvent(p,"success");const o=e.resource_response.data;return o&&(n(_()),n(function(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}(t,o))),o}).catch(e=>{throw r.a.trackEvent(p,"error"),e}))}function E(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function w(e){return t=>{const n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},o=u({board_id:e.id,name:e.name,description:e.description,category:e.category,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations},n);return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:o}}),i.a.create("BoardResource",o).callUpdate().then(n=>{r.a.trackEvent(b,"success");const a=n&&n.resource_response&&n.resource_response.data||e;t(E(o,a))}).catch(e=>{throw r.a.trackEvent(b,"error"),e})}}function S(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function O(e){return(t,n)=>{const o=n().boards.content[e],a=o.pin_count,s=o.owner.id;return t({type:"BOARD_DELETE",payload:{boardId:e}}),i.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{r.a.trackEvent(m,"error"),t(S(e)),t(Object(l.a)({userId:s,increment:-a}))}).catch(e=>{throw r.a.trackEvent(m,"error"),e})}}function I(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function C(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),i.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function x(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),i.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function R(e,t){return n=>i.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([n(S(e)),n(y(t,"pin_count")),n(Object(o.a)(s.a.BOARD_SECTIONS,t))]))}function k(e,t){return n=>i.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response)return{};const r=e.resource_response.data||{},o=((r.model||{}).custom_properties||{}).campaign_id,i=void 0===o?"unknown":o,s=r.display_data||{},c={isSocialSeasonalBoard:!!r.display_data,socialHeaderBgImage:s.header_image,socialHeaderBgColor:s.header_background_color};return a.default.increment(`web.seasonal_board.${i}.${t}.land`),n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:c})})}},"gf/F":function(e,t,n){n.d(t,"a",function(){return u});var r=n("GyhR"),o=(n("ekcn"),n("PNko")),a=n.n(o),i=n("Qo1m"),s=n("+U6O");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=32,d=13;class u extends r.PureComponent{constructor(...e){super(...e),c(this,"handleKeyPress",e=>{e.charCode!==l&&e.charCode!==d||(e.preventDefault(),this.props.onClick(e))})}render(){const e=this.props,t=e.disabled,n=e.icon,o=e.iconOnly,c=e.onClick,l=e.saved,d=e.variant;return l?r.createElement(s.c,{disabled:!0,text:i.a._("Saved"),size:"sm"}):o?r.createElement("div",{"data-test-id":"SaveButton"},r.createElement(s.n,{accessibilityLabel:i.a._("Save","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>c(e),iconColor:"darkGray"})):r.createElement("div",{className:a()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled"),"data-test-id":"SaveButton",onClick:t?void 0:c,onKeyPress:t?void 0:this.handleKeyPress,role:"button",tabIndex:"0"},r.createElement("div",{className:a()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===d})},r.createElement(s.b,{alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:40,padding:"10px 14px"}},display:"flex"},n&&r.createElement(s.b,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},r.createElement(s.m,{accessibilityLabel:"",color:t?"gray":"white",icon:"pin",inline:!0,size:20})),r.createElement(s.J,{bold:!0,color:t?"gray":"white",size:"lego"===d?"sm":"md"},r.createElement("span",{className:a()("SaveButton__label",{"SaveButton__label--lego":"lego"===d})},i.a._("Save","Pin save button label"))))))}}c(u,"defaultProps",{disabled:!1,icon:!0,variant:"classic"})},iz36:function(e,t,n){var r=n("GyhR"),o=n.n(r),a=n("TXWX"),i=n.n(a),s=n("OtLr");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=()=>null;t.a=Object(s.a)(class extends r.Component{constructor(...e){super(...e),c(this,"view",e=>{const t=e.placement_id,n=e.experience_id;this.props.experienceClient.viewExperience(t,n)}),c(this,"complete",e=>{const t=e.placement_id,n=e.experience_id,r=this.props,o=r.experienceClient,a=r.preventRemoval;a?o.completeExperience(t,n,a):o.completeExperience(t,n)}),c(this,"dismiss",e=>{const t=e.placement_id,n=e.experience_id,r=this.props,o=r.experienceClient,a=r.preventRemoval;a?o.dismissExperience(t,n,a):o.dismissExperience(t,n)})}componentDidMount(){if(this.props.disableAutoView)return;const e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}componentDidUpdate(e,t){if(this.props.disableAutoView)return;const n=this.getExperience(e),r=this.getExperience(this.props);r&&this.shouldRenderExperience(r)&&(n&&n.experience_id===r.experience_id||this.view(r))}getExperience(e){return e.experienceClient.experienceForPlacement}shouldRenderExperience(e){if(e){const t=e.type,n=e.experience_id;if(this.props.experienceIds&&this.props.experienceIds.includes(n))return!0;if(!this.props.experienceIds){if(this.props.type&&this.props.type===t)return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0}}return!1}render(){const e=this.props,t=e.children,n=e.disableAutoView,r=this.getExperience(this.props);if(r&&this.shouldRenderExperience(r)&&t){if(i()(t)){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}({},r,{complete:()=>this.complete(r),dismiss:()=>this.dismiss(r)});return n&&(e.view=(()=>this.view(r))),t(e)}return o.a.Children.only(t)}return o.a.createElement(l,null)}})},"j/DJ":function(e,t,n){n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n("HQ9/"),o=n("wCwf"),a=n("7Iyi");const i=["alphabetical","last_pinned_to","oldest","newest","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,mixPublicSecret:t,username:n})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",username:n,page_size:25,group_by:t?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},c=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),l=e=>i.reduce((t,n)=>{const i=[Object(o.a)("profileBoards",Object(r.c)(e,n))];return[!0,!1].forEach(t=>{i.push(Object(a.f)(s.name,s.options({username:e,boardOrder:n,mixPublicSecret:t})))}),t.concat(i)},[])},"jvv/":function(e,t,n){function r(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}n.d(t,"a",function(){return r})},kQRf:function(e,t,n){n.d(t,"a",function(){return c});var r=n("POeB"),o=n("Qo1m");const a=2171,i=2172,s=2173;function c(e){r.default.showError(function(e){switch(e.api_error_code){case a:case i:case s:return o.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}},"n/kK":function(e,t,n){var r=n("ztFR"),o=n("Fpqi"),a=n("POeB"),i=n("bWet"),s=n("H++a"),c=n("UhjI"),l=n("Qo1m"),d=n("ggpB"),u=n("aqOH");const h={checkFbTimelinePermission:function(e){i.default.ensureInit(function(t){t.api("/me/permissions",t=>{const n=t.data;let r=!1;n&&(r=!!n.find(e=>"publish_actions"===e.permission&&"granted"===e.status)),r?e.success&&e.success():e.error&&e.error()})},u.default)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t){i.default.ensureInit(n=>{if(!h.fbConnectedAccountMatchesLoggedInAccount(n,t))return a.default.showError(l.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());h.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){h.fbLogin(e)}})},u.default)},fbLogin:function(e){i.default.ensureInit(t=>{t.login(t=>{t.authResponse?h.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:"publish_actions"})},u.default)},shareFb:function(e){const t=e.ga_category||"share_facebook";c.a.trackEvent(t,"click");const n=e.dialog_options||{};n.callback=function(){const t=r.a.fromEventType(1300);e.object_id&&t.setObjectIdStr(e.object_id),o.a.getInstance().addEvent(t)};const a=n.object_type;a&&Object(d.a)("facebook_share_dialog_open_"+a),s.default.open(n)},getLocaleString:function(e){let t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US";break;case"es_419":case"es_AR":t="es_LA"}return t}};t.a=h},odTJ:function(e,t,n){n.r(t),n.d(t,"PinSaveButton",function(){return S});var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=(n("VEO/"),n("Qo1m")),s=n("dsfX"),c=n("fifU"),l=n("gf/F"),d=n("c61H"),u=n("iN5V"),h=n("FGWo"),p=n("+U6O"),m=n("9Y9K"),b=n("kR61"),f=n("RTyF"),g=n("lixz"),y=n("JsRk"),_=n("Kqiz");function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=Object(r.lazy)(()=>n.e("FirstPinCreateCommon").then(n.bind(null,"N0nc"))),w=[500639,11022];class S extends r.Component{constructor(e){super(e),v(this,"componentWillUnmount",()=>{this._repinCompletionPromise&&this._repinCompletionPromise.cancel()}),v(this,"setCompletionPromise",e=>{this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(()=>{this.handleRepinHideAndToggle()})}),v(this,"_repinCompletionPromise",null),v(this,"isInShareCallback",!1),v(this,"handleRepinHide",()=>{this.setState({isRepinModalOpen:!1})}),v(this,"handleRepinHideAndToggle",()=>{this.setState({isRepinModalOpen:!1});const e=this.props.onToggleModal;e&&e(!1)}),v(this,"handleSaveButtonClick",this.props.authAction(e=>{e&&(e.preventDefault(),e.stopPropagation());const t=this.props,n=t.onClickCallback,r=t.onToggleModal,o=t.oneTapSave;n&&n(),o?o.saved||"function"!=typeof o.save||o.save():(Object(g.e)(16),r&&r(!0),this.setState({isRepinModalOpen:this.props.isAuth}))})),v(this,"handleShareCallback",()=>{const e=this.props.onShareCallback;this.isInShareCallback=!0,e&&e()}),v(this,"saveButtonRef",o.a.createRef()),v(this,"renderPinToBoardRepin",()=>{const e=this.props,t=e.onToggleModal,n=e.pin,r=this.state,a=r.isFPE,i=r.isRepinModalOpen;return i&&a?this.renderFPE():a?null:o.a.createElement(f.b,{action:"repin",additionalCreateFields:{is_stl_pin:Object(b.c)(n)},onClose:this.handleRepinHide,setCompletionPromise:this.setCompletionPromise,shouldShowToast:!0,onToggleModal:t,pin:n},({dismissModal:e,displaySuccessAnimation:r,handleAbort:a,handleNewBoardAnimationCompletion:s,handleSocialConnectSet:c,handleSaveToBoard:l,newPin:d,updateDescription:u,showSharingUpsell:h,modalTitle:p,setModalTitle:m})=>o.a.createElement(_.b,{dismissModal:e,displaySuccessAnimation:r,handleSocialConnectSet:c,handleSaveToBoard:l,anchorRef:this.saveButtonRef.current,handleAbort:a,handleNewBoardAnimationCompletion:s,newPin:d,newsId:this.props.newsId,isCloseupPin:this.props.isCloseupPin,isInModal:!0,onCloseAndShare:this.handleShareCallback,onToggleModal:t,pin:n,pwtAuxData:{pin_create_method:"repin"},modalTitle:p,setModalTitle:m,shouldRenderContent:i,updateDescription:u,showSharingUpsell:h}))});const t=e.experience;this.state={isFPE:!!t&&w.includes(t.experience_id),isRepinModalOpen:e.showRepinOnInitialRender||!1,savedPin:{id:""}}}shouldComponentUpdate(e,t){return!this.isFPERemoved(e)}isFPERemoved(e){const t=this.state.isFPE,n=e.experience;return t&&(!n||!w.includes(n.experience_id))}renderFPE(){const e=this.props,t=e.completePinSave,n=e.experience,r=e.pin;return o.a.createElement(s.b,{accessibilityCloseLabel:i.a._("Close","Accessible close create board education label"),accessibilityModalLabel:i.a._("Create board","Accessible create board education modal label"),footer:o.a.createElement("div",{className:"FirstBoardCreate__education"},i.a._("Boards are where you save your Pins","Text explaining that boards are used to collect and save pins")),heading:i.a._("Create board","Create board education modal label"),onDismiss:this.handleRepinHideAndToggle,size:"lg"},o.a.createElement(c.a,null,o.a.createElement(E,{anchorRef:this.saveButtonRef.current,experience:n,isInModal:!0,onClose:this.handleRepinHideAndToggle,onComplete:t,pin:r,pwtAuxData:{pin_create_method:"repin"}})))}render(){const e=this.props,t=e.anchorString,n=e.icon,r=e.iconOnly,a=e.oneTapSave,i=e.renderPinSaveTooltip,s=e.variant,c=Object(u.a)(t)(l.a);return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.b,{ref:this.saveButtonRef},o.a.createElement(c,{icon:n,onClick:this.handleSaveButtonClick,saved:a&&"controlled"===a.type&&a.saved,iconOnly:r,isPulsarDisplayed:!this.state.isRepinModalOpen,variant:s}),this.renderPinToBoardRepin()),!!i&&this.saveButtonRef.current&&i(this.saveButtonRef.current))}}v(S,"defaultProps",{anchorString:""});t.default=Object(m.compose)(d.a,y.withRouter,Object(h.a)(33),Object(a.connect)(e=>({isAuth:e.viewer.isAuth,email:e.viewer.isAuth?e.viewer.email:void 0}),e=>({completePinSave:()=>e({type:"COMPLETE_PIN_SAVE"})})))(S)},qFs9:function(e,t,n){var r=n("GyhR");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t,n;return n=t=class extends r.Component{constructor(...e){super(...e),o(this,"makeCancelablePromise",(e,t)=>{if(t){const e=this.cancelCallbackMap[t];e&&(e(),delete this.cancelCallbackMap[t])}const n=function(e){let t=!1;return{promise:new Promise((n,r)=>{e.then(e=>t?r({isCanceled:!0}):n(e),e=>r(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}(e),r=n.cancel,o=n.promise;return t?this.cancelCallbackMap[t]=r:this.cancelCallbacks.push(r),o}),o(this,"cancelCallbacks",[]),o(this,"cancelCallbackMap",{})}componentWillUnmount(){[...Object.keys(this.cancelCallbackMap).map(e=>this.cancelCallbackMap[e]),...this.cancelCallbacks].forEach(e=>e()),this.cancelCallbacks=[],this.cancelCallbackMap={}}render(){return r.createElement(e,Object.assign({},this.props,{makeCancelablePromise:this.makeCancelablePromise}))}},o(t,"displayName",`WithPromiseCancellation(${e.displayName||e.name})`),n}n.d(t,"a",function(){return a})},"t3w/":function(e,t,n){n.d(t,"b",function(){return p}),n.d(t,"a",function(){return m});var r=n("A6bX"),o=n("wCwf"),a=n("cjc9"),i=n("jvv/"),s=n("ePT2"),c=n("evwu"),l=n("eB/M"),d=n("kQRf");const u=e=>Object(o.a)(e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,e.sectionId||e.boardId);function h(e,t){const n=e.source,o=e.target;o.boardId!==n.boardId?(t(Object(c.b)(n.boardId,"pin_count")),t(Object(c.b)(o.boardId,"pin_count"))):n.sectionId&&o.sectionId||t(Object(c.b)(o.boardId,"pin_count")),n.sectionId&&t(Object(r.a)(n.sectionId)),o.sectionId&&t(Object(r.a)(o.sectionId))}function p(e){return t=>{const n=e.selectedPinIds,r=e.source,o=e.target;t(Object(i.a)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(a.a)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),h(e,t)}}function m(e){return t=>(function(e,t){const n=e.inverseSelection,r=e.selectedPinIds,o=e.source,c=e.target;if(o.boardId===c.boardId&&(o.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){const e={board_id:o.boardId,new_board_id:c.boardId,old_section_id:o.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:r};return s.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(u(o)),t(u(c))])).catch(d.a)}{const e=(e,n)=>{t(Object(i.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:r,itemType:"pin"})),t(Object(a.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:r,itemType:"pin"}))};e(o,c);const n=()=>e(c,o);if(c.boardId===o.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:r};return s.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}{const e={section_id:o.sectionId,pins:r};return s.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:r};return s.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}})(e,t).then(()=>h(e,t))}},tkA3:function(e,t,n){var r=n("GGL+"),o=n.n(r),a=n("RPeA"),i=n("ePT2"),s=n("aqOH");const c=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope);let r="TypeaheadResource";e.resource_name&&(r=e.resource_name),this.searchResource=i.a.create(r,t),this.itemsCache=new a.a};Object.assign(c.prototype,o.a),Object.assign(c.prototype,{search(e,t){let n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&s.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&s.default&&s.default.isAuthenticated())n="recent_search";else{const n=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(n){const r=n.items;if(r&&r.length){this.abortSearch();const o=n.hint;return void this.publishData(e,r,o,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,n,r){const o={term:e,items:t,hint:n};this.trigger("data",o),r&&r(o)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,n){const r=this.getResource();if(r.isCalling()){const t=r.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(r.set("term",e),r.set("tags",t||this.tags),r.resetBookmark(),r.callGet({showError:!1}).then(t=>{const r=t.resource_response.data,o=r.items,a=r.hint||{},i={hint:a,items:o};this.cacheData(e,i),this.publishData(e,o,a,n)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;i.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}}),t.a=c},tsSC:function(e,t,n){n.d(t,"a",function(){return p});var r=n("GyhR");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=32,i=100;let s=null,c=!1;const l=[],d=()=>{s&&clearTimeout(s),c=!0,s=setTimeout(()=>{c=!1},i)},u=e=>{0===l.length&&window.addEventListener("scroll",d),l.push(e)},h=e=>{const t=l.indexOf(e);l.splice(t,1),0===l.length&&window.removeEventListener("scroll",d)};function p(e){return class extends r.Component{constructor(...e){super(...e),o(this,"state",{isHovering:!1}),o(this,"handlers",{onMouseOver:()=>this._setHover(!0),onMouseLeave:()=>this._setHover(!1)})}componentDidMount(){u(this)}componentWillUnmount(){this.hoverTimer&&clearTimeout(this.hoverTimer),h(this)}_setHover(e){this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=e&&c?setTimeout(()=>this._setHover(e),i):setTimeout(()=>{e!==this.state.isHovering&&this.setState({isHovering:e})},a)}render(){return r.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}}},vBbO:function(e,t,n){n.d(t,"a",function(){return c});var r=n("GyhR"),o=n("hvnN"),a=n.n(o),i=n("tkA3");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends r.Component{constructor(...e){super(...e),s(this,"searchCache",Object.create(null)),s(this,"lastSearchedQuery",null),s(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new i.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}({resource_name:this.props.resourceName},e));const t=this.props.value;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}UNSAFE_componentWillReceiveProps({value:e}){null!=e&&e!==this.props.value&&this.search(e)}render(){return this.props.children||null}}s(c,"propTypes",{children:a.a.node,onTypeaheadSuggestionsChange:a.a.func.isRequired,resourceName:a.a.string.isRequired,resourceOptions:a.a.shape({}),allowSearchOnMount:a.a.bool,value:a.a.string.isRequired}),s(c,"defaultProps",{resourceName:"TypeaheadResource"})},vI2X:function(e,t,n){n.d(t,"b",function(){return d}),n.d(t,"a",function(){return u});var r=n("wCwf"),o=n("cjc9"),a=n("t3w/"),i=n("ePT2"),s=n("evwu"),c=n("eB/M"),l=n("7Iyi");function d(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u}){let h=0;"RECOMMENDATION"===n?h=1:"EDITED_RECOMMENDATION"===n&&(h=2);const p={board_id:e,initial_pins:u&&!u.all?u.pinIds:[],name:t,name_source:h};return t=>i.a.create("BoardSectionResource",p).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(d(e,n)),t(Object(o.a)({feedId:e,feedType:c.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(s.b)(e,"pin_count")),t(Object(l.f)("BoardSectionsRepinResource",{board_id:e}));const i=u||{all:!1,pinIds:[]},h=i.all,p=i.pinIds;return h?new Promise((r,o)=>t(Object(a.a)({inverseSelection:!0,selectedPinIds:p,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>r(n)).catch(o)):(p.length>0&&t(Object(r.a)(c.a.BOARD_PINS,e)),n)})}},wCwf:function(e,t,n){function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",function(){return r})},xk7t:function(e,t){var n="undefined"==typeof window?null:window.document,r=n?n.getElementsByTagName("head")[0]:null,o=/^https?:\/\//,a={},i={},s={},c="",l={},d=!1,u="push",h="onreadystatechangeName";function p(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return d;return!0}function m(e,t){return p(e,function(e){return!t(e)}),d}function b(e,t,n){e=e[u]?e:[e];var r=t&&"function"==typeof t,d=r?t:n,h=r?e.join(""):t,g=e.length;function y(e){return e.call?e():a[e]}function _(){if(!--g){if(a[h]=1,d)d();for(var e in s)p(e.split("|"),y)&&!m(s[e],y)&&(s[e]=[])}}return setTimeout(function(){m(e,function(e){return null===e?_():l[e]?(h&&(i[h]=1),2==l[e]&&_()):(l[e]=1,h&&(i[h]=1),void f(!o.test(e)&&c?c+e+".js":e,_))})},0),b}function f(e,t){var o=!1,a=function(e,t){o||("loaded"===e.readyState||"completed"===e.readyState?t():setTimeout(function(){a(e,t)},100))},i=n.createElement("script"),s=i.onload=i.onerror=i[h]=function(){o||(o=!0,i.readyState&&!/^c|loade/.test(i.readyState)||(i.onload=i[h]=null,1,l[e]=2,t()))};a(i,s),i.async=1,i.src=e,r.insertBefore(i,r.firstChild)}n&&!n.readyState&&n.addEventListenerName&&(n.addEventListenerName("DOMContentLoaded",function e(){n.removeEventListener("DOMContentLoaded",e,d),n.readyState="complete"},d),n.readyState="loading"),b.get=f,b.order=function(e,t,n){!function r(){var o=e.shift();e.length?b(o,r):b(o,t,n)}()},b.path=function(e){c=e},b.ready=function(e,t,n){e=e[u]?e:[e];var r,o=[];return!m(e,function(e){a[e]||o.push(e)})&&p(e,function(e){return a[e]})?t():(r=e.join("|"),s[r]||(s[r]=[]),s[r][u](t),n&&n(o)),b},b.done=function(e){b([null],e)},e.exports=b}}]);
//# sourceMappingURL=pjs-PinSaveButtonCommon-4c866231e3207bb42410.mjs.map
