(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinFeedbackButtonCommon",25],{CtGn:function(e,t,n){n.d(t,"a",function(){return a});var o=n("GyhR");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a({children:e}){const t=i(Object(o.useState)(!1),2),n=t[0],a=t[1],r=i(Object(o.useState)(!1),2),s=r[0],l=r[1],c=i(Object(o.useState)(!1),2),d=c[0],p=c[1];return e({active:n,focused:s,hovered:d,onBlur:()=>l(!1),onFocus:()=>l(!0),onMouseDown:()=>a(!0),onMouseEnter:()=>p(!0),onMouseLeave:()=>{p(!1),a(!1)},onMouseUp:()=>a(!1)})}},Kb0Y:function(e,t,n){n.d(t,"a",function(){return l});var o=n("GyhR"),i=n.n(o),a=n("+U6O");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s={__path:"M8.134 8.116a1.25 1.25 0 0 0-1.768 0L4.25 10.232 2.134 8.116A1.25 1.25 0 0 0 .366 9.884L2.483 12 .366 14.116a1.25 1.25 0 0 0 1.768 1.768l2.116-2.117 2.116 2.117a1.248 1.248 0 0 0 1.768 0 1.25 1.25 0 0 0 0-1.768L6.018 12l2.116-2.116a1.25 1.25 0 0 0 0-1.768M24 8v8a2.5 2.5 0 0 1-2.5 2.5h-8A2.5 2.5 0 0 1 11 16V8a2.5 2.5 0 0 1 2.5-2.5h8A2.5 2.5 0 0 1 24 8"};class l extends o.PureComponent{constructor(...e){super(...e),r(this,"state",{hovered:!1}),r(this,"handleMouseEnter",e=>this.setState({hovered:!0})),r(this,"handleMouseLeave",e=>this.setState({hovered:!1}))}render(){const e=this.props,t=e.bold,n=e.icon,o=e.text,r=e.description,l=e.isContextMenuV2Exp,c=Array.isArray(o)?o.join(""):o;return i.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.a.createElement(a.b,{alignItems:"start",color:this.state.hovered?"lightGray":"transparent",display:"flex",direction:"row",overflow:"hidden",paddingX:4,paddingY:2,marginStart:-1,marginEnd:-1,title:c},!l&&n&&i.a.createElement(a.b,{flex:"none",padding:1},"unfollow"===n?i.a.createElement(a.m,{accessibilityLabel:"",color:"darkGray",dangerouslySetSvgPath:s,size:16}):i.a.createElement(a.m,{accessibilityLabel:"",color:"darkGray",icon:n,size:16})),i.a.createElement(a.b,{flex:"grow",display:"flex",direction:l?"row":"column",padding:1,width:"100%",alignItems:l?"center":"start"},i.a.createElement(a.J,{bold:t,size:l?"sm":"md",color:"darkGray"},o),i.a.createElement(a.b,{display:"flex",alignItems:"center"},!l&&r&&i.a.createElement(a.b,{marginTop:1},i.a.createElement(a.J,{color:"darkGray",overflow:"normal"},r))))))}}r(l,"defaultProps",{bold:!0})},aaO7:function(e,t,n){function o(e,t,n,o){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:n,undoText:o}}}function i(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function a(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function r(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function s(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}n.d(t,"e",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return s})},ce8s:function(e,t,n){var o=n("GyhR"),i=n.n(o),a=n("CtGn");t.a=(e=>{const t=e.accessibilityLabel,n=e.children,o=e.className,r=e.dataTestId,s=e.onClick,l=e.style;return i.a.createElement(a.a,null,({active:e,focused:a,hovered:c,onBlur:d,onFocus:p,onMouseDown:u,onMouseEnter:_,onMouseLeave:E,onMouseUp:h})=>i.a.createElement("button",{"data-test-id":r,"aria-label":t,style:l,onBlur:d,onFocus:p,onMouseDown:u,onMouseEnter:_,onMouseLeave:E,onMouseUp:h,onClick:s,className:o},n({active:e,focused:a,hovered:c})))})},d9lF:function(e,t,n){var o=n("GyhR"),i=n.n(o),a=n("ce8s"),r=n("+U6O");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l={base:{borderRadius:"50%"},hovered:{backgroundColor:"rgb(226, 226, 226)"},active:{backgroundColor:"rgb(218, 218, 218)"},focused:{boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0}},c=({accessibilityLabel:e,active:t,focused:n,hovered:o,icon:a,isSVG:c})=>{const d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){s(e,t,n[t])})}return e}({},l.base,o?l.hovered:{},t?l.active:{},n?l.focused:{});return i.a.createElement(r.b,{"data-test-id":"lego-icon-wrapper",color:"transparent",shape:"circle",dangerouslySetInlineStyle:{__style:d}},i.a.createElement(r.b,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:44,minWidth:44}}},c?i.a.createElement(r.m,{accessibilityLabel:e,dangerouslySetSvgPath:{__path:a},color:"darkGray",inline:!0,size:20}):i.a.createElement(r.m,{accessibilityLabel:e,icon:a,color:"darkGray",inline:!0,size:20})))};t.a=(e=>{const t=e.accessibilityLabel,n=e.onClick,o=e.icon,r=e.isSVG,s=e.shadowType;return i.a.createElement(a.a,{accessibilityLabel:t,className:s||"",dataTestId:"lego-button",onClick:n,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"}},({active:e,hovered:n,focused:a})=>i.a.createElement(c,{active:e,accessibilityLabel:t,hovered:n,focused:a,icon:o,isSVG:r}))})},dsNV:function(e,t){e.exports={ReasonToChoose:{UNKNOWN:0,REPIN_BOARD:1,RECOMMENDED_CATEGORY:2,COOKIE_MONSTER:3,USER_ACTIVITY:4,FOLLOWED_INTEREST:5,RECENT_FOLLOWED_INTEREST:59,REALTIME_P2B:6,REALTIME_P2B_CLOSEUP:22,RECOMMENDED_INTEREST:7,VISUALLY_SIMILAR:8,CLICKTHROUGH:9,BOARD_FOLLOW:35,RECENT_FOLLOWED_BOARD:61,USER_FOLLOW:45,RECOMMENDED_COMMERCE:10,EVERYTHING_FEED:11,RECOMMENDED_LOCAL_PIN:12,LOCAL_REPIN_BOARD:13,SEARCH:46,P2P:14,PROMOTED_PIN:15,P2P_USER_COMMERCE:16,COMMERCE_EDUCATION:17,LANDING_PAGE_PINS:18,FOLLOWING_FEED:19,POPULAR_FEED:20,P2P_COMMERCE:21,P2P_DYNAMIC_GRID:23,LANDING_PAGE_INTEREST_PINS:24,FRESH_PIN_FROM_PIN:25,FRESH_PIN_FROM_INTEREST:26,FRESH_PIN_FROM_BOARD:27,SIFTER_VIDEO_FROM_INTEREST:39,SIFTER_PRODUCTS:57,SIFTER_DISTRIBUTION_A:50,SIFTER_DISTRIBUTION_B:51,SIFTER_DISTRIBUTION_C:52,SIFTER_DISTRIBUTION_D:53,SIFTER_DISTRIBUTION_E:54,SIFTER_ACTIVATION_EXPERIMENT:58,SIFTER_FRESHMAKER_PIN_FROM_INTEREST:40,P2P_CLICKTHROUGH:28,P2P_CLOSEUP:29,P2P_LIKE:30,P2P_PIN_CREATE:31,LOCAL_CLICKTHROUGH:32,LOCAL_USER_ACTIVITY:33,INSTANT_PFY:34,INSTANT_PFY_NON_MATERIALIZABLE:36,DYNAMIC_INSERTION:37,DYNAMIC_INSERTION_BOARD_FOLLOW:38,HYPERLOCAL_INTEREST_BOARD:41,NUX_BOARD_FOLLOW_P2P:42,INDIRECT_DOMAIN_PIN:43,PIXIE_PINS_FOR_BOARD:44,FRESH_REPIN_BOARD:47,FRESH_CLICKTHROUGH:48,FRESH_USER_ACTIVITY:49,SCREENSHOT_SAVE:55,TEXT_EMBEDDINGS:56,FRESH_TEXT_EMBEDDINGS:67,PREFETCH_LOAD:60,DIVERSE_TOPICS:62,QUIZ_RESULTS:63,INTENTIONAL_DISTRIBUTION_TOPICS:64,INTENTIONAL_DISTRIBUTION_TOPICS_THIRD_PARTY:90,INTENTIONAL_DISTRIBUTION_TOPICS_STORY_PINS:91,INTENTIONAL_DISTRIBUTION_TOPICS_VIDEO:98,INTENTIONAL_DISTRIBUTION_GEMINI:73,INTENTIONAL_DISTRIBUTION_GEMINI_V5:120,INTENTIONAL_DISTRIBUTION_SHOP_STYLE_STL:74,INTENTIONAL_DISTRIBUTION_GRAPHSAGE:78,INTENTIONAL_DISTRIBUTION_REPIN_BOARD:80,INTENTIONAL_DISTRIBUTION_CLICKTHROUGH:81,INTENTIONAL_DISTRIBUTION_USER_ACTIVITY:82,INTENTIONAL_DISTRIBUTION_DOMAIN:86,INTENTIONAL_DISTRIBUTION_CREATOR_BASELINE:92,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_VIDEO:95,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN:100,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS:102,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_STORY_PIN:103,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_DIVERSITY:105,RECOMMENDED_TOPICS:65,PIXIE_RECENT_ACTION:66,NATIVE_CONTENT_TOPICS:68,BUBBLE_OPEN_TOPICS:69,TOPIC_BEST_PINS:70,DARK_PROMOTED_PIN:71,POST_EXPLORE_TOPICS:72,GRAPHSAGE_EMBEDDINGS:75,DEMOGRAPHIC_PFY:76,TOPIC_BEST_PINS_V2:77,DAILY_BEST_PINS:79,SHOPPING_STL:83,UNAUTH_PIXIE_P2B:84,UNAUTH_PIXIE_P2P:85,VIDEO_EMBEDDINGS:87,VIDEO_EMBEDDINGS_GEMINI_V5:121,NAVBOOST_P2P:88,NAVBOOST_PFY:89,GEMINI_V5_EMBEDDINGS_STATIC:93,GEMINI_V5_EMBEDDINGS_FRESH:94,GEMINI_V5_EMBEDDINGS_REALTIME:106,GEMINI_V5_EMBEDDINGS_STORYPIN:107,CURATED_VIDEO_INTEREST:96,GRAPHSAGE_PRODUCT_PINS:97,GRAPHSAGE_PRODUCT_PINS_LONGER_HISTORY:112,NUX_GRAPHSAGE:99,TOPIC_BEST_PINS_V3:101,GEMINI_INTERESTS_FRESH:104,GRAPHSAGE_USER_EMBEDDINGS_TO_PINS:108,GRAPHSAGE_USER_EMBEDDINGS_TO_ORGANIC_PINS:109,GRAPHSAGE_USER_EMBEDDINGS_TO_PRODUCT_PINS:110,LENS_CAMERA_VISUALLY_SIMILAR:111,GRAPHSAGE_VIDEO_PINS:113,RECBOOST_REPIN_BOARD:114,RECBOOST_CLICKTHROUGH:115,RECBOOST_USER_ACTIVITY:116,RECOMMENDED_BOARDS:117,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGEED_INTERESTS_VIDEO:118,INTENTIONAL_DISTRIBUTION_MANUAL_INTERESTS_VIDEO:119,RTC_IMPROVEMENT_TEST_1:501,RTC_IMPROVEMENT_TEST_2:502,RTC_IMPROVEMENT_TEST_3:503,RTC_IMPROVEMENT_TEST_4:504,RTC_IMPROVEMENT_TEST_5:505,RTC_IMPROVEMENT_TEST_6:506,RTC_IMPROVEMENT_TEST_7:507,RTC_IMPROVEMENT_TEST_8:508,RTC_IMPROVEMENT_TEST_9:509,RTC_IMPROVEMENT_TEST_10:510,RTC_IMPROVEMENT_TEST_11:511,RTC_IMPROVEMENT_TEST_12:512,RTC_IMPROVEMENT_TEST_13:513,RTC_IMPROVEMENT_TEST_14:514,RTC_IMPROVEMENT_TEST_15:515}}},nZV1:function(e,t,n){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});var o=n("ePT2");const i=()=>{};const a={complaint:function(e,t){o.a.create("PinFeedbackResource",e).callUpdate().then(()=>t())},enablePFY:function(e,t){o.a.create("PFYPreferenceResource",e).callCreate().then(()=>t())},followBoard:function(e,t){o.a.create("BoardFollowResource",e).callCreate().then(()=>t())},followPinner:function(e,t){o.a.create("UserFollowResource",e).callCreate().then(()=>t())},followTopic:function(e,t){o.a.create("InterestFollowResource",e).callCreate().then(()=>t())},newsHubPinHide:function(e,t){o.a.create("NewsHubPinFeedbackResource",e).callUpdate().then(()=>t())},promotedComplaint:function(e,t){o.a.create("PinFeedbackResource",e).callUpdate().then(()=>t())},relatedPinHide:function(e,t){o.a.create("RelatedPinFeedbackResource",e).callUpdate().then(()=>t())},reportPin:function(e,t){t()},unfollowBoard:function(e,t){o.a.create("BoardFollowResource",e).callDelete().then(()=>t())},unfollowPinner:function(e,t){o.a.create("UserFollowResource",e).callDelete().then(()=>t())},unfollowTopic:function(e,t){o.a.create("InterestFollowResource",e).callDelete().then(()=>t())},unrelatedSearchPin:function(e,t){o.a.create("SearchPinFeedbackResource",e).callUpdate().then(()=>t())}},r=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function s(e,t,n=i){const o=a[e];return o?o(t,n):n()}},w8LQ:function(e,t,n){n.r(t),n.d(t,"PinFeedbackButton",function(){return I});var o=n("GyhR"),i=n.n(o),a=n("Ivf5"),r=n("Qo1m"),s=n("d9lF"),l=n("wSOZ"),c=n("IGno"),d=n("9Y9K"),p=n("UmN8"),u=n("NmcB"),_=n("aaO7"),E=n("OtLr"),h=n("+U6O");function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=90;class I extends o.Component{constructor(...e){super(...e),T(this,"state",{showPinFeedbackFlyout:!1}),T(this,"setAnchor",e=>{this.anchor=e}),T(this,"showConfirmation",()=>{const e=this.props,t=e.dispatch,n=e.pinId;t(Object(_.a)(n,{title:r.a._("Pin reported.")}))}),T(this,"handleFeedbackButtonClick",({event:e})=>{e&&(e.preventDefault(),e.stopPropagation()),this.state.showPinFeedbackFlyout?this.dismissFlyout():this.setState({showTooltipFlyout:!1},()=>{this.setState({showPinFeedbackFlyout:!0})}),this.handleButtonClickLogging()}),T(this,"dismissFlyout",()=>{const e=this.props,t=e.dispatch,n=e.pinId;t(Object(_.c)(n)),this.setState({showPinFeedbackFlyout:!1,showTooltipFlyout:!1})}),T(this,"dismissTooltipFlyout",()=>{const e=this.props,t=e.isHomefeedContextualMenuTooltip,n=e.experienceClient;this.setState({showTooltipFlyout:!1,showPinFeedbackFlyout:!1},()=>{this.setState({showPinFeedbackFlyout:!0})}),t&&n.completeExperience(1000116,501093),this.handleButtonClickLogging()}),T(this,"handleLinkClick",()=>{this.state.showPinFeedbackFlyout&&this.dismissFlyout()})}static getDerivedStateFromProps(e,t){const n=e.isHomefeedContextualMenuTooltip,o=e.experienceClient;return n&&void 0===t.showTooltipFlyout?(o.viewExperience(1000116,501093),{showTooltipFlyout:!0}):null}handleButtonClickLogging(){const e=this.props,t=e.feedbackType,n=e.pinId,o=e.viewParameter,i=e.viewType;Object(u.a)(101,{objectId:n,view:i,viewParameter:o,element:981,component:0,feedback_type:t})}renderPinFeedback(){const e=this.props,t=e.ad_match_reason,n=e.board,o=e.feedbackType,a=e.feedbackData,r=e.hideDownload,s=e.pinId,c=e.pinImage,d=e.bestPinImgSrc,u=e.pinDescription,_=e.pinTitle,E=e.pinCategory,h=e.pinner,T=e.promoter,m=e.recommendationReason,I=e.reportPin,f=e.sourceInterest,b=e.viewParameter,O=e.viewType;return i.a.createElement(p.a,{name:"web_homefeed_control_contextual_menu_v2"},({anyEnabled:e})=>i.a.createElement(l.a,{ad_match_reason:t,board:n,feedbackType:o,feedbackData:a,hideDownload:!!r,isContextMenuV2Exp:e,onContentChanged:()=>this.forceUpdate(),onLinkClick:this.handleLinkClick,onHide:this.dismissFlyout,pinId:s,pinImgSrc:c,bestPinImgSrc:d,pinDescription:u,pinCategory:E,pinTitle:_,pinner:h,promoter:T,recommendationReason:m,reportPin:I,sourceInterest:f,viewParameter:b,viewType:O}))}render(){const e=this.props.isPromoted,t=this.state,n=t.showTooltipFlyout,o=t.showPinFeedbackFlyout;return i.a.createElement(h.b,null,i.a.createElement(h.b,{ref:this.setAnchor},e?i.a.createElement(s.a,{accessibilityLabel:r.a._("send feedback","accessibility lable to send feedback regarding the promoted pin"),onClick:e=>this.handleFeedbackButtonClick({event:e}),icon:"ellipsis"}):i.a.createElement(h.n,{accessibilityLabel:r.a._("More information"),icon:"ellipsis",iconColor:"gray",onClick:this.handleFeedbackButtonClick,size:this.props.size})),!o&&n&&i.a.createElement(c.a,null,i.a.createElement(h.q,null,i.a.createElement(h.j,{anchor:this.anchor,idealDirection:"right",onDismiss:this.dismissTooltipFlyout,positionRelativeToAnchor:!1,size:"sm",color:"blue"},i.a.createElement(h.b,{padding:4},i.a.createElement(h.J,{color:"white",bold:!0,size:"lg"},r.a._("Click here to hide a Pin you don't like","Tooltip text showing how to hide a Pin")),i.a.createElement(h.b,{marginTop:5},i.a.createElement(h.c,{color:"white",text:r.a._("Got it!","Dismiss button for tooltip"),onClick:this.dismissTooltipFlyout,size:"sm"})))))),o&&i.a.createElement(c.a,null,i.a.createElement(h.q,null,i.a.createElement(h.j,{anchor:this.anchor,idealDirection:"right",onDismiss:this.dismissFlyout,positionRelativeToAnchor:!1,size:"md"},this.renderPinFeedback()))),n&&i.a.createElement(p.a,{name:"web_homefeed_control_contextual_menu_v2",activate:!1},({group:e})=>e.includes("enabled")&&e.includes("pulsar")&&i.a.createElement(h.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center"},i.a.createElement(h.b,{shape:"circle",width:m,height:m,dangerouslySetInlineStyle:{__style:{cursor:"pointer"}}},i.a.createElement(h.O,{onTouch:this.dismissTooltipFlyout,shape:"circle"},i.a.createElement(h.z,{size:m}))))))}}T(I,"defaultProps",{size:"xs"}),t.default=Object(d.compose)(Object(a.connect)(),E.a)(I)},wSOZ:function(e,t,n){var o=n("GyhR"),i=n.n(o),a=n("Ivf5"),r=n("wxfF"),s=n("Kb0Y"),l=n("rSK6"),c=n("Qo1m"),d=n("iJ35"),p=n("E/Qu"),u=n("9Y9K"),_=n("JU/q"),E=n("Irlq"),h=n("dsNV"),T=n("NmcB"),m=n("JsRk"),I=n("aaO7"),f=n("2YES"),b=n("+U6O"),O=n("nZV1");function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){N(e,t,n[t])})}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P={color:"white",textDecorationColor:"white"};t.a=Object(u.compose)(Object(a.connect)(),f.e,m.withRouter)(class extends i.a.Component{constructor(e){super(e),N(this,"getRecommendationDescription",()=>{const e=this.props,t=e.ad_match_reason,n=e.board,o=e.feedbackType,i=e.pinner,a=e.promoter,r=e.recommendationReason,s=e.sourceInterest;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:t,board:n,feedbackType:o,makeNavigateLink:this.makeNavigateLink,pinner:i,promoter:a,recommendationReason:r,sourceInterest:s})}),N(this,"getRecommendationDescriptionImage",()=>{const e=this.props,t=e.board,n=e.feedbackType,o=e.pinner,a=e.recommendationReason;if("followed"!==n&&"pfyBoard"!==n)return null;let r,s,l;return o&&o.explicitly_followed_by_me?(r=o.image_small_url,s="50%",l=`/${o.username}`):t&&t.image_thumbnail_url&&(r=t.image_thumbnail_url,s="4px",l=a&&a.board&&a.board.url||t.url),r?i.a.createElement(b.b,{marginStart:3,flex:"none",dangerouslySetInlineStyle:{__style:{borderRadius:s}},overflow:"hidden"},i.a.createElement(b.O,{onTouch:()=>this.props.router.push(l)},i.a.createElement(b.t,{width:40,height:40,wash:!0},i.a.createElement(b.o,{src:r,naturalHeight:1,naturalWidth:1,alt:"",fit:"cover"})))):null}),N(this,"getUnfollowAction",()=>{const e=this.props,t=e.board,n=e.feedbackType,o=e.pinner,i=e.sourceInterest;return this.feedbackHelpers.getUnfollowAction({board:t,feedbackType:n,makeNavigateLink:this.makeNavigateLink,pinner:o,sourceInterest:i})}),N(this,"getUndoText",e=>"unfollowPinner"===e||"unfollowBoard"===e?c.a._("Follow again","Caption for button to undo a unfollowing of a topic"):""),N(this,"generateUndoHideCallback",(e,t)=>()=>{const n=this.props,o=n.dispatch,i=n.pinId,a=n.viewType,r=n.viewParameter,s=R({},e,{undo:!0});let l=t;"unfollowPinner"===t?l="followPinner":"unfollowBoard"===t?l="followBoard":"unfollowTopic"===t&&(l="followTopic"),Object(O.a)(l,s),o(Object(I.b)(i)),Object(T.a)(101,{component:0,element:11181,view:a,viewParameter:r})}),N(this,"feedbackHelpers",Object(l.a)({i18n:c.a,interpolateNamedTemplate:E.b,isContextMenuV2Exp:this.props.isContextMenuV2Exp})),N(this,"makeNavigateLink",(e,t,n,o)=>{const a=R({display:"inline"},o?P:{});return i.a.createElement(d.b,{className:"underlineLink",key:e,to:t,onClick:this.props.onLinkClick},i.a.createElement(b.b,{dangerouslySetInlineStyle:{__style:a}},n))}),N(this,"reportPinOption",()=>({action:"reportPin",elementType:974,icon:"report",text:this.props.isContextMenuV2Exp?c.a._("Report Pin","Report a pin in the dropdown"):c.a._("Report","Report a pin in the dropdown"),description:c.a._("This goes against Pinterest's community guidelines","Description for the report pin option"),callback:this.props.reportPin})),N(this,"hidePinOption",e=>{const t=this.props,n=t.feedbackData,o=t.feedbackType,i=t.pinId,a=t.isContextMenuV2Exp,r=t.recommendationReason,s="search"===o?973:982,l=this.feedbackHelpers.getHidePinAction({feedbackData:n,feedbackType:o,pinId:i,recommendationReasonId:a&&r&&r.reason&&h.ReasonToChoose[r.reason],pinFeedbackType:a&&("pfy"===o?4:10),throughId:r&&this.getThroughId()}),d=l.action,p=l.actionOptions,u=c.a._("Hide","message displayed in pin feedback list");return{action:d,actionOptions:p,feedbackText:this.pinHiddenFeedbackText(e),icon:"cancel",text:u,description:c.a._("See fewer Pins like this","Description for the hide pin option"),elementType:s}}),N(this,"stopRecommendationOption",()=>{const e=this.props,t=e.feedbackData,n=e.feedbackType,o=e.pinId,i=e.recommendationReason,a=i.board,r=i.reason,s=r&&h.ReasonToChoose[r],l=i&&this.getThroughId(),d="pfyBoard"===n,p=this.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:n,pinId:o,recommendationReasonId:s,pinFeedbackType:d?2:4,throughId:l}),u=p.action,_=p.actionOptions,T=!!a&&this.makeNavigateLink("boardUrl",a.url,a.name,!0);return{action:u,actionOptions:_,feedbackText:{subTitle:d&&a?Object(E.b)(c.a._("We won't show you Pins inspired by your board {{ formattedBoard }} anymore.","Primary caption displayed in pin feedback list to unfollow a board"),{formattedBoard:T}):c.a._("Got it! We won't show you Pins like this in the future.","message displayed after stopping recommendations from a pin")},text:d&&a?Object(E.b)(c.a._("Stop seeing Pins inspired by {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:a.name}):c.a._("See fewer Pins like this","Feedback option to stop recommendations inspired by this Pin"),elementType:284}}),N(this,"unfollowBoardOption",()=>{const e=this.props,t=e.board,n=e.isContextMenuV2Exp,o=this.makeNavigateLink("boardUrl",t.url,t.name,!0),i=n?Object(E.b)(c.a._("Unfollow {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:t.name}):c.a._("Unfollow board","Primary caption displayed in pin feedback list to unfollow a board"),a=n?Object(E.b)(c.a._("Got it! You unfollowed {{ formattedBoard }} and won't see Pins saved to it in the future.","Confirmation text after unfollowing a board"),{formattedBoard:o}):Object(E.b)(c.a._("You’ve unfollowed the board {{ formattedBoard }}.\n         You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedBoard:o});return{action:"unfollowBoard",actionOptions:{board_id:t.id},feedbackText:{title:n?"":c.a._("Unfollowed","Title shown when unfollowing a certain board"),subTitle:a},icon:"unfollow",text:i,description:Object(E.b)(c.a._('Stop seeing Pins from the board "{{ boardName }}"',"Secondary caption displayed in pin feedback list to unfollow a board"),{boardName:t.name}),elementType:10614}}),N(this,"unfollowTopicOption",()=>{const e=this.props,t=e.sourceInterest,n=e.isContextMenuV2Exp;if(t){const e=t.id,o=t.name,i=`/topics/${t.url_name}`,a=this.makeNavigateLink("topicUrl",i,o,!0),r=n?Object(E.b)(c.a._("See fewer Pins from {{ topicName }}","Primary caption displayed in pin feedback list to unfollow a topic"),{topicName:o}):c.a._("Unfollow topic","Primary caption displayed in pin feedback list to unfollow a topic"),s=n?Object(E.b)(c.a._("We'll show you fewer Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:a}):Object(E.b)(c.a._("Got it! We won’t show you Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:a});return{action:"unfollowTopic",actionOptions:{interest_id:e,interest_list:_.a},feedbackText:{title:n?"":c.a._("Unfollowed","Title shown when unfollowing a certain topic"),subTitle:s},icon:"unfollow",text:r,description:Object(E.b)(c.a._('Stop seeing Pins from the topic "{{ topicName }}"',"Secondary caption displayed in pin feedback list to unfollow a topic"),{topicName:t.name}),elementType:976}}return null}),N(this,"unfollowUserOption",()=>{const e=this.props,t=e.pinner,n=e.isContextMenuV2Exp,o=t.id,i=t.username,a=t.full_name,r=`/${i}`,s=this.makeNavigateLink("pinnerUrl",r,a,!0),l=n?Object(E.b)(c.a._("Got it! You unfollowed {{ formattedUser }} and won't see Pins they save in the future.","Confirmation text after unfollowing a user"),{formattedUser:s}):Object(E.b)(c.a._("You’ve unfollowed {{ formattedUser }}. You can follow again by searching for them.","Confirmation text after unfollowing a user"),{formattedUser:s});return{action:"unfollowPinner",actionOptions:{user_id:o},feedbackText:{title:n?"":c.a._("Unfollowed","Title shown when unfollowing a certain user"),subTitle:l},icon:"person",text:Object(E.b)(c.a._("Unfollow {{ fullName }}","Primary caption displayed in pin feedback list to unfollow a user"),{fullName:a}),description:c.a._("Stop seeing all their Pins","Secondary caption displayed in pin feedback list to unfollow a user"),elementType:10640}}),N(this,"downloadPinOption",()=>({action:"downloadPin",icon:"download",text:c.a._("Download image","Button to download Pin image"),elementType:10836})),N(this,"_pinFeedbackText",()=>{const e=this.props,t=e.location,n=e.feedbackType,o=e.hideDownload,i=e.isContextMenuV2Exp,a=e.pinner,r="followed"===this.props.feedbackType,s=t.pathname.includes("following"),l=(r||"topic"===n)&&!s,d=this.hidePinOption(l),p=this.reportPinOption(),u="promoted"!==n&&!o;switch(n){case"followed":const e=s,t=!e&&this.getRecommendationDescription(),o=a.explicitly_followed_by_me?this.unfollowUserOption():this.unfollowBoardOption();return R({},t?{description:t}:{},{options:i?[d,...l||e?[o]:[],..."promoted"!==n?[this.downloadPinOption()]:[],p]:[...l?[this.unfollowBoardOption()]:[],..."promoted"!==n?[this.downloadPinOption()]:[],d,p,...e?[this.unfollowBoardOption(),this.unfollowUserOption()]:[]]});case"promoted":const r=this.props.ad_match_reason,_=[d,{icon:"question-mark",link:this.feedbackHelpers.getLearnMoreUrl(r),text:c.a._("Why am I seeing this ad?","Link to promoted pins explanation page")},p];return{description:this.getRecommendationDescription(),options:_};case"topic":const E=this.unfollowTopicOption(),h=i?[d,...l&&E?[E]:[],...u?[this.downloadPinOption()]:[],p]:[...l&&E?[E]:[],...u?[this.downloadPinOption()]:[],d,p];return{description:this.getRecommendationDescription(),options:h};case"pfy":case"pfyBoard":const T=i?[d,..."pfyBoard"===n?[this.stopRecommendationOption()]:[],...u?[this.downloadPinOption()]:[],p]:[...u?[this.downloadPinOption()]:[],d,p];return{description:this.getRecommendationDescription(),options:T};default:const m=i?[d,...u?[this.downloadPinOption()]:[],p]:[...u?[this.downloadPinOption()]:[],d,p];return{description:this.getRecommendationDescription(),options:m}}}),N(this,"handleSecondaryFeedbackItemClick",(e,t)=>{const n=this.props,o=n.feedbackData,i=n.feedbackType,a=n.pinId,r=n.onHide,s=n.recommendationReason,l=s&&s.reason&&h.ReasonToChoose[s.reason],c=s&&this.getThroughId(),d=this.feedbackHelpers.getHidePinAction({feedbackData:o,feedbackType:i,pinId:a,recommendationReasonId:l,throughId:c,complaintReason:e}),p=d.action,u=d.actionOptions;this.handleClickLogging(t),Object(O.a)(p,u),r()}),N(this,"pinHiddenFeedbackText",e=>{const t=this.props.isContextMenuV2Exp,n=e?null:this.getUnfollowAction();return n?{title:t?"":c.a._("Pin hidden","Pin feedback"),subTitle:this.getRecommendationDescription(),unfollow:n}:{title:t?"":c.a._("Pin hidden","message displayed after hiding a pin"),subTitle:t?c.a._("Got it! We won't show you this Pin in the future.","message displayed after hiding a pin"):c.a._("Got it! We'll try to show you more relevant Pins in the future.","message displayed after hiding a pin")}}),N(this,"renderSecondaryFeedbackItem",({text:e,reason:t,elementType:n})=>{const o=this.props.isContextMenuV2Exp;return i.a.createElement(b.O,{onTouch:()=>this.handleSecondaryFeedbackItemClick(t,n),fullWidth:!1,key:e},i.a.createElement(s.a,{text:e,isContextMenuV2Exp:o}))}),N(this,"renderSecondaryFeedback",()=>{const e="promoted"===this.props.feedbackType?[{text:c.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:c.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898},{text:c.a._("Seen Pin too many times",""),reason:3,elementType:11172}]:[{text:c.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:c.a._("Not in a language I understand",""),reason:15,elementType:11178},{text:c.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898},{text:c.a._("Seen Pin too many times",""),reason:3,elementType:295},{text:c.a._("Other",""),reason:8,elementType:11179}];return i.a.createElement(b.b,{overflow:"hidden",width:"100%",shape:"rounded"},i.a.createElement(b.b,{paddingX:4,paddingY:4},i.a.createElement(b.J,{color:"darkGray",size:"sm"},c.a._("Got a moment? Tell us why.","Title of follow up question after negative Pin feedback"))),i.a.createElement(b.i,null),i.a.createElement(b.b,{paddingY:2},e.map(this.renderSecondaryFeedbackItem)))});const t=this._pinFeedbackText();this.state={pinFeedbackConfig:t,showSecondary:!1}}onPinFeedbackActionButtonClick(e,t,n){e.stopPropagation(),t.auxData?this.handleClickLogging(t.elementType,t.auxData):this.handleClickLogging(t.elementType),Object(O.a)(t.action,t.actionOptions,n)}onPinHide(e,t,n,o){const i=this.props,a=i.dispatch,r=i.onHide,s=i.pinId,l=i.isContextMenuV2Exp;a(t&&n&&o?Object(I.e)(s,e,this.generateUndoHideCallback(n,o),this.getUndoText(o)):Object(I.a)(s,e)),!l||!n||n.promoted||10!==n.feedback_type&&4!==n.feedback_type?r():(this.setState({showSecondary:!0}),a(Object(I.d)(s)))}getThroughId(){const e=this.props.recommendationReason;return e.reason_id?e.reason_id:e.board?e.board.id:e.pin?e.pin.id:e.interest?e.interest.id:""}getComponentType(){switch(this.props.feedbackType){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}makeStrongText(e,t){return i.a.createElement("strong",{key:e},t)}handleClickLogging(e,t={}){const n=this.props,o=n.viewParameter,i=n.viewType;Object(T.a)(101,R({},t,{view:i,viewParameter:o,element:e,component:this.getComponentType()}))}renderDownloadButton(){const e=this.props,t=e.bestPinImgSrc,n=e.pinTitle,o=e.pinDescription,a=e.pinCategory,l=e.isContextMenuV2Exp;return i.a.createElement(r.a,{imgSrc:t,filename:n||o,category:a},e=>i.a.createElement(b.O,{onTouch:e,fullWidth:!1},i.a.createElement(s.a,{text:c.a._("Download image","Button to download Pin image"),icon:"download",isContextMenuV2Exp:l})))}renderButtons(){const e=this.props.isContextMenuV2Exp,t=this.state.pinFeedbackConfig.options,n=[],o=t.length;for(let a=0;a<o;a+=1){const r=t[a],l=!e&&a<o-1,c=O.b.includes(r.action),u=r.callback?r.callback:()=>this.onPinHide(r.feedbackText,c,r.actionOptions,r.action);"downloadPin"!==r.action?n.push(i.a.createElement(b.b,{key:a},r.link?i.a.createElement(d.b,{external:!0,to:r.link},i.a.createElement(s.a,{text:r.text,icon:r.icon,description:r.description,isContextMenuV2Exp:e})):i.a.createElement(b.O,{onTouch:({event:e})=>this.onPinFeedbackActionButtonClick(e,r,u),fullWidth:!1},i.a.createElement(s.a,{text:r.text,icon:r.icon,description:r.description,isContextMenuV2Exp:e})),l&&i.a.createElement(b.i,null))):"undefined"!=typeof window&&"windows"!==Object(p.b)(window)&&n.push(i.a.createElement(b.b,{key:a},this.renderDownloadButton(),l&&i.a.createElement(b.i,null)))}return n}render(){const e=this.props.isContextMenuV2Exp,t=this.state,n=t.pinFeedbackConfig,o=t.showSecondary,a=n.description,r=this.getRecommendationDescriptionImage();return e?i.a.createElement(b.b,{overflow:"hidden",width:"100%"},o?this.renderSecondaryFeedback():i.a.createElement(b.b,null,a&&i.a.createElement(b.b,null,i.a.createElement(b.b,{padding:4,display:"flex",alignItems:"center"},i.a.createElement(b.b,{maxHeight:56,overflow:"hidden"},i.a.createElement(b.J,{color:"darkGray",size:"sm",overflow:"normal"},a)),r),i.a.createElement(b.i,null)),i.a.createElement(b.b,{marginTop:2,marginBottom:3},this.renderButtons()))):i.a.createElement(b.b,{overflow:"hidden",width:"100%"},this.renderButtons(),a&&i.a.createElement(b.b,null,i.a.createElement(b.i,null),i.a.createElement(b.b,{paddingX:4,paddingY:3},i.a.createElement(b.J,{color:"darkGray"},a))))}})},wxfF:function(e,t,n){n.d(t,"a",function(){return s});var o=n("GyhR"),i=n("ggpB"),a=n("+U6O");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends o.Component{constructor(...e){super(...e),r(this,"state",{href:void 0}),r(this,"onEvent",()=>{if("undefined"==typeof window)return;const e=this.props,t=e.imgSrc,n=e.isUnauth,o=e.category;null==this.state.href&&fetch(t,{headers:new Headers({Origin:location.origin}),mode:"cors"}).then(e=>e.blob()).then(e=>{this.setState({href:window.URL.createObjectURL(e)},()=>{this.imageDownload&&this.imageDownload.click()})}).catch(()=>this.setState({href:this.DOWNLOAD_ERROR})),Object(i.a)(`web.${n?"unauth":"auth"}.download.click.${o||"no_category"}`)}),r(this,"DOWNLOAD_ERROR","error")}render(){const e=this.props.children,t=this.props.filename,n=this.state.href,i=null!=n&&n!==this.DOWNLOAD_ERROR;return o.createElement(o.Fragment,null,e(this.onEvent),i&&o.createElement(a.b,{display:"none"},o.createElement("a",{ref:e=>this.imageDownload=e,tabIndex:-1,download:t&&t.replace(".","_"),href:n})))}}}}]);
//# sourceMappingURL=pjs-PinFeedbackButtonCommon-59e20b27e36a7db9e666.mjs.map
