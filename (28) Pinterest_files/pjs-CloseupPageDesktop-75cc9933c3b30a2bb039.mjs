(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CloseupPageDesktop",1,4,"CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141","ArticleProductsPageDesktop~DomainFeedPageDesktop~FlashlightPageDesktop~PinDebugToolDesktop~ShopTheLo~c4ea5ca8","ExperienceSurveyCommon","FacebookCommon","FacebookDialogCommon","PinBetterSaveCommon","PinFeedbackConfirmationCommon","QuickPromoteModalBodyCommon","ScriptCommon","SecondarySendButtonCommon",91],{"+4EY":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("UmN8");var r=({children:e})=>a.a.createElement(o.a,{name:"web_closeup_immersive_nux",activate:!1},({anyEnabled:t,group:n})=>a.a.createElement(o.a,{name:"web_closeup_immersive",activate:!1},({anyEnabled:i,group:a})=>e({isImmersiveCloseup:t||i,group:n||a})));n.d(t,"a",function(){return r})},"+7cn":function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("fifU"),s=n("+U6O");const l=Object(i.lazy)(()=>n.e("SendObjectWrapperCommon").then(n.bind(null,"uX/R")));function c(e){return a.a.createElement(r.a,{fallback:a.a.createElement(s.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:2},a.a.createElement(s.F,{accessibilityLabel:o.a._("Loading sharing","Accessibility label for loading sharing UI"),show:!0}))},a.a.createElement(l,e))}},"+H5w":function(e,t,n){var i=n("R0si"),a=n.n(i);function o(e,t=!1){const n=(t,n)=>e(n);return e=>(function e(t,n=!1){return i=>{if(!a()(i))return n&&Array.isArray(i)?i.map(e(t,n)):i;const o={};return Object.keys(i).forEach(r=>{const s=t(i[r],r);a()(i[r])||n&&Array.isArray(i[r])?o[s]=e(t,n)(i[r]):o[s]=i[r]}),o}})(n,t)(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e={},t=[]){return Object.keys(e).reduce((n,i)=>t.includes(i)?n:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}({},n,{[i]:e[i]}),{})}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s})},"+LSA":function(e,t,n){n.r(t),n.d(t,"PinFeedbackConfirmation",function(){return g});var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("Qo1m"),s=n("iJ35"),l=n("nZV1"),c=n("NmcB"),d=n("+U6O");function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={transition:{transition:"all 250ms"},background:{backgroundSize:"cover",backgroundPosition:"50% 50%"},backdrop:{backgroundColor:"rgba(0,0,0,0.4)"},navigateLinkStyle:{color:"white",textDecorationColor:"white",cursor:"pointer"}},h=10;class g extends i.Component{constructor(...e){super(...e),p(this,"state",{unfollowed:!1,blurred:!1}),p(this,"unfollowCallback",()=>{this.setState({unfollowed:!0})}),p(this,"logHomefeedControl",()=>{Object(c.a)(101,{view:1,viewParameter:92,element:11347})})}componentDidMount(){setTimeout(()=>this.setState({blurred:!0}),h)}render(){const e=this.props,t=e.feedbackText,n=e.feedbackType,i=e.undoAction,o=e.undoText,c=e.pinImage,p=e.isContextMenuV2Exp,h=e.isHomefeedControlPanelExp,g=e.showFeedbackOverlay,b=this.state.blurred,f=t.subTitle,y=t.title,v=t.unfollow,w=t.image,E=v&&this.state.unfollowed&&!p,_=h&&"followed"!==n&&"related"!==n&&"search"!==n,C="pfy"===n||"pfyBoard"===n,O=c&&u({backgroundImage:`url("${c}")`,filter:"blur(20px)",opacity:1,margin:"-12px"},m.transition,m.background),S=c&&u({backgroundImage:`url("${c}")`,opacity:0},m.transition,m.background),x=u({opacity:!g&&b?1:0},m.transition),k=u({opacity:1},m.transition,m.backdrop),I=u({opacity:0},m.transition,m.backdrop);return a.a.createElement(d.b,{shape:"rounded",position:"absolute",color:p?"transparent":"darkGray",top:!0,left:!0,bottom:!0,right:!0,marginTop:2,marginBottom:2},p&&a.a.createElement(d.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,overflow:"hidden",shape:"rounded"},a.a.createElement(d.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:b?O:S},overflow:"hidden",shape:"rounded"}),a.a.createElement(d.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:b?O:S},overflow:"hidden",shape:"rounded"}),a.a.createElement(d.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:b?k:I},overflow:"hidden",shape:"rounded"})),a.a.createElement(d.b,{width:"100%",height:"100%",padding:4,dangerouslySetInlineStyle:{__style:p?x:{}},position:"relative"},a.a.createElement(d.b,{display:"flex",direction:"column",height:"100%",justifyContent:"between"},a.a.createElement(d.b,{maxWidth:216},a.a.createElement("div",{className:"PinFeedbackConfirmation"},a.a.createElement(d.b,{marginBottom:2},a.a.createElement(d.J,{color:"white",size:"xl",bold:!0},E?v.title:y)),a.a.createElement(d.b,{display:"flex"},w&&a.a.createElement(d.b,{marginRight:3},a.a.createElement(d.t,{width:w.width,height:w.height,shape:"rounded",wash:!0},a.a.createElement(d.o,{src:w.url,naturalHeight:1,naturalWidth:1,alt:E?v.subTitle:f||"",fit:"cover"}))),a.a.createElement(d.J,{color:"white",overflow:"normal"},E?v.subTitle:f,_&&i&&a.a.createElement(d.b,{display:"inlineBlock",marginLeft:1},a.a.createElement(s.b,{className:"underlineLink",onClick:i,style:m.navigateLinkStyle},r.a._("Undo","Text on the button to unfollow hiding a pin"))))),p&&!_&&a.a.createElement(d.b,{marginTop:5},i&&a.a.createElement(d.c,{color:"white",text:o||r.a._("Undo","Text on the button to unfollow hiding a pin"),onClick:i,inline:!0})))),!i&&!this.state.unfollowed&&v&&!C&&a.a.createElement(d.c,{color:"white",text:r.a._("Unfollow","Text on the button to unfollow a specific board / user"),onClick:()=>Object(l.a)(v.action,v.actionOptions,this.unfollowCallback)}),!p&&i&&a.a.createElement(d.c,{color:"white",text:r.a._("Undo","Text on the button to unfollow hiding a pin"),onClick:i}),_&&a.a.createElement(s.b,{to:"/edit"},a.a.createElement(d.c,{color:"white",text:r.a._("Tune your home feed","Text on the button to navigate to homefeed control"),onClick:this.logHomefeedControl})))))}}t.default=Object(o.connect)()(g)},"+Wpr":function(e,t,n){n.d(t,"c",function(){return s}),n.d(t,"b",function(){return l});n("GyhR");var i=n("mjrg"),a=n.n(i);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s={text:"",srcUrl:"",canonicalUrl:"",imageSignature:"",imageUrl:"",isFetching:!1},l={description:"",descriptionError:null,linkBlock:s,linkError:null,media:null,title:"",titleError:null,canvasJson:null,signals:{}};t.a=((e=l,t)=>{switch(t.type){case"PIN_DRAFT_ADD_STORY_PIN_ITEM":case"STORY_PIN_ITEM_UPDATE_DATA":return o({},e,t.payload.pinItem);case"STORY_PIN_ITEM_SET_DESCRIPTION":return o({},e,{description:t.payload.description});case"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR":return o({},e,{descriptionError:t.payload.descriptionError});case"STORY_PIN_ITEM_UPDATE_LINK_BLOCK":{const n=t.payload.linkBlock;return o({},e,{linkBlock:o({},e.linkBlock,n)})}case"STORY_PIN_ITEM_SET_LINK_ERROR":return o({},e,{linkError:t.payload.linkError});case"STORY_PIN_ITEM_SET_MEDIA":return o({},e,{media:t.payload.media,canvasJson:null});case"STORY_PIN_ITEM_UPDATE_MEDIA":{const n=t.payload.media;return o({},e,{media:e.media?a()({},e.media,n):null})}case"STORY_PIN_ITEM_SET_TITLE":return o({},e,{title:t.payload.title});case"STORY_PIN_ITEM_SET_TITLE_ERROR":return o({},e,{titleError:t.payload.titleError});case"STORY_PIN_ITEM_SET_EDITED_IMAGE":{const n=t.payload;return o({},e,{media:n.editedMedia,canvasJson:n.canvasJson})}default:return e}})},"+YBH":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("wQ8Q"),r=n("iJ35"),s=n("b7z0"),l=n("+U6O"),c=n("jcaw");var d=function({createdAt:e,commentId:t,user:n,variant:i}){const o=a.a.createElement(s.b,{color:"gray",size:"sm"},Object(c.f)(e));return a.a.createElement(l.b,{display:"flex",alignItems:"start",marginStart:-1,marginEnd:-1},a.a.createElement(l.b,{paddingX:1},a.a.createElement(r.b,{to:`/${n.username}/`},a.a.createElement(s.b,{size:"sm",weight:"default"===i?"semibold":"bold"},Object(c.e)(n)))),a.a.createElement(l.b,{paddingX:1},o))},u=n("boD7"),p=n("WE4s"),m=n("Mce2"),h=n("GrJN"),g=n("GYbB"),b=n("BY4F"),f=n("167h");function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){v(e,t,n[t])})}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w=1500,E=1e3,_={border:"1px solid #efefef",borderRadius:"16px"},C={border:"1px solid transparent",borderRadius:"16px"};class O extends a.a.PureComponent{constructor(...e){super(...e),v(this,"state",{isFeaturedHighlighting:this.props.commentId===this.props.featuredCommentId}),v(this,"renderEditMode",()=>{const e=this.props,t=e.contentImage,n=e.contentImageSignature,i=e.contentText,o=e.handleOnEdited,r=e.handleOnEditCancel,s=e.hideAddObjects,l=e.parentObject,c=e.pins,d=e.tags,u=e.taggedUsers,p=e.type;return a.a.createElement(f.a,{addedObjects:c,addedImage:t,hideAddObjects:s,imageSignature:n,objectType:p,onAddItem:()=>{},onCancelItem:r,onEditItem:o,onEnter:()=>{},parentObjectId:l.id,statusType:"textInFlightEdit",tags:d,taggedUsers:u,text:i,widthAuto:!0})})}componentDidMount(){this.props.commentId===this.props.featuredCommentId&&h.a.setTimeout(()=>{this.setState({isFeaturedHighlighting:!1})},w)}render(){const e=this.props,t=e.avatarSize,n=e.createdAt,r=e.commentCount,s=e.commentId,c=e.commentAuthor,h=e.contentText,b=e.flyout,f=e.handleLikeClick,v=e.handleReplyClick,w=e.handleReplyCountClick,O=e.hideReplyCount,S=e.inEditMode,x=e.isLikedByMe,k=e.reactionCounts,I=e.tags,P=e.taggedUsers,T=e.handleLikeCountClick,j=e.truncateText,R=e.variant,D=this.state.isFeaturedHighlighting,L=S?C:_;return a.a.createElement(m.a,{id:"canonical-comment"},a.a.createElement(l.b,{display:"flex"},a.a.createElement(l.b,{marginRight:2},a.a.createElement(o.a,{user:c,size:t})),a.a.createElement(l.b,{flex:"grow"},a.a.createElement(l.b,{dangerouslySetInlineStyle:{__style:y({},L,{transition:`${E}ms`,backgroundColor:D?"lightGray":null})},padding:S?0:3},S?this.renderEditMode():a.a.createElement(i.Fragment,null,a.a.createElement(d,{commentId:s,createdAt:n,user:c,variant:R}),j?a.a.createElement(g.a,{text:h,tags:I,taggedUsers:P,size:"sm",allowReveal:!0}):a.a.createElement(p.a,{text:h,tags:I,taggedUsers:P,size:"sm"}))),!S&&a.a.createElement(l.b,{padding:1},a.a.createElement(u.default,{commentCount:r,flyout:S?null:b,hideReplyCount:O,isLikedByMe:x,onLikeClick:f,onLikeCountClick:T,onReplyClick:v,onReplyCountClick:w,reactionCounts:k,small:!0,variant:R})))))}}v(O,"defaultProps",{avatarSize:"sm"});t.a=Object(b.b)(O)},"+Yt8":function(e,t,n){n.d(t,"b",function(){return r}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return c});var i=n("E56J"),a=n("NmcB");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=(e,t)=>{const n=Boolean(t&&t.isAuth),a=Boolean(t&&t.unifiedSignup),o=t&&t.country;t&&(e=>e.source&&e.source.utmPartner&&"partneracquisition"===e.source.utmPartner)(t)?i.default.increment(e,1,{app_type:"web",is_paid:!0,paid_source:t.source.utmSource,is_auth:n,unified_signup:a}):i.default.increment(e,1,{app_type:"web",is_auth:n,unified_signup:a,country:o})},s=(e,t,n,i={})=>{const r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({component:t,element:10148,view:n},i);Object(a.a)(e,r)},l=(e,t,n,a,o,r={})=>{((e,t)=>{const n=`client.partner.quick_promote_button.${e}`;i.default.increment(n,1,{app_type:"web",location:t})})(e,t),s(n,a,o,r)},c=()=>{Object(a.a)(8217)}},"/Mjl":function(e,t,n){t.a={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1}},"/O0m":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("D+W/"),s=n("wxfF"),l=n("RYWx"),c=n("fxqt"),d=n("Qo1m"),u=n("d9lF"),p=n("E/Qu"),m=n("IGno"),h=n("9Y9K"),g=n("I3yW"),b=n("k9eC"),f=n("NmcB"),y=n("JsRk"),v=n("2YES"),w=n("+U6O"),E=n("H3Xe"),_=n("Je/+");function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a=Object(h.compose)(Object(o.connect)(E.c,E.b),v.e,y.withRouter)(function({bestPinImgSrc:e,bgColor:t,handleShowDownload:n,hideDownload:o,hideEmbed:h,iconColor:y,iconSize:v,isFullAuth:E,logDownloadClick:O,onToggle:S,openLoginModal:x,pinCategory:k,pinDescription:I,pinId:P,pinImgSrc:T,pinTitle:j,reportPin:R,requestContext:D,router:L,usePortal:A}){const M=C(Object(i.useState)(!1),2),B=M[0],F=M[1],N=Object(i.useRef)(),U=()=>{F(!1)},z=r.a.GEN.templateConst.settings.DEVELOPER_SITE_URL+"/tools/widget-builder/?type=pin&url="+encodeURIComponent(`${r.a.GEN.templateConst.settings.CANONICAL_MAIN_URL}/pin/${P}/`),H=d.a._("More options","Accessible label for more options dropdown");return a.a.createElement(w.b,{flex:"grow",alignItems:"center",display:"flex"},a.a.createElement(w.b,{ref:N},a.a.createElement(u.a,{accessibilityLabel:H,icon:"ellipsis",onClick:()=>{S&&S(),F(!B),(e=>{Object(f.a)(101,{element:e,component:4,view:3,viewParameter:139})})(981),new b.c(D,"web_plp_download_image").enabled()&&n&&n()}})),B&&(()=>{const t=a.a.createElement(w.b,{dangerouslySetInlineStyle:{__style:{zIndex:g.b}}},a.a.createElement(w.j,{anchor:N.current,idealDirection:"down",onDismiss:U,size:"xs"},a.a.createElement(_.a,null,!o&&"undefined"!=typeof window&&"windows"!==Object(p.b)(window)&&e&&a.a.createElement(s.a,{imgSrc:e||"",filename:j||I,category:k},e=>a.a.createElement(_.b,{onClick:()=>{O&&O(),e()},text:d.a._("Download image","Button to download Pin image")})),!o&&"undefined"!=typeof window&&"windows"===Object(p.b)(window)&&(e||T)&&a.a.createElement(c.a,{name:"web_eg_windows_download_image"},({anyEnabled:t})=>t&&a.a.createElement(l.a,{imgSrc:e||T||"",filename:j||I,category:k})),a.a.createElement(_.b,{onClick:E?R:x,text:d.a._("Report Pin","Label for report pin action")}),!h&&a.a.createElement(_.b,{external:!0,text:d.a._("Embed","Label for embed pin action"),url:z}))));return A?a.a.createElement(m.a,null,a.a.createElement(w.q,null,t)):t})())})},"/Rhv":function(e,t,n){n.d(t,"a",function(){return d});var i=n("GyhR"),a=n.n(i),o=n("VSY/"),r=n("Qo1m"),s=n("dsfX"),l=n("NoZx"),c=n("9Hv/");function d({activityId:e,hideLikeListModal:t,reactionCount:n=0}){const i=o.i(r.a.ngettext("{{headingCount}} Reaction","{{headingCount}} Reactions",n),{headingCount:n.toString()});return a.a.createElement(s.b,{accessibilityCloseLabel:r.a._("close","accessible label for button to close modal"),accessibilityModalLabel:r.a._("Users who have liked this.","Label for a modal showing a list of users who have liked a Board Activity Post or Comment"),heading:i,onDismiss:t,size:"sm"},a.a.createElement(c.b,{activityId:e,activityType:l.a.BOARD_ACTIVITY_COMMENT}))}},"/mke":function(e,t,n){var i=n("GyhR"),a=n.n(i);n("OWio");const o={backgroundColor:"rgba(0, 0, 0, .06)"},r={backgroundColor:"rgba(51, 51, 51, 1.0)"},s={backgroundColor:"rgba(255, 255, 255, 1.0)"},l={backgroundColor:"rgba(239, 239, 239, 1.0)"},c={backgroundColor:"rgba(142 ,142, 142, 1.0)"},d={backgroundColor:"rgba(230, 0, 35, 1.0)"};var u={transparent:{backgroundColor:"transparent"},transparentDarkGray:{backgroundColor:"rgba(51, 51, 51, .8)"},transparentHovered:o,transparentFocused:o,transparentActive:{backgroundColor:"rgba(0, 0, 0, .1)"},transparentDarkGrayHovered:r,transparentDarkGrayFocused:r,transparentDarkGrayActive:{backgroundColor:"rgba(51, 51, 51, 1.0)"},white:{backgroundColor:"rgba(255, 255, 255, .9)"},whiteHovered:s,whiteFocused:s,whiteActive:{backgroundColor:"rgba(255, 255, 255, 1.0)"},lightGray:{backgroundColor:"rgba(239, 239, 239, .9)"},lightGrayHovered:l,lightGrayFocused:l,lightGrayActive:{backgroundColor:"rgba(239, 239, 239, 1.0)"},gray:{color:"rgba(142 ,142, 142, .9)"},grayHovered:c,grayFocused:c,grayActive:{backgroundColor:"rgba(142 ,142, 142, 1.0)"},red:{backgroundColor:"rgba(230, 0, 35, .9)"},redActive:d,redFocused:d,redHovered:d},p=n("+U6O");function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g={xs:24,sm:32,md:40,lg:48,xl:56},b={alignItems:"center",borderRadius:"50%",display:"flex",justifyContent:"center"},f={boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)",outline:0},y={transparent:"gray",gray:"white",lightGray:"gray",white:"gray",transparentDarkGray:"white",red:"white"};function v(e){const t=e.active,n=void 0!==t&&t,i=e.bgColor,o=void 0===i?"transparent":i,r=e.focused,s=void 0!==r&&r,l=e.hovered,c=void 0!==l&&l,d=e.icon,h=e.iconColor,v=void 0===h?y[o]:h,w=e.size,E=void 0===w?"md":w,_=e.title,C=void 0===_?"":_,O=e.iconSize||g[E]/2,S={height:g[E],width:g[E]},x=m({},b,u[o],n?u[`${o}Active`]:{},s?f:{},s?u[`${o}Focused`]:{},!c||s||n?{}:u[`${o}Active`]);return a.a.createElement("div",{style:m({},S,x)},a.a.createElement(p.b,{shape:"circle"},a.a.createElement(p.m,{accessibilityLabel:"",color:v,icon:d,size:O,title:C})))}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){E(e,t,n[t])})}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return _});class _ extends a.a.Component{constructor(...e){super(...e),E(this,"state",{active:!1,focused:!1,hovered:!1}),E(this,"handleBlur",()=>this.setState({focused:!1})),E(this,"handleFocus",()=>{this.setState({focused:!0})}),E(this,"handleMouseDown",()=>{this.setState({active:!0})}),E(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),E(this,"handleMouseLeave",()=>{this.setState({active:!1,hovered:!1})}),E(this,"handleMouseUp",()=>{this.setState({active:!1})})}render(){const e=this.props,t=e.accessibilityExpanded,n=e.accessibilityHaspopup,i=e.accessibilityLabel,o=e.bgColor,r=e.icon,s=e.iconColor,l=e.iconSize,c=e.onClick,d=e.size,u=e.wrappingPogStyle,p=this.state,m=p.active,h=p.focused,g=p.hovered;return a.a.createElement("button",{"aria-expanded":t,"aria-haspopup":n,"aria-label":i,className:"LegoGestalt_IconButton",onBlur:this.handleBlur,onClick:e=>c&&c({event:e}),onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,title:i,type:"button"},a.a.createElement("div",{style:w({},u||{})},a.a.createElement(v,{active:m,bgColor:o,focused:h,hovered:g,icon:r,iconColor:s,iconSize:l,size:d,title:i})))}}},"0BZn":function(e,t,n){var i=n("ptua");n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});const a=e=>i.a.instance.dispatch(function(e){return{type:"SPAMMY_CLICKTHROUGH_WARNING_SHOW",payload:e}}(e)),o=()=>i.a.instance.dispatch({type:"SPAMMY_CLICKTHROUGH_WARNING_DISMISS"})},"0oKL":function(e,t,n){function i(e,t,n,i){return{type:"PIN_DRAFT_ADD_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:n,options:i}}}n.d(t,"a",function(){return i})},"1/M5":function(e,t,n){n.d(t,"a",function(){return d});var i=n("GyhR"),a=n.n(i),o=n("OLQZ"),r=n.n(o);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=200,c=({scrollTop:e,clientHeight:t,scrollHeight:n},i)=>{return e+t+(i?i(t):2*t)>n};class d extends a.a.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",e=>{this.containerRef=e}),s(this,"fetchMoreIfNecessary",r()(()=>{const e=this.props,t=e.fetchMore,n=e.scrollBuffer;t&&this.containerRef&&c(this.containerRef,n)&&t()},l))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){return(0,this.props.children)({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},"167h":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("wQ8Q"),s=n("gPYk"),l=n("Qo1m"),c=n("ePT2"),d=n("IGno"),u=n("qFs9"),p=n("kIql"),m=n("9Y9K"),h=n("+U6O");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=5,f="220px",y=27,v=38,w=40,E=13;var _=Object(m.compose)(u.a,p.a)(class extends a.a.PureComponent{constructor(...e){super(...e),g(this,"state",{isOpen:this.props.editing,recommendations:[],selectedIndex:0,resourceLoaded:!1}),g(this,"onDismiss",()=>{this.setState({isOpen:!1})}),g(this,"mounted",!1),g(this,"addMention",e=>{this.props.addMention(e),this.setState({recommendations:[]})}),g(this,"handleKeyDown",e=>{const t={[v]:this.handlePrevMention,[w]:this.handleNextMention,[y]:this.handleClose,[E]:this.handleSubmit},n=e&&e.keyCode;n&&t[n](e)}),g(this,"handlePrevMention",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),g(this,"handleNextMention",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),g(this,"handleClose",e=>{e.preventDefault(),e.stopPropagation(),this.setState({recommendations:[]})}),g(this,"handleSubmit",e=>{e.preventDefault(),this.addMention(this.state.recommendations[this.state.selectedIndex])}),g(this,"callResource",e=>{const t=this.props,n=t.makeCancelablePromise,i=t.viewer;n(c.a.create("TypeaheadResource",{num_boards:0,count:10,term:e,tag:"pinners"}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.items.filter(e=>e.id!==(i.id||null)).slice(0,b),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}UNSAFE_componentWillReceiveProps(e){e.query!==this.props.query&&""!==e.query&&this.callResource(e.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const e=this.state,t=e.recommendations,n=e.resourceLoaded,i=e.selectedIndex,o=this.props,r=o.anchor,s=o.idealDirection||"down",l="flyout_"+this.state.recommendations.length;return n&&t.length>0?a.a.createElement(d.a,null,a.a.createElement(h.q,null,a.a.createElement(h.j,{key:l,anchor:r,idealDirection:s,onDismiss:this.onDismiss,positionRelativeToAnchor:!1,size:"md"},a.a.createElement(h.b,{column:12},t.length>0?t.map((e,t)=>a.a.createElement("div",{key:e.id},a.a.createElement(h.O,{onTouch:t=>this.addMention(e),fullWidth:!1},a.a.createElement(h.b,{display:"flex",alignItems:"center",color:t===i?"lightGray":"transparent",overflow:"hidden",padding:1},a.a.createElement(h.b,{paddingX:4},a.a.createElement(h.a,{size:"md",src:e.image_medium_url,name:e.full_name})),a.a.createElement(h.b,{paddingX:4,width:f},a.a.createElement(h.J,{truncate:!0,size:"md",bold:!0},e.full_name)))))):null)))):null}});const C="data-length",O="communityEditorMention",S=e=>{let t=e.previousSibling,n=0;for(;t;)n+=t.textContent.length,t=t.previousSibling;return n},x=(e,t,n,i)=>{let a=[];n&&n.forEach(e=>{t[e.id]=e});let o=!0;if(e&&e.children){Array.from(e.children).forEach(e=>{if(e.className===O){const n=e.getAttribute("data-user-id");e.getAttribute("data-reply-to")&&(o=!1);const i=t[n].first_name||t[n].user.full_name;a=a.concat({object_id:n,length:i&&i.length,offset:S(e),tag_type:1})}})}return o&&i&&i(),JSON.stringify(a)},k=(e,t=!1)=>{const n=document.createElement("span"),i=e.first_name||e.full_name;return n.setAttribute("style","font-weight: bold; color: #4A90E2"),n.setAttribute("data-user-id",`${e.id}`),n.setAttribute(C,`${i.length}`),t&&n.setAttribute("data-reply-to","true"),n.setAttribute("class",O),n.innerText=i,n},I=(e,t,n,i={})=>{let a=0,o="";if(i&&i.user){const t=i.user.first_name||i.user.full_name;if((!n||n.substring(a,t.length)===t)&&(o=`${k(i.user,!0).outerHTML} `,a=t.length,e.shift(),n&&n.trim().length===t.length))return o}return n&&(e.forEach((e,i)=>{const r=n?n.substring(a,e.offset):"";a=e.offset+e.length,o=`${o}${r}${k(t[i]).outerHTML}`}),o=`${o}${n.substring(a)}`),o};function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=/@[a-zA-Z0-9_-]*/,j="g",R=2e3,D=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Escape","Shift","Alt","Control","Meta"],L=0,A=13;class M extends i.PureComponent{constructor(...e){super(...e),P(this,"state",{flyoutCursorIndex:0,isMentionFlyoutOpen:!1,mentionQuery:"",textValue:this.props.replyToObject?I(this.props.existingTags,this.props.taggedUsers,this.props.textValue,this.props.replyToObject):I(this.props.existingTags,this.props.taggedUsers,this.props.textValue)}),P(this,"getTextCursorPosition",()=>{const e=window.getSelection(),t=e.getRangeAt(0),n=e.anchorNode;return{cursorIndex:t.startOffset,selectedElement:n}}),P(this,"getHTMLCursorPosition",()=>{const e=this.getTextCursorPosition(),t=e.cursorIndex,n=e.selectedElement;if(n){let e=t;const i=n.parentNode;i!==this._textAreaRef&&(e+=i.outerHTML.length-i.innerHTML.length-(3+i.tagName.length));let a=n.previousSibling;for(;a;)e+=a.outerHTML&&a.outerHTML.length||a.textContent.length,a=a.previousSibling;return{cursorIndex:e,parentElement:i}}return{cursorIndex:-1}}),P(this,"setRef",e=>{this.props.setRef(e),this._textAreaRef=e}),P(this,"focusTextAreaAndPostionCursor",(e=!1)=>{const t=window.getSelection(),n=document.createRange();if(e&&this._textAreaRef)n.selectNodeContents(this._textAreaRef),n.collapse(!1);else if(t.anchorNode){const e=t.getRangeAt(0),i=e.startOffset,a=e.startContainer;n.setStart(a,i),n.collapse(!0),this._textAreaRef&&a===this._textAreaRef&&(n.selectNodeContents(this._textAreaRef),n.collapse(!1))}else this._textAreaRef&&(n.selectNodeContents(this._textAreaRef),n.collapse(!1));t.removeAllRanges(),t.addRange(n),this._textAreaRef&&this._textAreaRef.focus()}),P(this,"handleKeyDown",e=>{const t=this.props.handleEnter;!this.state.isMentionFlyoutOpen&&e.which===A&&t&&(e.preventDefault(),t(e.target.textContent))}),P(this,"handleKeyUp",e=>{const t=this.getHTMLCursorPosition().parentElement,n=this.getTextCursorPosition().cursorIndex===t.textContent.length,i=t.className===O;i&&t.getAttribute(C)>t.textContent.length?this.handleRemoveMention(t):!i||0===e.which||D.includes(e.key)||n?t.className===O&&n&&this.placeCaretAfterNode(t):this.handleRemoveSpan(t);const a=e.target.textContent;this.props.onChange(a!==this.props.textValue)}),P(this,"handleAddMention",e=>{const t=this.state.flyoutCursorIndex,n=t+this.state.mentionQuery.length+1,i=this._textAreaRef,a=i&&i.innerHTML.slice(0,t)||"",o=i&&i.innerHTML.slice(n)||" ",r=`${a}${k(e).outerHTML}${o}`;this.props.updateTags(e),this.setState({textValue:r,mentionQuery:"",isMentionFlyoutOpen:!1},this.focusTextAreaAndPostionCursor)}),P(this,"handleRemoveMention",e=>{this._textAreaRef&&this._textAreaRef.replaceChild(document.createTextNode(""),e)}),P(this,"handleRemoveSpan",e=>{this._textAreaRef&&(this._textAreaRef.replaceChild(document.createTextNode(e.textContent),e),this.setState({textValue:this._textAreaRef&&this._textAreaRef.innerHTML||""},this.focusTextAreaAndPostionCursor))}),P(this,"handleInput",e=>{const t=this.getHTMLCursorPosition().cursorIndex;let n="";const i=e.target.innerHTML,a=new RegExp(T,j);let o=a.exec(i),r=a.lastIndex<t;for(;o&&r;)o=a.exec(i),r=a.lastIndex<t;n=o&&o.index<t?o[L]:"";const s=this.state.isMentionFlyoutOpen?this.state.flyoutCursorIndex:i.slice(0,t).lastIndexOf("@"),l=n.substring(1);this.setState({flyoutCursorIndex:s,mentionQuery:l,isMentionFlyoutOpen:!!n}),this.props.handleInput(e.target.textContent)}),P(this,"handlePaste",e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}),P(this,"placeCaretAfterNode",e=>{const t=e.textContent,n=e.getAttribute(C),i=t.substring(n),a=t.substring(0,n);e.innerHTML=a;const o=document.createRange();o.setStartAfter(e);const r=document.createTextNode(i);o.insertNode(r),o.collapse(!1);const s=window.getSelection();s.removeAllRanges(),s.addRange(o)})}componentDidMount(){this.focusTextAreaAndPostionCursor(!0)}componentDidUpdate(e,t){this.state.isMentionFlyoutOpen&&!this.props.shouldLoseFocus&&this.focusTextAreaAndPostionCursor()}render(){const e=this.props,t=e.style,n=e.suggestionAnchor,i=e.handleFocus,o=this.state,r=o.isMentionFlyoutOpen,s=o.mentionQuery,l=o.textValue;return a.a.createElement(h.b,{alignItems:"center",width:"100%"},a.a.createElement("div",{tabIndex:"0",contentEditable:!0,maxLength:R,name:"communityItemTextBox",onBlur:this.props.handleBlur,onFocus:i,onInput:this.handleInput,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onPaste:this.handlePaste,ref:this.setRef,role:"textbox",style:t,"data-test-id":"mentionsInput",dangerouslySetInnerHTML:{__html:l}}),n&&r&&a.a.createElement(_,{addMention:this.handleAddMention,anchor:n,query:s}))}}P(M,"defaultProps",{handleFocus:()=>{},handleInput:()=>{},onChange:()=>{},existingTags:[],taggedUsers:[]});var B=n("Mce2"),F=n("nskd"),N=n("21DP"),U=n("VSY/"),z=n("NmcB"),H=n("JsRk"),V=n("NoZx");function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W={anchorRefSet:!1,hasPostAction:!1,inputAreaFocused:!1,isTextChanged:!1,showConfirmDiscardModal:!1,submissionInProgress:!1,textValue:"",viewType:"text"},Y=2e3,q=(e,t)=>(e[t.id]=t,e);class J extends i.Component{constructor(...e){super(...e),G(this,"state",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){G(e,t,n[t])})}return e}({},W,{tags:this.props.tags,taggedUserMap:{},taggedUsers:this.props.taggedUsers||[],textValue:this.props.text})),G(this,"setAnchorRef",e=>{this._suggestionAnchor=e,this.setState({anchorRefSet:!0})}),G(this,"setRef",e=>this._textAreaRef=e),G(this,"updateTags",e=>{const t=this.state.taggedUsers.concat(e),n=this.state.taggedUserMap;n[e.id]=q(e,this.state.taggedUserMap),this.setState({taggedUserMap:n,taggedUsers:t})}),G(this,"routerWillLeave",()=>{const e=this.props,t=e.text,n=e.statusType,i=this.state,a=i.hasPostAction,o=i.textValue,r=l.a._("Discard unsaved changes?");return"textInFlightEdit"===n?!(!a&&t!==o)||r:!(!a&&o)||r}),G(this,"handleBlur",()=>{this.setState({inputAreaFocused:!1})}),G(this,"handleFocus",()=>{this.props.onEnter()}),G(this,"handleOnClickEdit",()=>{const e=this.props,t=e.clearReplyToObject,n=e.onEditItem,i=e.taggedUsers,a=this.state.taggedUserMap,o=x(this._textAreaRef,a,i,t),r={contentMarkdown:Object(U.j)(this._textAreaRef&&this._textAreaRef.textContent.trim()||""),imageSignatures:"",objectIds:[],tags:o};this.setState({hasPostAction:!0}),n(r),this.setState({submissionInProgress:!1})}),G(this,"handleOnClickPost",()=>{this.setState({submissionInProgress:!0}),this.handleOnClickPostFinal()}),G(this,"handleOnClickPostFinal",()=>{const e=this.props,t=e.clearReplyToObject,n=e.onAddItem,i=e.taggedUsers,a=x(this._textAreaRef,this.state.taggedUserMap,i,t),o={contentMarkdown:Object(U.j)(this._textAreaRef&&this._textAreaRef.textContent.trim()||""),imageSignatures:"",objectIds:[],tags:a};this.setState({hasPostAction:!0}),n(o),this.setState(W)}),G(this,"handleOnFinalDiscardItem",()=>{this._removeRouteLeaveHook&&this._removeRouteLeaveHook();const e=this.props.onCancelItem;this.setState(W),e()}),G(this,"handleTextChange",e=>this.setState({isTextChanged:!(!this._textAreaRef||!this._textAreaRef.textContent.trim())&&e})),G(this,"isSubmitEditDisabled",()=>{return!this.state.isTextChanged}),G(this,"toggleShowConfirmDiscardModal",()=>{const e=this.state.showConfirmDiscardModal;this.setState({showConfirmDiscardModal:!e})}),G(this,"renderConfirmDiscardModal",()=>{let e,t;return"textInFlightEdit"===this.props.statusType?(e=l.a._("Your changes will be discarded","Confirmation dialog before discarding changes"),t=l.a._("Discard changes","Clear edits")):(e=l.a._("Once you delete a draft, you can’t undo it","Confirmation before discarding changes"),t=l.a._("Delete","delete draft of a post or comment")),a.a.createElement(s.a,{accessibilityModalLabel:l.a._("Confirm discard composer","Confirm discarding a post or comment"),heading:l.a._("Are you sure?","Confirm discarding a post or comment"),cancelButtonText:l.a._("Cancel","Cancel discarding a post or comment"),confirmButtonText:t,detail:e,onConfirm:this.handleOnFinalDiscardItem,onDismiss:this.toggleShowConfirmDiscardModal})})}static getDerivedStateFromProps(e,t){return e.replyToObject?{taggedUserMap:q(t.taggedUserMap,e.replyToObject.user)}:{}}componentDidMount(){const e=this.props.router;e.setRouteLeaveHook&&(this._removeRouteLeaveHook=e.setRouteLeaveHook(e.routes[e.routes.length-1],this.routerWillLeave))}componentDidUpdate(e){const t=this.props,n=t.statusType,i=t.objectType,a=t.parentObjectId;"textInflightCreation"!==e.statusType&&"textInflightCreation"===n&&Object(z.a)(101,{element:this.composeContextLogElementMap[i],component:this.composeContextLogComponentMap[i],objectId:a})}get isPost(){return this.props.objectType===V.a.BOARD_ACTIVITY}get isBoardActivityComment(){return this.props.objectType===V.a.BOARD_ACTIVITY_COMMENT}get isAggregatedComment(){const e=this.props.objectType;return e===N.a.pin||e===N.a.didIt||e===N.a.aggregatedComment}get composeContextLogComponentMap(){return{[V.a.BOARD_ACTIVITY_COMMENT]:13191,[V.a.BOARD_ACTIVITY]:13190}}get composeContextLogElementMap(){return{[V.a.BOARD_ACTIVITY_COMMENT]:10624,[V.a.BOARD_ACTIVITY]:10624}}render(){const e=this.props,t=e.avatarSize,n=e.replyToObject,i=e.privatePin,o=e.statusType,s=e.viewingUser,c=this.state,d=c.anchorRefSet,u=c.inputAreaFocused,p=c.isTextChanged,m=c.showConfirmDiscardModal,g=c.submissionInProgress,b=c.tags,f=c.taggedUsers,y=c.textValue,v={borderRadius:8,boxShadow:"0 0 0 4px rgba(0,132,255,.5)"},w={background:"transparent",border:"0",display:p?"inline-block":"block",minHeight:"textStaticDisplay"===o?"":"50px",fontSize:"16px",outline:"0",overflowX:"hidden",resize:"none",whiteSpace:"pre-wrap",width:"100%"};let E,_;E=this.isPost?l.a._("Start a discussion","Writing a post"):this.isAggregatedComment&&i?l.a._("Add a public comment","Add a comment"):this.isAggregatedComment?l.a._("Add a comment","Prompt to add a comment"):this.isBoardActivityComment?l.a._("Add comment","Prompt to add a comment"):l.a._("Reply","Adding text to a community comment"),_=this.isPost?l.a._("Post","Create a post"):this.isAggregatedComment?l.a._("Done","Post a top level comment on a pin or tried it"):l.a._("Reply","Posting a reply to a post or comment");const C=p;return"textInflightCreation"===o?a.a.createElement(h.b,{column:12,display:"flex",justifyContent:"center"},a.a.createElement(h.b,{width:"100%"},a.a.createElement(h.b,{display:"flex"},a.a.createElement(h.b,{width:40,marginRight:2},a.a.createElement(r.a,{user:s,size:t})),a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"16px",border:"1px solid #EFEFEF"}},width:"100%",padding:4},a.a.createElement("div",{ref:this.setAnchorRef,style:u?v:{}},a.a.createElement(h.b,{display:"flex",shape:"rounded"},d&&a.a.createElement(M,{shouldLoseFocus:m,handleBlur:this.handleBlur,style:w,setRef:this.setRef,suggestionAnchor:this._suggestionAnchor,updateTags:this.updateTags,existingTags:b,replyToObject:n,taggedUsers:f,textValue:y,onChange:this.handleTextChange}))))),a.a.createElement(h.b,{display:"flex",justifyContent:"end",marginTop:4},a.a.createElement(h.c,{color:"gray",inline:!0,onClick:C?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:l.a._("Cancel","Cancel making post or comment")}),a.a.createElement(h.b,{marginLeft:2},a.a.createElement(B.a,{id:"activity-item-create-submit"},a.a.createElement(h.c,{color:"red",disabled:!p||g,inline:!0,onClick:this.handleOnClickPost,text:_}))))),m&&this.renderConfirmDiscardModal()):"textInFlightEdit"===o?a.a.createElement(h.b,{column:12,display:"flex",justifyContent:"center"},a.a.createElement(h.b,{width:"100%"},a.a.createElement(h.b,{display:"flex"},a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"16px",border:"1px solid #EFEFEF"}},width:"100%",padding:4},a.a.createElement("div",{ref:this.setAnchorRef,style:u?v:{}},a.a.createElement(h.b,{display:"flex",shape:"rounded"},d&&a.a.createElement(M,{handleBlur:this.handleBlur,style:w,setRef:this.setRef,suggestionAnchor:this._suggestionAnchor,updateTags:this.updateTags,existingTags:b,taggedUsers:f,textValue:y,onChange:this.handleTextChange}))))),a.a.createElement(h.b,{display:"flex",justifyContent:"end",marginTop:4},a.a.createElement(h.c,{color:"gray",inline:!0,onClick:C?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:l.a._("Cancel","Cancel making post or comment")}),a.a.createElement(h.b,{marginLeft:2},a.a.createElement(h.c,{color:"red",disabled:this.isSubmitEditDisabled()||g,inline:!0,onClick:this.handleOnClickEdit,text:l.a._("Edit","Edit a post")})))),m&&this.renderConfirmDiscardModal()):a.a.createElement(h.b,{alignItems:"center",display:"flex",justifyContent:"between",shape:"rounded"},a.a.createElement("div",{onKeyDown:this.handleFocus,onClick:this.handleFocus,role:"textbox",tabIndex:"0",style:{cursor:"text",width:"100%"}},a.a.createElement(h.b,{column:12,display:"flex"},a.a.createElement(h.b,{width:40},a.a.createElement(r.a,{user:s,size:t})),a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"26px",border:"1px solid #EFEFEF"}},width:"100%",height:40,alignItems:"center",display:"flex",marginLeft:2,padding:4},a.a.createElement("textarea",{maxLength:Y,name:"communityItemTextBox",onBlur:this.handleBlur,onFocus:this.handleFocus,placeholder:E,ref:e=>{this._textAreaRef=e},rows:1,style:w})))))}}G(J,"defaultProps",{imageSignature:"",onAddPinModeChange:()=>{},onEnter:()=>{},showWelcomeEducation:!1,text:"",widthAuto:!1});const $={image_medium_url:"",type:"user",username:"",full_name:"",first_name:"",id:""};t.a=Object(m.compose)(Object(o.connect)(e=>{const t=e.viewer;return $.image_medium_url=t.imageMediumUrl,$.username=t.username,$.full_name=t.fullName,{viewer:t,viewingUser:$}}),F.a,p.a,H.withRouter)(J)},"19Gw":function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("yXM0"),s=n("z/1d"),l=n("+U6O");class c extends i.Component{constructor(...e){var t,n,i;super(...e),t=this,n="statsList",i=this.props.isVideo?[{iconType:"play",displayText:o.a._("Video views","Label for views of a video pin on closeup page"),field:"video_views",align:"start"},{iconType:"clock",displayText:o.a._("Avg. time","Label for average time of a video pin on closeup page"),field:"video_average_time",align:"center",valueFormat:"TIME"},{iconType:"angled-pin",displayText:o.a._("Saves","Label for saves of a video pin on closeup page"),field:"save",align:"end"}]:[{iconType:"eye",displayText:o.a._("Impressions","Label for impressions of a pin on closeup page"),field:"impression",align:"start"},{iconType:"angled-pin",displayText:o.a._("Saves","Label for saves of a pin on closeup page"),field:"save",align:"center"},{iconType:"arrow-up-right",displayText:o.a._("Link clicks","Label for click-throughs of a pin on closeup page"),field:"clickthrough",iconSize:10,align:"end"}],n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}renderValue(e,t="COUNT"){return Number.isInteger(e)?"TIME"===t?Object(r.a)(e):a.a.createElement(s.a,{value:e,shortform:!0,shortformMaximumFractionDigits:1}):"-"}render(){const e=this.props,t=e.isVideo,n=e.stats,i=e.isStoryPin,o=e.show90Days;if(!n)return null;const r=o?"90d":"30d",s=(t||i)&&n.all_time?n.all_time:n[r];return s&&0!==Object.keys(s).length?a.a.createElement(l.b,{display:"flex"},this.statsList.map(({align:e,iconType:t,iconSize:n=12,field:i,displayText:o,valueFormat:r},c)=>a.a.createElement(l.b,{key:c,column:4,display:"flex",justifyContent:e,alignItems:"center"},a.a.createElement(l.b,{display:"inlineBlock",marginRight:1},a.a.createElement(l.m,{accessibilityLabel:o,color:"darkGray",icon:t,size:n})),a.a.createElement(l.J,{inline:!0,size:"sm"},this.renderValue(s[i],r))))):null}}},"1HYc":function(e,t,n){n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});const i=5,a="V_HLSV3_MOBILE"},"1OKt":function(e,t,n){n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c});var i=n("GyhR"),a=n("aE8+"),o=n("Qo1m"),r=n("VSY/"),s=n("+U6O");const l=e=>`${e.substring(0,33)}${(e=>e.length>33?"...":"")(e)}`,c=e=>Object(r.c)(o.a._("Visit {{domain}}","Accessible label for clickthrough link button"),{domain:e}),d={minHeight:32,padding:"2px 14px"};t.a=(({domain:e,borderRadius:t=8,fontSize:n="md",fullWidth:o=!0,styleOverride:r,textNode:u})=>{const p=c(e);return i.createElement(a.a,Object.assign({accessibilityLabel:p},o?{buttonWidth:"100%"}:null,{bgColor:"lightGray",onClick:()=>{},borderRadius:t}),i.createElement(s.b,{"data-test-id":"link-icon-with-domain-styles",dangerouslySetInlineStyle:{__style:r||d},display:"flex",alignItems:"center",justifyContent:"center",marginLeft:-1,marginRight:-1},i.createElement(s.b,{paddingX:1},i.createElement(s.m,{icon:"arrow-up-right",color:"darkGray",inline:!0,accessibilityLabel:p,size:15})),i.createElement(s.b,{paddingX:1},u||i.createElement(s.J,{bold:!0,inline:!0,size:n},l(e)))))})},"1RKP":function(e,t,n){n.d(t,"a",function(){return r});var i=n("GyhR"),a=n("+U6O"),o=n("yzmC");function r(){return i.createElement(o.a.Consumer,null,({showCloseupContentRight:e,viewportSize:t})=>e&&"wide"===t?i.createElement(a.b,{width:16}):null)}},"1ZRU":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("sl5z"),r=n("+U6O");const s="#0f0",l="#00f",c="#999";function d({children:e,group:t,isEligible:n,name:i,performsActivate:o}){let d=o?s:l;return n||(d=c),a.a.createElement(r.b,{position:"relative"},e,a.a.createElement(r.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:{__style:{boxShadow:`0 0 2px 2px ${d}`,borderRadius:5}}}),a.a.createElement(r.b,{position:"absolute",top:!0,left:!0,color:"lightGray"},i,": ",t))}var u=n("LuB0");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return h});class m extends i.PureComponent{constructor(...e){super(...e),p(this,"handleCustomActivate",()=>{const e=this.props,t=e.activateExperiment,n=e.isEligible,i=e.name;return n?t(i):""}),p(this,"attachDebugging",e=>{const t=this.props,n=t.activate,i=t.name,o=t.isEligible,r=t.highlighted,s=this.getGroup();return r?a.a.createElement(d,{group:s,isEligible:o,name:i,performsActivate:n},e):e})}componentDidMount(){const e=this.props,t=e.activate,n=e.activateExperiment,i=e.isEligible,a=e.name;t&&i&&n(a)}getGroup(){const e=this.props,t=e.group,n=e.overrideGroup;return"string"==typeof n?n:t}render(){const e=this.props,t=e.activate,n=e.name,i=e.children,r=e.isEligible,s=this.getGroup(),l=`Experiment(${n}:${s})`,c=!!r&&(s.startsWith("enabled")||s.startsWith("employee")),d={group:r?s:"",anyEnabled:c,customActivate:r&&!t?this.handleCustomActivate:null};return this.attachDebugging(a.a.createElement(o.a,{name:l},i(d)))}}function h(e){const t=e.name,n=Object(i.useContext)(u.c),o=n.debuggingEnabled,r=n.overriddenExperiments,s=n.highlightedExperiment,l=n.setExperimentVisible,c=o&&r&&"string"==typeof r[t]?r[t]:null,d=o&&(s===t||s===u.a);return Object(i.useEffect)(()=>{if(o)return l(t,!0),()=>l(t,!1)},[t,o]),a.a.createElement(m,Object.assign({},e,{overrideGroup:c,highlighted:d}))}p(m,"defaultProps",{activate:!0,isEligible:!0,overrideGroup:null,highlighted:!1})},"1kao":function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n("+U6O");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r="rgb(226, 226, 226)",s="rgb(218, 218, 218)";function l(e){const t=e.active,n=void 0!==t&&t,l=e.borderRadius,c=e.children,d=e.focused,u=void 0!==d&&d,p=e.hovered,m=void 0!==p&&p,h=e.shape,g=e.hoverBgColor,b=e.bgColor,f=void 0===b?"transparent":b,y=e.size,v=n?{backgroundColor:"transparent"===f?"rgba(0, 0, 0, 0.1)":s}:null,w=!m||u||n?null:{backgroundColor:g||("transparent"===f?"rgba(0, 0, 0, 0.06)":r)},E=u?{backgroundColor:"transparent"===f?"rgba(0, 0, 0, 0.06)":r,boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:"0"}:null;let _;if("circle"===h)switch(void 0===y?"lg":y){case"xs":_=24;break;case"sm":_=32;break;case"md":_=40;break;case"lg":_=48;break;case"xl":_=56;break;default:_=48}const C=_,O=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({backgroundColor:{transparent:"transparent",lightGray:"#efefef",white:"#fff",transparentDarkGray:"rgba(51, 51, 51, 0.8)"}[f]},w,v,E,l?{borderRadius:l}:{});return i.createElement(a.b,{shape:h,dangerouslySetInlineStyle:{__style:O},height:_,width:C},c)}},"21DP":function(e,t,n){n.d(t,"a",function(){return c});var i=n("Q6EP"),a=n.n(i),o=n("mjrg"),r=n.n(o);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={aggregatedComment:"aggregatedComment",didIt:"didIt",pin:"pin"},d={},u=(e,t)=>{const n=s({},r()({},e,t),t.content?{content:t.content}:{},t.reaction_counts?{reaction_counts:t.reaction_counts}:{},t.tags?{tags:t.tags}:{},t.tagged_users?{tagged_users:t.tagged_users}:{});return a()(e,n)?e:n};t.b=((e=d,t)=>{if("RESOURCE_FETCH_COMPLETE"===t.type||"RESOURCE_FETCH_MORE_COMPLETE"===t.type){const n=t.payload,i=n.data,a=n.name;if("AggregatedCommentFeedResource"===a||"AggregatedCommentReplyFeedResource"===a||"DidItCommentsResource"===a){const t=(i||[]).reduce((t,n)=>(t[n.id]=u(e[n.id],n),t),{});return s({},e,t)}}else{if("AGGREGATED_COMMENT_CREATED"===t.type){const n=t.payload.aggregatedComment;return s({},e,{[n.id]:n})}if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){const n=t.payload.aggregatedCommentId,i=s({},e);return delete i[n],i}if("AGGREGATED_COMMENT_UPDATED"===t.type){const n=t.payload.data;return s({},e,{[n.id]:u(e[n.id],n)})}if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){const n=t.payload.data,i=e[n.id],a=i.reaction_counts[1]||0,o={1:n.reaction_by_me?a+1:a-1},r=s({},i,{reaction_by_me:n.reaction_by_me,reaction_counts:o});return s({},e,{[n.id]:r})}if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){const n=t.payload,i=n.increment,a=n.id,o=e[a],r=s({},o,{comment_count:i?o.comment_count+1:o.comment_count-1});return s({},e,{[a]:r})}}return e})},"22yj":function(e,t,n){n.d(t,"a",function(){return p});var i=n("GyhR"),a=n.n(i),o=n("+U6O"),r=n("yzmC"),s=n("z/cr");function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=496,u=344;function p({children:e,hasActionBar:t,isCarousel:n,isVideo:i=!1,isWideVideo:c,shouldPadImage:p,shouldRoundLeftCorners:m=!1,styleOverrides:h={},variant:g}){return a.a.createElement(r.a.Consumer,null,({showCloseupContentRight:t,viewportSize:n})=>{const r="default"===g;let b={};if(t&&"wide"===n||r||c){const e=m?"32px 0 0 32px":"32px 0 0 0",t="wide"!==n||c?"32px 32px 0 0":e;b=r?l({},h.height||{height:"100%"},h.maxWidth||{maxWidth:c?s.l:s.j},h.minWidth||{minWidth:s.j},{display:"flex",justifyContent:"center",dangerouslySetInlineStyle:{__style:l({borderRadius:h.borderRadius||t},p&&i?{overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)"}:{})}}):{maxWidth:c?s.l:d,minWidth:u,marginEnd:c?0:6,marginBottom:6,shape:"rounded"}}return a.a.createElement(o.b,b,e)})}},"2LZR":function(e,t,n){function i(e,t){return e&&e[t]&&e[t].url}n.d(t,"a",function(){return i})},"2cEh":function(e,t,n){var i=n("WQSK"),a=n("Aa8G"),o=n("/YZq"),r=n("E56J"),s=n("ePT2"),l=n("aqOH");const c=o.a.getLogger("WebPushManager"),d=function(){};Object.assign(d.prototype,{sendSubscriptionToServer(e,t,n,o){const d=a.a.getInstance().v2GetGroup("unauth_desktop_push_notification")||"";c.debug("Calling: sendSubscriptionToServer"),i.set("cm_sub","allowed",8760,"/"),t&&t(),l.default&&l.default.isAuthenticated()?r.default.increment("auth.web.notifications.allowed",1,{sourceLandingPage:o}):r.default.increment("unauth.web.notifications.allowed",1,{unauth_web_push_group:d,category_name:n});let u=e.subscriptionId;if(!u){const t=e.endpoint.split("/");u=t[t.length-1]}if(l.default&&l.default.isAuthenticated()){return s.a.create("WebPushDeviceResource",{}).callGet({showError:!1}).then(t=>{const n=t.resource_response.data;if(!(u in n)){const t={registration_id:u,subscription_endpoint:e.endpoint};return s.a.create("WebPushDeviceResource",t).callCreate()}c.debug("subscription id already exists")})}{if(null===n||""===n||void 0===n)return;const e={device_id:u,cat_name:n.toUpperCase()};return s.a.create("UnauthWebPushDeviceResource",e).callUpdate()}},subscribe(e,t,n,o){const s=a.a.getInstance().v2GetGroup("unauth_desktop_push_notification")||"";return l.default&&l.default.isAuthenticated()?r.default.increment("auth.web.notifications.viewed",1,{sourceLandingPage:o}):r.default.increment("unauth.web.notifications.viewed",1,{unauth_web_push_group:s,category_name:n}),navigator.serviceWorker.ready.then(a=>{a.pushManager.subscribe({userVisibleOnly:!0}).then(t=>this.sendSubscriptionToServer(t,e,n,o),a=>{"denied"===Notification.permission?(i.set("cm_sub","denied",8760,"/"),e&&e(),c.debug("subscribe: Notification.permission === denied"),l.default&&l.default.isAuthenticated()?r.default.increment("auth.web.notifications.denied",1,{sourceLandingPage:o}):r.default.increment("unauth.web.notifications.denied",1,{unauth_web_push_group:s,category_name:n})):(i.set("cm_sub","dismissed",8760,"/"),t&&t(),c.debug("subscribe: exception"),l.default&&l.default.isAuthenticated()?r.default.increment("auth.web.notifications.dismissed",1,{sourceLandingPage:o}):r.default.increment("unauth.web.notifications.dismissed",1,{unauth_web_push_group:s,category_name:n}))})})},initializeState(){if(l.default.isLimitedLogin())return c.debug("User is limited login"),void i.set("cm_sub","denied",8760,"/");const e=a.a.getInstance().v2GetGroup("unauth_desktop_push_notification")||"";return l.default.isAuthenticated()||e.startsWith("enabled")?"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?(c.debug("User denied notification from Pinterest"),void i.set("cm_sub","denied",8760,"/")):"PushManager"in window?navigator.serviceWorker.ready.then(e=>e.pushManager.getSubscription()).then(e=>{if(e)return this.sendSubscriptionToServer(e);throw i.set("cm_sub","none",8760,"/"),new Error}).catch(e=>{c.debug("initialiseState: exception: ",e)}):(c.debug("Push messaging is not supported"),void i.set("cm_sub","denied",8760,"/")):(c.debug("Service doesn't support notification"),void i.set("cm_sub","denied",8760,"/")):(c.debug("User not authenticated"),void i.set("cm_sub","denied",8760,"/"))}}),d.instance=function(){return d._instance||(d._instance=new d),d._instance},"undefined"!=typeof window&&window.addEventListener("load",()=>{"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then(()=>{d.instance().initializeState()}):c.debug("service worker is not supported")}),t.a=d},"2hPZ":function(e,t,n){const i="undefined"!=typeof window&&window.performance?()=>window.performance.now():()=>Date.now();t.a=(({window:e,duration:t,run:n})=>{const a=i();let o=0,r=null;const s=()=>{const l=i()-a,c=l-o;if(t===1/0)n(0,l,c);else{const e=l/t;if(e>=1)return void n(1,l,c);n(e,l,c)}o=l,r=e.requestAnimationFrame(s)};return{start:()=>{r=e.requestAnimationFrame(s)},cancel:()=>{r&&(e.cancelAnimationFrame(r),r=null)}}})},"2m7L":function(e,t,n){n.d(t,"b",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"l",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"k",function(){return u}),n.d(t,"j",function(){return p}),n.d(t,"i",function(){return m}),n.d(t,"a",function(){return h});const i=20,a=375,o=a-40,r=665,s=72,l=40,c=10,d=28,u=l+2*c,p=s/4,m=840,h=`${a}px 128px`},"3BJc":function(e,t,n){n.d(t,"e",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});const i=e=>({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:{value:e}});function a(e){const t=e.currentTime,n=e.isPromoted;return{type:"SET_CURRENT_VIDEO",payload:{pinId:e.pinId,isPromoted:n,currentTime:t}}}function o(e){return{type:"SET_IS_AUTOPLAY",payload:{isAutoplay:e}}}function r(e){const t=e.currentTime,n=e.isPromoted;return{type:"PAUSE_CURRENT_VIDEO",payload:{currentTime:t,pinId:e.pinId,isPromoted:n}}}function s(e){return{type:"SET_APP_FOCUS_STATE",payload:{appInFocus:e}}}},"3KWM":function(e,t,n){n.d(t,"e",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"h",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"k",function(){return c}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"j",function(){return p}),n.d(t,"i",function(){return m});const i=236,a=24,o=2,r=125,s=16,l=14,c=e=>e||16,d=900,u=24,p=(e=!1)=>e?12:u,m=(e,t,n,i)=>{const a=e+l;return`\n@media (min-width: ${t*a}px) and (max-width: ${(n+1)*a-1}px) {\n  ${i}\n}\n`}},"3Ne9":function(e,t,n){function i(e){return{type:"VL_SELECT_PIN_TAG",payload:{selectedPinTagKey:e}}}n.d(t,"a",function(){return i})},"3Wjl":function(e,t,n){function i(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function a(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function o(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o})},"3XYW":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("s199"),s=n.n(r),l=n("47qe"),c=n.n(l),d=n("Qo1m"),u=(n("IX6r"),n("+U6O"));var p=class extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i={completedCheck:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}initiateCheckAnimation(){const e=this.props,t=e.isCompleted,n=e.idx;t&&setTimeout(()=>{window.requestAnimationFrame(()=>{this.setState({completedCheck:!0})})},500+500*n)}componentDidUpdate(){this.initiateCheckAnimation()}componentDidMount(){this.initiateCheckAnimation()}render(){const e=this.props,t=e.accessibilityLabel,n=e.icon,i=e.children,o=e.isCompleted,r=e.inCheckAnimationExp,s=e.text,l=e.inWebChecklistRedesignExp,c=e.image,d=this.state.completedCheck,p=l?a.a.createElement(u.b,{height:"120px",width:"216px",color:"blue",shape:"rounded",display:"flex",justifyContent:"end",alignItems:"center",direction:"column",dangerouslySetInlineStyle:{__style:{boxShadow:"0 3px 6px rgba(0, 0, 0, .18)"}}},a.a.createElement(u.b,{width:"156px",height:"73px"},a.a.createElement(u.o,{color:"white",src:c,alt:t,naturalHeight:148,naturalWidth:312})),a.a.createElement(u.b,{shape:"roundedBottom",color:"white",bottom:!0,height:"40px",width:"100%",padding:1,dangerouslySetInlineStyle:{__style:{lineHeight:"32px"}}},a.a.createElement(u.J,{size:"lg",bold:!0,align:"center"},s))):a.a.createElement(a.a.Fragment,null,a.a.createElement(u.b,{marginRight:3},r?a.a.createElement("div",{className:d?"CheckListIcon__completed":"CheckListIcon"},a.a.createElement(u.m,{size:18,icon:d?"check":n,accessibilityLabel:d?"done":t,color:d?"white":"blue"})):a.a.createElement(u.b,{padding:4,color:o?"blue":"white",shape:"circle"},a.a.createElement(u.m,{size:18,icon:o?"check":n,accessibilityLabel:o?"done":t,color:o?"white":"blue"}))),i);return a.a.createElement(a.a.Fragment,null,a.a.createElement(u.b,{width:265,alignItems:"center",lgDisplay:"none",mdDisplay:"flex",smDisplay:"flex"},p),a.a.createElement(u.b,{width:265,alignItems:"center",justifyContent:"center",lgDisplay:"flex",mdDisplay:"none",smDisplay:"none"},p))}},m=n("8WpO");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=e=>{return{__style:{transition:`opacity ${e?"0.4":"0.8"}s ease`,opacity:e?1:0,padding:"70px"}}};var b=class extends i.PureComponent{constructor(e){super(e),h(this,"explosionAnimationDelayMS",800),h(this,"completeExperienceDelayMS",3400),h(this,"fadeOutAnimationDelayMS",2600),this.state={fadeCelebrationIn:!1}}componentDidMount(){const e=this.props.handleComplete;window.requestAnimationFrame(()=>this.setState({fadeCelebrationIn:!0})),setTimeout(()=>this.setState({fadeCelebrationIn:!1}),this.fadeOutAnimationDelayMS),setTimeout(e,this.completeExperienceDelayMS)}render(){const e=this.state.fadeCelebrationIn;return a.a.createElement(u.b,{display:"flex",color:"white",alignItems:"center",justifyContent:"center"},a.a.createElement(u.t,{shape:"rounded",width:"100%",height:"100%"},a.a.createElement(m.a,{delay:this.explosionAnimationDelayMS,startAnimation:e},a.a.createElement(u.b,{width:"100%",dangerouslySetInlineStyle:g(e)},a.a.createElement(u.b,{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},a.a.createElement("h1",{style:{color:"#333",zIndex:9999,fontSize:"3em"}},d.a._("You got this!","Celebratory text to encourage user to keep on completing more actions")))))))}},f=n("ePT2"),y=n("g+ED"),v=n.n(y),w=n("ggpB"),E=n("9Y9K"),_=n("UmN8");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"c",function(){return S}),n.d(t,"a",function(){return x});const O=()=>({__style:{transition:"opacity 0.4s ease",opacity:0,backgroundColor:"white"}});function S(e){return new Promise((t,n)=>f.a.create("UserResource",{user_id:e,field_set_key:"pin_actions"}).callGet().then(t).catch(n))}function x(e){return new Promise((t,n)=>f.a.create("UserStateResource",{state:e,value:1}).callCreate().then(t).catch(n))}class k extends i.PureComponent{constructor(e){super(e),C(this,"delayBeforeCompletionMS",5e3),C(this,"celebrationAnimationDelayMS",3500),C(this,"completeAppInstall",()=>{const e=this.props,t=e.didAppInstall,n=e.completeAppInstall;t||(x("HAS_DONE_APP_INSTALL"),n())}),this.state={showCelebration:!1,fadeChecklistOut:!1};const t=e.initialDidPinClickthrough,n=e.initialDidPinCloseup,i=e.initialDidPinSave,a=e.initialDidAppInstall,o=e.updatePinActions;let r=e.didPinClickthrough,s=e.didPinCloseup,l=e.didPinSave,c=e.didAppInstall;t&&(r=!0),n&&(s=!0),i&&(l=!0),a&&(c=!0),o({didPinClickthrough:r,didPinCloseup:s,didPinSave:l,didAppInstall:c})}startCelebrationAnimation(){setTimeout(()=>{window.requestAnimationFrame(()=>{this.setState({fadeChecklistOut:!0}),window.requestAnimationFrame(()=>{this.setState({showCelebration:!0})})})},this.celebrationAnimationDelayMS)}componentDidMount(){const e=this.props,t=e.experienceId,n=e.handleComplete,i=e.initialDidPinClickthrough,a=e.initialDidPinCloseup,o=e.initialDidPinSave,r=e.initialDidAppInstall,s=e.checklistExpGroup;let l=this.props,c=l.didPinClickthrough,d=l.didPinCloseup,u=l.didPinSave,p=l.didAppInstall;if(i&&(c=!0),a&&(d=!0),o&&(u=!0),r&&(p=!0),(501370===t?p:c)&&d&&u){"check_celebration_animation"===s||"celebration_animation"===s||"enabled"===s?this.startCelebrationAnimation():setTimeout(n,this.delayBeforeCompletionMS)}}render(){const e=this.props,t=e.experienceId,n=e.didPinClickthrough,a=e.didPinCloseup,o=e.didPinSave,r=e.didAppInstall,l=e.handleDismiss,m=e.checklistExpGroup,h=e.handleComplete,g=e.inWebChecklistRedesignExp,f=this.state,y=f.showCelebration,E=f.fadeChecklistOut,_="check_animation"===m||"check_celebration_animation"===m||"enabled"===m;let C;C=(501370===t?r:n)&&a&&o?d.a._("You're ready! Keep exploring to find your next great idea","user completed list of actions below the header"):o?d.a._("Saved! Each Pin you save improves your feed","user completed a pin save and the header text is changing"):n?d.a._("See! Every Pin links to the website it came from","user completed a pin clickthrough and the header text is changing"):r?d.a._("Nice! The app offers a faster Pinterest experience on the go","user has a todo checklist item to install the mobile app from the google play or apple store"):a?d.a._("Nice find! You can click any Pin to learn more about it","user completed a closeup and the header text is changing"):d.a._("Here's how to get the most out of Pinterest","user has a list of actions below the header to complete");const S=[{name:"closeup",accessibilityLabel:"closeup",icon:"arrow-up-right",text:d.a._("Click on a Pin you like","explaining what to do to complete the closeup step of checklist"),isCompleted:a,image:c.a},{name:"repin",accessibilityLabel:"save",icon:"pin",text:d.a._("Save it for later","explaining what to do to complete the pin save step of checklist"),isCompleted:o,image:v.a},501370===t?{name:"appInstall",accessibilityLabel:"link",icon:"download",text:d.a._("Install the app","explaining what to do to complete the app install step of checklist"),isCompleted:r,image:""}:{name:"clickthrough",accessibilityLabel:"link",icon:"globe",text:d.a._("Visit the link it's from ","explaining what to do to complete the clickthrough step of checklist"),isCompleted:n,image:s.a}];return i.createElement(u.G,{dangerouslySetZIndex:{__zIndex:2},top:60},y?i.createElement(b,{handleComplete:h}):i.createElement(u.b,{dangerouslySetInlineStyle:E?O():null},i.createElement(u.b,{color:g?"transparent":"lightGray",display:"flex",dangerouslySetInlineStyle:{__style:{overflow:"hidden"}}},i.createElement(u.b,{display:"flex",alignItems:"center",justifyContent:"center",paddingX:12,paddingY:8,color:g?"transparent":"blue",maxWidth:550,width:"100%",dangerouslySetInlineStyle:{__style:{borderTopRightRadius:"80px 380px"}}},i.createElement(u.l,{size:"sm",color:g?"darkGray":"white",overflow:"normal"},C)),i.createElement(u.b,{position:"absolute",top:!0,right:!0,paddingY:2,paddingX:5},i.createElement(u.n,{accessibilityLabel:d.a._("Hide Checklist","hide the checklist of pin actions at the top of the homefeed"),icon:"cancel",onClick:l,size:"sm"})),i.createElement(u.b,{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},i.createElement(u.b,{display:"flex",padding:4,marginStart:-4,marginEnd:-4,marginTop:-2,marginBottom:-2,maxWidth:900,width:"100%",wrap:!0},S.map(({name:e,icon:t,accessibilityLabel:n,text:a,isCompleted:o,image:r},s)=>i.createElement(u.g,{key:a,lgSpan:4,span:12},i.createElement(u.b,{display:"flex",justifyContent:"center",paddingX:4,paddingY:2},i.createElement("div",{onClick:()=>Object(w.a)(`checklist.${e}.click`)},i.createElement(p,{idx:s,accessibilityLabel:n,icon:t,isCompleted:o,inCheckAnimationExp:_,text:a,inWebChecklistRedesignExp:g,image:r},i.createElement(u.b,null,i.createElement(u.J,{size:"xl"},a),"appInstall"===e&&i.createElement(u.b,{direction:"column"},i.createElement(u.J,{size:"sm"},i.createElement(u.b,{display:"flex"},i.createElement(u.b,{marginEnd:3},i.createElement(u.s,{href:"https://bnc.lt/unauth-android-upsell-desktop-web",target:"blank",inline:!0,onClick:this.completeAppInstall},d.a._("Google Play","Button that links to Google Play Pinterest Android App"))),i.createElement(u.s,{href:"https://bnc.lt/unauth-ios-upsell-desktop-web",target:"blank",inline:!0,onClick:this.completeAppInstall},d.a._("Apple App Store","Button that links to Apple App Store Pinterest Android App"))))))))))))))),g&&i.createElement(u.i,null))}}t.b=Object(E.compose)(Object(o.connect)(({ui:{checklist:{didPinCloseup:e,didPinClickthrough:t,didPinSave:n,didAppInstall:i}}})=>({didPinCloseup:e,didPinClickthrough:t,didPinSave:n,didAppInstall:i}),e=>({updatePinActions:t=>e({type:"UPDATE_PIN_ACTIONS",payload:t}),completeAppInstall:()=>e({type:"COMPLETE_APP_INSTALL"})})))(e=>i.createElement(_.a,{name:"web_checklist_check_celebration_animation"},({group:t})=>i.createElement(_.a,{name:"web_checklist_redesign"},({anyEnabled:n})=>i.createElement(k,Object.assign({},e,{checklistExpGroup:t,inWebChecklistRedesignExp:n})))))},"3hnx":function(e,t,n){n.d(t,"m",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"o",function(){return c}),n.d(t,"n",function(){return d}),n.d(t,"l",function(){return u}),n.d(t,"p",function(){return p}),n.d(t,"h",function(){return m}),n.d(t,"j",function(){return h}),n.d(t,"k",function(){return g}),n.d(t,"i",function(){return b}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return y});const i=171,a=85,o=40,r=20,s=8,l=4,c=106,d=133,u=16,p=5,m=1.25,h=.2,g=.1,b=10,f=246,y=197},4081:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("HcgI"),s=n("+U6O");t.a=Object(o.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}))(({carousel_data:e,title:t})=>{let n=t;if(e){const t=e.carousel_slots,i=void 0===t?[]:t,a=e.index;i[a]&&i[a].title&&(n=i[a].title)}const i=e?{height:"40px",overflow:"hidden"}:{};return a.a.createElement(s.b,{dangerouslySetInlineStyle:{__style:i},paddingY:1},a.a.createElement(s.J,{size:"sm",bold:!0},a.a.createElement(r.a,{text:n,options:{hashtags:{appendText:`${n}`,source:"hashtag_pinrep"}}})))})},"47qe":function(e,t){e.exports="https://s.pinimg.com/webapp/style/images/closeupImage-c3c6ddf3.png"},"4OrY":function(e,t,n){n.d(t,"a",function(){return o});const i=80,a="…";function o(e,t={}){const n=t.maxLength,o=void 0===n?i:n,r=t.suffix,s=void 0===r?a:r;return e.length<=o?e:e.substring(0,o-1).replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,"")+s}},"4e+M":function(e,t,n){n.d(t,"a",function(){return p}),n.d(t,"b",function(){return h});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("dsfX"),s=n("iJ35"),l=n("QJ2d"),c=n("Irlq"),d=n("+U6O"),u=n("cemY");const p={closed:0,open:1,completed:2},m=l.a.settings.CANONICAL_HELP_CENTER_URL+"/article/suspicious-links";function h({altLinks:e,handleModalCompleteAltClickthrough:t,handleModalCompleteOriginalClickthrough:n,handleModalDismiss:i,pin:l}){const p=Object(u.k)({pin:l}),h=(Object(u.j)(p)||{}).link,g=o.a._("close","accessible label for button to close alternate links modal"),b=o.a._("This link is suspicious.","Label for a modal warning the user that the clickthough link may be suspicious, and suggesting available alternatives"),f=o.a._("Heads up: This link may not work","Header for modal warning user about 404 clickthrough link"),y=a.a.createElement(d.J,{inline:!0,bold:!0,key:"suspicious links hc"},a.a.createElement(d.s,{inline:!0,href:m,target:"blank"},o.a._("Learn more","Text link for learning more about suspicous links"))),v=a.a.createElement(d.J,null,Object(c.b)(o.a._("This link may be broken or outdated. {{ learnMore }}","Subheader for modal warning user about 404 clickthrough link"),{learnMore:y})),w=a.a.createElement(d.b,{display:"flex"},a.a.createElement(d.b,{alignItems:"center",display:"flex",marginEnd:2},a.a.createElement(d.m,{accessibilityLabel:o.a._("Warning: suspicious link","Icon for suspicious clickthrough link"),icon:"report",color:"red",inline:!0})),a.a.createElement(d.J,{bold:!0},l.domain)),E=a.a.createElement(s.b,{external:!0,onClick:n,pinId:l.id,to:h},a.a.createElement(d.c,{size:"md",text:o.a._("Visit anyway","Disregard bad clickthrough warning"),accessibilityLabel:o.a._("Visit link anyway","Accessible label for bad link modal button to complete clickthrough")})),_=a.a.createElement(d.c,{color:"red",size:"md",text:o.a._("Cancel","Cancel clickthrough and go back to the closeup"),accessibilityLabel:o.a._("Cancel and return to closeup","Accessible label for bad link modal cancel button"),onClick:i}),C=a.a.createElement(r.b,{accessibilityCloseLabel:g,accessibilityModalLabel:b,heading:f,onDismiss:i,size:"sm"},a.a.createElement(d.b,{paddingX:9,paddingY:5},v,a.a.createElement(d.b,{alignItems:"center",display:"flex",justifyContent:"between",marginTop:4},w),a.a.createElement(d.b,{marginTop:7},E),a.a.createElement(d.b,{marginTop:4,marginBottom:5},_))),O=e&&a.a.createElement(d.J,null,o.a.ngettext("Maybe try this one?","Maybe try one of these?",e.length,"Alternate clickthrough links if the link is suspicious")),S=e.map(e=>e&&a.a.createElement(d.b,{alignItems:"center",display:"flex",justifyContent:"between",paddingY:2,key:e.url},a.a.createElement(d.b,{display:"flex"},a.a.createElement(d.b,{alignItems:"center",display:"flex",marginEnd:2},a.a.createElement(d.m,{accessibilityLabel:o.a._("Alternative link","Icon for alternative clickthrough link"),icon:"arrow-up-right",color:"gray",inline:!0})),a.a.createElement(d.J,{bold:!0},e.domain)),a.a.createElement(s.b,{external:!0,onClick:t,pinId:l.id,to:e.url},a.a.createElement(d.c,{size:"md",text:o.a._("Visit","Visit alternative clickthrough link"),accessibilityLabel:o.a._("Visit alternative link","Accessible label for bad link modal button to clickthrough alternative link"),inline:!0})))),x=a.a.createElement(r.b,{accessibilityCloseLabel:g,accessibilityModalLabel:b,heading:f,onDismiss:i,size:"sm"},a.a.createElement(d.b,{padding:8},v,a.a.createElement(d.b,{alignItems:"center",display:"flex",justifyContent:"between",marginTop:8,marginBottom:8},w,E),a.a.createElement(d.b,{marginBottom:2},O),a.a.createElement(d.b,{marginBottom:2},S),a.a.createElement(d.b,{padding:4},_)));return 0===e.length?C:x}},"4fCo":function(e,t,n){var i=n("Ivf5");t.a=Object(i.connect)(({viewer:e})=>({viewer:e}))(({children:e,viewer:t})=>e(t))},"4gpq":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("oko/"),s=n("9Y9K"),l=n("k9eC"),c=n("NmcB"),d=n("2YES"),u=n("+U6O");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=()=>{},h=(e,t,n,i,a,o,r,s,l)=>{if(!l){const l=i.carousel_slots,d=i.id;Object(c.a)(108,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}({},s,{objectId:e,component:r,view:o,viewParameter:a,eventData:{pinCarouselSlotEventData:{carouselSlotId:l[t]&&Number(l[t].id),carouselDataId:Number(d),carouselSlotIndex:t,toCarouselSlotIndex:n}}}))}};t.a=Object(s.compose)(d.e,Object(o.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}),e=>({changeCarouselSlotIndex:(t,n)=>e(Object(r.a)(t,n))})))(class extends a.a.Component{constructor(...e){super(...e),p(this,"state",{isHovered:!1}),p(this,"handleMouseEnter",()=>{this.setState({isHovered:!0})}),p(this,"handleMouseLeave",()=>{this.setState({isHovered:!1})})}render(){const e=this.props,t=e.carouselIndex,n=e.carousel_data,i=e.changeCarouselSlotIndex,o=e.handleCarouselSwipe,r=e.isCloseup,s=e.pinId,c=e.contextLogData,d=e.requestContext,p=e.viewParameter,g=e.viewType,b=e.componentType,f=e.isEditMode,y=e.closeupImageHovered,v=void 0!==y&&y,w=e.variant,E=this.state.isHovered,_=n.carousel_slots,C=void 0===_?[]:_,O=n.index,S=void 0!==t?t:O,x="default"===w,k=!r&&new l.c(d,"web_carousel_pip_improvements").enabled();d.experiments.flush();const I=k?10:x&&r||!r?8:16,P=r&&x||k?2:1,T={__style:{backgroundColor:E?"rgba(0, 0, 0, 0.05)":v?"rgba(0, 0, 0, 0)":"rgba(0, 0, 0, 0.7)"}},j=x?"white":"#555",R=x?"rgba(255, 255, 255, 0.5)":"lightGray",D=[];for(let l=0;l<C.length;l+=1){const e=l===S;D.push(a.a.createElement(u.b,{key:s+l,marginRight:l!==C.length-1?P:0},a.a.createElement(u.O,{fullWidth:!1,shape:"circle",onTouch:({event:e})=>{f||void 0===i||(e.preventDefault(),e.stopPropagation(),i(String(s),l)),void 0!==o&&o(l),h(s,S,l,n,p,g,b,c,f)}},a.a.createElement(u.b,{"data-test-id":"ellipsis-size",height:I,width:I,dangerouslySetInlineStyle:{__style:{backgroundColor:e?j:R}},shape:"circle"}))))}return a.a.createElement(u.b,Object.assign({"data-test-id":"carousel-ellipsis",display:"flex"},x&&r&&!k?{shape:"pill",height:44,justifyContent:"center",alignItems:"center",paddingX:4,dangerouslySetInlineStyle:T}:{marginTop:1,marginLeft:f?2:-2,marginBottom:f?1:0,justifyContent:k?"center":"start",alignItems:k?"center":"stretch"},{onMouseEnter:x?this.handleMouseEnter:m,onMouseLeave:x?this.handleMouseLeave:m}),D)}})},"4mdS":function(e,t,n){n.d(t,"a",function(){return d});var i=n("GyhR"),a=n.n(i),o=n("6wLB"),r=n("yXM0"),s=n("+U6O"),l=n("UmN8");function c(e){return a.a.createElement(s.b,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"}},"data-test-id":"PinTypeIdentifier"},e)}function d({pin:e,allowShoppingPriceIndicator:t}){const n=Object(o.a)(e);if(n.isGif)return c("GIF");if(n.isStoryPin)return c("Story");if(n.isVideo){const t=e.videos,n=(t&&t.video_list&&t.video_list[Object.keys(t.video_list)[0]]||{}).duration,i=void 0===n?0:n;return c(Object(r.a)(i))}if(n.isCarousel){const t=e.carousel_data||{},n=t.carousel_slots,i=void 0===n?[]:n,a=t.index;return c(`${(void 0===a?0:a)+1}/${i.length}`)}if(n.isProduct&&t){const t=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary,n=t&&(t.price||t.max_price);return n?a.a.createElement(l.a,{name:"web_shopping_surface_price_pill"},({anyEnabled:e})=>e&&c(n)):null}return null}},"5Iwg":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("+U6O");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),r(this,"state",{isHovering:!1}),r(this,"onHover",()=>{this.setState({isHovering:!0})}),r(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const e=this.props,t=e.name,n=e.selected,i=e.image;return e.inFlyoutExp?a.a.createElement(o.b,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover},a.a.createElement(o.b,null,a.a.createElement(o.t,{height:40,width:40,shape:"rounded"},this.state.isHovering&&i?a.a.createElement(o.o,{alt:"",color:"",fit:"cover",naturalHeight:i.height,naturalWidth:i.width,src:i.url}):a.a.createElement(o.b,{color:"lightGray",height:40,width:40}))),a.a.createElement(o.b,{padding:2},a.a.createElement(o.J,{bold:!0,size:"xl"},t))):a.a.createElement(o.b,{alignItems:"center",color:n?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2},a.a.createElement(o.b,null,a.a.createElement(o.m,{color:n?"darkGray":"gray",icon:"add",accessibilityLabel:""})),a.a.createElement(o.b,{marginLeft:3},a.a.createElement(o.J,{color:n?"darkGray":"gray",bold:!0,size:"lg"},t)))}}var l=n("Qo1m"),c=n("SMmS"),d=n("lixz"),u=n("NmcB");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=-1;t.a=Object(c.b)({name:"BoardTitleSuggestionsResource",options:({pinId:e})=>({pin_id:e}),key:"boards"})(class extends i.Component{constructor(e){super(e),p(this,"_processSuggestions",e=>e&&e.length?e.map(e=>e.title):[]),p(this,"handleClick",e=>{const t=this.state.suggestedBoardsNames;(0,this.props.onBoardSelected)(t[e],!1),Object(u.a)(101,{component:13025,element:23})}),p(this,"handleMouseEnter",e=>{this.setState({selectedIndex:e})}),p(this,"handleMouseLeave",()=>{this.setState({selectedIndex:m})}),p(this,"renderSuggestionRow",(e,t)=>{const n=this.state.selectedIndex===t;return a.a.createElement("li",{key:t},a.a.createElement(o.O,{onTouch:()=>this.handleClick(t),onMouseEnter:()=>this.handleMouseEnter(t),onMouseLeave:this.handleMouseLeave},a.a.createElement(s,{selected:n,name:e,inFlyoutExp:this.props.inFlyoutExp,image:this.props.image})))}),this.state={selectedIndex:m,suggestedBoardsNames:this._processSuggestions(e.boards)}}UNSAFE_componentWillReceiveProps(e){this.setState({suggestedBoardsNames:this._processSuggestions(e.boards)})}componentDidUpdate(e){!e.resourceLoaded&&this.props.resourceLoaded&&this.props.inFirstBoardCreateGestaltExp&&this.setPWTLoadingEnd()}setPWTLoadingEnd(){Object(d.f)(16,{error:!!this.props.error})}renderGestaltBoardSuggestionList(){return l.a._("Suggested board names","text above suggested board names list"),a.a.createElement(o.b,null,a.a.createElement(o.b,{marginTop:5,marginLeft:6,marginBottom:3},a.a.createElement(o.J,{size:"md"},l.a._("Suggested board names"))),a.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}renderPreviewBoardSuggestionList(){return a.a.createElement("div",null,a.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}render(){const e=this.props,t=e.inFirstBoardCreateGestaltExp,n=e.inFlyoutExp,i=e.minHeight;if(!e.resourceLoaded)return a.a.createElement(o.b,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:i||""},a.a.createElement(o.F,{accessibilityLabel:l.a._("Loading board suggestions","Accesibility label for loading board suggestions"),show:!0}));const r=this.state.suggestedBoardsNames;return r&&r.length?n?this.renderPreviewBoardSuggestionList():t?this.renderGestaltBoardSuggestionList():a.a.createElement(o.b,null,a.a.createElement(o.b,{marginTop:2,paddingX:5},a.a.createElement(o.J,null,l.a._("Suggested board names"))),a.a.createElement("ul",null,r.map(this.renderSuggestionRow))):null}})},"5uNi":function(e,t,n){n.d(t,"a",function(){return w}),n.d(t,"b",function(){return E});var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("4fCo"),s=n("Qo1m"),l=n("OLQZ"),c=n.n(l),d=n("YkTi"),u=n("9Y9K"),p=n("+U6O"),m=n("Y2BC"),h=n("v7Si");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=50,f=10;class y extends i.Component{constructor(...e){super(...e),g(this,"setRef",e=>{e&&!this.list&&(this.list=e.parentElement,this.list&&this.list.addEventListener("scroll",this.handleScroll))}),g(this,"fetchMore",()=>{const e=this.props.feedResource;e.isFetching||(e.isAtEnd?window.removeEventListener("scroll",this.handleScroll):e.fetchMore())}),g(this,"handleScroll",c()(()=>{const e=this.props.feedResource;if(e.isFetching||e.isAtEnd)return;const t=Object(h.a)(this.list);Object(h.c)(this.list)-Object(h.d)(this.list)-b<t&&this.fetchMore()},f))}componentWillUnmount(){this.list.removeEventListener("scroll",this.handleScroll)}render(){const e=this.props,t=e.feedResource,n=t.data,i=t.isLoaded,o=t.isFetching,l=e.users;if(i&&n&&n.length>0&&!o){const e=n.map(e=>e.id?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){g(e,t,n[t])})}return e}({},e,l[e.id]):e);return a.a.createElement(r.a,null,t=>a.a.createElement("div",{style:{maxHeight:"400px"},ref:this.setRef,"data-test-id":"liked-by-list"},e.map(e=>a.a.createElement(d.a,{isSelf:t.id&&e.id===t.id,className:"p2 communityItem",key:e.id,showFollow:!0,showName:!0,size:"medium",user:e,viewType:"thumb"}))))}return a.a.createElement("div",{className:"loadingSpinner"},a.a.createElement(p.F,{accessibilityLabel:s.a._("Loading spinner for like list","Accessibility label for loading spinner for like list"),show:!0}))}}const v=(e,t)=>({users:e.users}),w=Object(u.compose)(Object(m.b)({name:"AggregatedCommentLikedByResource",options:e=>({aggregatedCommentId:e.id}),key:"feedResource"},{allowStale:!1}),Object(o.connect)(v))(y),E=Object(u.compose)(Object(m.b)({name:"DidItLikedByResource",options:e=>({didItDataId:e.id}),key:"feedResource"},{allowStale:!1}),Object(o.connect)(v))(y)},"66xa":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("+U6O"),r=n("PNko"),s=n.n(r),l=n("mwLX");function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=136;function p(e){const t=e.hasBrioCorners,n=e.idx,i=e.imageFit,r=e.imageSize,d=e.inUnifiedComments,p=e.isFullWidth,g=e.item,b=e.itemHeight,f=e.itemWidth,y=e.numItemsShow,v=e.previewItemCount,w=e.variant,E=g.description,_=g.images,C=g.type;if(C&&C!==l.b.PIN)return null;const O=_&&_[r],S=p?v-y:Math.min(v-y,99);return a.a.createElement("span",{className:s()("previewRowItem",c({previewRowFullWidthItem:p,fourPixelMask:!p},"default"===w?{hasLegoBrioCorners:!0}:{hasBrioCorners:t},d?{unifiedCommentBorder:!0}:{})),key:n},a.a.createElement(o.r,{width:f||b||h,height:b||m,contentAspectRatio:1},O&&a.a.createElement(o.o,Object.assign({alt:E||""},i?{fit:"cover"}:{},{naturalHeight:u,naturalWidth:u,src:(O||{}).url}),n===y-1&&S>0&&!d&&a.a.createElement(o.b,{flex:"grow",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.2)",height:"100%"}}},a.a.createElement(o.J,{bold:!0,size:p?"xl":"sm",color:"white"},"+"+S)))))}n.d(t,"a",function(){return m}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return f});const m=60,h=40,g=4,b=5;function f(e){const t=e.hasBrioCorners,n=void 0!==t&&t,i=e.imageFit,r=e.imageSize,s=void 0===r?"136x136":r,l=e.inUnifiedComments,c=void 0!==l&&l,d=e.isFullWidth,u=e.itemHeight,m=e.itemWidth,h=e.previewItemCount,f=e.previewItems,y=void 0===f?[]:f,v=e.showEmptyCards,w=e.variant,E=c?b:g,_=v?E:Math.min(y.length,E),C=Array.from(new Array(_)),O=new Set;return a.a.createElement(o.b,c?{display:"flex",justifyContent:"center"}:{},C.map((e,t)=>{const o=y[t]||{},r=o.image_signature;return r&&O.has(r)?null:(O.add(r),a.a.createElement(p,{hasBrioCorners:n,idx:t,imageFit:i,imageSize:s,inUnifiedComments:c,isFullWidth:d,item:o,itemHeight:u,itemWidth:m,key:t,numItemsShow:E,previewItemCount:h,variant:w}))}).filter(e=>e))}},"6iNl":function(e,t,n){n.d(t,"a",function(){return f});var i=n("GyhR"),a=n.n(i),o=n("jmSR"),r=n.n(o),s=n("NmcB"),l=n("+U6O");function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=1e3,p=300,m=1e3,h=250,g=(e,t)=>typeof e!=typeof t||(Array.isArray(t)?e.length!==t.length||t.some((t,n)=>!Array.isArray(e)||t.type!==e[n].type||t.src!==e[n].src):t!==e);function b(){return(new Date).getTime()}class f extends a.a.PureComponent{constructor(...e){super(...e),d(this,"state",{canPlayVideo:!1,isManifestParsed:!1}),d(this,"setVideoPlayerRef",e=>{const t=this.props.setVideoRef;this.videoPlayerRef=e,t&&t(e),this.videoPlayerRef&&this.videoPlayerRef.video&&this.videoPlayerRef.video.addEventListener("canplay",()=>{this.setState({canPlayVideo:!0})})}),d(this,"currentVideoTime",0),d(this,"hls",null),d(this,"playbackPerformance",{fatalErrorMsg:"",firstLevelFetchTime:0,firstFragmentParsedTime:0,hasFatalError:!1,levelWatchDurationsMs:[],numStalls:0,rebufferingDurationMs:0,videoCreatedTime:0}),d(this,"initializeHls",()=>{this.destroyHls();const e=this.props,t=e.src,n=e.hlsConfig,i=new r.a(n);i.loadSource(t),this.videoPlayerRef&&i.attachMedia(this.videoPlayerRef.video),i.on(r.a.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0}),this.startVideoWatchTimings()}),i.on(r.a.Events.FRAG_PARSED,(e,t)=>{this.playbackPerformance.firstFragmentParsedTime||(this.playbackPerformance.firstFragmentParsedTime=b())}),i.on(r.a.Events.LEVEL_LOADING,(e,t)=>{this.playbackPerformance.firstLevelFetchTime||(this.playbackPerformance.firstLevelFetchTime=b())}),i.on(r.a.Events.ERROR,(e,t)=>{t.fatal&&(this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.fatalErrorMsg=t.details),t.details===r.a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.playbackPerformance.numStalls+=1,t.buffer&&(this.playbackPerformance.rebufferingDurationMs+=t.buffer*m))}),this.hls=i}),d(this,"destroyHls",()=>{const e=this.hls;e&&e.destroy(),window.clearInterval(this.videoTimeIntervalId)}),d(this,"startVideoWatchTimings",()=>{window.clearInterval(this.videoTimeIntervalId),this.videoTimeIntervalId=window.setInterval(()=>{if(!this.hls||this.hls.currentLevel<=0||!this.videoPlayerRef||!this.videoPlayerRef.video)return;const e=this.videoPlayerRef.video.currentTime*m,t=this.playbackPerformance.levelWatchDurationsMs;if(t.length){if(this.hls.currentLevel!==t[t.length-1].level){const n=t.length-1;t[n].duration+=this.currentVideoTime-t[n].lastStartSegmentTime,t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0})}else if(e<this.currentVideoTime||e-this.currentVideoTime>p){const n=t.length-1;t[n].duration+=this.currentVideoTime-t[n].lastStartSegmentTime,t[n].lastStartSegmentTime=e}}else t.push({level:this.hls.currentLevel,lastStartSegmentTime:e,duration:0});this.currentVideoTime=e},h)})}componentDidMount(){this.playbackPerformance.videoCreatedTime=b(),this.initializeHls()}componentDidUpdate(e){const t=this.props.src;g(e.src,t)&&this.initializeHls()}componentWillUnmount(){const e=this.playbackPerformance,t=e.firstLevelFetchTime,n=e.firstFragmentParsedTime,i=e.hasFatalError,a=e.levelWatchDurationsMs,o=e.numStalls,r=e.rebufferingDurationMs,l=e.videoCreatedTime,c=this.videoPlayerRef&&this.videoPlayerRef.video;if(this.hls&&c&&a.length>0){const e=this.hls.levels,d=e[a[0].level],p=c.currentTime*m;a[a.length-1].duration+=p-a[a.length-1].lastStartSegmentTime;const h=a.reduce((t,n)=>{return t+n.level*e[n.level].bitrate*(n.duration||0)/m},0),g=a.reduce((e,t)=>e+(t.duration||0),0);Object(s.a)(3606,{eventData:{videoPerformanceData:{startupTimeMs:n-t,startupLatencyMs:n-l,nativeVideoDurationMs:c.duration*m,startupVariantKbps:d.bitrate/u,startupPlayerWidth:c.clientWidth,startupPlayerHeight:c.clientHeight,startupVariantWatchedDurationMs:a[0].duration,startupVariantWidth:d.width,isCellular:!1,fatalError:i,averageVideoKbps:h/(g/m),overallWatchedDurationMs:g,numberOfStalls:o,rebufferRate:r/g}}})}this.destroyHls()}render(){const e=this.props,t=e.playing,n=(e.hlsConfig,e.setVideoRef,e.src),i=c(e,["playing","hlsConfig","setVideoRef","src"]),o=this.state,r=o.canPlayVideo,s=o.isManifestParsed;return a.a.createElement(l.P,Object.assign({},i,{ref:this.setVideoPlayerRef,playing:s&&r&&t,src:n}))}}},"6wLB":function(e,t,n){n.d(t,"a",function(){return o});var i=n("zBQm");const a=()=>({isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1});function o(e){const t=e.access,n=e.attribution,o=e.buyable_product,r=e.carousel_data,s=e.embed,l=e.is_eligible_for_web_closeup,c=e.rich_summary,d=e.story_pin_data_id,u=e.videos,p=a();r&&(p.isCarousel=!0),l&&(p.isOneTap=!0),Object(i.i)(u)&&(p.isVideo=!0);const m=s||n&&n.embed||null;return m&&"gif"===m.type&&(p.isGif=!0),(o||c&&"product"===c.type_name)&&(p.isProduct=!0),c&&"recipe"===c.type_name&&(p.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(p.isPromoted=!0),(t||[]).includes("write")&&(p.isOwnPin=!0),d&&(p.isStoryPin=!0),p}},"70u7":function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("+U6O"),r=n("yzmC"),s=n("z/cr");const l=344;function c({children:e,isWideVideo:t=!1}){return a.a.createElement(r.a.Consumer,null,({showCloseupContentRight:n,viewportSize:i})=>n&&"wide"===i||t?a.a.createElement(o.b,{marginBottom:6,width:t?void 0:l,maxWidth:t?s.l:void 0,minWidth:t?s.m:void 0},e):e)}},"87dN":function(e,t,n){n.d(t,"a",function(){return s});var i=n("Ivf5");const a=[1000069,1000075],o={};function r(e){return a.forEach(t=>{!e[t]||void 0!==o[t]&&o[t].id===e[t].id||(o[t]=e[t])}),o}function s(e){return Object(i.connect)(e=>({lfvExperiences:r(e.experiences.eligibleExperiences)}))(e)}},"8WpO":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("+U6O");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=["#4A90E2","#0FA573","#B469EB","#F13535","#E2780D"],l=120,c=800,d=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),u=e=>e*(Math.PI/180);class p extends i.PureComponent{constructor(...e){super(...e),r(this,"animationTimer",null),r(this,"canvasRemovalTimer",null),r(this,"containerRef",Object(i.createRef)()),r(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;const e=this.containerRef.current.getBoundingClientRect(),t=e.height,n=e.width,i=2.5*t,a=document.createElement("canvas");return a.style.position="absolute",a.style.left=`${0-(i-n)/2}px`,a.style.top=`${0-(i-t)/2}px`,a.style.pointerEvents="none",a.style.width=`${i}px`,a.style.height=`${i}px`,a.style.overflow="visible",a.width=i,a.height=i,a}),r(this,"explode",()=>{const e=this.buildCanvas();if(!e)return;const t=this.containerRef.current,n=e.getContext("2d");t.prepend(e);const i=Array.from(Array(l)).map((t,n)=>({x:e.width/2,y:e.height/2,radius:Math.round(d(10,30)),color:s[Math.floor(Math.random()*s.length)],degree:Number(d(0,360).toFixed(1)),speed:Math.round(d(0,25)),friction:.9,opacity:Number(d(0,.5).toFixed(1)),yVel:0,gravity:.04})),a=(e,t,n,i)=>{window.requestAnimationFrame(()=>a(e,t,n,i)),t.clearRect(0,0,n,i),e.forEach((e,n)=>{e.x+=e.speed*Math.cos(u(e.degree)),e.y+=e.speed*Math.sin(u(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};a(i,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},this.props.delay+c)})}componentDidUpdate(e){const t=this.props,n=t.delay,i=t.startAnimation,a=e.startAnimation;i&&a!==i&&(this.animationTimer=setTimeout(this.explode,n))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return a.a.createElement(o.b,{ref:this.containerRef,position:"relative"},this.props.children)}}r(p,"defaultProps",{delay:0}),t.a=p},"8rWZ":function(e,t,n){var i=n("GyhR"),a=n("0mUz"),o=n("ximl");t.a=(e=>i.createElement(o.a,Object.assign({},e,{timeSpentManager:a.a})))},"91Tc":function(e,t,n){n.r(t);var i=n("xk7t"),a=n.n(i);const o={ready:function(e,t){a.a.ready(e,t)},load:function(e,t,n){o.ready(e,()=>{0===t.lastIndexOf("//",0)&&(t=window.location.protocol+t),a()(t,n)})},done:function(e){a.a.done(e)}};t.default=o},"9Hv/":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("wQ8Q"),s=n("iJ35"),l=n("QmNf"),c=n("Vw3o"),d=n("jcaw"),u=n("+U6O");var p=function({user:e}){const t=e.reactionType,n=e.username;return a.a.createElement(u.b,{alignItems:"center",direction:"row",display:"flex",margin:4},a.a.createElement(u.b,null,a.a.createElement(r.a,{user:e})),a.a.createElement(u.b,{flex:"grow",paddingX:3},a.a.createElement(s.b,{to:`/${n}/`},a.a.createElement(u.J,{bold:!0,truncate:!0},Object(d.e)(e)),a.a.createElement(u.J,{color:"gray",size:"xs",truncate:!0},n))),a.a.createElement(u.b,null,a.a.createElement(c.a,{backgroundColor:l.a[t].backgroundColor,iconColor:l.a[t].iconColor,reactionType:t})))},m=n("4fCo"),h=n("Qo1m"),g=n("OLQZ"),b=n.n(g),f=n("9Y9K"),y=n("Y2BC"),v=n("v7Si");function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return S}),n.d(t,"a",function(){return x});const E=50,_=10;class C extends i.Component{constructor(...e){super(...e),w(this,"setRef",e=>{e&&!this.list&&(this.list=e.parentElement,this.list&&this.list.addEventListener("scroll",this.handleScroll))}),w(this,"fetchMore",()=>{const e=this.props.feedResource;e.isFetching||(e.isAtEnd?window.removeEventListener("scroll",this.handleScroll):e.fetchMore())}),w(this,"handleScroll",b()(()=>{const e=this.props.feedResource;if(e.isFetching||e.isAtEnd)return;const t=Object(v.a)(this.list);Object(v.c)(this.list)-Object(v.d)(this.list)-E<t&&this.fetchMore()},_))}componentWillUnmount(){this.list.removeEventListener("scroll",this.handleScroll)}render(){const e=this.props,t=e.feedResource.data,n=e.users;if(t&&t.length){const e=t.map(e=>{const t=e.user,i=e.reaction_type;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){w(e,t,n[t])})}return e}({},t,n[t.id],{reactionType:i})});return a.a.createElement("div",{style:{maxHeight:"400px"},ref:this.setRef},a.a.createElement(m.a,null,t=>e.map(e=>a.a.createElement(p,{key:e.id,user:e}))))}return a.a.createElement("div",{className:"loadingSpinner"},a.a.createElement(u.F,{accessibilityLabel:h.a._("Loading user list","Accessibility lable for user list spinner"),show:!0}))}}const O=e=>({users:e.users||{}}),S=Object(f.compose)(Object(o.connect)(O),Object(y.b)({name:"BoardActivityReactionFeedResource",key:"feedResource",options:e=>({activityId:e.activityId,activityType:e.activityType})}))(C),x=Object(f.compose)(Object(o.connect)(O),Object(y.b)({name:"BoardActivityCommentReactionFeedResource",key:"feedResource",options:e=>({activityId:e.activityId,activityType:e.activityType})}))(C)},"9SSN":function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n.n(i),o=n("+U6O"),r=n("rVpF");const s=(e,t)=>({hidden:{opacity:0,transition:t?`opacity ${t}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}});function l({visibility:e,children:t,fadeInDuration:n=0,fadeOutDuration:i=r.a}){return"none"!==e&&t?a.a.createElement(o.b,{dangerouslySetInlineStyle:{__style:s(n,i)[e]}},t):null}},A5yW:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("VSY/"),s=n("gPYk"),l=n("wQ8Q"),c=n("167h"),d=n("FCql"),u=n("F73h"),p=n("+YBH"),m=n("iJ35"),h=n("WE4s"),g=n("FSbA"),b=n("NmcB"),f=n("JsRk"),y=n("NoZx"),v=n("jcaw"),w=n("H5Gu"),E=n("9Y9K"),_=n("+U6O");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=2,S=40;var x=Object(E.compose)(Object(o.connect)(null,(e,t)=>({toggleLike:n=>{const i=t.activityItem,a=i.id,o=i.type;return e(Object(g.a)(a,1,o,n))},createActivityItem:Object(E.bindActionCreators)(w.a,e)})),f.withRouter)(class extends a.a.PureComponent{constructor(...e){super(...e),C(this,"state",{commentCount:this.props.activityItem.comment_count||0,showComposer:!1,inCreationMode:!1,isLoadingNewCreatedPost:!1}),C(this,"handleReplyClick",()=>this.setState({inCreationMode:!this.state.inCreationMode,showComposer:!this.state.showComposer})),C(this,"handleHideComposer",()=>{this.state.showComposer&&this.setState({showComposer:!1})}),C(this,"handleClickLike",({event:e})=>{e.stopPropagation(),e.preventDefault();const t=this.props,n=t.activityItem.id,i=t.toggleLike;Object(b.a)(101,{element:10622,component:13191,objectId:n}),i(this.props.activityItem.reaction_by_me)}),C(this,"handleLikeCountClick",({event:e})=>{e.stopPropagation(),e.preventDefault();const t=this.props,n=t.activityItem;(0,t.toggleLikeListModal)(n)}),C(this,"handleOnAddItem",e=>{const t=this.props,n=t.createActivityItem,i=t.activityItem,a=t.parentObject;this.setState({inCreationMode:!1});const o=this.isNestedReply?a:i;this.setState({isLoadingNewCreatedPost:!0}),n({imageSignatures:e.imageSignatures,objectIds:e.objectIds,parentId:o.id,parentType:o.type,text:e.contentMarkdown,tags:e.tags}).then(()=>{this.setState({commentCount:this.state.commentCount+1,showComposer:!1,isLoadingNewCreatedPost:!1})}),this.handleHideComposer()}),C(this,"handleOnCancelItem",()=>{this.setState({inCreationMode:!1}),this.handleHideComposer()}),C(this,"handleOnStartItemCreation",()=>{this.setState({inCreationMode:!0})}),C(this,"renderComposer",()=>{const e=this.props.parentObject,t=void 0===e?{}:e,n=this.state.inCreationMode,i=this.isNestedReply?t:null;return a.a.createElement(_.b,{column:12,marginTop:1,dangerouslySetInlineStyle:{__style:{paddingLeft:S}}},a.a.createElement(c.a,{hideAddObjects:!0,onAddItem:this.handleOnAddItem,onCancelItem:this.handleOnCancelItem,onEnter:this.handleOnStartItemCreation,objectType:y.a.BOARD_ACTIVITY_COMMENT,parentObjectId:t.id,replyToObject:i,statusType:n?"textInflightCreation":"textStaticDisplay"}))}),C(this,"renderContent",()=>{const e=this.props,t=e.activityItem,n=t.content.tags,i=t.created_at,o=t.tagged_users,r=t.user,s=r.first_name,c=r.full_name,d=r.username,u=e.contentText,p=e.inEditMode,g=s||c,b=g.length>v.d?g.substring(0,v.d).trim().concat("..."):g;return a.a.createElement(_.b,{display:"flex",justifyContent:"between"},a.a.createElement(_.b,{display:"flex"},a.a.createElement(l.a,{user:this.props.activityItem.user}),a.a.createElement(_.b,{marginLeft:2},a.a.createElement(_.b,{display:"flex",alignItems:"start",marginBottom:1},a.a.createElement(_.b,{marginRight:1},a.a.createElement(m.b,{stopPropagation:!0,to:`/${d}/`},a.a.createElement(_.J,{bold:!0},b))),a.a.createElement(_.J,{color:"gray"},Object(v.f)(i))),a.a.createElement(_.b,{width:v.a},p?this.renderEditMode():a.a.createElement(_.b,null,a.a.createElement(_.b,{display:"flex",alignItems:"center"},a.a.createElement(_.b,null,a.a.createElement(h.a,{text:u,tags:n,taggedUsers:o}))))))),!p&&this.renderFlyout())}),C(this,"renderEditMode",()=>{const e=this.props,t=e.activityItem,n=e.contentText,i=e.handleOnEdited,o=e.handleOnEditCancel,r=e.parentObject,s=t.content.tags,l=t.tagged_users,d=t.type;return a.a.createElement(_.b,{columnn:12},a.a.createElement(c.a,{hideAddObjects:!0,objectType:d,onAddItem:()=>{},onCancelItem:o,onEditItem:i,onEnter:()=>{},parentObjectId:r.id,statusType:"textInFlightEdit",tags:s,taggedUsers:l,text:n,widthAuto:!0}))}),C(this,"renderFlyout",()=>{const e=this.props,t=e.activityItem.user.id,n=e.board,i=e.handleDelete,o=e.handleOnEdit,r=e.viewer,s=r.isAuth&&r.id===t,l=r.isAuth&&n&&n.owner&&r.id===n.owner.id;return a.a.createElement(d.a,{handleDelete:s||l?i:null,handleOnEdit:s?o:null,small:!0})}),C(this,"renderReplies",()=>{const e=this.props,t=e.activityItem,n=e.board;return a.a.createElement(_.b,{column:12,display:"flex",dangerouslySetInlineStyle:{__style:{paddingLeft:S}},marginTop:3},a.a.createElement(u.a,{board:n,parentObject:t}))})}componentDidMount(){const e=this.props.activityItem.id;Object(b.a)(13,{view:204,component:13191,objectId:e})}get isNestedReply(){return this.props.activityItem.depth===O}render(){const e=this.props,t=e.activityItem,n=e.handleOnEdited,i=e.handleOnEditCancel,o=e.inEditMode,r=e.parentObject,s=e.showFlyout,l=e.showReplies,c=t.comment_count,d=t.content,u=d.text,m=d.tags,h=t.created_at,g=t.id,b=t.reaction_by_me,f=t.reaction_counts,y=t.tagged_users,v=t.type,w=t.user,E=this.state.showComposer;return a.a.createElement(_.b,{marginTop:4},a.a.createElement(p.a,{avatarSize:this.isNestedReply?"sm":"md",commentCount:t.comment_count,contentText:u,flyout:s?this.renderFlyout():null,handleOnEditCancel:i,handleOnEdited:n,handleLikeClick:this.handleClickLike,handleLikeCountClick:this.handleLikeCountClick,handleReplyClick:this.handleReplyClick,handleReplyCountClick:()=>{},hideAddObjects:!0,inEditMode:o,isLikedByMe:!!b,parentObject:r,reactionCounts:f,taggedUsers:y,tags:m,commentId:g,createdAt:h,commentAuthor:w,type:v,variant:"legacy"}),a.a.createElement(_.b,{column:12,display:"flex",justifyContent:"center"},a.a.createElement(_.b,{display:"flex",width:"100%"},a.a.createElement(_.b,{column:12,flex:"grow"},E&&this.renderComposer(),l&&!!c&&this.renderReplies()))))}}),k=n("fifU");function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"boD7")));class T extends a.a.PureComponent{constructor(...e){super(...e),I(this,"state",{isLikedByMe:this.props.isLikedByMe,likeCount:this.props.likeCount}),I(this,"handleClickLike",({event:e})=>{e.preventDefault(),e.stopPropagation();const t=this.state.isLikedByMe,n=this.props,i=n.activityId,a=n.parentComponentType,o=n.toggleLike,r=this.state.likeCount+(t?-1:1);this.setState({isLikedByMe:!t,likeCount:r>0?r:0}),Object(b.a)(101,{element:10622,component:a,objectId:i}),o(t)}),I(this,"handleClickReply",({event:e})=>{e.preventDefault(),e.stopPropagation();const t=this.props.onReplyClick;Object(b.a)(101,{element:10623,component:this.props.parentComponentType}),t&&t(e)}),I(this,"handleClickLikeCount",({event:e})=>{e.preventDefault(),e.stopPropagation();const t=this.props,n=t.activityItem,i=t.onReplyClick,a=t.toggleLikeListModal;a?a(n):i&&i()})}render(){const e=this.props,t=e.activityItem,n=e.commentCount,i=e.flyout,o=this.state.isLikedByMe;return a.a.createElement(k.a,null,a.a.createElement(P,{commentCount:n,flyout:i,isLikedByMe:o,onLikeClick:this.handleClickLike,onLikeCountClick:this.handleClickLikeCount,onReplyClick:this.handleClickReply,onReplyCountClick:()=>{},reactionCounts:t.reaction_counts,variant:"legacy"}))}}I(T,"defaultProps",{showReply:!0});var j=Object(E.compose)(Object(o.connect)(function({activityItems:e},{activityId:t}){const n=e[t];return{activityItem:n,commentCount:n&&n.comment_count||0,isLikedByMe:!(!n||!n.reaction_by_me)||!1,likeCount:n&&n.reaction_counts&&n.reaction_counts[1]||0}},function(e,{activityId:t,activityType:n}){return{toggleLike:i=>e(Object(g.a)(t,1,n,i))}}),f.withRouter)(T),R=n("O0w9");function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const L=4;var A=class extends a.a.PureComponent{constructor(...e){super(...e),D(this,"renderPreviewPins",e=>{const t=e.aggregate_pin_count,n=e.pin,i=e.preview_pins,o=n?[n]:i;if(!o||0===o.length)return null;const r=o.length<L?o.length:L;return a.a.createElement(_.b,{width:v.a},a.a.createElement(R.b,{numPreviewPins:r,totalCount:t,pins:o}))}),D(this,"renderCommentActivityBody",()=>{const e=this.props,t=e.board,n=e.commentActivityItem,i=e.flyout,o=e.handleReplyClick,r=e.refBoardActivityItem,s=e.shouldHavePreviewPins;if(n&&r){const e=n.id,l=n.type;return a.a.createElement(a.a.Fragment,null,s&&this.renderPreviewPins(r),a.a.createElement(_.b,{marginTop:3},a.a.createElement(j,{activityId:r.id,activityType:r.type,clickableReply:!0,flyout:i,onReplyClick:o,parentComponentType:{PIN:1,PINS_ADDED:2,SECTION_CREATED:3,POST:4,COLLABORATOR_JOINED:5,COLLABORATOR_REMOVED:6,COLLABORATOR_LEFT:7,SECTION_RENAMED:8,SECTION_MERGED_TO_SECTION:9,PIN_MOVED_TO_SECTION:10,COMMENT:11}.ACTIVITY,toggleLikeListModal:this.props.toggleLikeListModal})),a.a.createElement(ue,{activityId:e,activityType:l,board:t,parentObject:r,showFlyout:!1,showReplies:!1,viewType:"replies"}))}return null}),D(this,"renderActivityBody",()=>{const e=this.props,t=e.activityItem,n=e.flyout,i=e.handleReplyClick,o=e.shouldHavePreviewPins,r=e.toggleLikeListModal,s=t.id,l=t.type;return a.a.createElement(a.a.Fragment,null,o&&this.renderPreviewPins(t),a.a.createElement(_.b,{marginTop:3},a.a.createElement(j,{activityId:s,activityType:l,clickableReply:!0,flyout:n,onReplyClick:i,parentComponentType:13190,toggleLikeListModal:r})))})}render(){return 11===this.props.activityItem.activity_type?this.renderCommentActivityBody():this.renderActivityBody()}},M=n("GYbB"),B=n("Qo1m"),F=n("Irlq");const N=e=>{const t=e.first_name||e.last_name,n=e.username;return a.a.createElement(m.b,{stopPropagation:!0,to:`/${n}/`},a.a.createElement(_.J,{inline:!0,bold:!0},t))},U=e=>{const t=e.name,n=e.url;return a.a.createElement(m.b,{stopPropagation:!0,to:`${n}`},a.a.createElement(_.J,{inline:!0,bold:!0},t))},z=(e,t,n)=>{const i=`${e.url}${t.slug}/`;return a.a.createElement(m.b,{stopPropagation:!0,to:`${i}`},a.a.createElement(_.J,{inline:!0,bold:!0},n||t.title))},H=e=>{const t=e.board,n=void 0===t?null:t,i=e.section,a=void 0===i?null:i,o=e.user,r=void 0===o?null:o,s=e.aux_data;switch(e.activity_type){case 1:return(n||a)&&r?Object(F.b)(B.a._("{{ name }} saved a Pin to {{ targetName }}","User saved a pin to a board or section"),{name:N(r),targetName:a?z(n,a):U(n)}):null;case 2:return(n||a)&&r?Object(F.b)(B.a._("{{ name }} saved {{ numberPins }} Pins to {{ targetName }}","User saved pins to a board or section"),{name:N(r),numberPins:e.aggregate_pin_count,targetName:a?z(n,a):U(n)}):null;case 3:return n&&a&&r?Object(F.b)(B.a._("{{ name }} created a new section: {{ sectionName }}","User saved pins to a board or section"),{name:N(r),sectionName:z(n,a,s.new_name)}):null;case 4:return r?N(r):null;case 5:return r?Object(F.b)(B.a._("{{ name }} joined the board","User joins a board"),{name:N(r)}):null;case 6:return r?Object(F.b)(B.a._("{{ name }} was removed from the board","User removed from a board"),{name:N(r)}):null;case 7:return r?Object(F.b)(B.a._("{{ name }} left the board","User left a board"),{name:N(r)}):null;case 8:return r&&s&&a&&n?Object(F.b)(B.a._("{{ name }} renamed {{ previousName }} to {{ newName }}","User renamed section"),{name:N(r),previousName:z(n,a,s.previous_name),newName:z(n,a,s.new_name)}):null;case 9:return n&&a&&r?Object(F.b)(B.a._("{{ name }} merged {{ sourceSectionName }} Pins to {{ targetSectionName }}","User merged a source section into a target section"),{name:N(r),sourceSectionName:s.previous_name,targetSectionName:z(n,a,s.new_name)}):null;case 10:const t=e.aggregate_pin_count;return(n||a)&&r?Object(F.b)(B.a.ngettext("{{ name }} moved {{ numberPins }} Pin to {{ targetName }}","{{ name }} moved {{ numberPins }} Pins to {{ targetName }}",e.aggregate_pin_count,"User moved pins already saved somewhere in this board to somewhere else in this board"),{name:N(r),numberPins:t,targetName:a?z(n,a):U(n)}):null;case 11:return r?Object(F.b)(B.a._("{{ name }} commented on this Pin","User commented on a Pin"),{name:N(r)}):null;default:return null}};function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=Object(f.withRouter)(class extends a.a.PureComponent{constructor(...e){super(...e),V(this,"handleReplyClick",()=>this.props.router.push(this.activityUrl)),V(this,"renderEditMode",()=>{const e=this.props,t=e.activityItem,n=t.content,i=n.text,o=n.tags,r=t.tagged_users,s=e.handleOnEdited,l=e.handleOnEditCancel,d=e.board;return a.a.createElement(_.b,{column:12},a.a.createElement(c.a,{hideAddObjects:!0,objectType:y.a.BOARD_ACTIVITY,onCancelItem:l,onEditItem:s,onEnter:()=>{},parentObjectId:d.id,statusType:"textInFlightEdit",tags:o,taggedUsers:r,text:i}))}),V(this,"renderFlyout",()=>{const e=this.props,t=e.activityItem.user,n=e.board,i=e.handleDelete,o=e.handleOnEdit,r=e.viewer,s=r.isAuth&&r.id===t.id,l=r.isAuth&&r.id===n.owner.id;return a.a.createElement(d.a,{handleDelete:s||l?i:null,handleOnEdit:s?o:null})}),V(this,"renderContent",()=>{const e=this.props,t=e.activityItem,n=e.board,i=e.commentActivityItem,o=e.inEditMode,r=e.refBoardActivityItem,s=e.toggleLikeListModal,l=t.activity_type,c=t.content,d=c.tags,u=c.text,p=t.created_at,h=t.tagged_users,g=t.user,b=g.first_name,f=g.image_medium_url,y=g.username,w=H(t),E=4===l,C=[1,2,10,11].includes(l);return a.a.createElement(_.b,null,a.a.createElement(_.b,{display:"flex",width:"100%",marginBottom:3,alignItems:"center"},a.a.createElement(_.b,{marginRight:4},a.a.createElement(m.b,{stopPropagation:!0,to:`/${y}/`},a.a.createElement(_.a,{size:"md",src:f,name:b||y||""}))),a.a.createElement(_.b,{display:"flex",justifyContent:"between",width:"100%"},a.a.createElement(_.b,{column:10},a.a.createElement(_.J,null,w),E&&!o&&a.a.createElement(M.a,{tags:d,text:u,taggedUsers:h})),a.a.createElement(_.J,{inline:!0,color:"gray"},Object(v.f)(p)))),E&&o&&this.renderEditMode(),!o&&a.a.createElement(A,{activityItem:t,board:n,commentActivityItem:i,flyout:E?this.renderFlyout():null,handleReplyClick:this.handleReplyClick,refBoardActivityItem:r,shouldHavePreviewPins:C,toggleLikeListModal:s}))})}componentDidMount(){const e=this.props.activityItem,t=e.id,n=e.activity_type;Object(b.a)(13,{view:204,component:13190,objectId:t,board_activity_type:n})}get activityUrl(){const e=this.props.refBoardActivityItem||this.props.activityItem,t=e.board,n=e.id;return`${t.url}activity/${n}/`}render(){const e=this.props,t=e.inEditMode,n=e.isLast,i=this.renderContent();return i&&a.a.createElement(_.b,{width:v.b},t?a.a.createElement(_.b,{paddingX:2},a.a.createElement(_.b,{marginBottom:n?0:10,width:v.b},i)):a.a.createElement(m.b,{to:this.activityUrl},a.a.createElement(_.b,{paddingX:2},a.a.createElement(_.d,null,a.a.createElement(_.b,{marginBottom:n?0:10,paddingX:2},i)))))}}),W=n("yVWI"),Y=n("xiPO"),q=n("mzhd"),J=n("kro2"),$=n("Y2BC"),Q=n("3KWM");function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const X={BELOW_STATUS:"belowStatus",BELOW_PIN_REP:"belowPinRep"};class Z extends i.PureComponent{constructor(...e){super(...e),K(this,"renderEditMode",()=>{const e=this.props,t=e.activityItem,n=t.content,a=n.text,o=n.tags,r=t.tagged_users,s=e.handleOnEdited,l=e.handleOnEditCancel,d=e.board;return i.createElement(_.b,{column:12},i.createElement(c.a,{hideAddObjects:!0,objectType:y.a.BOARD_ACTIVITY,onCancelItem:l,onEditItem:s,onEnter:()=>{},parentObjectId:d.id,statusType:"textInFlightEdit",tags:o,taggedUsers:r,text:a}))}),K(this,"renderFlyout",()=>{const e=this.props,t=e.activityItem.user,n=e.handleDelete,a=e.handleOnEdit,o=e.board,r=e.viewer,s=r.isAuth&&r.id===t.id,l=o.owner&&r.isAuth&&r.id===o.owner.id;return i.createElement(d.a,{handleDelete:s||l?n:null,handleOnEdit:s?a:null})}),K(this,"renderStatus",()=>{const e=this.props,t=e.activityItem,n=e.inEditMode,a=e.toggleLikeListModal,o=t.activity_type,r=t.created_at,s=t.content,l=s.text,c=s.tags,d=t.id,u=t.tagged_users,p=t.type,g=t.user,b=g.first_name,f=g.image_medium_url,y=g.username,w=H(t),E=4===o;return(w||this.hasPins)&&i.createElement(_.b,{width:v.b},i.createElement(_.b,{display:"flex",justifyContent:"between",width:"100%",alignItems:"center",marginBottom:2},i.createElement(_.b,{marginRight:4},i.createElement(m.b,{stopPropagation:!0,to:`/${y}/`},i.createElement(_.a,{size:"md",src:f,name:b||y||""}))),i.createElement(_.b,{display:"flex",justifyContent:"between",width:"100%"},i.createElement(_.b,{width:"100%"},i.createElement(_.J,null,w),E&&!n&&i.createElement(h.a,{text:l,tags:c,taggedUsers:u})),i.createElement(_.J,{inline:!0,color:"gray"},Object(v.f)(r)))),E&&n&&this.renderEditMode(),i.createElement(_.b,{width:"100%"},this.reactionsPosition===X.BELOW_STATUS&&!n&&i.createElement(j,{activityId:d,activityType:p,clickableReply:!1,flyout:E?this.renderFlyout():null,parentComponentType:13190,toggleLikeListModal:a})))}),K(this,"renderPin",({data:e,itemIdx:t})=>{const n=(this.props.resource||{}).data,a=n&&1===n.length;return i.createElement("div",{style:a?{paddingBottom:24}:{}},i.createElement(q.a,{feedback:{type:"default"},hideHover:!0,pin:e,showCredits:!1,showPinReactionsReply:!a,slotIndex:t,surface:"BoardActivityThreadItem",truncatePinHeight:!1,viewParameter:3069,viewType:5}))}),K(this,"renderPins",()=>{const e=this.props.resource||{},t=e.data,n=e.fetchMore,a=e.isFetching,o=e.isLoaded,r=B.a._("Loading Pin Feed for board activity item page","accessibility label for board more ideas tab loading spinner");if(!o)return i.createElement(_.b,{marginTop:4},i.createElement(_.F,{accessibilityLabel:r,show:!0}));if(!t||0===t.length)return null;const s=Q.e,l=Q.d,c=t.length>1?(s+l)*t.length-1:s;if(c<=(document.documentElement&&document.documentElement.clientWidth||window.innerWidth)){const e=t.length>1?(s+l)*t.length-l:s,n=e<v.b;return i.createElement(_.b,{display:"flex",flex:"grow",justifyContent:n?"start":"center",marginTop:4,width:n?v.b:c},i.createElement(_.b,{alignItems:"center",display:"flex",justifyContent:"center",width:e},i.createElement(_.u,{columnWidth:s,comp:this.renderPin,gutterWidth:l,items:t,minCols:2,scrollContainer:()=>window})))}return i.createElement(_.b,{column:12,display:"flex",direction:"column",marginTop:4},i.createElement(Y.default,{columnWidth:s,comp:this.renderPin,gutterWidth:l,isFetching:a,items:t,loadItems:n,serverRender:!1,viewParameterType:3069}),i.createElement(_.F,{accessibilityLabel:r,show:a}))})}get reactionsPosition(){switch(this.props.activityItem.activity_type){case 1:case 10:case 2:return X.BELOW_PIN_REP;default:return X.BELOW_STATUS}}get hasPins(){const e=this.props.activityItem.activity_type;return[1,2,10].includes(e)}renderCommentList(){const e=this.props,t=e.activityItem,n=e.board,a=e.showReplies,o=t.id;return i.createElement(J.a,{board:n,key:`parent-id-${o}`,listObjectsType:y.a.BOARD_ACTIVITY_COMMENT,parentObject:t,showReplies:a,viewType:"replies"})}render(){const e=this.props,t=e.activityItem,n=e.board,a=e.isLast,o=e.showReplies,r=this.hasPins&&this.renderPins(),s=this.renderStatus();return s&&(!this.hasPins||r)&&i.createElement(_.b,{alignItems:"center",display:"flex",direction:"column",justifyContent:"center",marginBottom:a?0:10},s,r,o&&i.createElement(_.b,{display:"flex",marginTop:3,width:v.b},i.createElement(_.b,{column:12,display:"flex",justifyContent:"center"},i.createElement(_.b,{display:"flex",width:v.b},i.createElement(_.b,{column:12,flex:"grow"},i.createElement(W.a,{activityItem:t,board:n}),this.renderCommentList())))))}}const ee=Object($.b)({name:"BoardActivityPinsFeedResource",options:({activityItem:{id:e}})=>({activityId:e}),key:"resource"})(Z);var te=function(e){const t=e.activityItem.activity_type;return[1,2,10].includes(t)?i.createElement(ee,e):i.createElement(Z,e)},ne=n("dsfX"),ie=n("KsVg"),ae=n("jvv/"),oe=n("ePT2"),re=n("KyAb");var se=n("kIql"),le=n("9Hv/");function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class de extends a.a.PureComponent{constructor(...e){super(...e),ce(this,"state",{inEditMode:!1,renderActiveModal:()=>null}),ce(this,"handleDelete",()=>{const e=this.props,t=e.deleteActivityItem,n=e.router;t(),this.activityItemComponent===te&&n.goBack()}),ce(this,"handleOnEdit",()=>this.setState({inEditMode:!0})),ce(this,"handleOnEditCancel",()=>this.setState({inEditMode:!1})),ce(this,"handleOnEdited",e=>{(0,this.props.updateActivityItem)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){ce(e,t,n[t])})}return e}({text:e.contentMarkdown},e)).then(e=>{this.setState({inEditMode:!1})})}),ce(this,"hideModal",()=>{this.setState({renderActiveModal:()=>null})}),ce(this,"showConfirmDeleteModal",()=>{this.setState({renderActiveModal:this.renderConfirmDeleteModal})}),ce(this,"showLikeListModal",e=>{this.setState({renderActiveModal:()=>this.renderLikeListModal(e)})}),ce(this,"renderConfirmDeleteModal",()=>{const e=this.props,t=e.activityItem;let n=!1;if(e.activityType===y.a.BOARD_ACTIVITY&&t){n=4===t.activity_type}const i=n?B.a._("Once you delete a post, you can’t undo it","confirmation before deleting post"):B.a._("Once you delete a comment, you can’t undo it","confirmation before deleting comment");return a.a.createElement(s.a,{accessibilityModalLabel:B.a._("Deleting a comment or post","Label for deleting a comment or post in a collaborative board"),heading:B.a._("Are you sure?","Are you sure to remove post or comment"),cancelButtonText:B.a._("Cancel","Cancel post or comment"),confirmButtonText:B.a._("Delete","Delete post or comment"),detail:i,onConfirm:this.handleDelete,onDismiss:this.hideModal})}),ce(this,"renderLikeListModal",e=>{const t=e.id,n=e.type,i=e.reaction_counts[1],o=n===y.a.BOARD_ACTIVITY?le.b:le.a;return a.a.createElement(ne.b,{accessibilityCloseLabel:B.a._("close","accessible label for button to close modal"),accessibilityModalLabel:B.a._("Users who have liked this.","Label for a modal showing a list of users who have liked a Board Activity Post or Comment"),allowScroll:!0,heading:r.i(B.a.ngettext("{{headingCount}} Like","{{headingCount}} Likes",i),{headingCount:i.toString()}),onDismiss:this.hideModal,size:"md"},a.a.createElement(o,{activityId:t,activityType:n}))})}get activityItemComponent(){const e=this.props,t=e.activityType;switch(e.viewType){case"activity":return G;case"replies":return t===y.a.BOARD_ACTIVITY?te:x;default:return null}}render(){const e=this.props.activityItem,t=this.state.renderActiveModal;if(!e)return null;const n=e.content.text||"",i=e.content.tags||[],o=e.tagged_users||[],r=this.state.inEditMode,s=this.activityItemComponent;return a.a.createElement(a.a.Fragment,null,!!s&&a.a.createElement(s,Object.assign({activityItem:e,handleDelete:this.showConfirmDeleteModal,handleOnEdit:this.handleOnEdit,handleOnEdited:this.handleOnEdited,handleOnEditCancel:this.handleOnEditCancel,contentText:n,inEditMode:r,tags:i,taggedUsers:o,toggleLikeListModal:this.showLikeListModal},this.props)),t())}}ce(de,"defaultProps",{showFlyout:!0});var ue=t.a=Object(E.compose)(Object(o.connect)((e,t)=>{const n=e.activityItems[t.activityId];return{activityItem:n,commentActivityItem:n.comment&&e.activityItems[n.comment.id],refBoardActivityItem:n.ref_board_activity&&e.activityItems[n.ref_board_activity.id]}},(e,t)=>({updateActivityItem:n=>{const i=t.activityId,a=t.activityType;return e(Object(g.b)(i,a,n))},deleteActivityItem:()=>{const n=t.parentObject,i=t.activityId,a=t.activityType;return e(function({parentId:e,parentType:t,activityId:n,activityType:i}){const a=y.c[i],o={activityId:n},r=y.b[t];return t=>oe.a.create(a,o).callDelete({showError:!1}).then(()=>{t(Object(ae.a)({feedId:e,feedType:r,itemIds:[n],itemType:i})),t(Object(re.a)(e)),t(function(e,t){return{type:"ACTIVITY_ITEM_DELETED",payload:{activityId:e,activityType:t}}}(n,i))})}({parentId:n&&n.id||"",parentType:n&&n.type||"",activityId:i,activityType:a}))}})),f.withRouter,ie.a,se.a)(de)},A6bX:function(e,t,n){n.d(t,"a",function(){return a});var i=n("7Iyi");function a(e,t){return n=>n(Object(i.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},A7Du:function(e,t,n){var i=n("GyhR"),a=n("Qo1m"),o=n("MNJ6"),r=n("ay7J"),s=n("tsSC"),l=n("Fbxa"),c=n("+U6O");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(s.a)(class extends i.Component{constructor(...e){super(...e),d(this,"state",{showFlyout:!1}),d(this,"setContainerRef",e=>{this.containerRef=e}),d(this,"handleCreate",()=>{this.hideFlyout();const e=this.props.onCreate;e&&e()}),d(this,"handleSelectItem",e=>{this.hideFlyout();const t=this.props,n=t.onSelect,i=t.onCreate;e?n(e):i&&i()}),d(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),d(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),d(this,"hideFlyout",()=>{(0,this.props.hoverHandlers.onMouseLeave)(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const e=this.props,t=e.dropdownValue,n=e.fetchMore,s=e.hoverHandlers,d=s.onMouseOver,u=s.onMouseLeave,p=e.isHovering,m=e.onCreate,h=e.onSearchQueryUpdate,g=e.renderRow,b=e.searchQuery,f=e.sections,y=e.createBtnDisabled,v=this.state.showFlyout;this.indexManager=new o.a(f.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const w=!b.trim()||!!y;return i.createElement("div",{ref:this.setContainerRef},i.createElement(c.O,{onMouseEnter:d,onMouseLeave:u,onTouch:this.handleDropdownTouch,fullWidth:!1,shape:"rounded"},i.createElement(c.b,{alignItems:"center",color:p?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:3,shape:"rounded"},i.createElement(c.b,{display:"flex",flex:"grow"},i.createElement(c.J,{bold:!0},t)),i.createElement(c.m,{icon:"arrow-down",size:14,color:"darkGray",accessibilityLabel:""}))),v&&i.createElement(c.b,{position:"relative"},i.createElement(c.b,{shape:"rounded",color:"white",display:"flex",direction:"column",overflow:"hidden",position:"absolute",width:"100%",dangerouslySetInlineStyle:{__style:{border:"1px solid #efefef",zIndex:1}}},i.createElement(c.b,null,i.createElement(c.b,{display:"flex",padding:2,marginLeft:-1,marginRight:-1},i.createElement(c.b,{display:"flex",flex:"grow",paddingX:1},i.createElement(r.a,{hideIcon:!0,indexManager:this.indexManager,onChange:h,value:b})),m&&i.createElement(c.b,{paddingX:1},i.createElement(c.c,{disabled:w,inline:!0,onClick:this.handleCreate,text:a.a._("Create","board or section dropdown create button")})))),i.createElement(l.a,{fetchMore:n,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:g,sections:f}))))}})},AZKp:function(e,t,n){t.a={normal:"normal",semibold:600,bold:700}},AdUJ:function(e,t,n){var i=n("GyhR");t.a=Object(i.createContext)(0)},Ae3S:function(e,t,n){var i=n("GyhR"),a=n("Ivf5"),o=n("VSY/"),r=n("gPYk"),s=n("FCql"),l=n("+YBH"),c=n("Qo1m"),d=n("dsfX"),u=n("rUah");var p=({id:e,viewParameter:t,viewType:n})=>Object(u.b)({id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"aggregatedComment"}),m=n("5uNi"),h=n("DKjr");function g(e,t){return{type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:t,id:e}}}var b=n("TzyI"),f=n("167h"),y=n("21DP"),v=n("YAB1"),w=n("jvv/"),E=n("ePT2"),_=n("eB/M");function C({aggregatedCommentId:e,parentId:t}){return n=>{E.a.create("AggregatedCommentResource",{commentId:e}).callDelete({showError:!1}).then(i=>(n(Object(w.a)({feedId:t,feedType:_.a.AGGREGATED_COMMENTS,itemIds:[e],itemType:"aggregatedcomment"})),n(function(e,t){return{type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:e,aggregatedCommentId:t}}}(t,e)),i))}}var O=n("mbJu"),S=n("Qzkb"),x=n("jfHI"),k=n("9Y9K"),I=n("+U6O");function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=48;t.a=Object(a.connect)((e,t)=>{return{comment:e.aggregatedComments[t.aggregatedCommentId]}},(e,t)=>{const n=t.aggregatedCommentId,i=t.objectType,a={[y.a.aggregatedComment]:Object(k.bindActionCreators)(g,e),[y.a.didIt]:Object(k.bindActionCreators)(b.e,e),[y.a.pin]:Object(k.bindActionCreators)(h.a,e)};return{createComment:Object(k.bindActionCreators)(v.a,e),deleteComment:Object(k.bindActionCreators)(C,e),toggleLikeComment:Object(k.bindActionCreators)(x.a,e),updateComment:Object(k.bindActionCreators)(x.b,e),hideComment:Object(k.bindActionCreators)(O.b,e),updateCommentCount:Object(k.bindActionCreators)(g,e),updateParentCommentCount:a[i],reportComment:()=>e(p({id:n,viewType:null,viewParameter:null}))}})(class extends i.PureComponent{constructor(...e){super(...e),P(this,"state",{inEditMode:!1,isLoadingNewCreatedComment:!1,renderActiveModal:()=>null,showReplyComposer:!1}),P(this,"componentDidMount",()=>{this.parentObjectTemp.id=this.props.parentObjectId}),P(this,"parentObjectTemp",{}),P(this,"handleClickLike",()=>{const e=this.props,t=e.aggregatedCommentId,n=e.comment.reaction_by_me;(0,e.toggleLikeComment)({aggregatedCommentId:t,isLikedByMe:!!n})}),P(this,"toggleReplyComposer",()=>this.setState({showReplyComposer:!this.state.showReplyComposer})),P(this,"handleAddComment",e=>{const t=this.props,n=t.aggregatedCommentId,i=t.createComment,a=t.parentObjectId,o=t.updateCommentCount;let r,s=n;this.toggleReplyComposer(),this.setState({isLoadingNewCreatedComment:!0}),this.isReply&&(s=a,r=n),i({objectType:y.a.aggregatedComment,objectId:s,tags:e.tags,text:e.contentMarkdown,replyToCommentId:r}).then(()=>{o(this.isReply?a:n,1),this.setState({isLoadingNewCreatedComment:!1})})}),P(this,"handleDelete",()=>{const e=this.props,t=e.aggregatedCommentId,n=e.deleteComment,i=e.updateParentCommentCount,a=e.parentObjectId;n({aggregatedCommentId:t,parentId:a}),i(a,-1)}),P(this,"handleOnEdit",()=>{this.setState({inEditMode:!0})}),P(this,"handleOnEdited",e=>{const t=this.props,n=t.aggregatedCommentId,i=t.updateComment;this.setState({inEditMode:!1}),i({commentId:n,tags:e.tags,text:e.contentMarkdown})}),P(this,"handleOnEditCancel",()=>{this.setState({inEditMode:!1})}),P(this,"updateLikesCount",(e,t)=>t?e-1:e+1),P(this,"showConfirmDeleteModal",()=>{this.setState({renderActiveModal:this.renderConfirmDeleteModal})}),P(this,"showLikeListModal",()=>{this.setState({renderActiveModal:this.renderLikeListModal})}),P(this,"hideModal",()=>{this.setState({renderActiveModal:()=>null})}),P(this,"renderFlyout",()=>{const e=this.props,t=e.comment.user.id,n=e.didItOwnerId,a=e.pinDomainOwnerId,o=e.reportComment,r=e.viewerId,l=r===t||r===n||r===a,c=r===t,d=r!==t;return i.createElement(s.a,{handleClickReport:d?o:null,handleDelete:l?this.showConfirmDeleteModal:null,handleOnEdit:c?this.handleOnEdit:null,small:!0})}),P(this,"renderConfirmDeleteModal",()=>i.createElement(r.a,{accessibilityModalLabel:c.a._("Deleting a comment","Label for deleting a comment"),heading:c.a._("Are you sure?","Are you sure to remove post or comment"),cancelButtonText:c.a._("Cancel","Cancel deleting comment"),confirmButtonText:c.a._("Delete","Delete comment"),detail:c.a._("This comment will be deleted","confirmation before deleting comment"),onConfirm:this.handleDelete,onDismiss:this.hideModal})),P(this,"renderLikeListModal",()=>{const e=this.props,t=e.aggregatedCommentId,n=e.comment.reaction_counts[1];return i.createElement(d.b,{accessibilityCloseLabel:c.a._("close","accessible label for button to close modal"),accessibilityModalLabel:c.a._("Users who have liked this.","Label for a modal showing a list of users who have liked a Tried Item Comment"),heading:o.i(c.a.ngettext("{{count}} Like","{{count}} Likes",n),{count:n.toString()}),onDismiss:this.hideModal,size:"md"},i.createElement(m.a,{id:t}),",")})}get isReply(){return this.props.depth===S.c}render(){if(!this.props.comment)return null;const e=this.props,t=e.aggregatedCommentId,n=e.comment,a=n.comment_count,o=n.created_at,r=n.reaction_by_me,s=n.reaction_counts,d=n.tags,u=n.tagged_users,p=n.text,m=n.user.full_name,h=e.comment,g=e.depth,b=e.didItOwnerId,v=e.isManagedView,w=e.parentObjectId,E=e.pinDomainOwnerId,_=e.variant,C=this.state,O=C.inEditMode,x=C.isLoadingNewCreatedComment,k=C.renderActiveModal,P=C.showReplyComposer,j=a>0,R=this.isReply?0:T;return i.createElement(i.Fragment,null,i.createElement(l.a,{avatarSize:this.isReply?"sm":"md",commentAuthor:h.user,commentCount:a,commentId:t,contentText:p,createdAt:o,flyout:this.renderFlyout(),handleLikeClick:this.handleClickLike,handleLikeCountClick:this.showLikeListModal,handleOnEditCancel:this.handleOnEditCancel,handleOnEdited:this.handleOnEdited,handleReplyClick:this.toggleReplyComposer,hideAddObjects:!0,hideReplyCount:!0,inEditMode:O,isLikedByMe:!!r,parentObject:this.parentObjectTemp,reactionCounts:s,taggedUsers:u,tags:d,truncateText:!0,type:y.a.aggregatedComment,variant:_}),P&&i.createElement(I.b,{dangerouslySetInlineStyle:{__style:{paddingLeft:R}},"data-test-id":"reply-composer"},i.createElement(I.b,{display:"flex",marginTop:2},i.createElement(I.b,{flex:"grow"},i.createElement(f.a,{avatarSize:"sm",hideAddObjects:!0,onAddItem:this.handleAddComment,onCancelItem:this.toggleReplyComposer,onEnter:()=>{},objectType:y.a.aggregatedComment,parentObjectId:this.parentObjectTemp.id,replyToObject:this.isReply?h:null,statusType:"textInflightCreation"})))),j&&i.createElement(I.b,{dangerouslySetInlineStyle:{__style:{paddingLeft:T}}},i.createElement(S.d,{comment:h,commentCount:a,didItOwnerId:b,depth:g,isManagedView:v,objectId:t,objectType:y.a.aggregatedComment,parentObjectId:w,pinDomainOwnerId:E,replyToName:m,variant:"legacy"}),i.createElement(I.F,{accessibilityLabel:c.a._("Comments loading"),show:x})),k())}})},Alt3:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("jCHc"),r=n("9SSN"),s=n("+U6O");function l({selected:e}){return a.a.createElement(s.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:e?"#e60023":"#efefef",borderRadius:c,boxShadow:"inset 0 0 0 3px #fff",zIndex:1}}})}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});const c=16,d={wrapper:{borderRadius:c,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},primaryContentContainer:{marginBottom:"auto"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"},savedOverlay:{backgroundColor:"rgba(0, 0, 0, .33)"}};function u({children:e,savedOverlayVisibility:t="none",visualOverlayVisibility:n="none",primaryContent:i,primaryContentVisibility:c="none",secondaryContent:u,secondaryContentVisibility:p="none",accessoryContent:m,accessoryContentVisibility:h="none",actionBar:g,actionBarVisibility:b="none",footer:f,selectionState:y="no-selection",debugContent:v,signalDebuggerContent:w,obscuredPinOverlay:E}){return a.a.createElement(s.b,{position:"relative",dangerouslySetInlineStyle:{__style:d.wrapper},overflow:"hidden"},"no-selection"!==y&&a.a.createElement(l,{selected:"selected"===y}),a.a.createElement(s.b,{position:"relative",dangerouslySetInlineStyle:{__style:d.wrapper},overflow:"hidden"},e,a.a.createElement(r.a,{visibility:n},a.a.createElement(o.a,{additionalStyles:d.visualOverlay})),a.a.createElement(r.a,{visibility:t},a.a.createElement(o.a,{additionalStyles:d.savedOverlay})),m&&a.a.createElement(r.a,{visibility:h},a.a.createElement(o.a,null,m)),u&&a.a.createElement(r.a,{visibility:p},a.a.createElement(o.a,null,u)),i&&a.a.createElement(r.a,{visibility:c},a.a.createElement(o.a,null,i)),g&&a.a.createElement(r.a,{visibility:b},a.a.createElement(o.a,null,a.a.createElement(s.b,{position:"absolute",left:!0,right:!0,bottom:!0},g))),v&&a.a.createElement(o.a,null,v),w),f,E&&a.a.createElement(s.b,null,E))}},BEiP:function(e,t,n){n.d(t,"b",function(){return d}),n.d(t,"a",function(){return u});var i=n("GyhR"),a=n.n(i),o=n("vR+M"),r=n("6iNl"),s=n("+U6O");function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=e=>{if(Array.isArray(e)){const t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class u extends a.a.PureComponent{constructor(e){super(e),c(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),c(this,"handleOnEnded",({event:e})=>{const t=this.props,n=t.loop,i=t.onEnded;i&&(i({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&n&&this.videoPlayerRef.video.play())}),c(this,"handleOnReady",({event:e})=>{const t=this.props.onReady;let n=this.props.videoStartTime;const i=this.state.useHlsVideo;null==n&&(n=0),n>0&&this.videoPlayerRef&&this.videoPlayerRef.video&&!i&&(this.videoPlayerRef.video.currentTime=n),t&&t({event:e})});const t=d(e.src);this.state={useHlsVideo:!o.a.isSafari()&&!!t}}render(){const e=this.props,t=e.hlsConfig,n=e.loop,i=e.onEnded,o=e.src,u=e.videoStartTime,p=l(e,["hlsConfig","loop","onEnded","src","videoStartTime"]),m=this.state.useHlsVideo,h=d(o),g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}({},t,{startPosition:u||-1}),b=!i&&n;return m?a.a.createElement(r.a,Object.assign({},p,{hlsConfig:g,loop:b,onEnded:this.handleOnEnded,setVideoRef:this.setVideoPlayerRef,src:h})):a.a.createElement(s.P,Object.assign({},p,{loop:b,onEnded:this.handleOnEnded,onReady:this.handleOnReady,ref:this.setVideoPlayerRef,src:h||o}))}}},BQ43:function(e,t,n){n.d(t,"a",function(){return r});var i=n("GyhR"),a=n.n(i),o=n("+U6O");function r({color:e="gray",handleClick:t,size:n="sm",text:i}){return a.a.createElement(o.b,{display:"inlineBlock"},a.a.createElement(o.O,{onTouch:t,shape:"pill"},a.a.createElement(o.J,{color:e,bold:!0,size:n},i)))}},BY4F:function(e,t,n){n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});var i=n("GyhR"),a=n.n(i);const o=Object(i.createContext)(null),r=o.Provider;function s(e){const t=t=>{const n=Object(i.useContext)(o);return a.a.createElement(e,Object.assign({},t,n))};return t.displayName=`FeaturedCommentContext(${String(e.displayName||e.name)})`,t}o.Provider},C2AX:function(e,t,n){function i(e,t,n,i){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:n,options:i}}}n.d(t,"a",function(){return i})},CAUj:function(e,t,n){n.d(t,"e",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var i=n("7Iyi");const a=(e,t)=>n=>n(Object(i.a)("BoardResource",{board_id:e,field_set_key:t})),o=e=>a(e,"pin_count"),r=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),s=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),l=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),c=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},CIhW:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("D+W/"),r=n("PNko"),s=n.n(r),l=n("Qo1m"),c=n("Ovv4"),d=n("hX7C"),u=n("+U6O");const p=200;var m=Object(c.a)({component:135},class extends i.Component{componentDidMount(){const e=this.props.onUpdate;e&&e()}componentDidUpdate(e){if(e.showMore!==this.props.showMore){const e=this.props.onUpdate;e&&e()}}render(){const e=this.props,t=e.pin,n=e.tutorialDescription,i=e.showMore,o=e.onToggle,r=t.carousel_data;let s=t.closeup_description;if(r){const e=r.carousel_slots,t=void 0===e?[]:e,n=r.index;t[n]&&t[n].details&&(s=t[n].details)}const c=s&&n&&n.trim()===s.trim(),m=s?s.trim().replace(/\s+/g," "):null,h=s&&s.length>p;return m&&!c?a.a.createElement(a.a.Fragment,null,h?a.a.createElement(u.b,null,a.a.createElement(u.J,{size:"lg",inline:!0},i?m:Object(d.b)(m,p)),a.a.createElement(u.b,{display:"inlineBlock",marginLeft:1},a.a.createElement(u.O,{fullWidth:!1,onTouch:o},a.a.createElement(u.J,{bold:!0,size:"sm",inline:!0},i?l.a._("Less"):l.a._("More"))))):a.a.createElement(u.J,{size:"lg"},m)):null}}),h=n("Irlq"),g=n("K668"),b=n("cemY");function f(e){const t=Object(g.e)(Object(b.k)(e));if(!t)return null;const n=t.attribution,i=n.providerUrl,o=n.providerName,r=n.authorUrl,s=n.authorName,c=n.ccUrl,d=(Object(b.d)(Object(b.k)(e))||{}).embed,p=void 0===d?{}:d,m=p.src,f=p.type,y=p.subtype,v={author:a.a.createElement("a",{href:r,rel:"nofollow",key:"author"},s),provider:a.a.createElement("a",{href:i,rel:"nofollow",key:"provider"},o)};let w=l.a._("from {{ provider }}","Image source attribution without author on pin closeup");return s&&(w=m&&"gif"!==f&&"pinstory"!==y?l.a._("Video by {{ author }} on {{ provider }}","Video source attribution on pin closeup"):l.a._("Photo by {{ author }} on {{ provider }}","Photo source attribution on pin closeup")),a.a.createElement(a.a.Fragment,null,a.a.createElement(u.J,{size:"md",color:"gray"},Object(h.b)(w,v)),c&&a.a.createElement("a",{className:"cc",href:c,rel:"nofollow"},l.a._("(cc)","Creative Commons Link Text")))}var y=n("nufh"),v=n("z/cr"),w=n("z55A");function E(e){const t=Object(b.b)(Object(g.j)(Object(b.k)(e)));if(!t)return null;const n=t.article,i=n.name,o=n.authors,r=n.datePublished,s=o&&o.map(e=>e.name).join(", ");return a.a.createElement(y.a,{itemScope:!0,itemType:v.g.ARTICLE},a.a.createElement("meta",{content:i,itemProp:"name"}),a.a.createElement(u.b,{marginTop:3},r&&a.a.createElement(u.b,null,a.a.createElement("meta",{content:r.toDateString(),itemProp:"datePublished"}),a.a.createElement(u.J,{size:"md"},l.a._("Published "),a.a.createElement(w.b,{value:r,dateFormatType:w.a.LONG}))),o&&a.a.createElement(u.b,{"data-test-id":"article-author"},a.a.createElement(u.J,{size:"md"},l.a._("Written by "),s))))}var _=n("b7z0");function C({category:e,ingredients:t,textSize:n="lg"}){return a.a.createElement(u.b,null,e&&a.a.createElement(u.b,null,a.a.createElement(_.b,{weight:"bold",size:n},e)),a.a.createElement("ul",null,t.map((e,t)=>a.a.createElement("li",{"data-test-id":"recipe-ingredient",key:t,itemProp:"recipeIngredient"},a.a.createElement(u.b,{marginTop:1},a.a.createElement(_.b,{size:n},e.amt||null," ",e.name))))))}var O=n("bUMO"),S=n("L43L"),x=n("1RKP"),k=n("mcMS");function I(e){const t=Object(b.c)(Object(g.i)(Object(g.j)(Object(b.k)(e))));if(!t)return null;const n=e.pin,i=t.recipe,o=i.name,r=i.diets,s=i.categorizedIngredients,c=i.fromAggregatedData,d=i.prepTime,p=i.cookTime,m=i.totalTime,f=i.servingSummary;let w=m||p||d;if(p&&d){const e=p.h||0,t=p.m||0;w={h:e+(d.h||0),m:t+(d.m||0)}}const E=w?Object(O.a)(Object(k.a)(w)):null,_=n.rich_metadata.recipe.aggregate_rating&&n.rich_metadata.recipe.aggregate_rating.review_count;return a.a.createElement(y.a,{itemScope:!0,itemType:v.g.RECIPE},a.a.createElement("meta",{content:o,itemProp:"name"}),c?a.a.createElement("div",{className:"hr cardDivider"}):null,!!_&&a.a.createElement(u.b,{marginBottom:2,display:"flex",alignItems:"baseline"},n.rich_metadata&&n.rich_metadata.recipe&&n.rich_metadata.recipe.aggregate_rating&&a.a.createElement(u.b,{marginRight:1},a.a.createElement(S.a,{rating:n.rich_metadata.recipe.aggregate_rating.rating_value,max_rating:n.rich_metadata.recipe.aggregate_rating.best_rating,width:16})),a.a.createElement(u.J,{bold:!0,smSize:"xs",mdSize:"sm",lgSize:"md"},Object(h.b)(l.a.ngettext("{{reviewCount}} review","{{reviewCount}} reviews",_),{reviewCount:_}))),E?a.a.createElement(u.b,{marginBottom:2,display:"flex",alignItems:"center"},a.a.createElement(u.b,{marginRight:1},a.a.createElement(u.m,{accessibilityLabel:l.a._("clock","accessible label for clock icon on recipe rich pin"),color:"darkGray",icon:"clock",size:16})),a.a.createElement(u.J,{bold:!0,smSize:"xs",mdSize:"sm",lgSize:"md"},E)):null,a.a.createElement(u.b,{"data-test-id":"ingredients-heading",marginBottom:4},a.a.createElement(u.l,{size:"xs"},c?o:l.a._("Ingredients","Ingredients title in closeup recipe description")),r?a.a.createElement(u.b,{display:"flex",marginTop:1,"data-test-id":"diets-section"},a.a.createElement(u.J,{size:"lg"},r.join(", ")),f?a.a.createElement(u.b,{marginLeft:1,"data-test-id":"serving-summary-section"},a.a.createElement(u.J,{size:"lg"},"∙ "+f)):null):null),Array.isArray(s)&&s.length>0&&(1===s.length?a.a.createElement(u.b,{xs:{column:12},"data-test-id":"single-column-ingredients"},s.map(({category:e,ingredients:t},n)=>a.a.createElement(u.b,{marginBottom:2,key:n},a.a.createElement(C,{category:e,ingredients:t,textSize:"lg"})))):a.a.createElement(u.b,{display:"flex","data-test-id":"dual-column-ingredients"},a.a.createElement(u.b,{xs:{column:6}},s.slice(0,Math.ceil(s.length/2)).map(({category:e,ingredients:t},n)=>a.a.createElement(u.b,{marginBottom:2,key:n},a.a.createElement(C,{category:e,ingredients:t,textSize:"lg"})))),a.a.createElement(x.a,null),a.a.createElement(u.b,{xs:{column:6}},s.slice(Math.ceil(s.length/2)).map(({category:e,ingredients:t},n)=>a.a.createElement(u.b,{marginBottom:2,key:n},a.a.createElement(C,{category:e,ingredients:t,textSize:"lg"})))))))}var P=n("Z34B"),T=n("KDzr");var j=Object(P.a)(b.k)(e=>{const t=e.inContainerRedesignExp,n=e.pin,i=e.onUpdate,o=e.showCloseupContentRight,r=e.onToggle,l=e.showMore,c=e.showCreatorCard,d=n.aggregated_pin_data,p=n.closeup_description,h=n.title,y=(Object(g.f)(e)||{}).buyableProduct,v=(Object(g.i)(Object(g.j)(e))||{}).recipe,w=(Object(b.b)(Object(g.j)(e))||{}).article,_=(w||{}).description,C=(Object(b.m)(Object(g.j)(e))||{}).tutorial,O=(C||{}).description,S=w&&!v&&!C;return a.a.createElement("div",{className:t?"":"mt2 mb2",style:{fontSize:"14px"}},a.a.createElement("div",{className:"richPinInformation mb2"},!y&&(d&&a.a.createElement(m,Object.assign({onToggle:r,showMore:l,pin:n,onUpdate:i},{tutorialDescription:O}))||S&&_&&a.a.createElement("div",{className:"richPinArticleSummary mb2",style:{fontSize:"16px"}},(e=>e.split(" ").map(e=>e.trim()).reduce((e,t)=>e.length>300?e:e.length+t.length+3>300?`${e} ${t}...`:`${e} ${t}`,""))(_))),a.a.createElement("div",{className:s()("descriptionAction",{showCloseupContentRight:o})},a.a.createElement(u.b,{marginTop:!t||h||p||c?3:0},a.a.createElement(T.a,Object.assign({},e,{showDomainInLink:!0})))),S&&a.a.createElement(a.a.Fragment,null,a.a.createElement(E,{pin:n}),a.a.createElement(f,{inArticle:!0,pin:n}))),a.a.createElement(I,{pin:e.pin}))}),R=n("x3u9"),D=n("I3yW");function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return M});const A={__style:{zIndex:D.d}};class M extends i.Component{constructor(...e){super(...e),L(this,"state",{linkRef:null}),L(this,"handleTooltipCompleteClick",()=>{window.open(`${o.a.GEN.templateConst.settings.HELP_URL}articles/claim-your-website`,"_blank")}),L(this,"saveLinkRef",e=>{this.setState({linkRef:e})})}render(){const e=(Object(g.f)(Object(b.k)(this.props))||{}).buyableProduct,t=this.props,n=t.onClickThrough,a=t.pin,o=t.viewer,r=t.shouldShowAltLinks,s=t.maybeLinkRef,l=this.state.linkRef,c=i.createElement("div",{ref:this.saveLinkRef},i.createElement(T.b,{onClickThrough:n,pin:a,shouldShowAltLinks:r,showDomainInLink:!0,viewer:o}));return e?null:i.createElement(u.b,{marginTop:3},i.createElement(u.b,{dangerouslySetInlineStyle:A,display:"inlineBlock",position:"relative",width:"100%",ref:s},c,i.createElement(R.a,{anchor:l,experienceIds:[500938],idealDirection:"down",onClickComplete:this.handleTooltipCompleteClick,placementId:12})),i.createElement(j,this.props))}}},CST5:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n("XQD6"),o=n("PNko"),r=n.n(o),s=n("ogC+");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Component{constructor(...e){super(...e),l(this,"handleClick",e=>{e&&e.preventDefault(),this.props.loading||(this.props.src?Object(a.a)(this.props.src):this.props.onClick&&this.props.onClick(e),this.props.stopPropagation&&e.stopPropagation())})}render(){const e=this.props,t=e.accessibilityLabel,n=e.children,a=e.disabled,o=e.hasIcon,l=e.htmlType,c=e.id,d=e.itemProp,u=e.large,p=e.loading,m=e.onMouseDown,h=e.onMouseEnter,g=e.onMouseLeave,b=e.rel,f=e.rounded,y=e.showText,v=e.style,w=e.text,E=e.type,_=r()(this.props.className,{Button:"plain"!==E,Module:"plain"!==E,btn:"borderless"!==E&&"plain"!==E,hasIcon:o,hasText:y,rounded:!0===f,leftRounded:"left"===f,rightRounded:"right"===f,borderless:"borderless"===E,primary:"primary"===E,disabled:a,large:u});return i.createElement("button",{"aria-label":t||null,className:_,disabled:a,id:c,itemProp:d,onClick:this.handleClick,onMouseDown:m,onMouseEnter:h,onMouseLeave:g,rel:b,style:v,type:l},p?i.createElement(s.a,{size:"small"}):null,n,o?i.createElement("em",null):null,i.createElement("span",{className:y?"buttonText":"accessibilityText"},w))}}l(c,"defaultProps",{disabled:!1,htmlType:"button",large:!1,rounded:!0,showText:!0,type:"default"})},Ch7k:function(e,t,n){function i(e,t,n){return{type:"PIN_BUILDER_ADD_PIN_DRAFT",payload:{pinDraftId:e,pinDraft:t,options:n}}}n.d(t,"a",function(){return i})},CpsV:function(e,t,n){n.d(t,"b",function(){return l});var i=n("GyhR"),a=n("UHkV"),o=n("D+W/"),r=n("Qo1m"),s=n("+U6O");function l(e,t){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,a,o)=>{if(n.length>0&&e&&e.length){const r=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(i.createElement("em",{key:o,style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"}},t.substring(r,r+e.length)),a)}return[a]},[]):t}t.a=function(e){const t=e.disabled,n=e.item,c=e.isSection,d=e.isSelectMode,u=e.isWithinSectionPicker,p=e.saveState,m=e.searchQuery,h=e.selected,g=e.size,b=void 0===g?"md":g,f=c?null:n,y=c?n:null,v=y&&y.title||f&&f.name||"";let w="",E=!1,_="",C=0;if(f){w=f.image_cover_url,E=f.is_collaborative,_=f.privacy;var O=f.section_count;C=void 0===O?0:O}const S=l(m,v),x=_===o.a.BoardPrivacy.SECRET,k=!t&&(h||!!p),I=!u&&C>0,P=C>0?"boardWithSection":"boardWithoutSection",T=d?r.a._("Select","Board select button label"):r.a._("Save","Pin save button label");return i.createElement(s.b,{alignItems:"center",color:k?"lightGray":"white",display:"flex",paddingX:"lg"===b?4:6,paddingY:2,"data-test-id":P},i.createElement(s.b,{height:"lg"===b?40:36,width:"lg"===b?40:36,color:"lightGray",overflow:"hidden",shape:"rounded",marginRight:2,flex:"none"},w?i.createElement(s.o,{src:w,alt:v,fit:"cover",naturalWidth:1,naturalHeight:1}):i.createElement("span",null)),i.createElement(s.b,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow"},i.createElement(s.J,{color:t?"gray":"darkGray",bold:!0,size:"lg"===b?"xl":"md",truncate:!0},S),(I||!k)&&i.createElement(s.b,{alignItems:"center",display:"flex"},x&&i.createElement(a.a,{type:"secret"}),E&&i.createElement(a.a,{type:"group"}),I&&i.createElement(a.a,{type:"sections"})),!I&&k&&!p&&i.createElement(s.b,{alignItems:"center","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,dangerouslySetInlineStyle:{__style:{backgroundColor:"#e60023",borderRadius:"4px"}}},!d&&i.createElement(s.b,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},i.createElement(s.m,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})),i.createElement(s.J,{bold:!0,color:"white",size:"sm",overflow:"normal"},T)),!I&&k&&"loading"===p&&i.createElement(s.b,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35},i.createElement(s.F,{accessibilityLabel:r.a._("Saving","Accessibility label for saving a pin to a board"),show:!0}))))}},CtGn:function(e,t,n){n.d(t,"a",function(){return o});var i=n("GyhR");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o({children:e}){const t=a(Object(i.useState)(!1),2),n=t[0],o=t[1],r=a(Object(i.useState)(!1),2),s=r[0],l=r[1],c=a(Object(i.useState)(!1),2),d=c[0],u=c[1];return e({active:n,focused:s,hovered:d,onBlur:()=>l(!1),onFocus:()=>l(!0),onMouseDown:()=>o(!0),onMouseEnter:()=>u(!0),onMouseLeave:()=>{u(!1),o(!1)},onMouseUp:()=>o(!1)})}},CuRr:function(e,t,n){n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var i=n("E56J"),a=n("ePT2");const o=()=>{const e=window.location;e.search.includes("nic=1")||(()=>a.a.create("InviteSocialTrackingParamNonInviteResource").callCreate().then(e=>!(!e||!e.resource_response)&&!0===e.resource_response.data))().then(t=>{if(!t)return;const n=(e.search?"&":"?")+"nic=1",a=e.protocol+"//"+e.host+e.pathname+e.search+n;i.default.increment("web.social_tracking_pin_non_invite.insert"),window.history.replaceState(null,null,a)})},r=()=>{window.location.search.includes("nic=1")?i.default.increment("web.social_tracking_pin_non_invite.land"):o()}},CwDa:function(e,t,n){var i=n("GyhR"),a=n("Mr4W"),o=n("Ivf5"),r=n("dg2R"),s=n("NmcB");function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},HybridSearchHero:{impressionType:"hybridSearchHeroImpressions",idType:"hybridSearchHero",eventType:7308},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573}};t.a=Object(o.connect)(function({pins:e},{loggingId:t}){const n=e[t||""];return{carousel_data:n?n.carousel_data:{}}},()=>({}))(class extends i.Component{constructor(...e){super(...e),c(this,"trackImpression",()=>{try{this.node=Object(a.findDOMNode)(this),this.node instanceof HTMLElement&&r.b.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),c(this,"logImpression",e=>{const t=this.props,n=t.carousel_data,i=t.impressionType,a=t.trackCarousel,o=t.contextLogData,r=t.viewData,c=t.viewType,u=t.viewParameter,p=t.componentType,m=t.objectIdStr,h=t.loggingId,g=t.slotIndex,b=t.impressionAuxFields,f=d[i],y=f.idType,v=e.forcedExit&&"removed"===e.forcedExit?0:void 0,w=l({endTime:e.endTime,[y]:h,slotIndex:g,time:e.startTime,renderDuration:e.endTime-e.startTime},b,{forcedExit:v});if(a||Object(s.a)(f.eventType,l({viewData:r||{},view:c,viewParameter:u,component:p,objectIdStr:m,eventData:{[f.impressionType]:[w]}},o)),n&&a){const e=n.carousel_slots,t=n.index,i=n.id;Object(s.a)(7352,l({viewData:r||{},view:c,viewParameter:u,component:p,objectIdStr:m,eventData:{pinCarouselSlotImpressions:[l({},w,{carouselDataId:Number(i),carouselSlotId:e[t]&&Number(e[t].id),slotIndex:t})]}},o))}})}componentDidMount(){this.props.inImpressionExp&&!r.b.inExperiment&&r.b.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&r.b.stop(this.node)}render(){return i.Children.only(this.props.children)}})},DKjr:function(e,t,n){function i(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}n.d(t,"a",function(){return i})},DLN1:function(e,t,n){n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"f",function(){return c});const i=64,a=22,o="HeaderContent",r=4,s=24,l=671,c={headerMessage:{__style:{marginBottom:r}}}},E1Qe:function(e,t,n){var i=n("hvnN"),a=n.n(i);t.a=a.a.shape({access:a.a.arrayOf(a.a.string),ad_match_reason:a.a.number,aggregated_pin_data:a.a.shape({aggregated_stats:a.a.shape({done:a.a.number,likes:a.a.number,saves:a.a.number}),pin_tags:a.a.arrayOf(a.a.shape({pin_tag_key:a.a.string.isRequired,x_percent:a.a.number.isRequired,y_percent:a.a.number.isRequired}))}),attribution:a.a.shape({embed:a.a.shape({src:a.a.string})}),board:a.a.shape({followed_by_me:a.a.bool,id:a.a.string,url:a.a.string,name:a.a.string}),buyable_product:a.a.shape({display_active_max_price:a.a.string,display_active_min_price:a.a.string,short_description:a.a.string,title:a.a.string}),debug_info_html:a.a.string,description:a.a.string,domain:a.a.string,dominant_color:a.a.string,done_by_me:a.a.bool,embed:a.a.shape({src:a.a.string,type:a.a.string}),id:a.a.string,images:a.a.shape({"236x":a.a.shape({url:a.a.string,height:a.a.number}),"474x":a.a.shape({url:a.a.string,height:a.a.number})}),image_signature:a.a.string,is_quick_promotable:a.a.bool,is_eligible_for_web_closeup:a.a.bool,is_native:a.a.bool,link:a.a.string,native_creator:a.a.shape({username:a.a.string,full_name:a.a.string,id:a.a.string,image_small_url:a.a.string}),per_pin_analytics:a.a.shape({clickthrough:a.a.number,closeup:a.a.number,id:a.a.string,impression:a.a.number,repin:a.a.number,total_engagement:a.a.number,type:a.a.string}),pinner:a.a.shape({explicitly_followed_by_me:a.a.bool,full_name:a.a.string,id:a.a.string,image_small_url:a.a.string}),promoter:a.a.shape({username:a.a.string,full_name:a.a.string,image_small_url:a.a.string}),recommendationReason:a.a.shape({reason:a.a.string,board:a.a.shape({id:a.a.string,name:a.a.string,url:a.a.string}),interest:a.a.shape({id:a.a.string}),pin:a.a.shape({id:a.a.string})}),repin_count:a.a.number,rich_summary:a.a.shape({display_name:a.a.string}),source_interest:a.a.shape({name:a.a.string,url_name:a.a.string,id:a.a.string}),tracked_link:a.a.string,title:a.a.string,type:a.a.string,videos:a.a.shape({}),saved:a.a.bool})},EDDr:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("iz36"),r=n("hvnN"),s=n.n(r),l=n("2cEh"),c=n("+U6O");const d=[500329,500410,500688],u=({placementId:e})=>a.a.createElement(o.a,{placementId:e,experienceIds:d},({experience_id:e,complete:t,dismiss:n,display_data:i})=>(l.a.instance().subscribe(t,n),a.a.createElement(c.O,{onTouch:n,fullWidth:!1},a.a.createElement("div",{className:"experienceSystemPushOverlay"}),";")));u.propTypes={placementId:s.a.number.isRequired},t.a=u},EGTn:function(e,t,n){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});var i=n("t2/K"),a=n.n(i);const o=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),r=e=>{const t=a()(e,e=>!o(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),i=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return i?decodeURIComponent(i[1]):""})(t):""}},EQo2:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("IqQH"),r=n("PNko"),s=n.n(r),l=n("/Mjl"),c=n("+U6O");function d({onError:e,onLoad:t,pin:n}){const i=n.title,o=void 0===i?"":i,r=n.dominant_color,s=n.images,d=void 0===s?{}:s,u=`${16/9*100}%`,p=d["236x"].width>d["236x"].height?d["736x"]:d["236x"];return a.a.createElement(c.b,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:u}}},a.a.createElement(c.b,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:l.a.storyPinImage}}},a.a.createElement(c.o,{alt:o,color:r,naturalHeight:p.height,naturalWidth:p.width,onError:e,onLoad:t,src:p.url,fit:"cover"})))}var u=n("UmN8"),p=n("3hnx");t.a=(({cropProductPin:e,highResOnly:t,lowResOnly:n,onError:i,onLoad:r,pin:l,saved:m=!1})=>{const h=l.carousel_data,g=l.description,b=void 0===g?"":g,f=l.dominant_color,y=l.id,v=l.images;if(h)return a.a.createElement(o.a,{onError:i,onLoad:r,highResOnly:t,lowResOnly:n,pinId:y});let w,E,_,C;if(v){const e=t&&(v["736x"]||v.orig||v["474x"])||v["236x"];_=e.height,C=e.width,w=e.url,E=n||t?`${e.url} 1x`:[`${v["236x"].url} 1x`,v["474x"]&&`${v["474x"].url} 2x`,v["736x"]&&`${v["736x"].url} 3x`,v.orig&&`${v.orig.url} 4x`].filter(Boolean).join(", ")}return a.a.createElement(c.b,{minHeight:120,display:"flex",alignItems:"center"},a.a.createElement(c.b,{flex:"grow"},a.a.createElement("div",{className:s()({savedGradient:m})},a.a.createElement(u.a,{name:"web_creators_story_pin_display",activate:!0,isEligible:!!l.story_pin_data_id},({anyEnabled:t})=>t?a.a.createElement(d,{pin:l,onError:i,onLoad:r}):a.a.createElement(u.a,{name:"web_image_loading_optimization"},({group:t})=>a.a.createElement(c.b,{height:e?p.a:void 0,width:e?p.b:void 0},a.a.createElement(c.o,{alt:b,color:f,fit:e?"cover":"none",naturalHeight:_,naturalWidth:C,onError:i,onLoad:r,src:w,srcSet:E,loading:t.includes("lazy")?"lazy":"auto",importance:t.includes("low")?"low":"auto"})))))))})},F73h:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("A5yW"),s=n("+U6O"),l=n("9Y9K"),c=n("Qo1m"),d=n("BQ43");const u=(e,t)=>{const n=e.isLoaded,i=e.isFetching,o=e.fetchMore;return a.a.createElement(a.a.Fragment,null,(t||n)&&a.a.createElement(d.a,{handleClick:o,text:c.a._("See more comments","Display more comments in a feed")}),i&&a.a.createElement(s.b,{padding:2},a.a.createElement(s.F,{accessibilityLabel:c.a._("Loading","Loading posts and comments"),show:i})))};var p=n("Y2BC"),m=n("eB/M");const h=e=>e.reduce((e,t)=>e.concat("boardactivity"===t.type||"boardactivitycomment"===t.type?[t]:[]),[]),g=[];t.a=Object(l.compose)(Object(o.connect)((e,t)=>{const n=e.feeds[m.a.BOARD_ACTIVITYCOMMENTS],i=(void 0===n?{}:n)[t.parentObject.id];return{feedItems:h(i||g)}}),Object(p.b)({name:"BoardActivityCommentFeedResource",key:"feedResource",options:e=>({page_size:e.pageSize||3,activityId:e.parentObject.id,parentType:e.parentObject.type,redux_normalize_feed:!0})},{allowStale:!1}))(({board:e,feedItems:t,feedResource:n,parentObject:i,showMorePosition:o="top",showReplies:l=!1})=>{const c=n.isAtEnd;return a.a.createElement(s.b,{display:"flex",direction:"column",width:"100%"},"top"===o&&!c&&a.a.createElement(s.b,{marginBottom:3},u(n)),t&&t.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(s.b,null,t.map((n,o)=>a.a.createElement(s.b,{key:`activityItem-${n.id}`},a.a.createElement(r.a,{activityId:n.id,activityType:n.type,board:e,isLast:o===t.length-1,parentObject:i,showReplies:l,viewType:"replies"}))))),"bottom"===o&&!c&&a.a.createElement(s.b,{marginBottom:3},u(n)))})},FCql:function(e,t,n){var i=n("GyhR"),a=n("Qo1m"),o=n("IGno"),r=n("Mce2"),s=n("+U6O");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=({action:e,label:t,testId:n})=>i.createElement(r.a,{id:`flyout-item-${n}`},i.createElement(s.c,{accessibilityLabel:t,color:"white",text:t,onClick:e}));class d extends i.PureComponent{constructor(...e){super(...e),l(this,"state",{isFlyoutOpen:!1}),l(this,"toggleFlyout",e=>{const t=(e||{}).event||{};t.preventDefault&&(t.preventDefault(),t.stopPropagation()),this.setState({isFlyoutOpen:!this.state.isFlyoutOpen})})}render(){const e=this.props,t=e.handleClickReport,n=e.handleDelete,l=e.handleOnEdit,d=e.small,u=this.state.isFlyoutOpen;return t||n||l?i.createElement(s.b,{display:"flex",direction:"column",alignItems:"end"},i.createElement(s.b,null,i.createElement("div",{ref:e=>{this.flyoutAnchor=e}},i.createElement(r.a,{id:"flyout-toggle"},i.createElement(s.n,{accessibilityExpanded:u,accessibilityHaspopup:!0,accessibilityLabel:a.a._("more options","accessible label for button to see more options on report content"),icon:"ellipsis",onClick:this.toggleFlyout,size:d?"sm":"md"}))),u&&i.createElement(s.q,null,i.createElement(o.a,null,i.createElement(r.a,{id:"flyout"},i.createElement(s.j,{anchor:this.flyoutAnchor,idealDirection:"down",onDismiss:this.toggleFlyout,positionRelativeToAnchor:!1,size:"sm"},i.createElement(s.b,{width:"100%"},l&&i.createElement(c,{action:l,label:a.a._("Edit","Edit a community post or comment"),testId:"edit"}),n&&i.createElement(c,{action:n,label:a.a._("Delete","Delete a community post or comment"),testId:"delete"}),t&&i.createElement(c,{action:t,label:a.a._("Report this content","Report a community post or comment"),testId:"report"})))))))):null}}l(d,"defaultProps",{handleClickReport:null,handleDelete:null,handleOnEdit:null}),t.a=d},FEwd:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("VLF8"),r=n("iVPt"),s=n("+U6O");const l=32.441;var c=()=>a.a.createElement("svg",{width:440,height:316,style:{opacity:1,overflow:"visible",transform:"scale(.95)"},viewBox:"0 0 440 316",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.a.createElement("defs",null,a.a.createElement("path",{d:"M15.9508 11.963c-2.2026 0-3.9877 1.7852-3.9877 3.9878 0 2.2025 1.7851 3.9877 3.9877 3.9877 2.2025 0 3.9877-1.7852 3.9877-3.9877 0-2.2026-1.7852-3.9877-3.9877-3.9877m-11.9631 0c2.2025 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7852 3.9877-3.9877 3.9877C1.7852 19.9385 0 18.1533 0 15.9508c0-2.2026 1.7852-3.9877 3.9877-3.9877zm23.9261 0c2.2026 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7851 3.9877-3.9877 3.9877-2.2025 0-3.9876-1.7852-3.9876-3.9877 0-2.2026 1.7851-3.9877 3.9876-3.9877z",id:"a"}),a.a.createElement("path",{d:"M8.4456.6691l1.3182 4.3182h4.3945c.8974 0 1.2824 1.153.569 1.705L11.133 9.4709l1.3475 4.4165c.2699.8827-.7398 1.5963-1.4654 1.0349l-3.466-2.6794-3.4659 2.6794c-.7266.5614-1.7363-.1522-1.4664-1.035L3.9653 9.471.37 6.6923c-.7124-.552-.3274-1.705.57-1.705h4.3935L6.6527.6691c.2727-.8921 1.5202-.8921 1.7929 0",id:"b"}),a.a.createElement("path",{d:"M8.0882 12.9614c-2.6756 0-4.853-2.1808-4.853-4.8606 0-2.6797 2.1774-4.8605 4.853-4.8605 2.6756 0 4.853 2.1808 4.853 4.8605 0 2.6798-2.1774 4.8606-4.853 4.8606m10.6126 2.3314l-3.444-3.4486c.5848-1.1203.9197-2.3921.9197-3.7434C16.1765 3.6268 12.5554 0 8.0882 0 3.6211 0 0 3.6267 0 8.1008s3.6211 8.1009 8.0882 8.1009c1.3492 0 2.619-.3354 3.7376-.921L15.269 18.73c.948.9494 2.4839.9494 3.4318 0 .948-.9486.948-2.4878 0-3.4372",id:"c"}),a.a.createElement("path",{d:"M0 39.5562c0 16.8872 10.5846 31.3054 25.4808 36.9784-.3626-3.0887-.7483-8.1815.0824-11.7548.7153-3.0722 4.6182-19.5737 4.6182-19.5737s-1.1768-2.3569-1.1768-5.8477c0-5.472 3.171-9.5594 7.1234-9.5594 3.3622 0 4.984 2.5217 4.984 5.5444 0 3.3788-2.1525 8.4288-3.2633 13.113-.9263 3.9193 1.9679 7.1167 5.8312 7.1167 6.9982 0 12.381-7.3805 12.381-18.0343 0-9.4308-6.7772-16.0202-16.452-16.0202-11.201 0-17.7772 8.4023-17.7772 17.0882 0 3.3854 1.302 7.0114 2.9305 8.9859.3197.3922.3692.7318.2736 1.1306-.3 1.246-.9659 3.9194-1.0944 4.4666-.1747.7186-.5703.8735-1.3186.524-4.9181-2.2876-7.9903-9.477-7.9903-15.2521 0-12.424 9.022-23.8293 26.0148-23.8293 13.66 0 24.2776 9.7341 24.2776 22.7415 0 13.571-8.554 24.4952-20.434 24.4952-3.992 0-7.74-2.0767-9.0255-4.526 0 0-1.9745 7.5223-2.4525 9.3617-.9295 3.5732-3.5073 8.0958-5.106 10.6637 3.6853 1.134 7.5948 1.7437 11.6493 1.7437 21.8449 0 39.5561-17.7112 39.5561-39.5561C79.1123 17.7112 61.4011 0 39.5562 0 17.7112 0 0 17.7113 0 39.5562",id:"d"})),a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("path",{d:"M15.12 33.6034c-7.6878 0-13.92 6.2322-13.92 13.92V300.88c0 7.6878 6.2322 13.92 13.92 13.92h409.76c7.6878 0 13.92-6.2322 13.92-13.92V47.5234c0-7.6878-6.2322-13.92-13.92-13.92H15.12z",stroke:"#DEDEDE",strokeWidth:"2.4",fill:"#FFF"}),a.a.createElement("g",{transform:`translate(0 ${l})`},a.a.createElement("path",{d:"M15.12 0h409.76C433.2305 0 440 6.7695 440 15.12v48.6067H0V15.12C0 6.7695 6.7695 0 15.12 0z",fill:"#DEDEDE"}),a.a.createElement("rect",{fill:"#FFF",x:"15.5858",y:"12.0152",width:"218.9216",height:"38.8841",rx:"19.442"}),a.a.createElement("use",{fill:"#FFF",xlinkHref:"#a",transform:"translate(384.8501 15.6198)"}),a.a.createElement("use",{fill:"#DEDEDE",xlinkHref:"#b",transform:"translate(206.2125 24.0304)"}),a.a.createElement("use",{fill:"#DEDEDE",xlinkHref:"#c",transform:"translate(26.376 21.6274)"})),a.a.createElement("g",{fill:"#DEDEDE"},a.a.createElement("rect",{id:"content-morph",x:31,y:139,width:"230.7843",height:"126.3732"}),a.a.createElement("rect",{className:"content-bar",x:"281.4706",y:"139.3346",width:"126.1765",height:"14.0415"}),a.a.createElement("rect",{className:"content-bar",x:"281.4706",y:"164.1772",width:"85.1961",height:"14.0415"})),a.a.createElement("ellipse",{fill:"#FFF",fillOpacity:"0.49",cx:38,cy:38,rx:38,ry:37.8,id:"pinterest-logo-pop-bg"}),a.a.createElement("g",{id:"pinterest-logo",transform:"translate(277.1569) scale(1)"},a.a.createElement("ellipse",{fill:"#FFF",cx:"37.8",cy:"37.8479",rx:37.8,ry:37.8}),a.a.createElement("g",{transform:"translate(0 .0493)"},a.a.createElement("mask",{id:"e",fill:"#fff"},a.a.createElement("use",{xlinkHref:"#d"})),a.a.createElement("g",{mask:"url(#e)",fill:"#E60023"},a.a.createElement("rect",{width:"80.1649",height:"80.1649"}))))));function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=(e,t,n)=>e-t/2*(n-1),m=p(277.1569,75.6,1.4),h=p(0,75.6,1.4),g=p(279,76,2.1),b=p(2,75.6,2.1),f={targets:".simplePopExtensionContent",opacity:[0,1],duration:500,easing:"easeInOutQuad"},y={targets:["#content-morph",".content-bar"],opacity:[0,1]},v={targets:"#content-morph",width:30,height:30,x:220,y:203,rx:20},w={targets:".content-bar",width:0,height:0,x:215,y:218},E={targets:"#content-morph",x:301,y:24},_={targets:"#pinterest-logo",translateX:[277.1569,m],translateY:h,scale:1.4,direction:"alternate"},C={targets:"#pinterest-logo",translateX:[m,277.1569],translateY:0,scale:1,direction:"alternate"},O={targets:"#pinterest-logo-pop-bg",translateX:[279,g],translateY:[2,b],scale:2.1,direction:"alternate"},S={targets:"#pinterest-logo-pop-bg",translateX:[g,279],translateY:[b,2],scale:1},x=e=>{const t=500+(e?0:750),n=t+300,i=n,a=n+280,o=i+210,s=r.a.timeline({easing:"easeInOutQuad",loop:e,direction:"normal",autoplay:!1});return s.add(d({},y,{duration:500})),e||s.add({duration:750}),s.add(d({},v,{duration:300}),t).add(d({},w,{duration:300}),t).add(d({},E,{duration:300}),n).add(d({},_,{duration:280}),n).add(d({},O,{duration:210}),i).add(d({},C,{duration:190,easing:"cubicBezier(0, 0, 0.23, 0.8)"}),a).add(d({},S,{duration:300}),o).add({duration:1400}),s};class k extends a.a.PureComponent{componentDidMount(){const e=this.props.isLooping;window.requestAnimationFrame(()=>{const t=x(e);Object(r.a)(f).finished.then(()=>t.play())})}render(){return a.a.createElement(s.b,{display:"flex",flex:"grow",justifyContent:"center",alignItems:"center",marginTop:Math.floor(-l/4)},a.a.createElement(c,null))}}u(k,"defaultProps",{isLooping:!1});var I=k,P=n("Qo1m"),T=n("NmcB");function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return R}),n.d(t,"b",function(){return D});const R=({header:e,installClick:t,skipClick:n,subheader:i})=>a.a.createElement(s.b,{direction:"column",display:"flex",height:"100%",width:"100%"},a.a.createElement(s.b,{direction:"column",display:"flex",maxWidth:700,padding:8,wrap:!0},a.a.createElement(s.l,{size:"xs"},e),a.a.createElement(s.J,{size:"xl"},i)),a.a.createElement(s.b,{display:"flex",flex:"grow",margin:8},a.a.createElement(I,{isLooping:!0})),a.a.createElement(s.i,null),a.a.createElement(s.b,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",padding:4,width:"100%"},a.a.createElement(s.c,{accessibilityLabel:P.a._("Get the Pinterest browser extension","Accesibility label for the Pinterest browser extension"),color:"red",onClick:t,text:P.a._("Get it now","Get the Pinterest browser extension"),size:"lg"}),a.a.createElement(s.b,{dangerouslySetInlineStyle:{__style:{color:"#8e8e8e",textDecoration:"underline"}},marginTop:4},a.a.createElement(s.O,{onTouch:n,mouseCursor:"pointer"},a.a.createElement(s.J,{bold:!0,color:"gray"},P.a._("Skip"))))));class D extends i.PureComponent{constructor(...e){super(...e),j(this,"onInstallButtonClicked",()=>{const e=this.props.handleComplete;o.a.handleExtensionInstall(e),Object(T.a)(101,{component:17,element:280,view:3,viewParameter:3226})}),j(this,"onSkipButtonClick",()=>{const e=this.props.handleDismiss;Object(T.a)(101,{component:17,element:1150,view:3,viewParameter:3226}),e()})}componentDidMount(){Object(T.a)(13,{view:3,viewParameter:3226})}render(){return a.a.createElement(R,{header:P.a._("Get the Pinterest browser button","Heading for downloading Pinterest chrome extension app"),installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:P.a._("Save creative ideas from around the web.","Subheader text for downloading Pinterest chrome extension app")})}}},FGWo:function(e,t,n){var i=n("GyhR"),a=n("Ivf5"),o=n("hvnN"),r=n.n(o),s=n("dBWR"),l=n("XXWR");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1};t.a=((e,t={},n)=>o=>{const u=function(e){return t=>({experience:t.experiences.eligibleExperiences[e]})}(e);n=Object.assign({},d,n);const p=function(e,t,n=!0,a=!0,o){var d,u;return u=d=class extends i.Component{constructor(e){super(e),c(this,"state",{}),c(this,"setExtraContextState",e=>this.setState({extraContext:e}))}componentDidMount(){this.dispatchPlacementMount(!1)}UNSAFE_componentWillUpdate(n,i){const a=n.dispatch,o=n.experience;let r=t;if("function"==typeof t){const e=i.extraContext||{};r=t(n,e)}if(!Object(l.e)(o)&&"function"==typeof t&&r&&Object.keys(r).length){const n=t(this.props,this.state);JSON.stringify(n)!==JSON.stringify(r)&&a(Object(s.c)(e,r))}!o||this.props.experience&&o.id===this.props.experience.id||a(Object(s.i)(e,r))}componentWillUnmount(){(0,this.props.dispatch)(Object(s.k)(e))}dispatchPlacementMount(n){const i=this.props.dispatch;let a={};a="function"==typeof t?t(this.props,this.state):Object.assign({},t),i(Object(s.j)(e,a,n))}render(){const e=this.props.experience;return i.createElement(o,Object.assign({},this.props,{setPlacementExtraContext:this.setExtraContextState,experience:Object(l.e)(e)?e:null}))}},c(d,"propTypes",{dispatch:r.a.func.isRequired,experience:r.a.shape(l.a)}),u}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,o);return Object(a.connect)(u)(p)})},FOY1:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("XQD6"),s=n("dBWR"),l=n("sliO"),c=n("UHJ+");var d=Object(o.connect)(({history:e,pins:t,routePins:n,viewer:i,location:a},o)=>({isLandingPage:0===e.previous.length,isLimitedLogin:!!i.isAuth&&i.isLimitedLogin,didRepin:!!t[o.pinId]&&(t[o.pinId].saved||!!t[o.pinId].savedInfo),pin:t[o.pinId]||o.pinResource.data||{},navigablePins:e.previous.length>0?Object(l.b)(n,e.previous.slice(-1)[0].location):null,shouldShowInbox:!!a.query&&"inbox"===a.query.tab}),e=>({completePinClickthrough:()=>{e({type:"COMPLETE_PIN_CLICKTHROUGH"})},completePinCloseup:()=>{e({type:"COMPLETE_PIN_CLOSEUP"})},updateExperienceForPlacement:t=>{e(Object(s.c)(t))},openInbox:()=>{e(c.b)}}))(e=>{return(0,e.children)({completePinClickthrough:e.completePinClickthrough,completePinCloseup:e.completePinCloseup,isLandingPage:e.isLandingPage,isLimitedLogin:e.isLimitedLogin,didRepin:e.didRepin,navigablePins:e.navigablePins,openInbox:e.openInbox,pin:e.pin,shouldShowInbox:e.shouldShowInbox,updateExperienceForPlacement:e.updateExperienceForPlacement})}),u=n("pMx3"),p=n("Qo1m");function m({deepLinkBackGoesToBoard:e,trafficSource:t}){const n={board:p.a._("Board","Close/back button label for board pages"),feed_category:p.a._("Explore","Close/back button label for explore pages"),feed_following:p.a._("Following","Close/back button label for following pages"),feed_home:p.a._("Home","Close/back button label for homefeed"),flashlight:p.a._("Visual search","Close/back button label for flashlight"),messages:p.a._("Inbox","Close/back button label for messages"),notifications:p.a._("Notifications","Close/back button label for notification pages"),search:p.a._("Results","Button label to go back to search results page"),shop_feed:p.a._("Results","Button label to go back to shopping feed page"),unknown:p.a._("Back","Button label to go back to previous page (previous page unknown)"),user_pins:p.a._("Profile","Close/back button label for pins pages"),user_tries:p.a._("Profile","Close/back button label for tries page")};return"deep_linking"===t?e?n.board:n.feed_home:t&&n[t]||n.unknown}var h=n("yzmC"),g=n("+U6O");function b(){const e=Object(i.useContext)(h.a).showLegoUpdates;return a.a.createElement(g.b,Object.assign({justifyContent:"center",alignItems:"center",display:"flex",color:"white",direction:"column",paddingX:8,paddingY:e?3:2},e?{marginBottom:1}:{minHeight:65}),a.a.createElement(g.b,{column:12,smColumn:8,justifyContent:"center",alignContent:"center",flex:"grow",display:"flex"},a.a.createElement(g.J,{align:"center",bold:!0,size:"xl"},p.a._("More like this","text that shows more pins when you scroll down to related pins from a closeup"))),a.a.createElement(g.b,{smColumn:2,display:"none",smDisplay:"block"}))}var f=n("xiPO"),y=n("un30"),v=n("mzhd"),w=n("jnwO"),E=n("8rWZ"),_=n("ivLw"),C=n("K668"),O=n("3KWM"),S=n("cemY"),x=n("hCBh");function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=class extends i.Component{constructor(...e){super(...e),k(this,"getScrollContainer",()=>this.props.showInModal&&this.props.scrollContainer instanceof HTMLElement?this.props.scrollContainer:window),k(this,"loadItems",()=>{this.props.relatedPinsResource.isFetching||this.props.relatedPinsResource.fetchMore()}),k(this,"renderItem",({data:e,itemIdx:t})=>{const n=this.props.lfvExperiences;let i;switch(e.type){case"story":i="explore_board_ideas"===e.story_type?a.a.createElement(y.a,{story:e}):a.a.createElement(w.a,{data:e.objects,id:e.id,referringSource:e.referring_source,title:e.title,type:e.story_type,viewType:3});break;case"pin":default:const o=Object(x.c)(n);i=a.a.createElement(v.a,{componentType:13007,pin:e,showImageOnly:!!o||void 0,slotIndex:t,viewData:{pin_id:this.props.pin.id},viewType:3,viewParameter:Object(C.d)(Object(S.k)(this.props))})}return a.a.createElement(_.a,null,i)})}componentDidUpdate(){const e=this.props,t=e.onRelatedFeedLoadedHandler,n=e.relatedPinsResource;n.isLoaded&&t&&t(n.data)}render(){const e=this.props,t=e.pin,n=e.relatedPinsResource;if(!n.isLoaded)return null;const i=Object(C.d)(Object(S.k)(this.props)),o=`relatedPins:${t.id}`;return a.a.createElement(E.a,{viewParameter:i,component:86},a.a.createElement(g.b,null,a.a.createElement(f.default,{columnWidth:O.e,comp:this.renderItem,items:n.data||[],loadItems:this.loadItems,cacheKey:o,isFetching:n.isFetching,paddingStyle:"simplified",scrollContainer:this.getScrollContainer,viewParameterType:i,virtualize:!0,serverRender:!0}),a.a.createElement(g.b,{position:"relative",height:300},a.a.createElement(g.F,{accessibilityLabel:p.a._("Loading"),show:Boolean(n.isFetching)}))))}};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T({children:e,fallback:t,delay:n}){return function(e){const t=P(Object(i.useState)(!1),2),n=t[0],a=t[1];return Object(i.useEffect)(()=>{const t=setTimeout(()=>a(!0),e||0);return()=>clearTimeout(t)},[]),n}(n)?e:t||null}var j=n("fxqt"),R=n("87dN"),D=n("Y2BC"),L=n("Ovv4"),A=n("9Y9K");const M=((e,t)=>(t.displayName=e,t))("CloseupRelatedPinsFeed",Object(D.b)({name:"RelatedPinFeedResource",key:"relatedPinsResource",options:({pin:e,searchQuery:t,contextPinIds:n,trafficSource:i,topLevelTrafficSource:a,topLevelTrafficSourceDepth:o})=>({field_set_key:"base_grid",pin:e.id,prepend:!1,search_query:t,show_seo_canonical_pins:e&&e.pin_join&&e.pin_join.canonical_pin,context_pin_ids:(n||[]).slice(-5),source:i,top_level_source:a,top_level_source_depth:o})},{enabledRouteRefresh:!0})(Object(L.a)({component:86},I)));var B=Object(A.compose)(R.a)(function(e){const t=e.setRelatedPinsHeaderRef,n=e.showRelatedPinsHeader;return a.a.createElement("div",{style:{cursor:"auto"},onClick:e=>{e.stopPropagation(),e.preventDefault()}},a.a.createElement(g.b,{color:"white","data-test-id":"relatedPins",display:"flex",direction:"column",flex:"grow",position:"relative"},a.a.createElement("div",{ref:t},n?a.a.createElement(b,null):null),a.a.createElement(j.a,{name:"mweb_web_full_node_related_pin_feed_resource_v2",activate:!1},({group:t})=>t&&"enabled_delayed_0"===t?a.a.createElement(T,null,a.a.createElement(M,e)):t&&"enabled_delayed_50"===t?a.a.createElement(T,{delay:50},a.a.createElement(M,e)):t&&"enabled_delayed_100"===t?a.a.createElement(T,{delay:100},a.a.createElement(M,e)):a.a.createElement(M,e))))}),F=n("U1Om");function N(e){const t=e.third_party_pin_owner,n=e.link_domain,i=e.pinner,a=e.domain;if(i&&i.domain_verified&&i.domain_url===a)return i.id;const o=n&&n.official_user;return o||t?o?o.id:t.id:e.native_creator&&e.native_creator.id}function U(e){return e&&0!==Object.keys(e.aggregated_pin_data||{}).length&&0!==Object.keys(e.aggregated_pin_data.creator_analytics||{}).length}function z(e){return e&&0!==Object.keys(e.creator_analytics||{}).length}function H(e){const t=e.aggregated_pin_data||{};return t.is_shop_the_look||t.is_stela}function V(e){const t=e.native_creator,n=e.pinner,i=e.domain,a=Object(S.k)({pin:e}),o=(Object(C.f)(a)||{}).buyableProduct;return(e.link_domain&&e.link_domain.official_user||!!e.third_party_pin_owner||!!n&&n.domain_verified&&n.domain_url===i)&&!o&&!e.is_promoted||t}function G(e,t){const n=e.is_native,i=e.native_pin_stats||{},a=Object(S.k)({pin:e}),o=(Object(C.f)(a)||{}).buyableProduct,r=(Object(S.n)(a)||{}).video;return V(e)||!n||H(e)||n&&r&&e&&e.link||Object.keys(i).length>0&&!U(e)&&!z(e)||!H(e)&&o||e.promoter&&e.is_promoted&&!t}const W=({viewer:e,requestContext:t,pin:n})=>Object(F.b)(e)&&n.is_quick_promotable_by_pinner;var Y=n("TMjA"),q=n("Pj55"),J=n("iJ35"),$=n("Irlq"),Q=n("+Yt8"),K=n("HoR0"),X=n("k9eC"),Z=n("NmcB"),ee=n("QPas");function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne=(e,t)=>{const n=Object(ee.d)(e.score),i=Object(ee.d)(t.score);return n>i?-1:n<i?1:0},ie=1e3;var ae=Object(A.compose)(Object(o.connect)(),Object(D.b)({name:"CoteriesResource",key:"coteriesResource",options:({pin:e,isPartner:t})=>({pin_ids:[e.id],isPartner:t})}))(class extends i.Component{constructor(...e){super(...e),te(this,"getFirstCoterie",e=>e&&0!==e.length?e[0]:null),te(this,"formatNumber",e=>{const t=e.toString(),n=t.length;return n>6?`${t.slice(0,n-6)} million`:n>3?`${t.slice(0,n-3)} thousand`:""}),te(this,"handleAnalyticsClick",()=>{Object(Z.a)(101,{view:3,component:13077,element:10573})}),te(this,"handlePromoteClick",(e,t)=>{Object(Q.c)("click","closeup_audience_estimation",101,13283,{audience_sizing_reach_estimation:t&&String(t.estimate)||"0",audience_sizing_coterie_score:t&&t.score||"0",audience_sizing_coterie_id:t&&String(t.id)||"0"}),this.props.dispatch(Object(K.i)(this.props.pin))}),te(this,"renderTranslatedUpsell",e=>{const t=e.name,n=e.estimate;return a.a.createElement(g.J,{size:"lg",inline:!0},Object(ee.c)(t,n,"lg"))}),te(this,"renderNoCoteriesUpsell",()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(g.J,{size:"lg",inline:!0},p.a._("Great Pin! Reach more of the ","[m10n] Telling a user their pin is great and that they should share it")),a.a.createElement(g.J,{size:"lg",inline:!0,bold:!0,overflow:"normal"},Object($.b)(p.a._("{{ mauText }} people ","[m10n] Telling a user the number of people that they can reach by promoting. MAU_TEXT is a string of xxx million"),{mauText:a.a.createElement(q.a,null)})),a.a.createElement(g.J,{size:"lg",inline:!0,overflow:"normal"},p.a._("looking for ideas on Pinterest each month by promoting it.","[m10n] Describing the people that businesses could target with advertising")))),te(this,"renderLoadingState",()=>a.a.createElement(g.b,null,a.a.createElement(g.F,{accessibilityLabel:p.a._("Audience Size loading...","[m10n] Loading audience size"),show:!0}))),te(this,"renderStatsText",e=>{const t=new X.c(this.props.requestContext,"px_pinstats_90_day_default_on_grid").enabled()?p.a._("Your Pin stats for the last 90 days. ","[m10n] Time range of the pin stats data"):p.a._("Your Pin stats for the last 30 days. ","[m10n] Time range of the pin stats data");return a.a.createElement(g.b,{marginRight:1},a.a.createElement(g.J,{inline:!0,size:"xs"},t),a.a.createElement(J.b,{key:"pinAnalyticsLink",onClick:this.handleAnalyticsClick,to:`/pin/${e}/analytics`},a.a.createElement(g.J,{inline:!0,bold:!0,size:"xs"},p.a._("See more stats.","[m10n] Link to see more Pin stats"))),a.a.createElement(g.J,{size:"xs",align:"center"},p.a._("Only you can see this","[m10n] Prompt that only you can see the analytics page")))})}componentDidMount(){Object(Q.c)("render","closeup_audience_estimation",120,13283)}render(){const e=this.props,t=e.coteriesResource.data,n=e.pin,i=e.showPinAnalytics;if(!t)return this.renderLoadingState();const o=t[n.id].filter(e=>Object(ee.d)(e.score)>.75&&e.estimate>ie);o.sort(ne);const r=this.getFirstCoterie(o),s=p.a._("Promote Pin","[m10n] Promote pin on audience estimation upsell");return Object(Z.a)(120,{component:85,audience_sizing_reach_estimation:r&&String(r.estimate)||"0",audience_sizing_coterie_score:r&&r.score||"0",audience_sizing_coterie_id:r&&String(r.id)||"0",pin_id:n.id}),a.a.createElement(a.a.Fragment,null,a.a.createElement(g.b,{padding:4,marginTop:2,dangerouslySetInlineStyle:{__style:{borderRadius:4,borderWidth:2,borderStyle:"solid",borderColor:"#efefef"}}},r?this.renderTranslatedUpsell(r):this.renderNoCoteriesUpsell(),a.a.createElement(g.b,{marginTop:6},a.a.createElement(g.c,{text:s,onClick:({event:e})=>{this.handlePromoteClick(e,r)}}))),a.a.createElement(g.b,{display:"flex",marginBottom:8,justifyContent:"center",alignItems:"center",paddingY:3},i&&this.renderStatsText(n.id)))}}),oe=n("yVWI"),re=n("VSY/"),se=n("/Rhv"),le=n("NoZx"),ce=n("FSbA");function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=Object(o.connect)((e,t)=>{const n=e.activityItems[t.boardActivityId];return{isLikedByMe:!(!n||!n.reaction_by_me)||!1,likeCount:n&&n.reaction_counts&&n.reaction_counts[1]||0}},(e,t)=>({toggleLike:Object(A.bindActionCreators)(ce.a,e)}))(class extends i.PureComponent{constructor(...e){super(...e),de(this,"state",{showLikeListModal:!1}),de(this,"toggleLikeListModal",()=>this.setState({showLikeListModal:!this.state.showLikeListModal})),de(this,"renderLikeListModal",()=>{const e=this.props,t=e.boardActivityId,n=e.likeCount;return a.a.createElement(se.a,{activityId:t,hideLikeListModal:this.toggleLikeListModal,reactionCount:n})}),de(this,"handleClickLike",()=>{const e=this.props,t=e.boardActivityId,n=e.isLikedByMe;(0,e.toggleLike)(t,1,le.a.BOARD_ACTIVITY,n)})}render(){const e=this.props,t=e.isLikedByMe,n=e.likeCount,i=this.state.showLikeListModal,o=re.i(p.a.ngettext("{{likeCount}} like","{{likeCount}} likes",n),{likeCount:n});return a.a.createElement(g.b,{display:"flex",alignItems:"center"},a.a.createElement(g.n,{accessibilityLabel:p.a._("Like pin button","accessibility label for a button to like a pin"),bgColor:"transparent",icon:"heart",iconColor:t?"red":"gray",onClick:this.handleClickLike,size:"sm"}),!!n&&a.a.createElement(g.b,{padding:1},a.a.createElement(g.O,{shape:"rounded",onTouch:this.toggleLikeListModal},a.a.createElement(g.J,{size:"sm",color:"gray",bold:!0},o))),i&&this.renderLikeListModal())}}),pe=n("F73h"),me=n("wQ8Q"),he=n("jcaw");const ge=250;function be(e){const t=e.board,n=t.name,i=t.url,o=e.savedToTime,r=e.user,s=Object($.b)(p.a._("Saved to {{boardName}}","Text describing which board a pin was saved to"),{boardName:a.a.createElement(J.b,{key:i,to:i},a.a.createElement(g.J,{size:"sm",inline:!0,truncate:!0,bold:!0},n))});return a.a.createElement(g.b,{width:"100%",display:"flex",alignItems:"center"},a.a.createElement(me.a,{user:r}),a.a.createElement(g.b,{marginLeft:2,width:"100%"},a.a.createElement(J.b,{key:r.username,to:`/${r.username}/`},a.a.createElement(g.J,{size:"sm",bold:!0},r.full_name)),a.a.createElement(g.b,{width:"100%",display:"flex",justifyContent:"between"},a.a.createElement(g.b,{width:ge},a.a.createElement(g.J,{truncate:!0,size:"sm"},s)),a.a.createElement(g.J,{inline:!0,size:"sm",color:"gray"},Object(he.f)(o)))))}var fe=n("HcgI");const ye=2;var ve=Object(o.connect)((e,t)=>{const n=t.pin,i=e.pins[n.id]&&e.pins[n.id].board_activity||n.board_activity,a=i&&i.id;return{boardActivity:a&&e.activityItems[a]||null}})(class extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=(()=>a.a.createElement(g.b,{marginTop:4,paddingY:2},a.a.createElement(g.b,{display:"flex",alignItems:"center",marginEnd:1},a.a.createElement(g.b,{shape:"circle",color:"gray",width:16,height:16,display:"flex",justifyContent:"center",alignItems:"center"},a.a.createElement(g.m,{accessibilityLabel:p.a._("Lock icon","Lock icon next to private commenting message"),icon:"lock",color:"white",size:10})),a.a.createElement(g.b,{padding:1},a.a.createElement(g.J,{color:"gray",bold:!0,size:"sm"},p.a._("Comments","title above comments on a pin")))),a.a.createElement(g.J,{color:"gray",size:"xs"},p.a._("Only you and your group members can see this","explanation about comments for pins on group boards")))),(n="renderCommentPrivacyText")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}get boardActivity(){const e=this.props,t=e.boardActivity,n=e.pin;return t||{comment_count:0,id:n.id,type:"boardactivity"}}render(){const e=this.props,t=e.pin,n=t.closeup_user_note,i=t.unified_user_note,o=t.pinner,r=t.board,s=t.created_at,l=t.edited_fields,c=t.is_repin,d=e.inUserNoteExp?i:n;return a.a.createElement(g.b,{alignContent:"between"},a.a.createElement(g.b,{paddingY:2},a.a.createElement(be,{user:o,board:r,savedToTime:s})),(!c||l&&l.includes("description")&&d)&&a.a.createElement(g.b,{paddingY:3,marginBottom:1},a.a.createElement(g.J,null,a.a.createElement(fe.a,{text:d,options:{hashtags:{source:"hashtag_closeup"}}}))),a.a.createElement(ue,{boardActivityId:this.boardActivity.id}),this.renderCommentPrivacyText(),!!this.boardActivity.comment_count&&a.a.createElement(pe.a,{board:r,pageSize:ye,parentObject:this.boardActivity,showMorePosition:"bottom",showReplies:!0}),a.a.createElement(oe.a,{activityItem:this.boardActivity,board:r}))}}),we=n("z8CG"),Ee=n("Alt3"),_e=n("3hnx");function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const Oe={container:{borderRadius:Ee.a,WebkitMaskImage:"-webkit-radial-gradient(white, black)"}};function Se(e){const t=Ce(Object(i.useState)(!1),2),n=t[0],o=t[1],r=Object(i.useCallback)(()=>o(!0),[o]),s=Object(i.useCallback)(()=>o(!1),[o]),l=e.feedLink,c=e.onClick,d=e.pin,u=d.description,p=d.title,m=d.buyable_product,h=d.rich_summary,b=d.images["474x"],f=b.height,y=b.width,v=b.url,w=p||m&&m.title||h&&h.display_name;return a.a.createElement(J.b,{to:l,onClick:c,stopPropagation:!0},a.a.createElement(g.b,{onMouseEnter:r,onMouseLeave:s,position:"relative",height:_e.a,width:_e.b,dangerouslySetInlineStyle:{__style:Oe.container},overflow:"hidden"},a.a.createElement(g.o,{alt:w||u,naturalHeight:f,naturalWidth:y,src:v,fit:"cover"}),a.a.createElement(we.a,{overlayOpacity:n?_e.k:0})))}const xe=4;function ke(e){const t=e.handleClick,n=e.index,i=e.isLast,o=e.feedLink,r=e.pin;return i?a.a.createElement(Se,{feedLink:o,onClick:t,pin:r}):a.a.createElement(g.b,{marginRight:xe},a.a.createElement(v.a,{truncatePinHeight:!1,attributionType:"none",componentType:13176,pin:r,slotIndex:n,surface:"CloseupRelatedProducts",viewData:{pin_id:r.id},viewParameter:Object(C.d)(Object(S.k)(e)),viewType:3}))}var Ie=n("XwKk"),Pe=n("CwDa"),Te=n("yKZJ"),je=n("UmN8");function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const De=6,Le=4;var Ae=Object(o.connect)(e=>({location:e.location}))(function(e){const t=e.fullColumn,n=e.pin,a=e.relatedProductsResource,o=e.width,r=e.viewportSize,s=e.trafficSource,l=e.searchQuery,c=a&&a.data||[],d=t&&"narrow"===r?3:5,u=Math.min(c.length,d-1),p=c.slice(0,u+1),m=t=>{t===u&&Object(Z.a)(101,{view:3,viewParameter:Object(C.d)(Object(S.k)(e)),component:13176,element:179})},h=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Re(e,t,n[t])})}return e}({justifyContent:"between"},t?{}:{maxWidth:o,paddingX:De}),b=p.map((e,t)=>{const a=t===u,o=`/pin/${n.id}/related-products/`;return i.createElement(g.b,{key:e.id},i.createElement(ke,{handleClick:()=>m(t),index:t,isLast:a,feedLink:o,pin:e}))}),f=Math.min(c.length,4),y=c.slice(0,f+1).map((t,a)=>{const c=a===f,d=`/pin/${n.id}/related-products/`,u=l?`q=${l}`:null,p=s&&"unknown"!==s?`rs=${s}`:null;let h="";u&&p?h=`?${u}&${p}`:!u&&p&&(h=`?${p}`);const b=`/pin/${t.id}/`,y=c?`${d}${h}`:`${b}${h}`;return i.createElement(Pe.a,{key:`carousel-impression-key-${a}`,impressionType:"Pin",impressionAuxFields:{richTypes:t.shopping_flags||[],imageURL:t.images&&t.images["236x"].url,clientTrackingParams:Object(Ie.a)(t,e.location)||`${t.tracking_params}-0`},loggingId:t.id,slotIndex:a,viewData:{pin_id:n.id},viewType:3,viewParameter:Object(C.d)(Object(S.k)(e)),componentType:13176},i.createElement(g.b,{direction:"column",display:"flex",key:t.id},i.createElement(Te.a,{viewportSize:r,containerWidth:o-De*Le,link:y,onClick:()=>m(a),pin:t,showOverlay:c,showProductIcon:!0,componentType:13176,viewData:{pin_id:n.id},viewType:3,viewParameter:Object(C.d)(Object(S.k)(e))})))});return i.createElement(je.a,{name:"web_grid_immersive",activate:!1},({anyEnabled:e})=>i.createElement(g.b,Object.assign({display:"flex"},h),e&&t?b:y))});const Me=/^\/pin\/(.*)\/$/,Be={"/":"feed_home","/pin/:id":"pin","/pin/:id/comments":"pin","/pin/:id/activity/tried":"pin","/pin/:id/visual-search":"flashlight","/discover/article/:id":"explore_article","/discover/topics/:section_id":"feed_explore","/topics/:interest":"feed_interest","/categories/:category":"feed_category","/news_hub/:id":"notifications","/explore/:interest":"seo_auth","/search/:scope":"search","/following":"feed_following","/:username/pins":"user_pins","/:username/tried":"user_tries","/:username/:slug":"board","/:username/:slug/edit":"board","/:username/:slug/invite":"board","/:username/:slug/:section_slug":"board","/pin/:id/related-products":"shop_feed"};function Fe(e,t){if(t<=0)return"unknown";const n=e[t].previousPath||"",i=e[t-1];return i&&i.pathname&&i.pathname.includes("?lp=true")?"unknown":n?Be[n]||"unknown":"feed_home"}function Ne(e,t){const n=["pin"],i=[];let a=1,o="unknown",r="unknown",s=!0;for(let l=e.length-1;l>0;l-=1){const t=Fe(e,l);n.splice(0,0,t),s&&("pin"===(o=t)?a+=1:s=!1)}for(let l=e.length-2;l>=0;l-=1){const t=(e[l].pathname||"").match(Me);if(!t||2!==t.length)break;i.splice(0,0,t[1])}if(1===n.length?(r="deep_linking",o="deep_linking"):(r=n[n.length-2],"pin"===o&&(o="deep_linking"),2===n.length&&"pin"===r&&(r="deep_linking")),"seo_auth"!==r||t||(r="seo_unauth"),"seo_auth"!==o||t||(o="seo_unauth"),("search"===r||"search"===o)&&e.length>=a+1){"/search/buyable_pins/"===(e[e.length-a-1].pathname||"")&&(o="shop_feed","search"===r&&(r="shop_feed"))}return{trafficSource:r,topLevelTrafficSource:o,topLevelTrafficSourceDepth:a,contextPinIds:i}}var Ue=n("q579");function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class He extends i.PureComponent{constructor(...e){super(...e),ze(this,"state",{containerWidth:0}),ze(this,"getSearchQuery",e=>{const t=Ue.a.getQueryStringParams;for(let n=e.length-1;n>=0;n-=1)if(e[n]&&e[n].pathname&&e[n].pathname.includes("/search/")){const i=t(e[n].search);return i?i.q:null}return null}),ze(this,"onResize",()=>{this.container&&this.setState({containerWidth:this.container.getBoundingClientRect().width})}),ze(this,"setContainerRef",e=>{this.container=e})}componentDidMount(){this.onResize(),window.addEventListener("resize",this.onResize)}componentDidUpdate(e){this.onResize()}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}render(){const e=this.props,t=e.history,n=e.pin,i=e.relatedProductsResource,o=e.variant,r=e.viewer,s=i.isLoaded,l=i&&i.data||[];if(!s||0===l.length)return null;const c="full-column"===o,d=Ne(t,r.isAuth).trafficSource,u=t.length&&"search"===d?this.getSearchQuery(t):null;return a.a.createElement(h.a.Consumer,null,({showLegoUpdates:e,viewportSize:t,width:o})=>{const r=e?0:3;return a.a.createElement(g.b,Object.assign({display:"flex",direction:"column",position:"relative",color:"white",paddingY:c?r:0},e?{dangerouslySetInlineStyle:{__style:{marginTop:"18px",marginBottom:"28px"}}}:{}),a.a.createElement("div",{ref:this.setContainerRef},a.a.createElement(g.b,Object.assign({marginBottom:4},c?{paddingY:e?0:1}:{paddingX:6}),a.a.createElement(g.J,{align:c?"center":"left",bold:!0,size:c?"xl":"lg"},p.a._("Products like this","Heading for Related Products beneath pin closeup"))),a.a.createElement(Ae,{fullColumn:c,pin:n,relatedProductsResource:i,width:c?this.state.containerWidth:o,viewportSize:t,searchQuery:u,trafficSource:d})))})}}ze(He,"defaultProps",{variant:"condensed"});var Ve=Object(A.compose)(Object(D.b)({name:"RelatedProductFeedResource",key:"relatedProductsResource",options:({pin:e,trafficSource:t,searchQuery:n})=>({field_set_key:"grid_item",num_pins_to_show:10,shop_source:"pin",pin:e.id,source:t,query_string:n})}),Object(o.connect)(({location:e,viewer:t})=>({history:e.history,viewer:t})))(He),Ge=n("ckdM"),We=n("66xa"),Ye=n("gHbN"),qe=n("eB/M"),Je=n("ZyBG");function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qe=1,Ke=4,Xe=5,Ze=105,et=82;var tt=Object(A.compose)(Object(o.connect)(function(e,t){const n=e.feeds[qe.a.USER_DID_IT_DATA];return{items:((void 0===n?{}:n)[t.aggregatedPinDataId]||[]).reduce((t,n)=>{if("userdiditdata"!==n.type)return t;const i=e.userDidItData[n.id];if(!i)return t;const a=i.images,o=i.videos;if(a&&a.length>0)return t.concat(a[0]);if(o&&o.length>0&&o[0].video_list&&(o[0].video_list.V_HLSV4||o[0].video_list.V_HLSV4)){const e=o[0].video_list.V_HLSV4,n={"150x150":{height:(e||{}).height,url:(e||{}).thumbnail,width:(e||{}).width}};return t.concat(n)}return t},[])}},()=>({})),Object(D.b)({name:"AggregatedActivityFeedResource",key:"resource",options:e=>({aggregated_pin_data_id:e.aggregatedPinDataId,page_size:(e.inUnifiedComments?Xe:Ke)+2,show_did_it_feed:!0,field_set_key:"pin_closeup_tried_it_preview",redux_normalize_feed:!0})},{allowStale:!1}))(class extends i.PureComponent{constructor(...e){super(...e),$e(this,"state",{doneByMe:!!this.props.isDoneByMe}),$e(this,"onDoneStateChanged",e=>{if(e){(0,this.props.resource.refreshData)();const e=!this.state.doneByMe;this.setState({doneByMe:e})}})}componentDidUpdate(e){const t=this.props,n=t.didItData,i=t.resource,a=i.data,o=i.fetchMore,r=i.isAtEnd,s=i.isFetching,l=i.isLoaded,c=t.inUnifiedComments,d=(n||{}).images_count,u=void 0===d?0:d,p=l&&!e.resource.isLoaded||!s&&e.resource.isFetching,m=a&&a.length||0;a&&u>0&&p&&!r&&m<(c?Xe:Ke)&&o()}renderClickToAction(e){const t=this.props,n=t.emptyStateProps,i=t.items,o=this.state.doneByMe,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){$e(e,t,n[t])})}return e}({},n);r.onDoneStateChanged=this.onDoneStateChanged;const s=i.map(e=>({type:"pin",images:e})),l=s&&s.length>=Qe,c=p.a._("Add photo","Tried it button"),d=a.a.createElement(g.b,null,a.a.createElement(g.J,{size:"sm"},p.a._("Tried this Pin?","Explanation next to add a photo button")),a.a.createElement(g.J,{size:"sm"},p.a._("Add a photo to show how it went","Explanation next to add a photo button")));return a.a.createElement(g.b,{"data-test-id":"aggregated-did-it-photos",dangerouslySetInlineStyle:{__style:{paddingBottom:16}}},!o&&a.a.createElement(g.b,{display:"flex",marginTop:l?4:0,alignItems:"start"},a.a.createElement(g.b,{display:"flex",marginRight:1,flex:"grow",alignItems:"center"},d),a.a.createElement(Je.a,Object.assign({thriftComponentType:175},r),({onTriedItButtonClick:e})=>a.a.createElement(g.b,null,a.a.createElement(g.b,{position:"relative"},a.a.createElement(Ye.a,{onClick:t=>e(t),text:c}))))))}render(){const e=this.props,t=e.didItData,n=e.items,i=e.pin,o=e.resource,r=e.inUnifiedComments,s=e.variant,l=`/pin/${i.id}/activity/tried`,c=n.map(e=>({type:"pin",images:e})),d=c&&c.length>=Qe;return a.a.createElement(g.b,null,a.a.createElement(J.b,{to:l},d&&a.a.createElement(g.b,{marginTop:r?2:4,display:"flex"},a.a.createElement(We.c,{hasBrioCorners:!0,imageFit:!0,imageSize:"150x150",isFullWidth:!0,itemHeight:r?et:Ze,itemWidth:r?et:Ze,previewItemCount:(t||{}).images_count,previewItems:c,showEmptyCards:!0,variant:s,inUnifiedComments:r})),a.a.createElement(g.F,{accessibilityLabel:p.a._("Tried it images"),show:!o||!o.isLoaded})),!r&&this.renderClickToAction(d))}}),nt=n("DKjr"),it=n("BY4F");const at=({pins:e},t)=>{const n=t.pin.aggregated_pin_data||{};return{commentCount:n.comment_count||0,photoCount:n.did_it_data&&n.did_it_data.images_count||0,videoCount:n.did_it_data&&n.did_it_data.videos_count||0}},ot=e=>({pinUpdateCommentCount:(t,n)=>e(Object(nt.a)(t,n))});var rt=e=>Object(A.compose)(it.b,Object(o.connect)(at,ot))(e),st=n("Mce2"),lt=n("b7z0"),ct=n("Qzkb"),dt=n("21DP");function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pt=rt(class extends i.PureComponent{constructor(...e){super(...e),ut(this,"state",{selectedTabIndex:this.props.featuredCommentId?1:0,showComments:!this.props.hideDidIt}),ut(this,"handleShowComments",()=>this.setState({showComments:!this.state.showComments})),ut(this,"handleTabChanged",({event:e,activeTabIndex:t})=>{e.preventDefault(),this.setState({selectedTabIndex:t})}),ut(this,"updateCommentCount",e=>{const t=this.props,n=t.pin.id;(0,t.pinUpdateCommentCount)(n,e)})}get commentsHeading(){const e=this.props.commentCount;let t=p.a._("Comments","comments on a Pin");if(e){const n=p.a.ngettext("{{ count }} Comment","{{ count }} Comments",e,"comments on a Pin");t=Object(re.i)(n,{count:e.toString()})}return t}get mediaHeading(){const e=this.props,t=e.photoCount,n=e.videoCount;if(t>0&&n>0){const e=t+n;return Object(re.i)(p.a.ngettext("{{ count }} Photo or Video","{{ count }} Photos & Videos",e,"header text for photo or video tries on a Pin"),{count:e.toString()})}return t>0?Object(re.i)(p.a.ngettext("{{ count }} Photo","{{ count }} Photos",t,"header text for photo tries on a Pin"),{count:t.toString()}):n>0?Object(re.i)(p.a.ngettext("{{ count }} Video","{{ count }} Videos",n,"header text for video tries on a Pin"),{count:n.toString()}):p.a._("Photos","header text for photos tries on a Pin")}get tabs(){const e=this.props,t=e.hideDidIt;let n=[];if(e.showCanonicalComments){const e={text:a.a.createElement(st.a,{id:"canonicalCommentsTab"},this.commentsHeading),href:""};n=n.concat(e)}return t||(n=[{text:this.mediaHeading,href:""}].concat(n)),n}render(){const e=this.props,t=e.commentCount,n=e.emptyStateProps,i=e.hideDidIt,o=e.isDoneByMe,r=e.pin,s=e.showCanonicalComments,l=e.showCloseupContentRight,c=this.state,d=c.selectedTabIndex,u=c.showComments,m=0===d&&!i;let h=p.a._("Photos and Comments");i?h=this.commentsHeading:s||(h=this.mediaHeading);const b=((r.link_domain||{}).official_user||{}).id,f=r.aggregated_pin_data||{},y=a.a.createElement(lt.b,{size:"xl",weight:"bold"},h);return a.a.createElement(g.b,{"data-test-id":"canonical-card",dangerouslySetInlineStyle:{__style:{marginTop:"24px"}}},a.a.createElement(g.b,{marginBottom:i&&u?0:4,display:"flex",justifyContent:"between",alignItems:"center"},i&&a.a.createElement(st.a,{id:"canonicalCommentsDropdown"},a.a.createElement(g.O,{onTouch:this.handleShowComments},y)),!i&&a.a.createElement(st.a,{id:"canonical-comments-header"},y),i&&a.a.createElement(g.n,{accessibilityLabel:p.a._("Show more"),icon:u?"arrow-up":"arrow-down",iconColor:"gray",onClick:this.handleShowComments})),!i&&s&&a.a.createElement(st.a,{id:"triedItCommentTabs"},a.a.createElement(g.I,{activeTabIndex:d,tabs:this.tabs,onChange:this.handleTabChanged})),a.a.createElement(g.b,{display:m?"block":"none"},a.a.createElement(tt,{aggregatedPinDataId:f.id||"",emptyStateProps:n,isDoneByMe:o,didItData:f.did_it_data,pin:r,small:l,variant:"legacy"})),a.a.createElement(g.b,{display:m||!u?"none":"block"},a.a.createElement(ct.a,{commentCount:t,objectId:f.id,objectType:dt.a.pin,pinId:r.id,pinDomainOwnerId:b,privatePin:"secret"===r.privacy,variant:"legacy"})))}}),mt=n("xP02");const ht=54;function gt(e){const t=e.anchor,n=e.images,i=e.onDismiss,o=e.fullName,r=n.map(e=>{const t=e.dominant_color,n=e.height,i=e.width,r=e.url,s=n/i*ht;return a.a.createElement(g.b,{marginRight:1,key:r},a.a.createElement(g.t,{shape:"rounded",wash:!0},a.a.createElement(g.b,{width:ht,height:s},a.a.createElement(g.o,{alt:o,color:t,src:r,naturalWidth:i,naturalHeight:n,fit:"cover"}))))});return a.a.createElement(g.j,{anchor:t,idealDirection:"down",onDismiss:i,size:"md"},a.a.createElement(g.b,{paddingX:5,paddingY:4,display:"flex",direction:"column",justifyContent:"center",width:"100%"},a.a.createElement(g.b,{marginBottom:3},a.a.createElement(g.J,{align:"center",bold:!0},Object($.b)(p.a._("Get the latest Pins from {{userFullName}} in your feed","Secondary caption for tooltip preview of recent pins by a user"),{userFullName:o}))),a.a.createElement(g.b,{display:"flex",justifyContent:"center",marginRight:-1},r)))}var bt=n("d424"),ft=n("Kqsi");const yt=90,vt=14;var wt=Object(A.compose)(Object(D.b)({name:"SimilarCreatorsResource",options:({user:e})=>({user_id:e.id}),key:"similarCreators"}))(class extends i.PureComponent{render(){const e=this.props,t=e.similarCreators,n=e.onUserFollow,i=e.viewer,o=e.user;if(!t.data)return null;const r=t.data.filter(e=>e.id!==i.id&&e.id!==o.id).map(e=>{const t=e.id,o=e.username,r=e.full_name,s=e.image_medium_url,l=`/${e.username}/`;return a.a.createElement(g.b,{width:yt,key:o,display:"flex",direction:"column"},a.a.createElement(J.b,{to:l},a.a.createElement(g.a,{name:r,src:s}),a.a.createElement(g.b,{display:"flex",marginTop:2,height:32,overflow:"hidden",alignItems:"center",justifyContent:"center"},a.a.createElement(g.b,{maxHeight:32},a.a.createElement(g.J,{align:"center",size:"sm",bold:!0,overflow:"breakWord"},r)))),a.a.createElement(g.b,{marginTop:2,marginBottom:4},a.a.createElement(ft.a,{fullName:r,hideFollowingText:!0,id:t,imageUrl:s||"",onUserFollow:e=>n(t,e),isOwnProfile:t!==i.id,profileUrl:l,size:"sm"})))});return a.a.createElement(g.b,{marginTop:8,marginBottom:-4},a.a.createElement(g.b,{marginBottom:3},a.a.createElement(g.J,{size:"md",truncate:!0,bold:!0},p.a._("More suggestions for you","Caption for suggesting similar creators after user follow"))),a.a.createElement(bt.a,{accessibilityBackLabel:p.a._("Previous suggestions","Label for previous page button for similar creators"),accessibilityForwardLabel:p.a._("Next suggestions","Label for next page button for similar creators"),columnWidth:yt,gutterWidth:vt,items:r}))}}),Et=n("CtGn"),_t=n("z/1d");var Ct=function(e){const t=e.followerCount,n=e.fullName,a=e.imageUrl,o=e.profileUrl,r=e.verified,s=e.color,l=void 0===s?"darkGray":s,c=e.onNavigateClick,d=e.openNewTab,u=void 0!==t&&i.createElement(_t.a,{key:"followerCount",value:t,shortform:!0,shortformMaximumFractionDigits:1}),m=void 0!==t&&Object($.b)(p.a.ngettext("{{ followerCount }} follower","{{ followerCount }} followers",t,"Follower count of the creator of the pin on closeup"),{followerCount:u}),h=i.createElement(Et.a,null,({active:e,focused:t,hovered:o,onBlur:s,onFocus:l,onMouseEnter:c,onMouseLeave:d})=>i.createElement(g.b,{onFocus:l,onBlur:s,onMouseEnter:c,onMouseLeave:d},i.createElement(g.t,{shape:"circle"},i.createElement(g.a,{size:"md",name:n,src:a,verified:r})))),b=i.createElement(i.Fragment,null,i.createElement(st.a,{id:"creator-profile-name"},i.createElement(lt.b,{color:l,size:"md",truncate:!0,weight:"bold"},n)),m&&i.createElement(st.a,{id:"creator-profile-followers"},i.createElement(lt.b,{color:l,truncate:!0},m)));return i.createElement(g.b,{display:"flex",alignItems:"center",marginLeft:-1,marginRight:-1},i.createElement(g.b,{flex:"none",paddingX:1},o?i.createElement(J.b,{onClick:c,to:o,internalNewTab:d},h):h),i.createElement(g.b,{flex:"grow",display:"flex",direction:"column",paddingX:1},o?i.createElement(J.b,{onClick:c,to:o,internalNewTab:d},b):b))},Ot=n("2YES");function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xt="192x",kt=4;var It=Object(A.compose)(Ot.e,Object(D.b)({name:"UserResource",options:({creatorId:e})=>({field_set_key:"grid_item",user_id:e}),key:"officialUser"}))(class extends i.PureComponent{constructor(e){super(e),St(this,"setFlyoutAnchor",e=>{this.setState({flyoutAnchor:e})}),St(this,"handleUserFollow",(e,t)=>{const n=this.state.user;this.setState({isFollowing:t}),t?(Object(Z.a)(45,{objectId:e,view:3,viewParameter:156}),n.id===e&&this.setState({isSimilarCreatorsOpen:!0,isFlyoutOpen:!1})):(Object(Z.a)(46,{objectId:e,view:3,viewParameter:156}),n.id===e&&this.setState({isSimilarCreatorsOpen:!1,isFlyoutOpen:!1}))}),St(this,"handleFlyoutClose",()=>{this.setState({isFlyoutOpen:!1})}),St(this,"handleFlyoutOpen",()=>{this.state.isFollowing||this.setState({isFlyoutOpen:!0})});const t=e.officialUser.data;this.state={flyoutAnchor:null,isFlyoutOpen:!1,isFollowing:!!t&&t.explicitly_followed_by_me,isSimilarCreatorsOpen:!1,user:t}}static getDerivedStateFromProps(e,t){const n=e.officialUser.data;return n!==t.user?{isFollowing:n.explicitly_followed_by_me,user:n}:null}renderProfile(e){const t=this.props,n=t.color,i=t.onNavigateClick,o=t.profileUrlSuffix,r=t.viewer,s=e.full_name,l=e.follower_count,c=e.id,d=e.image_medium_url,u=e.username,p=r.isAuth&&r.id===c,m=`/${u}/`+(o||"");return a.a.createElement(g.b,{display:"flex",alignItems:"center",marginTop:6,marginLeft:-1,marginRight:-1},a.a.createElement(g.b,{flex:"grow",paddingX:1},a.a.createElement(Ct,{followerCount:l,fullName:s,imageUrl:d,profileUrl:m,color:n,onNavigateClick:i})),a.a.createElement(g.b,{flex:"none",paddingX:1},a.a.createElement("div",{ref:this.setFlyoutAnchor},!p&&a.a.createElement(ft.a,{fullName:s,hideFollowingText:!0,id:c,imageUrl:d||"",inline:!0,isOwnProfile:p,onUserFollow:e=>this.handleUserFollow(c,e),profileUrl:m,size:"md"}))))}render(){const e=this.props.viewer,t=this.state,n=t.flyoutAnchor,i=t.isFlyoutOpen,o=t.isSimilarCreatorsOpen,r=t.user;if(!r)return a.a.createElement(g.b,null);const s=r.recent_pin_images,l=r.full_name,c=this.renderProfile(r),d=new X.b(this.props.requestContext,"web_closeup_creator_card_post_follow"),u=(d.check("enabled_similar")||d.check("enabled_similar_and_flyout")||d.check("employees"))&&o&&a.a.createElement(wt,{onUserFollow:this.handleUserFollow,user:r,viewer:e});let p=null;if((d.check("enabled_flyout")||d.check("enabled_similar_and_flyout")||d.check("employees"))&&i&&s&&s[xt]){const e=s[xt].filter(e=>e.height>0&&e.width>0&&e.height/e.width>=1).slice(0,kt);e.length===kt&&n&&(p=a.a.createElement(gt,{anchor:n,images:e,fullName:l,onDismiss:this.handleFlyoutClose}))}return a.a.createElement(g.b,{position:"relative"},a.a.createElement(g.O,{onMouseEnter:this.handleFlyoutOpen,onMouseLeave:this.handleFlyoutClose},c,u,p))}}),Pt=n("o9D8"),Tt=Object(Pt.a)(It);var jt=Object(D.b)({name:"UserResource",options:({creatorId:e})=>({field_set_key:"grid_item",user_id:e}),key:"creator"})(e=>{const t=e.creatorId,n=e.isVideo,i=e.pin,o=e.viewer,r=e.creator,s=a.a.createElement(Tt,{creatorId:t,viewer:o,slotIndex:0,viewType:3,viewParameter:156,componentType:126,impressionType:"User",loggingId:t,profileUrlSuffix:n?"video_pins/":null,pin:i}),l=r?r.data:null,c=l?l.username:null;return a.a.createElement(g.b,{marginBottom:3},a.a.createElement(mt.a,{avatarSize:45,user:l,username:c,viewParameter:156,viewType:3,pinId:i.id},s))}),Rt=n("D+W/"),Dt=n("wxfF"),Lt=n("RYWx"),At=n("E/Qu"),Mt=n("IGno"),Bt=n("I3yW"),Ft=n("JsRk"),Nt=n("H3Xe"),Ut=n("Je/+");function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ht=Object(A.compose)(Object(o.connect)(Nt.c,Nt.b),Ot.e,Ft.withRouter)(function({bestPinImgSrc:e,bgColor:t,handleShowDownload:n,hideDownload:o,hideEmbed:r,iconColor:s,iconSize:l,isFullAuth:c,logDownloadClick:d,onToggle:u,openLoginModal:m,pinCategory:h,pinDescription:b,pinId:f,pinImgSrc:y,pinTitle:v,reportPin:w,requestContext:E,router:_,usePortal:C}){const O=zt(Object(i.useState)(!1),2),S=O[0],x=O[1],k=Object(i.useRef)(),I=()=>{x(!1)},P=Rt.a.GEN.templateConst.settings.DEVELOPER_SITE_URL+"/tools/widget-builder/?type=pin&url="+encodeURIComponent(`${Rt.a.GEN.templateConst.settings.CANONICAL_MAIN_URL}/pin/${f}/`),T=p.a._("More options","Accessible label for more options dropdown");return a.a.createElement(g.b,{flex:"grow",alignItems:"center",display:"flex"},a.a.createElement(g.b,{ref:k},a.a.createElement(g.n,{accessibilityExpanded:S,accessibilityHaspopup:!0,accessibilityLabel:T,bgColor:t||"transparent",icon:"ellipsis",iconColor:s||"gray",size:l,onClick:()=>{u&&u(),x(!S),(e=>{Object(Z.a)(101,{element:e,component:4,view:3,viewParameter:139})})(981),new X.c(E,"web_plp_download_image").enabled()&&n&&n()}})),S&&(()=>{const t=a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{zIndex:Bt.b}}},a.a.createElement(g.j,{anchor:k.current,idealDirection:"down",onDismiss:I,size:"xs"},a.a.createElement(Ut.a,null,!o&&"undefined"!=typeof window&&"windows"!==Object(At.b)(window)&&e&&a.a.createElement(Dt.a,{imgSrc:e||"",filename:v||b,category:h},e=>a.a.createElement(Ut.b,{onClick:()=>{d&&d(),e()},text:p.a._("Download image","Button to download Pin image")})),!o&&"undefined"!=typeof window&&"windows"===Object(At.b)(window)&&(e||y)&&a.a.createElement(j.a,{name:"web_eg_windows_download_image"},({anyEnabled:t})=>t&&a.a.createElement(Lt.a,{imgSrc:e||y||"",filename:v||b,category:h})),a.a.createElement(Ut.b,{onClick:c?w:m,text:p.a._("Report Pin","Label for report pin action")}),!r&&a.a.createElement(Ut.b,{external:!0,text:p.a._("Embed","Label for embed pin action"),url:P}))));return C?a.a.createElement(Mt.a,null,a.a.createElement(g.q,null,t)):t})())}),Vt=n("PNko"),Gt=n.n(Vt);function Wt({children:e,isWideVideo:t}){const n=Object(i.useContext)(h.a).showCloseupContentRight;return a.a.createElement("div",{className:Gt()({showCloseupContentRight:n,closeupContainer:!t,closeupWideVideoContainer:t}),onClick:e=>e.stopPropagation(),style:{height:"100%",width:"100%"}},a.a.createElement(g.b,null,e))}var Yt=n("PTtk"),qt=n("70u7");function Jt({children:e,isWideVideo:t=!1}){return i.createElement(h.a.Consumer,null,({showCloseupContentRight:n,viewportSize:i})=>n&&"wide"===i&&!t?e:null)}var $t=n("fifU");const Qt=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e(5),n.e(11),n.e("PinBetterSaveCommon")]).then(n.bind(null,"qoD0"))),Kt=Object(i.lazy)(()=>Promise.all([n.e(5),n.e("PinSaveButtonCommon")]).then(n.bind(null,"odTJ")));var Xt=({audienceEstimationEnabled:e,boardCount:t,onClickCallback:n,onShareCallback:i,pin:o,requestContext:r,showRepinOnInitialRender:s,viewer:l,viewParameter:c})=>{return(({audienceEstimationEnabled:e,viewer:t,requestContext:n,pin:i,boardCount:a})=>(!i.content_sensitivity||!i.content_sensitivity.is_sensitive_content)&&!W({viewer:t,requestContext:n,pin:i})&&void 0!==a&&a>=2)({audienceEstimationEnabled:e,viewer:l,requestContext:r,pin:o,boardCount:"number"==typeof t?t:0})||e?a.a.createElement(g.b,{width:236},a.a.createElement($t.a,null,a.a.createElement(Qt,{pin:o,variant:"closeup",viewParameter:c}))):a.a.createElement($t.a,null,a.a.createElement(Kt,{isCloseupPin:!0,onClickCallback:n,onShareCallback:i,showRepinOnInitialRender:s,pin:o,anchorString:".PinActionBar .repin.pinActionBarButton"}))};var Zt=({children:e})=>a.a.createElement(g.b,{"data-test-id":"closeup-image-padding",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",padding:5},e),en=n("z/cr");var tn=e=>{const t=e.isWideVideo,n=e.pin,i=e.shouldPadImage,o=Object(S.k)({pin:n}),r=(Object(C.e)(o)||{}).attribution,s=void 0===r?{}:r,l=(Object(S.d)(o)||{}).embed,c=l&&l.src,d=t?en.l:496,u=a.a.createElement(h.a.Consumer,null,({showCloseupContentRight:e,viewportSize:n})=>{const o=a.a.createElement("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%"},className:Gt()("IframeEmbed",{[s.providerName]:s.providerName})},a.a.createElement("iframe",{allowFullScreen:!0,id:Rt.a.VIDEO_IFRAME_ID,src:c.replace("http://","https://"),style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:p.a._("Embedded content","Accessible content for the embedded content iframe")}));return e&&"wide"===n?a.a.createElement(g.b,{marginBottom:6,marginEnd:t||i?0:6,width:d},o):o});return i?a.a.createElement(Zt,null,u):u},nn=n("4gpq"),an=n("IqQH"),on=n("exzK");function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){sn(e,t,n[t])})}return e}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ln=({hasPinTags:e,showDefaultStyles:t,isHovered:n,showDomainLink:i})=>{if(!n)return{};return{dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",opacity:!e&&i?t?.7:.34:.8,overflow:"hidden"}}}};function cn({carousel_data:e,componentType:t,domain:n,dominantColor:i,ellipsis:o,handleCarouselSwipe:r,hasPinTags:s,imageProps:l,imgSrc:c,isHovered:d,isPreviewImage:u,onImageLoad:p,pinId:m,showDomainLink:h,styleOverrides:b,variant:f,viewParameter:y,viewType:v}){let w;const E="default"===f;return d&&h&&!s&&(w=a.a.createElement(g.b,{bottom:!0,top:!0,left:!0,right:!0,display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",marginLeft:-1,marginRight:-1,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}}},a.a.createElement(g.b,{paddingX:1},a.a.createElement(g.m,{accessibilityLabel:"",color:"white",icon:"arrow-up-right",size:16})),a.a.createElement(g.b,{paddingX:1},a.a.createElement(lt.b,{color:"white",weight:E?"semibold":"bold"},n)))),a.a.createElement(a.a.Fragment,null,a.a.createElement(g.b,Object.assign({position:"relative",dangerouslySetInlineStyle:{__style:d?rn({background:"#000"},E?{}:{borderRadius:8}):{}}},b),a.a.createElement(g.t,{shape:E?"square":"rounded",wash:!0},a.a.createElement(g.b,Object.assign({"data-test-id":"closeup-image"},ln({hasPinTags:s,showDefaultStyles:E,isHovered:d,showDomainLink:h})),e?a.a.createElement(an.a,{carouselIndex:e.index,pinId:m,isCloseup:!0,closeupHeight:l.naturalHeight,closeupWidth:l.naturalWidth}):a.a.createElement(g.o,Object.assign({},l,{color:i,onLoad:p}),u&&a.a.createElement(g.o,Object.assign({},l,{src:c})))),w,e&&a.a.createElement(on.a,{viewType:v,viewParameter:y,componentType:t,handleCarouselSwipe:r,carouselIndex:e.index,pinId:m}))),o)}var dn=n("Ch7k"),un=n("0oKL"),pn=n("bFYa"),mn=n("nSqn"),hn=n("ePT2"),gn=n("QzGC"),bn=n.n(gn);function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){yn(e,t,n[t])})}return e}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const vn={__style:{backgroundColor:"rgba(85, 85, 85, 0.3)",zIndex:Bt.g}};var wn=Object(A.compose)(Ft.withRouter,Object(o.connect)(null,(e,t)=>({loadPin:()=>e(function(e){return(t,n)=>{const i=e.id,a=e.description,o=e.images,r=e.link,s=e.title,l=e.board,c=e.section,d=bn()(),u=[];hn.a.create("VisualLinkPinTagResource",{id:i}).callGet().then(e=>{e.resource_response.data.forEach(e=>{const n=e.id,i=e.pin_tag_key,a=e.pins,o=e.x_percent,r=e.y_percent;u.push(n),a.forEach(e=>{const i=e.id,a=e.images,o=e.link;t(Object(mn.a)(n,i,{id:i,link:o||"",media:a["236x"]||null,status:"saved"}))}),t(Object(pn.a)(d,n,{id:n,pinTagKey:i,status:"saved",taggedObjectIds:a.map(e=>e.id),x:o/100,y:r/100}))})}).finally(()=>{t(Object(un.a)(i,d,{pinTagIds:u,description:a||"",link:r||"",media:o.orig?{id:d,height:o.orig.height,src:o.orig.url,type:"webImage",width:o.orig.width}:null,title:s||""})),t(Object(dn.a)(i,{mode:"edit",pinItemIds:[d],pinItemIndex:0,selectedItem:fn({boardId:l.id,title:c?c.title:l.name},c?{sectionId:c.id}:{}),view:"tag"}))})}}(t.pin))})))(class extends i.Component{constructor(...e){var t,n,i;super(...e),i=(({event:e})=>{const t=this.props,n=t.loadPin,i=t.pin,a=t.router;e.preventDefault(),e.stopPropagation(),Object(Z.a)(101,{objectId:i.id,component:85,element:10907}),n(),a.push({pathname:"/pin-builder/",state:{disableAddPinDraft:!0}})}),(n="handleTagButtonClick")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){return a.a.createElement(g.b,{position:"absolute",margin:3,shape:"circle",dangerouslySetInlineStyle:vn},a.a.createElement(g.n,{accessibilityLabel:p.a._("Tag products","Button to start tagging Pin with products"),bgColor:"transparent",icon:"tag",iconColor:"white",size:"md",onClick:this.handleTagButtonClick}))}}),En=n("lixz");var _n=e=>Object(En.c)({name:"CloseupImageSrcAcquired",imgSrc:e});var Cn=(e,t)=>{const n=e.naturalHeight,i=e.naturalWidth;let a=n,o=i;return t&&o>=en.j&&(o=i-en.h,a=n-en.h),{height:a,width:o}},On=n("3Ne9"),Sn=n("YEMi"),xn=n("owVk");function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var In=Object(A.compose)(Ft.withRouter,Object(xn.a)({name:"STLCloseupDots",routeContextLog:()=>({view_type:162,view_parameter:3119})}),Object(o.connect)(e=>({selectedPinTagKey:e.ui.visualLinks.selectedPinTagKey||null}),e=>({selectPinTag:t=>e(Object(On.a)(t))})))(class extends i.Component{constructor(...e){super(...e),kn(this,"state",{showVLPageModal:!1}),kn(this,"handlePinTagClick",(e,t)=>{const n=this.props,i=n.selectPinTag,a=n.pin,o=n.router;e.stopPropagation(),e.preventDefault(),Object(Z.a)(101,{element:1221,commerce_data:JSON.stringify({pin_tag_key:t,pin_is_shop_the_look:!0})}),i(t);const r=(a.aggregated_pin_data||{}).pin_tags||[],s=!!r&&r.find(e=>e.pin_tag_key===t),l=s?`?x=${s.x_percent}&y=${s.y_percent}`:"",c=`/pin/${a.id}/shop-the-look/${l}`;o.push(c)}),kn(this,"hideVLModal",()=>{const e=this.props.selectPinTag;this.setState({showVLPageModal:!1}),e(null)})}componentWillUnmount(){(0,this.props.selectPinTag)(null)}render(){const e=this.props,t=e.imageHeight,n=e.imageWidth,i=e.pin,o=e.showBoundingBox,r=(i.aggregated_pin_data||{}).pin_tags||[];return a.a.createElement(g.b,null,r.length>0&&!o&&a.a.createElement(Sn.a,{pinTags:r,onDotClick:this.handlePinTagClick,height:t,width:n}))}}),Pn=n("ggpB");const Tn=Object(i.lazy)(()=>n.e("FlashlightButtonCommon").then(n.bind(null,"Nq8Y"))),jn=e=>{const t=(Object(S.k)(e)||{}).pin,n=void 0===t?{}:t,i=e||{},o=i.imageWidth,r=i.imageHeight;return i.pinTags?a.a.createElement(T,null,a.a.createElement(In,{pin:n,imageHeight:r,imageWidth:o})):null};class Rn extends a.a.Component{constructor(...e){var t,n,i;super(...e),i=(({isGif:e,imgSrc:t,showCloseupContentRight:n,viewportSize:i})=>{const a=this.props.pin;return _n(t),Object(S.a)({imgSrc:t,inLegoCloseupView:!1,isGif:e,pin:a,showCloseupContentRight:n,viewportSize:i})}),(n="calculateDimensions")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const e=this.props,t=e.carouselData,n=e.dataLoaded,i=e.onClick,o=e.isHovered,r=e.onImageLoad,s=e.pin,l=e.showDomainLink,c=e.showFlashlight,d=e.handleCarouselSwipe,u=e.taggable,p=e.viewType,m=e.viewParameter,b=e.componentType,f=e.shouldShowAltLinks,y=e.shouldPadImage,v=e.overlay,w=e.imageContainerRef,E=Object(S.k)({pin:s}),_=Object(S.i)(E),C=(Object(S.f)(_)||{}).image564x,O=void 0===C?{}:C,x=(Object(S.h)(_)||{}).imageOrig,k=(void 0===x?{}:x).url,I=(Object(S.j)(E)||{}).link,P=(Object(S.d)(E)||{}).embed,T=(Object(S.l)(E)||{}).pinTags,j=P&&"gif"===P.type,R=j?P.src:O.url,D=s.id;let L,A,M=s.domain;if(t){const e=t.carousel_slots,n=t.id,i=t.index;L=e[i]&&e[i].link,A={carousel_slot_id:e[i]&&e[i].id,carousel_data_id:n,carousel_slot_index:i},M=e[i]&&e[i].domain}return a.a.createElement(h.a.Consumer,null,({showCloseupContentRight:e,showLegoUpdates:h,viewportSize:E})=>{const _=e&&o?{background:"#000",left:"auto",right:"auto",borderRadius:8}:{},C=this.calculateDimensions({imgSrc:R,isGif:j,showCloseupContentRight:e,viewportSize:E}),O=t&&a.a.createElement(g.b,{width:"100%",display:"flex",justifyContent:"center",marginTop:2},a.a.createElement(nn.a,{isCloseup:!0,viewType:p,viewParameter:m,componentType:b,carouselIndex:t.index,pinId:D,handleCarouselSwipe:d})),S=a.a.createElement(g.b,{ref:w},a.a.createElement(cn,{carousel_data:t,componentType:b,domain:M||"",dominantColor:s.dominant_color,ellipsis:O,handleCarouselSwipe:d,hasPinTags:!!T,imageProps:C,imgSrc:R,isHovered:o,isPreviewImage:!(j||!R),onImageLoad:r,pinId:D,showDomainLink:l,styleOverrides:y||j?{minWidth:C.naturalWidth}:{},variant:"legacy",viewParameter:m,viewType:p}));return a.a.createElement(g.b,{position:"relative"},v,a.a.createElement(g.b,Object.assign({"data-test-id":"closeup-body-image-container",maxWidth:C.naturalWidth,width:"100%",onContextMenu:e=>{e.stopPropagation(),Object(Pn.a)("auth.context_menu_open.pin_closeup")}},y?{}:{maxHeight:C.naturalHeight,dangerouslySetInlineStyle:{__style:_}}),a.a.createElement(J.b,{auxData:A&&A,className:"imageLink",closeupDataLoaded:n,external:!0,onClick:i,pinId:s.id,to:L||I||k,shouldShowAltLinks:f},a.a.createElement(g.b,y?{height:"100%",display:"flex",alignItems:"center"}:{},u?a.a.createElement(wn,{pin:s}):null,!h&&a.a.createElement(jn,{pin:s,pinTags:T,imageWidth:C.naturalWidth,imageHeight:C.naturalHeight}),j||!c?S:a.a.createElement(g.b,Object.assign({position:"relative",padding:3},Cn(C,y)),a.a.createElement(g.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0},S),a.a.createElement(a.a.Fragment,null,a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 40px)"}}}),a.a.createElement(g.G,{bottom:12},a.a.createElement(g.b,{display:"flex",justifyContent:"end"},a.a.createElement(g.b,{display:"flex",position:"relative"},a.a.createElement($t.a,null,a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}}},a.a.createElement(Tn,{closeupImageHovered:o,pinId:s.id,variant:"legacy"}))))))))))))})}}var Dn=n("22yj");var Ln=e=>{const t=e.carouselData,n=e.data,i=e.handleCarouselSwipe,o=e.imageContainerRef,r=e.isHovered,s=e.isNux,l=e.onImageClick,c=e.onImageLoad,d=e.overlay,u=e.pin,p=e.shouldPadImage,m=e.shouldShowAltLinks,h=e.showFlashlight,g=e.showInModal,b=e.viewParameter,f=u.access,y=u.domain,v=u.link,w=f&&f.includes("tag"),_=y&&!!v&&!v.startsWith("https://i.pinimg.com"),C=p?{maxWidth:{maxWidth:en.j-en.h},minWidth:{},height:{},borderRadius:16}:{},O=a.a.createElement(E.a,{viewParameter:b,component:85},a.a.createElement(Dn.a,{hasActionBar:!0,isCarousel:!!t,shouldRoundLeftCorners:!s,styleOverrides:C,variant:"legacy"},a.a.createElement(Rn,{carouselData:t,viewType:3,viewParameter:b,componentType:85,handleCarouselSwipe:i,dataLoaded:!!n,isHovered:r,onClick:l,onImageLoad:c,pin:u,taggable:w,shouldShowAltLinks:m,showDomainLink:_,showFlashlight:h,showInModal:g,shouldPadImage:p,overlay:d,imageContainerRef:o})));return p?a.a.createElement(Zt,null,O):O},An=n("HW6o"),Mn=n("zBQm"),Bn=n("vR+M"),Fn=n("YG9m"),Nn=n("XHfN"),Un=n("1HYc"),zn=n("3BJc");function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Vn=e=>!!e&&e.endsWith(".gif");var Gn=Object(o.connect)((e,t)=>{const n=t.pinId,i=t.isPromoted,a=e.ui.app.videosAutoplaying,o=a.organicVideosAutoplaying,r=a.promotedVideosAutoplaying;let s=null;return{videoStartTime:(s=i?r[n]:o[n])?s.currentTime:null}},(e,t)=>({setCurrentVideo:t=>e(Object(zn.c)(t))}))(class extends i.Component{constructor(...e){super(...e),Hn(this,"state",{continuousPlaybackPoint:0,controls:!!this.props.showControls,duration:0,farthestPoint:0,fullscreen:!1,playing:!Bn.a.isSafari()&&!!this.props.autoplay,ready:!1,seeked:!1,showEndCard:!1,volume:this.props.muted?0:1}),Hn(this,"componentDidUpdate",(e,t)=>{!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:!0}),e.isPlaying&&!1===this.props.isPlaying&&this.setState({playing:!1})}),Hn(this,"handleTouch",({event:e})=>{e.stopPropagation(),this.setState(e=>({playing:!e.playing}))}),Hn(this,"handleShowControls",()=>this.setState({controls:!0})),Hn(this,"handleHideControls",()=>this.setState({controls:!1})),Hn(this,"handleReady",()=>this.setState({ready:!0})),Hn(this,"handleSeek",()=>this.setState({seeked:!0})),Hn(this,"handleEnded",({event:e})=>{const t=this.props,n=t.customThumbnail,i=t.pinId,a=t.setCurrentVideo;e.stopPropagation(),this.setState({playing:!1}),Vn(n)||(this.setState({showEndCard:!0}),a({pinId:i,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()}),Hn(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),Hn(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),Hn(this,"handleDurationChange",({duration:e})=>{this.setState({duration:e})}),Hn(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})}),Hn(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),Hn(this,"handleVolumeChange",({event:e,volume:t})=>{e.stopPropagation(),this.setState({volume:t})}),Hn(this,"exitFullscreen",()=>{const e=window.document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()})}render(){const e=this.props,t=e.customThumbnail,n=e.onTimeChange,i=e.video,o=e.videoStartTime,r=e.loop,s=e.variant,l=this.state,c=l.controls,d=l.fullscreen,u=l.playing,m=l.showEndCard,h=l.volume,b=Bn.a.isSafari(),f=i.hlsv3||i.hls||{};if(!f&&!i.mp4)return null;const y=i.mp4,v=f?[{type:"video/m3u8",src:f.url}]:[{type:"video/mp4",src:(y||{}).url}],w=f||y,E=w.height,_=w.thumbnail,C=w.width,O=t||_;return a.a.createElement(g.t,{willChangeTransform:!(b&&d),shape:"default"===s?"square":"rounded",wash:!0},m?a.a.createElement(Fn.a,{backgroundImage:O,naturalHeight:E,naturalWidth:C,onRestartVideo:this.handleRestartVideo}):a.a.createElement(g.O,{shape:"rounded",onTouch:this.handleTouch,onMouseEnter:this.handleShowControls,onMouseLeave:this.handleHideControls},a.a.createElement(Nn.a,{contextLogData:{component:179,objectId:this.props.pinId,view:this.state.fullscreen?108:3,viewParameter:156,video_id:this.props.video.id},accessibilityMaximizeLabel:p.a._("Maximize","Maximize button on video"),accessibilityMinimizeLabel:p.a._("Minimize","Minimize button on video"),accessibilityMuteLabel:p.a._("Mute","Mute button on video"),accessibilityPauseLabel:p.a._("Pause","Pause button on video"),accessibilityPlayLabel:p.a._("Play","Play button on video"),accessibilityUnmuteLabel:p.a._("Unmute","Unmute button on video"),aspectRatio:C/E,captions:"",controls:c,hlsConfig:{startLevel:Un.a},onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPause:this.handlePause,onPlay:this.handlePlay,onReady:this.handleReady,onSeek:this.handleSeek,onTimeChange:n,onVolumeChange:this.handleVolumeChange,playing:u,poster:O,src:v,videoStartTime:o,volume:h,loop:r})))}});function Wn(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qn=Object(An.a)(Gn);var Jn=Object(o.connect)((e,t)=>{const n=t.pinId,i=t.isPromoted,a=e.ui.app.videosAutoplaying,o=a.organicVideosAutoplaying,r=a.promotedVideosAutoplaying,s=Object(Mn.j)(n,a),l=i?r[n]:o[n];return{videosAutoplaying:a,videoStartTime:l&&s?l.currentTime:null}},(e,t)=>({pauseAutoplay:t=>e(Object(zn.a)(t)),setCurrentVideo:t=>e(Object(zn.c)(t))}))(class extends a.a.Component{constructor(...e){super(...e),Yn(this,"handleVisibilityChanged",e=>{const t=this.props,n=t.pinId,i=t.isPromoted,a=t.setCurrentVideo,o=t.pauseAutoplay,r=t.videosAutoplaying,s=t.videoStartTime,l=Object(Mn.j)(n,r);e&&!l?a({pinId:n,isPromoted:i,currentTime:s}):!e&&l&&o({pinId:n,isPromoted:i,currentTime:this.currentVideoCurrentTime})}),Yn(this,"handleVideoTimeChange",e=>{const t=this.props,n=t.pinId,i=t.videosAutoplaying;Object(Mn.j)(n,i)&&(this.currentVideoCurrentTime=e.time)})}componentWillUnmount(){const e=this.props,t=e.pinId,n=e.isPromoted;(0,e.pauseAutoplay)({pinId:t,isPromoted:n,currentTime:this.currentVideoCurrentTime})}render(){const e=this.props,t=(e.setCurrentVideo,Wn(e,["setCurrentVideo"]));return a.a.createElement(qn,Object.assign({onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!0},t))}});var $n=({closeupContainerHeight:e,closeupIsFirstPageInHistoryStack:t,imageHeight:n,imageContainerRef:i,isWideVideo:o,pin:r,shouldPadImage:s})=>{const l=Object(S.k)({pin:r}),c=(Object(S.d)(l)||{}).embed,d=(Object(S.n)(l)||{}).video,u=c&&"gif"===c.type,p=(d&&d.hls||{}).width,m=(Object(S.f)(Object(S.i)(l))||{}).image564x,h=void 0===m?{}:m,b=p>=496?496:void 0,f=u?c.src:h.url,y=en.j-en.h,v=s?{maxWidth:{maxWidth:y},minWidth:{minWidth:y},height:{},borderRadius:16}:{},w=a.a.createElement(Dn.a,{hasActionBar:!0,isCarousel:!(!r||!r.carousel_data),isWideVideo:o,shouldRoundLeftCorners:n>=e,styleOverrides:v,variant:"legacy"},a.a.createElement(g.b,{minWidth:b,width:"100%",ref:i},a.a.createElement(Jn,{customThumbnail:f,muted:t,pinId:r.id,isPromoted:r.is_promoted,video:d,autoplay:!0,variant:"legacy"})));return s?a.a.createElement(Zt,null,w):w};var Qn=e=>{const t=e.carouselData,n=e.closeupContainerHeight,i=e.imageHeight,o=e.isNux,r=e.isWideVideo,s=e.overlay,l=e.pin,c=e.shouldPadImage,d=Object(S.k)({pin:l}),u=(Object(S.d)(d)||{}).embed,p=(Object(S.n)(d)||{}).video,m=u&&u.src,h=u&&"pinstory"===u.subtype,g=u&&"gif"===u.type;if(p){const t=e.closeupIsFirstPageInHistoryStack,o=e.imageContainerRef;return a.a.createElement($n,{closeupContainerHeight:n,closeupIsFirstPageInHistoryStack:t,imageContainerRef:o,imageHeight:i,isWideVideo:r,pin:l,shouldPadImage:c})}if(!m||g||h){const n=e.data,i=e.handleCarouselSwipe,r=e.imageContainerRef,d=e.isHovered,u=e.onImageClick,p=e.onImageLoad,m=e.shouldShowAltLinks,h=e.showFlashlight,g=e.showInModal,b=e.viewParameter;return a.a.createElement(Ln,{carouselData:t,data:n,handleCarouselSwipe:i,imageContainerRef:r,isHovered:d,isNux:o,onImageClick:u,onImageLoad:p,pin:l,shouldShowAltLinks:m,showFlashlight:h,showInModal:g,viewParameter:b,shouldPadImage:c,overlay:s})}return a.a.createElement(tn,{isWideVideo:r,pin:l,shouldPadImage:c})},Kn=n("bUMO");function Xn(e){const t=Object(C.e)(Object(S.k)(e));if(!t)return null;const n=t.attribution,i=n.providerUrl,o=n.providerName,r=n.authorUrl,s=n.authorName,l=n.ccUrl,c=(Object(S.d)(Object(S.k)(e))||{}).embed,d=void 0===c?{}:c,u=d.src,m=d.type,h=d.subtype,b={author:a.a.createElement("a",{href:r,rel:"nofollow",key:"author"},s),provider:a.a.createElement("a",{href:i,rel:"nofollow",key:"provider"},o)};let f=p.a._("from {{ provider }}","Image source attribution without author on pin closeup");return s&&(f=u&&"gif"!==m&&"pinstory"!==h?p.a._("Video by {{ author }} on {{ provider }}","Video source attribution on pin closeup"):p.a._("Photo by {{ author }} on {{ provider }}","Photo source attribution on pin closeup")),a.a.createElement(g.b,{display:"inlineBlock"},a.a.createElement(g.J,{size:"sm",color:"darkGray"},Object($.b)(f,b)),l&&a.a.createElement("a",{className:"cc",href:l,rel:"nofollow"},p.a._("(cc)","Creative Commons Link Text")))}var Zn=n("L43L"),ei=n("mcMS"),ti=n("hX7C");const ni=.25,ii=200,ai=195;var oi=Object(L.a)({component:135},class extends i.Component{componentDidMount(){const e=this.props.onUpdate;e&&e()}componentDidUpdate(e){if(e.showMore!==this.props.showMore){const e=this.props.onUpdate;e&&e()}}render(){const e=this.props,t=e.isArticle,n=e.pin,i=e.tutorialDescription,o=e.showLegoUpdates,r=e.showMore,s=e.onToggle,l=e.inChangeTitlesExp,c=n.carousel_data,d=n.closeup_description,u=n.closeup_unified_description;let m=l?u:d;if(c){const e=c.carousel_slots,t=void 0===e?[]:e,n=c.index;t[n]&&t[n].details&&(m=t[n].details)}const h=m&&i&&i.trim()===m.trim();let b=m?m.trim().replace(/\s+/g," "):null;b=!r&&b&&b.length?Object(ti.b)(b,t?ai:ii):b;let f=null;const y=Object(C.h)(Object(C.j)(Object(S.k)(this.props)));if(y){const e=(y.products||{}).first,t=e.priceText,n=e.outOfStock;t&&(f=a.a.createElement(lt.b,{key:"price",inline:!0,size:"xl",color:n?"gray":"darkGray"},t)),n&&(f=Object($.b)("{{ description }}{{ status }}",{status:a.a.createElement(lt.b,{key:"availability",inline:!0,size:"xl",color:"gray"},"  ·  ",p.a._("Out of stock","Closeup product title indicating item is out of stock")),description:f}))}const v=m&&m.length>(t?ai:ii);let w=null;const E=Object(S.c)(Object(C.i)(Object(C.j)(Object(S.k)(this.props))));if(E){const e=this.props.pin,t=E.recipe,n=t.diets,i=t.prepTime,o=t.cookTime,r=t.totalTime,s=t.servingSummary;let l=r||o||i;if(o&&i){const e=o.h||0,t=o.m||0;l={h:e+(i.h||0),m:t+(i.m||0)}}const c=l?Object(Kn.a)(Object(ei.a)(l)):null,d=e.rich_metadata.recipe.aggregate_rating&&e.rich_metadata.recipe.aggregate_rating.review_count;s&&(w=a.a.createElement(lt.b,{key:"recipe",inline:!0,size:"sm"},s)),n&&n.length>0&&(w=Object($.b)("{{ diets }} · {{ description }}",{diets:n,description:w})),c&&(w=Object($.b)("{{ timeLabel }} · {{ description }}",{timeLabel:c,description:w})),d>0&&(w=Object($.b)("{{ reviewCount }} reviews · {{ description }}",{reviewCount:d,description:w})),e.rich_metadata&&e.rich_metadata.recipe&&e.rich_metadata.recipe.aggregate_rating&&e.rich_metadata.recipe.aggregate_rating.rating_value&&e.rich_metadata.recipe.aggregate_rating.rating_value>=ni&&(w=Object($.b)("{{ ratings }} · {{ description }}",{ratings:a.a.createElement(Zn.a,{key:e.rich_metadata.recipe.aggregate_rating.rating_value,rating:e.rich_metadata.recipe.aggregate_rating.rating_value,max_rating:e.rich_metadata.recipe.aggregate_rating.best_rating,width:12,isLego:!0}),description:w}))}let _=null;const O=Object(C.e)(Object(S.k)(this.props));if(t&&O){const e=b?"{{ credit }} · ":"{{ credit }}";_=Object($.b)(e,{credit:a.a.createElement(Xn,{key:"article-pin",pin:n,inArticle:!0})})}return b&&!h?a.a.createElement(g.b,{marginTop:o?2:4},a.a.createElement(lt.b,{inline:!0,size:"sm"},_,w,f),a.a.createElement(a.a.Fragment,null,(l||t)&&o&&!f&&a.a.createElement(g.b,{marginTop:1,display:"inlineBlock"},a.a.createElement(lt.b,{inline:!0,size:"sm"},b),v&&!r&&a.a.createElement(g.b,{display:"inlineBlock",marginLeft:1},a.a.createElement(g.O,{fullWidth:!1,onTouch:s},a.a.createElement(lt.b,{weight:"semibold",size:"sm",inline:!0},p.a._("More"))))))):null}}),ri=n("Z34B");var si=Object(ri.a)(S.k)(e=>{const t=e.pin,n=e.onUpdate,i=e.onToggle,o=e.showLegoUpdates,r=e.showMore,s=e.inChangeTitlesExp,l=t.aggregated_pin_data,c=(Object(C.i)(Object(C.j)(e))||{}).recipe,d=(Object(S.b)(Object(C.j)(e))||{}).article,u=(d||{}).description,p=(Object(S.m)(Object(C.j)(e))||{}).tutorial,m=(p||{}).description,h=d&&!c&&!p;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"richPinInformation"},l&&a.a.createElement(oi,Object.assign({tutorialDescription:m},{inChangeTitlesExp:s,isArticle:h,onToggle:i,onUpdate:n,pin:t,showLegoUpdates:o,showMore:r}))||h&&u&&a.a.createElement("div",{className:"richPinArticleSummary mb2",style:{fontSize:"16px"}},(e=>e.split(" ").map(e=>e.trim()).reduce((e,t)=>e.length>300?e:e.length+t.length+3>300?`${e} ${t}...`:`${e} ${t}`,""))(u))))});function li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ci({pin:e,inChangeTitlesExp:t,onClickThrough:n,onUpdate:o,shouldShowAltLinks:r,showLegoUpdates:s,viewer:l}){const c=li(Object(i.useState)(!1),2),d=c[0],u=c[1];return a.a.createElement(si,{inChangeTitlesExp:t,onClickThrough:n,onToggle:()=>u(!0),onUpdate:o,pin:e,shouldShowAltLinks:r,showLegoUpdates:s,showMore:d,viewer:l})}var di=n("m2OL"),ui=n("sl5z"),pi=n("CIhW");function mi(e){const t=e.nativePinStats,n=t.num_impressions,i=void 0===n?0:n,o=t.num_closeups,r=void 0===o?0:o,s=t.num_clickthroughs,l=void 0===s?0:s,c=t.num_repins,d=void 0===c?0:c,u=Object($.b)(p.a.ngettext("impression","impressions",i,"Label for number of impressions of a pin")),m=Object($.b)(p.a.ngettext("closeup","closeups",r,"Label for number of closeups of a pin")),h=Object($.b)(p.a.ngettext("click","clicks",l,"Label for clickthrough visits to a pin's website")),b=Object($.b)(p.a.ngettext("save","saves",d,"Label for number of repins of a pin"));return a.a.createElement(g.b,null,a.a.createElement(g.i,null),a.a.createElement(g.b,{paddingX:2,paddingY:3,column:12,alignItems:"start",display:"flex",direction:"row",wrap:!0},a.a.createElement(g.b,{marginRight:8,flex:"none"},a.a.createElement(g.J,{bold:!0,inline:!0},a.a.createElement(_t.a,{value:i,shortform:!0,minimumFractionDigits:1})," "),a.a.createElement(g.J,{inline:!0},u)),a.a.createElement(g.b,{marginRight:8,flex:"none"},a.a.createElement(g.J,{bold:!0,inline:!0},a.a.createElement(_t.a,{value:r,shortform:!0,minimumFractionDigits:1})," "),a.a.createElement(g.J,{inline:!0},m)),a.a.createElement(g.b,{marginRight:8,flex:"none"},a.a.createElement(g.J,{bold:!0,inline:!0},a.a.createElement(_t.a,{value:l,shortform:!0,minimumFractionDigits:1})," "),a.a.createElement(g.J,{inline:!0},h)),a.a.createElement(g.b,{marginRight:8,flex:"none"},a.a.createElement(g.J,{bold:!0,inline:!0},a.a.createElement(_t.a,{value:d,shortform:!0,minimumFractionDigits:1})," "),a.a.createElement(g.J,{inline:!0},b))))}var hi=n("f3vW"),gi=n("tI50"),bi=n("+LSA");var fi=e=>(class extends i.Component{constructor(...e){var t,n,i;super(...e),i={feedbackText:"",showFeedback:"none"},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const t=this.state,n=t.feedbackText,a=t.showFeedback,o=this.props.pin;return i.createElement("div",null,i.createElement(e,Object.assign({},this.props,{animatePinFeedback:a,showPinFeedback:e=>this.setState({feedbackText:e,showFeedback:"show"})})),"none"!==a?i.createElement(bi.default,{feedbackText:n,pinId:o.id}):null)}});const yi=i.lazy(()=>n.e(12).then(n.bind(null,"w8LQ")));var vi=fi(function(e){const t=e.pin,n=t.ad_match_reason,a=t.board,o=t.id,r=t.images,s=t.pinner,l=t.promoter,c=t.source_interest,d=t.recommendation_reason;return i.createElement(g.b,null,i.createElement(g.i,null),i.createElement(g.b,{deprecatedPadding:{y:2},display:"flex",justifyContent:"between",alignItems:"center"},i.createElement(g.J,{bold:!0,size:"lg",smSize:"sm",mdSize:"md",lgSize:"lg"},p.a._("Promoted Pin","Promoted Pin label in the Closeup")),i.createElement($t.a,null,i.createElement(yi,{ad_match_reason:n,board:a,feedbackData:{},feedbackType:"promoted",pinId:o,pinImage:r&&r["236x"].url,pinner:s,promoter:l,recommendationReason:d,sourceInterest:c,viewParameter:139,viewType:3}))))});function wi({children:e,isWideVideo:t=!1}){return i.createElement(h.a.Consumer,null,({showCloseupContentRight:n,viewportSize:i})=>n&&"wide"===i&&!t?null:e)}function Ei({onClick:e,arrowDown:t}){return a.a.createElement(g.O,{onTouch:e},a.a.createElement(g.b,{display:"flex",alignItems:"center"},a.a.createElement(g.J,{inline:!0,bold:!0},p.a._("More about this Pin","Button to see more information about a Pin")),a.a.createElement(g.b,{paddingX:2},a.a.createElement(g.m,{color:"darkGray",icon:t?"arrow-down":"arrow-up",accessibilityLabel:p.a._("More about this Pin","Button to see more information about a Pin")}))))}n("iEzj");var _i=n("DLN1");function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Oi=_i.a+en.a+76;var Si=class extends i.Component{constructor(...e){super(...e),Ci(this,"state",{showRelatedPinsUpsellFlyout:!1}),Ci(this,"componentDidMount",()=>{this.handleDidShortClickThrough(),window.addEventListener("scroll",this.hideFlyout)}),Ci(this,"componentWillUnmount",()=>{window.removeEventListener("scroll",this.hideFlyout)}),Ci(this,"componentDidUpdate",()=>{this.setFlyoutZindex()}),Ci(this,"hideFlyout",()=>{this.setState({showRelatedPinsUpsellFlyout:!1})}),Ci(this,"handleDidShortClickThrough",()=>{this.scrollToAnchor(),window.setTimeout(()=>{this.setState({showRelatedPinsUpsellFlyout:!0})},100)}),Ci(this,"scrollToAnchor",()=>{this.anchorRef&&(this.anchorRef.scrollIntoView(!0),window.scrollBy(0,-Oi))}),Ci(this,"setFlyoutZindex",()=>{if(this.flyoutParentRef){const e=this.flyoutParentRef.firstElementChild;if(e){const t=e.getAttribute("style")||"";e.setAttribute("style",t+`z-index:${Bt.b}`)}}}),Ci(this,"setFlyoutParentRef",e=>{this.flyoutParentRef=e}),Ci(this,"setAnchorRef",e=>{this.anchorRef=e}),Ci(this,"handleFlyoutClick",({event:e})=>{e.stopPropagation(),this.hideFlyout()}),Ci(this,"renderFlyout",()=>a.a.createElement("div",{ref:this.setFlyoutParentRef},a.a.createElement(g.j,{anchor:this.anchorRef,idealDirection:"up",color:"blue",shouldFocus:!1,size:"md",onDismiss:this.hideFlyout,positionRelativeToAnchor:!0},a.a.createElement(g.O,{mouseCursor:"pointer",onTouch:this.handleFlyoutClick,fullHeight:!0},a.a.createElement(g.b,{padding:3},a.a.createElement(g.J,{bold:!0,color:"white"},p.a._("Not into this Pin? See more ideas below","Shows in a flyout message to upsell related pins to users"))))))),Ci(this,"render",()=>a.a.createElement("div",{ref:this.setAnchorRef},this.state.showRelatedPinsUpsellFlyout?this.renderFlyout():null))}},xi=n("a1cj"),ki=n("ztFR"),Ii=n("Fpqi"),Pi=n("iz36");function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ji={0:"up",1:"right",2:"down",3:"left"},Ri={up:0,right:1,down:2,left:3},Di=230,Li="198px",Ai=(e,t,n)=>{const i=window.innerHeight,a=window.innerWidth;let o=n.top-e.height-24,r=a-e.width-24-n.right,s=i-e.height-24-n.bottom,l=n.left-e.width-24;(n.top<8||i-n.bottom<8)&&(l=0,r=0),(n.left<8||a-n.right<8)&&(o=0,s=0);const c=[o,r,s,l],d=Math.max(...c);let u;return!!(t&&c[Ri[t]]>0)||(u=ji[c.indexOf(d)])===t};class Mi extends i.Component{constructor(...e){super(...e),Ti(this,"state",{flyoutType:""}),Ti(this,"componentDidUpdate",()=>{this.state.flyoutType&&this.setFlyoutStyle()}),Ti(this,"logFeedback",e=>{const t=this.props.pin,n=t.aggregated_pin_data,i=t.board,a=t.id,o=t.image_signature,r=t.is_downstream_promotion,s=t.is_promoted,l=t.link,c=t.recommendation_reason,d=i?i.owner:"",u={pin_is_shop_the_look:(n?n.is_shop_the_look:"")?"1":"0",board_owner_id:d?d.id:"",pin_recommendation_reason:c,pin_is_promoted:s?"1":"0"},p={board_id:i?i.id:"",is_downstream_promoted_pin:r?"1":"0",url:l||"",pin_id:a,image_signature:o,is_promoted_pin:s?"1":"0",commerce_data:JSON.stringify(u)},m=e?10615:10616,h=ki.a.fromPlainObject({view_type:11,view_parameter:195,component:13186,event_type:102,element:m,aux_data:p});Ii.a.getInstance().addEvent(h)}),Ti(this,"flyoutParentRef",a.a.createRef()),Ti(this,"handleEgSurveyDismiss",(e,t)=>{this.setState({flyoutType:""}),this.logFeedback(e),t()}),Ti(this,"handleEgSurveyClick",e=>{this.setState({flyoutType:e})}),Ti(this,"setFlyoutStyle",()=>{const e=this.flyoutParentRef&&this.flyoutParentRef.current&&this.flyoutParentRef.current.children[0];if(e){e.style.zIndex=`${Bt.h}`;const t=e.children[0];t&&(t.style.border="transparent")}})}render(){const e=this.props,t=e.imageContainerRef,n=e.maybeLinkRef,i=e.legoLinkClickthroughAnchorRef,o=this.state.flyoutType;let r;"maybeLink"===o?r=n:"legoMaybeLink"===o?r=i:"imageContainer"===o&&(r=t);const s={height:this.flyoutParentRef&&this.flyoutParentRef.current&&this.flyoutParentRef.current.children[0]?this.flyoutParentRef.current.children[0].clientHeight:0,width:Di},l="imageContainer"===o?"left":"right",c=r&&r.current?r.current.getBoundingClientRect():null,d=!!c&&Ai(s,l,c);return o&&d?a.a.createElement(Pi.a,{experienceIds:[501145],placementId:12},({complete:e})=>a.a.createElement(g.b,{ref:this.flyoutParentRef,position:"absolute"},a.a.createElement(g.j,{anchor:r?r.current:null,idealDirection:"imageContainer"===o?"left":"right",onDismiss:()=>{},size:"sm"},a.a.createElement(g.b,{alignItems:"center",direction:"column",padding:4},a.a.createElement(g.J,{bold:!0,size:"md"},p.a._("Is this site useful?","Ask user about click through link usefulness on a Small Flyout on closeup")),a.a.createElement(g.J,{size:"md"},p.a._("Your feedback helps make Pinterest better.","Ask user about usefulness to improve click through links quality")),a.a.createElement(g.b,{display:"flex",direction:"row",marginTop:4,width:Li},a.a.createElement(g.b,{direction:"row",column:6,marginEnd:1},a.a.createElement(g.c,{size:"sm",color:"gray",text:p.a._("No","Keep it short, shown on a button to indicate whether its helpful or not"),onClick:()=>this.handleEgSurveyDismiss(!1,e)})),a.a.createElement(g.b,{column:6,marginStart:1},a.a.createElement(g.c,{size:"sm",color:"gray",text:p.a._("Yes","Keep it short, shown on a button to indicate whether its helpful or not"),onClick:()=>this.handleEgSurveyDismiss(!0,e)}))))))):""}}var Bi=n("wHKh"),Fi=n("OtLr"),Ni=n("Ii6Q");function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){zi(e,t,n[t])})}return e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hi=104,Vi=Object(i.lazy)(()=>n.e("DeprecatedCloseupActionBarCommon").then(n.bind(null,"gSyy"))),Gi=Object(i.lazy)(()=>n.e("DeprecatedSTLCloseupCarouselCommon").then(n.bind(null,"H+Ap"))),Wi=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"RjCY")));var Yi=Object(A.compose)(Object(o.connect)(({history:e,viewer:t},{pin:n})=>({boardCount:t.isAuth?t.boardCount:void 0,closeupIsFirstPageInHistoryStack:0===e.previous.length,hideSaveButton:n&&n.pinner&&n.pinner.blocked_by_me}),e=>({followUser:t=>e(Object(Ni.a)(t)),unfollowUser:t=>e(Object(Ni.b)(t))})),Fi.a,Ot.e,Ft.withRouter)(class extends i.Component{constructor(...e){super(...e),zi(this,"state",{clickthroughComponentForSurvey:"",descriptionShowMore:!1,followedByMe:null,isFlyoutOpen:!1,isShortImage:!1,isShowingMoreDetails:!1}),zi(this,"UNSAFE_componentWillReceiveProps",e=>{null===this.state.followedByMe&&(e.pin&&e.pin.is_native&&e.pin.native_creator?this.setState({followedByMe:e.pin.native_creator.followed_by_me}):e.pin&&e.pin.pinner&&this.setState({followedByMe:e.pin.pinner.followed_by_me}))}),zi(this,"shouldComponentUpdate",(e,t)=>!(t===this.state&&e===this.props)),zi(this,"componentWillUnmount",()=>{this._repinCompletionPromise&&this._repinCompletionPromise.cancel(),this.mounted=!1,window.removeEventListener("focus",this.handleWindowFocus)}),zi(this,"handleWindowFocus",()=>{const e=this.state.clickthroughComponentForSurvey;e&&this.webLinkSurveyRef.current&&this.webLinkSurveyRef.current.handleEgSurveyClick(e)}),zi(this,"getSendButton",e=>{this.sendButton=e}),zi(this,"mounted",!1),zi(this,"webLinkSurveyRef",a.a.createRef()),zi(this,"imageContainerRef",a.a.createRef()),zi(this,"legoLinkClickthroughAnchorRef",a.a.createRef()),zi(this,"maybeLinkRef",a.a.createRef()),zi(this,"relatedProductsRef",a.a.createRef()),zi(this,"shouldHideGatorTriedItOnResurrected",()=>{const e=this.props.viewer.resurrectionInfo;let t=!1;return e&&(t=!e.resurrectionDate),t}),zi(this,"handleToggleExpand",()=>this.setState({descriptionShowMore:!this.state.descriptionShowMore})),zi(this,"hideActionButtons",!1),zi(this,"_repinCompletionPromise",null),zi(this,"viewParameter",Object(C.d)(Object(S.k)({pin:this.props.pin}))),zi(this,"handleShareCallback",e=>{e&&e.stopPropagation(),this.handleFlyoutToggle()}),zi(this,"handleFlyoutToggle",()=>{this.setState(e=>({isFlyoutOpen:!e.isFlyoutOpen}))}),zi(this,"handleFlyoutDismiss",()=>{this.setState({isFlyoutOpen:!1})}),zi(this,"toggleFollow",({event:e})=>{const t=this.state.followedByMe,n=this.props,i=n.followUser,a=n.pin,o=n.unfollowUser,r=a.pinner.id;t?i(r):o(r),this.setState({followedByMe:!t})}),zi(this,"handleImageClickThrough",()=>{const e=this.props,t=e.experience,n=e.experienceClient,i=e.onClickThrough;t&&11021===t.experience_id&&n.completeExperience(12,11021),i(!0)}),zi(this,"handleToggleShowMoreDetails",()=>this.setState({isShowingMoreDetails:!this.state.isShowingMoreDetails})),zi(this,"calculateDimensions",({imgSrc:e,isGif:t,showCloseupContentRight:n,viewportSize:i})=>{const a=this.props.pin;return _n(e),Object(S.a)({imgSrc:e,inLegoCloseupView:!1,isGif:t,pin:a,showCloseupContentRight:n,viewportSize:i})}),zi(this,"renderPinActionDropdown",()=>{const e=this.props,t=e.inChangeTitlesExp,n=e.pin,i=e.usePortal,o=Object(hi.a)(n,t),r=o.pinTitle,s=o.pinDescription,l=o.pinCategory,c=Object(S.k)({pin:n}),d=!!(Object(S.n)(c)||{}).video;let u;n.images&&(u=n.embed&&"gif"===n.embed.type?n.embed.src:n.images["736x"]&&n.images["736x"].url);const p=Object(Bi.j)(n);return a.a.createElement(Ht,{bestPinImgSrc:p,bgColor:"transparent",hideDownload:d,iconColor:"gray",iconSize:"md",pinCategory:l,pinDescription:s,pinId:n.id,pinImgSrc:u,pinTitle:r,reportPin:Object(di.a)({pin:n,viewParameter:this.viewParameter,viewType:3}),usePortal:i})}),zi(this,"renderDetails",()=>{const e=this.props,t=e.data,n=e.inChangeTitlesExp,i=e.isLandingPage,o=e.isLfvCloseupShowAll,r=e.myTry,s=e.onClickThrough,l=e.onCloseupBodyUpdate,c=e.pin,d=e.shouldShowAltLinks,u=e.showCloseupContentRight,p=e.viewer,m=this.makeDetailsArgs(),h=m.childProps,b=m.isShopTheLook,f=m.nativePinStats,y=m.isVideo,v=m.showCreatorCard,w=m.creatorId,E=m.showCanonicalComments;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ci,{inChangeTitlesExp:n,onClickThrough:s,onUpdate:l,pin:c,shouldShowAltLinks:d,showLegoUpdates:!1,viewer:p}),v&&a.a.createElement(jt,{creatorId:w,isVideo:y,pin:c,viewer:p}),!this.showBoardActivity&&!v&&t&&a.a.createElement(Y.a,{followedByMe:!!this.state.followedByMe,isLfvCloseupShowAll:o,onFollowClick:this.toggleFollow,pin:c,variant:"legacy",viewer:p}),a.a.createElement(pi.a,Object.assign({pinActionDropdown:this.renderPinActionDropdown(),viewer:p,onUpdate:l,showMore:this.state.descriptionShowMore,onToggle:this.handleToggleExpand},h,{onClickThrough:()=>{s&&s(),this.setState({clickthroughComponentForSurvey:"maybeLink"})},shouldShowAltLinks:d,maybeLinkRef:this.maybeLinkRef})),b&&a.a.createElement($t.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(g.i,null),a.a.createElement(Gi,{pin:c}))),Object.keys(f).length>0&&!U(c)&&!z(c)&&a.a.createElement(mi,{nativePinStats:f}),!this.showBoardActivity&&a.a.createElement(g.i,null),a.a.createElement(g.b,null,!this.showBoardActivity&&(!this.hideDidIt||E)&&a.a.createElement(ui.a,{name:"CanonicalCard"},a.a.createElement(pt,{emptyStateProps:Ui({},this.didItProps),isDoneByMe:(r||{}).isDoneByMe||!1,hideDidIt:this.hideDidIt,pin:c,showCanonicalComments:E,showCloseupContentRight:u}),a.a.createElement(g.i,null))),!this.showBoardActivity&&v&&t&&a.a.createElement(Y.a,Object.assign({},h,{isLfvCloseupShowAll:o,variant:"legacy",viewer:p})),c.promoter&&!i&&c.is_promoted?a.a.createElement(vi,{pin:c}):null)})}componentDidMount(){this.mounted=!0,window.addEventListener("focus",this.handleWindowFocus)}get didItProps(){const e=this.props,t=e.dispatch,n=e.myTry,i=e.viewer,a=e.pin,o=e.inChangeTitlesExp,r=a.aggregated_pin_data||{};return{dispatch:t,aggregatedPinDataId:r.id,doneCount:(r.aggregated_stats||{}).done||0,isDoneByMe:(n||{}).isDoneByMe||!1,launchingView:"react-closeup",loggedInUser:i,pinId:a.id,pinTitle:o?a.grid_title:a.title}}get hideDidIt(){const e=this.props,t=e.isCloseupShowTryIt,n=e.pin;return!t||this.shouldHideGatorTriedItOnResurrected()||!n.is_whitelisted_for_tried_it}get showBoardActivity(){return((this.props.pin||{}).board||{}).should_show_board_activity}makeDetailsArgs(){const e=this.props.pin,t=this.state.descriptionShowMore,n=e.native_pin_stats,i={pin:e},a=Object(S.k)(i),o=(Object(S.n)(a)||{}).video;return{childProps:i,descriptionShowMore:t,isShopTheLook:H(e),nativePinStats:n||{},isVideo:!!o,showCreatorCard:V(e),creatorId:N(e),showCanonicalComments:e.is_eligible_for_aggregated_comments,isCanonical:U(e)}}render(){const e=this.props,t=e.carouselData,n=e.boardCount,i=e.closeupContainerHeight,o=e.closeupIsFirstPageInHistoryStack,r=e.data,s=e.didShortClickThrough,l=e.experience,c=e.goBack,d=e.handleCarouselSwipe,u=e.hideSaveButton,m=e.isLandingPage,b=e.isWideVideo,f=e.onImageLoad,y=e.onSaveButtonClick,v=e.onUpdate,w=e.outerBodyStyle,E=e.pin,_=e.requestContext,O=e.routePush,k=e.inChangeTitlesExp,I=e.shouldShowAltLinks,P=void 0!==I&&I,T=e.showFlashlight,j=e.showInModal,R=e.showRepinOnInitialRender,D=e.viewer,L=this.state,A=L.isFlyoutOpen,M=L.isShowingMoreDetails,B=L.isShortImage,N=this.viewParameter,H=0!==Object.keys(E).length,V=E.access,Y=void 0===V?[]:V,q=E.promoted_is_removable,J={pin:E},$=Object(S.k)(J),Q=(Object(S.f)(Object(S.i)($))||{}).image564x,K=void 0===Q?{}:Q,Z=(Object(S.d)($)||{}).embed,ee=(Object(S.n)($)||{}).video,te=Z&&"gif"===Z.type,ne=!!ee,ie=Y.includes("write")||Y.includes("delete"),oe=te?Z.src:K.url,re=G(E,m);let se=!1;l&&(se=11020===l.experience_id&&l.display_data&&l.display_data.lite),this.hideActionButtons=se||this.hideActionButtons;let le=!1;D.isPartner&&E.is_quick_promotable&&Object(F.c)(_.locale||"")&&(le=!0);const ce=a.a.createElement(xi.a,Object.assign({},J,{inChangeTitlesExp:k,inLegoCloseupView:!1})),de=U(E),ue=de?E.aggregated_pin_data.creator_analytics:E.creator_analytics,pe=de||z(E),me=new X.c(this.props.requestContext,"px_pinstats_90_day_default_on_grid").enabled(),he=E.access&&E.access.includes("tag"),ge=W({viewer:D,requestContext:_,pin:E})?a.a.createElement(gi.a,{buttonType:"icon-and-text",pinId:E.id}):null,be=E.domain&&!!E.link&&!E.link.startsWith("https://i.pinimg.com"),fe=this.renderDetails(),ye=u?null:a.a.createElement(Xt,{audienceEstimationEnabled:le,boardCount:n,onClickCallback:y,onShareCallback:this.handleShareCallback,pin:E,requestContext:_,showRepinOnInitialRender:R,viewer:D,viewParameter:N}),we=a.a.createElement(st.a,{id:"closeupActionBar"},a.a.createElement($t.a,null,a.a.createElement(Vi,{didItProps:this.didItProps,editable:ie,gridDescription:E.description,hideButtons:this.hideActionButtons,imageSrc:oe,isFlyoutOpen:A,isOnSecretBoard:!1,onEditSubmit:v,onFlyoutDismiss:this.handleFlyoutDismiss,onToggleFlyout:this.handleFlyoutToggle,pin:E,pinActionDropdown:this.renderPinActionDropdown(),promotedIsRemovable:q,routePush:O,saveButton:ye,shareButtonRef:this.getSendButton,taggable:he,goBack:c,viewParameter:this.viewParameter,promoteButton:ge,hidePromoteButton:le}))),Ee=Object(x.d)({user:D})||Object(x.e)({user:D});return a.a.createElement(h.a.Consumer,null,({showCloseupContentRight:e,viewportSize:n})=>{const l=this.calculateDimensions({imgSrc:oe,isGif:te,showCloseupContentRight:e,viewportSize:n});return!B&&i>l.naturalHeight&&this.setState({isShortImage:!0}),a.a.createElement(Wt,{isWideVideo:b},a.a.createElement(g.b,{position:"relative"},!s&&a.a.createElement(Mi,{imageContainerRef:this.imageContainerRef,maybeLinkRef:this.maybeLinkRef,legoLinkClickthroughAnchorRef:this.legoLinkClickthroughAnchorRef,pin:E,ref:this.webLinkSurveyRef}),a.a.createElement(g.b,{color:H?"white":"transparent",dangerouslySetInlineStyle:{__style:w},position:"relative",shape:"rounded"},!H&&a.a.createElement(g.b,{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},a.a.createElement(g.F,{accessibilityLabel:p.a._("Pin loading"),show:!H})),H?a.a.createElement(g.b,{display:"flex",direction:"column"},a.a.createElement(Ge.a,{className:"sticky",position:"sticky"},a.a.createElement(g.b,{minHeight:en.a},we)),a.a.createElement(Yt.a,{isWideVideo:b},a.a.createElement(wi,{isWideVideo:b},ce),a.a.createElement(Et.a,null,({hovered:e,onMouseEnter:n,onMouseLeave:s})=>a.a.createElement(g.b,{onMouseEnter:n,onMouseLeave:s},a.a.createElement(Qn,{carouselData:t,closeupContainerHeight:i,closeupIsFirstPageInHistoryStack:o,data:r,handleCarouselSwipe:d,imageContainerRef:this.imageContainerRef,imageHeight:l.naturalHeight,isHovered:e,isNux:Ee,isWideVideo:b,onImageClick:()=>{this.handleImageClickThrough&&this.handleImageClickThrough(),this.setState({clickthroughComponentForSurvey:"imageContainer"})},onImageLoad:f,overlay:null,pin:E,shouldPadImage:!1,shouldShowAltLinks:!!P,showDomainLink:be,showFlashlight:T,showInModal:j,viewParameter:this.viewParameter}))),a.a.createElement(qt.a,{isWideVideo:b},r?a.a.createElement(g.b,{display:"flex",direction:"column",height:"100%"},a.a.createElement(g.b,{paddingX:0,dangerouslySetInlineStyle:{__style:{height:`calc(100% - ${Hi}px)`}},display:"flex",direction:"column"},pe&&a.a.createElement($t.a,null,a.a.createElement(Wi,{pinId:E.id,stats:ue,isVideo:ne,isStoryPin:!!E.story_pin_data_id,showDivider:!le,showMoreStatsLink:!le,show90Days:me})),le&&a.a.createElement(ae,{pin:E,showPinAnalytics:pe,isPartner:D.isPartner,requestContext:_}),a.a.createElement(Jt,{isWideVideo:b},ce),this.showBoardActivity?a.a.createElement(a.a.Fragment,null,re&&a.a.createElement(g.b,{paddingY:3,marginBottom:3},a.a.createElement(Ei,{onClick:this.handleToggleShowMoreDetails,arrowDown:!M})),M&&fe,re&&a.a.createElement(g.b,{paddingY:4},a.a.createElement(g.i,null)),a.a.createElement(ve,{pin:E})):fe)):a.a.createElement(g.F,{accessibilityLabel:p.a._("Pin details loading"),show:!0}))),s&&Object(C.c)(E,D)&&a.a.createElement(Si,null),Object(C.c)(E,D)&&a.a.createElement(g.b,{color:"white",shape:"rounded",ref:this.relatedProductsRef},a.a.createElement(Ve,{pin:E,variant:"condensed"}))):null)))})}}),qi=n("bD8p"),Ji=n("qhkc"),$i=n("L5aL"),Qi=n("EDDr"),Ki=n("Yq20"),Xi=n("FEwd"),Zi=n("QG6s");var ea=({placementId:e})=>a.a.createElement(Pi.a,{placementId:e,experienceIds:[500973]},({complete:e,dismiss:t})=>a.a.createElement(Zi.a,null,a.a.createElement(g.b,{color:"white",shape:"rounded",width:800},a.a.createElement(Xi.b,{handleComplete:e,handleDismiss:t}))));function ta(e,t,n,i,a,o){let r;switch(a){case"thumbsUp":r="👍";break;case"thumbsDown":r="👎";break;case"heart":default:r="❤️"}if(n){hn.a.create("ConversationsResource",{user_ids:[n],pin:i,text:r}).callCreate().then(e=>{o(e.resource_response.data.id)})}if(e&&t){const n=t.data,s=n?n.pop():null,l="heart"===a||s&&s.pin&&s.pin.id===i;hn.a.create("ConversationMessagesResource",{conversation_id:e,pin:l?null:i,text:r}).callCreate().then(t=>{e&&o(e)})}}var na=n("Evf7"),ia=n.n(na),aa=n("Wo+T"),oa=n("tcFq"),ra=n("Rs3f"),sa=n("E56J"),la=n("4+0X");n("eei7");function ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const da={__style:{zIndex:Bt.e,bottom:28,left:0,right:0,marginLeft:"auto",marginRight:"auto"}},ua=2e3;class pa extends i.Component{constructor(...e){super(...e),ca(this,"state",{showExperience:!1}),ca(this,"anchorRef",a.a.createRef())}componentDidMount(){this.state.showExperience||setTimeout(()=>{this.setState({showExperience:!0})},ua)}render(){return this.state.showExperience?a.a.createElement(Pi.a,{experienceIds:[501120],placementId:12},()=>a.a.createElement(g.b,{position:"fixed",dangerouslySetInlineStyle:da},a.a.createElement(g.b,{position:"relative",ref:this.anchorRef}),a.a.createElement(g.b,{position:"relative"},a.a.createElement(g.j,{anchor:this.anchorRef.current,idealDirection:"up",color:"blue",shouldFocus:!1,size:"xs",onDismiss:()=>{},positionRelativeToAnchor:!0},a.a.createElement(g.b,{paddingX:6,paddingY:3,alignItems:"center"},a.a.createElement(g.J,{bold:!0,color:"white"},p.a._("More ideas below","Shows in a flyout message to upsell related pins to users"))))))):null}}var ma=n("gT2i"),ha=n("PhUE"),ga=n("ptua"),ba=n("4fCo"),fa=n("boTm");function ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const va=Object(i.lazy)(()=>n.e(12).then(n.bind(null,"w8LQ"))),wa="192x",Ea=4;var _a=Object(A.compose)(Ot.e,Object(D.b)({name:"UserResource",options:({creatorId:e})=>({field_set_key:"grid_item",user_id:e}),key:"officialUser"}))(class extends i.PureComponent{constructor(e){super(e),ya(this,"setFlyoutAnchor",e=>{this.setState({flyoutAnchor:e})}),ya(this,"handleUserFollow",(e,t)=>{const n=this.state.user;this.setState({isFollowing:t}),t?(Object(Z.a)(45,{objectId:e,view:3,viewParameter:156}),n.id===e&&this.setState({isSimilarCreatorsOpen:!0,isFlyoutOpen:!1})):(Object(Z.a)(46,{objectId:e,view:3,viewParameter:156}),n.id===e&&this.setState({isSimilarCreatorsOpen:!1,isFlyoutOpen:!1}))}),ya(this,"handleFlyoutClose",()=>{this.setState({isFlyoutOpen:!1})}),ya(this,"handleFlyoutOpen",()=>{this.state.isFollowing||this.setState({isFlyoutOpen:!0})});const t=e.officialUser.data;this.state={flyoutAnchor:null,isFlyoutOpen:!1,isFollowing:!!t&&t.explicitly_followed_by_me,isSimilarCreatorsOpen:!1,user:t}}static getDerivedStateFromProps(e,t){const n=e.officialUser.data;return n!==t.user?{isFollowing:n.explicitly_followed_by_me,user:n}:null}renderProfile(e){const t=this.props,n=t.color,i=t.onNavigateClick,o=t.pin,r=t.profileUrlSuffix,s=t.viewer,l=e.full_name,c=e.follower_count,d=e.id,u=e.image_medium_url,p=e.username,m=o||{},h=m.ad_match_reason,b=m.board,f=m.id,y=m.images,v=m.is_promoted,w=m.pinner,E=m.promoter,_=m.source_interest,C=m.recommendation_reason,O=s.isAuth&&s.id===d,S=`/${p}/`+(r||"");return a.a.createElement(g.b,{display:"flex",alignItems:"center",marginLeft:-1,marginRight:-1},a.a.createElement(g.b,{flex:"grow",paddingX:1},a.a.createElement(fa.a,{followerCount:c,fullName:l,imageUrl:u,profileUrl:S,color:n,onNavigateClick:i,isPromoted:!!E&&v})),E&&v?a.a.createElement($t.a,null,a.a.createElement(va,{ad_match_reason:h,board:b,feedbackData:{},feedbackType:"promoted",pinId:f,pinImage:y&&y["236x"].url,pinner:w,promoter:E,isPromoted:!!E&&v,recommendationReason:C,sourceInterest:_,viewParameter:139,viewType:3})):a.a.createElement(g.b,{flex:"none",paddingX:1},a.a.createElement("div",{ref:this.setFlyoutAnchor},!O&&a.a.createElement(ft.a,{button:({followText:e,onClick:t})=>a.a.createElement(Ye.a,{onClick:t,text:e}),fullName:l,hideFollowingText:!0,id:d,imageUrl:u||"",inline:!0,isOwnProfile:O,onUserFollow:e=>this.handleUserFollow(d,e),profileUrl:S,size:"md"}))))}render(){const e=this.props.viewer,t=this.state,n=t.flyoutAnchor,i=t.isFlyoutOpen,o=t.isSimilarCreatorsOpen,r=t.user;if(!r)return a.a.createElement(g.b,null);const s=r.recent_pin_images,l=r.full_name,c=this.renderProfile(r),d=new X.b(this.props.requestContext,"web_closeup_creator_card_post_follow"),u=(d.check("enabled_similar")||d.check("enabled_similar_and_flyout")||d.check("employees"))&&o&&a.a.createElement(wt,{onUserFollow:this.handleUserFollow,user:r,viewer:e});let p=null;if((d.check("enabled_flyout")||d.check("enabled_similar_and_flyout")||d.check("employees"))&&i&&s&&s[wa]){const e=s[wa].filter(e=>e.height>0&&e.width>0&&e.height/e.width>=1).slice(0,Ea);e.length===Ea&&n&&(p=a.a.createElement(gt,{anchor:n,images:e,fullName:l,onDismiss:this.handleFlyoutClose}))}return a.a.createElement(g.b,{position:"relative"},a.a.createElement(g.O,{onMouseEnter:this.handleFlyoutOpen,onMouseLeave:this.handleFlyoutClose},c,u,p))}}),Ca=n("RjCY"),Oa=n("Yu3F"),Sa=n("/O0m"),xa=n("ieLn"),ka=n("zPDt"),Ia=n("kIql");function Pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ta=Object(i.lazy)(()=>Promise.all([n.e(5),n.e(11)]).then(n.bind(null,"qoD0"))),ja=236;var Ra=Object(A.compose)(Ft.withRouter,Ia.a)(class extends i.Component{constructor(...e){super(...e),Pa(this,"state",{isFlyoutOpen:!1,isScrolledPastCover:!1}),Pa(this,"viewParameter",Object(C.d)(Object(S.k)({pin:this.props.pin}))),Pa(this,"handleFlyoutToggle",()=>{this.state.isFlyoutOpen||Object(Z.a)(101,{view:3,viewParameter:157,component:229,element:10942}),this.setState(e=>({isFlyoutOpen:!e.isFlyoutOpen}))}),Pa(this,"handleFlyoutDismiss",()=>{this.setState({isFlyoutOpen:!1})}),Pa(this,"handlePinSave",()=>{Object(Z.a)(101,{view:3,viewParameter:157,component:229,element:10943})}),Pa(this,"handleShowAttributionOnScroll",()=>{const e=window.scrollY>this.props.scrollBreakpoint;this.setState({isScrolledPastCover:e})}),Pa(this,"handleScrollToCommentsClick",()=>{const e=this.props.onScrollToComments;Object(Z.a)(101,{view:3,viewParameter:157,component:229,element:10944}),e()}),Pa(this,"handleMoreActionsOpened",()=>{Object(Z.a)(101,{view:3,viewParameter:157,component:229,element:10946})}),Pa(this,"handlePinEditButtonClick",()=>{const e=this.props,t=e.pin;e.router.push(`/story-pin-builder/${t.id}/edit`)})}componentDidMount(){document.addEventListener("scroll",this.handleShowAttributionOnScroll)}componentWillUnmount(){document.removeEventListener("scroll",this.handleShowAttributionOnScroll)}render(){const e=this.props,t=e.pin,n=e.onNavigateBack,i=e.onAttributionClick,o=e.backButtonLabel,r=e.editable,s=e.onEditSubmit,l=e.viewer,c=this.state.isScrolledPastCover,d="secret"===((t||{}).board||{}).privacy,u=t.aggregated_pin_data,m=void 0===u?{}:u,h=m.comment_count,b=void 0===h?0:h,f=m.did_it_data,y=(void 0===f?{}:f).images_count,v=void 0===y?0:y,w=t.images,E=t.native_creator,_=t.pinner,C=_.image_small_url,O=_.full_name,S=_.username,x=_.id,k=w["564x"]?w["564x"].url:"",I=E?E.username:S,P=E?E.image_small_url:C,T=E?E.full_name:O,j=`/${I}/`,R=l.isAuth&&E&&E.id===l.id,D=l.isAuth&&x===l.id,L=b+v;return a.a.createElement(g.b,{display:"flex",color:"white",justifyContent:"between",paddingX:6,paddingY:4,dangerouslySetInlineStyle:{__style:{borderBottom:"1px solid #efefef"}}},a.a.createElement(g.b,{display:"flex",alignItems:"center"},a.a.createElement(g.b,{flex:"shrink"},a.a.createElement(Oa.a,{accessibilityLabel:p.a._("Go back","Accessible icon for close button"),bgColor:"transparent",onClick:n},a.a.createElement(g.b,{display:"flex",alignItems:"center",justifyContent:"center",padding:1},a.a.createElement(g.b,{padding:1},a.a.createElement(g.m,{icon:"arrow-back",color:"darkGray",inline:!0,accessibilityLabel:"",size:16})),!c&&a.a.createElement(g.b,{padding:1},a.a.createElement(g.J,{bold:!0,color:"darkGray",size:"lg"},o))))),c&&a.a.createElement(g.b,{display:"flex",alignItems:"center",flex:"grow"},a.a.createElement(g.b,{paddingX:2},a.a.createElement(J.b,{to:j,onClick:i},a.a.createElement(g.a,{size:"md",src:P,name:T}))),a.a.createElement(g.b,null,a.a.createElement(g.J,{size:"sm",bold:!0},t.title),!!T&&a.a.createElement(J.b,{to:j,onClick:i},a.a.createElement(g.J,{size:"sm"},Object($.b)(p.a._("by {{ pinnerName }}","Creator username"),{pinnerName:T})))))),a.a.createElement(g.b,{alignItems:"center",display:"flex"},a.a.createElement(g.b,{paddingX:2},a.a.createElement(Sa.a,{bgColor:"transparent",hideDownload:!0,hideEmbed:!0,iconColor:"gray",onToggle:this.handleMoreActionsOpened,pinId:t.id,reportPin:Object(di.a)({pin:t,viewParameter:this.viewParameter,viewType:3}),usePortal:!1})),a.a.createElement(je.a,{name:"web_pin_builder_story_pin"},({anyEnabled:e})=>e&&R&&!D?a.a.createElement(g.b,{paddingX:2},a.a.createElement(ka.a,{pinId:t.id,handlePinEditButtonClick:this.handlePinEditButtonClick,view:3,viewParameter:this.viewParameter})):r?a.a.createElement(g.b,{paddingX:2},a.a.createElement(ka.b,{pinId:t.id,onSubmit:s,view:3,viewParameter:this.viewParameter})):null),a.a.createElement(g.b,{position:"relative",paddingX:2},a.a.createElement(g.O,{onTouch:this.handleScrollToCommentsClick},a.a.createElement(g.b,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",marginTop:-1,top:!0,right:!0,bottom:!0,left:!0},a.a.createElement(g.J,{size:"lg",bold:!0},L)),a.a.createElement(g.m,{icon:"speech",accessibilityLabel:"speech bubble",size:40,color:"lightGray"}))),!d&&a.a.createElement(g.b,{paddingX:2},a.a.createElement(xa.default,{buttonType:"icon-and-text",pinId:t.id,gridDescription:t.description,imageSrc:k,onToggleFlyout:this.handleFlyoutToggle,onFlyoutDismiss:this.handleFlyoutDismiss,isFlyoutOpen:this.state.isFlyoutOpen,sendType:"pin"})),a.a.createElement(g.b,{width:ja},a.a.createElement($t.a,null,a.a.createElement(Ta,{pin:this.props.pin,viewParameter:this.viewParameter,onSave:this.handlePinSave})))))}});n("phkz");const Da=e=>{return(e=>{const t=e.split("#")[1];return(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3})(e)>=128?"darkGray":"white"};var La=e=>{const t=e.pin,n=e.onScrollToComments,i=e.onAttributionClick,o=t.title,r=void 0===o?"":o,s=t.images,l=t.dominant_color,c=t.aggregated_pin_data,d=void 0===c?{}:c,u=d.comment_count,m=void 0===u?0:u,h=d.did_it_data,b=(void 0===h?{}:h).images_count,f=void 0===b?0:b,y=s?s["736x"]:{},v=t.native_creator,w=m+f,_=l||"#000000",C=Da(_);return a.a.createElement(E.a,{component:227},a.a.createElement("div",{className:"story-pin-cover-layout"},a.a.createElement(g.b,{display:"flex",width:755,alignItems:"center",justifyContent:"between"},!!y.url&&a.a.createElement(g.b,{height:16/9*366,width:366,shape:"rounded",overflow:"hidden",flex:"none",dangerouslySetInlineStyle:{__style:{marginBottom:-60}}},a.a.createElement(g.o,{src:y.url,fit:"cover",alt:r,naturalHeight:y.height,naturalWidth:y.width})),a.a.createElement(g.b,{width:325},a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{overflowWrap:"break-word"}}},a.a.createElement(g.l,{size:"sm",color:C,overflow:"normal"},r)),!!v&&a.a.createElement(ba.a,null,e=>a.a.createElement(_a,{creatorId:v.id,viewer:e,color:C,onNavigateClick:i})),a.a.createElement(g.b,{marginTop:4,marginBottom:4,dangerouslySetInlineStyle:{__style:{opacity:.15}}},a.a.createElement(g.i,null)),a.a.createElement(g.O,{onTouch:n},a.a.createElement(g.b,{display:"flex",alignItems:"center"},a.a.createElement(g.J,{color:C,size:"md",bold:!0},w>0?Object($.b)(p.a.ngettext("{{ photosCommentsCount }} Photo or comment","{{ photosCommentsCount }} Photos and comments",w,"Label for the number of tried it photos and comments the story pin has"),{photosCommentsCount:!!w&&a.a.createElement(_t.a,{value:w})}):p.a._("Photos and comments","Label for no photos and comments on a story pin")),a.a.createElement(g.b,{paddingX:3},a.a.createElement(g.m,{icon:"arrow-down",color:C,accessibilityLabel:p.a._("Down arrow","Down arrow icon"),size:12})))))),a.a.createElement(g.b,{position:"absolute",top:!0,left:!0,overflow:"hidden",width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:-1}}},a.a.createElement("div",{className:"story-pin-cover-layout__background-overlay",style:{backgroundImage:`url(${y.url})`}}),a.a.createElement("div",{className:"story-pin-cover-layout__color-overlay",style:{backgroundColor:_,opacity:l?"0.75":"0.5"}}))))},Aa=n("LCmp"),Ma=n("kR61");function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Fa(e,t,n[t])})}return e}function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Na={height:"100%",width:"auto",display:"block"},Ua={height:360,display:"inline-block",borderRadius:"8px",overflow:"hidden"};var za=Object(A.compose)(Object(o.connect)(e=>({location:e.location})),Object(D.b)({name:"PinResource",key:"adPin",options:({adId:e})=>({id:e,field_set_key:"grid_item"})}))(e=>{const t=e.adPin.data,n=e.adId,i=e.index,o=e.location;if(!t)return a.a.createElement(g.F,{accessibilityLabel:p.a._("Ad is loading","Accessibility label for story pin pages loading spinner"),show:!0});const r=t.grid_title,s=t.images,l=t.promoter,c=t.link,d=r&&Object(Aa.a)(r.trim(),60)||"",u=s["736x"]||{},m=l.full_name,h=l.image_small_url,b=`/${l.username}/`,f=Object(Ie.a)(t,o),y=t.videos&&t.videos.id?t.videos.id:void 0;return a.a.createElement(Pe.a,{componentType:228,contextLogData:Ba({},Object(Ma.a)(t)),loggingId:n,impressionType:"Pin",impressionAuxFields:{richTypes:t.shopping_flags||[],imageURL:t.images&&t.images["236x"].url,clientTrackingParams:f||`${t.tracking_params}-0`,videoIdStr:y,isNativeVideoAndWatchable:!!y||void 0},slotIndex:i,viewType:3,viewParameter:157},a.a.createElement(a.a.Fragment,null,a.a.createElement(g.i,null),a.a.createElement(g.b,{display:"flex",alignItems:"center",paddingY:6},a.a.createElement(g.b,{paddingX:4,minWidth:"50%",display:"flex",justifyContent:"center"},a.a.createElement(J.b,{to:c,external:!0},a.a.createElement("div",{style:Ua},a.a.createElement("img",{src:u.url,alt:r,style:Na})))),a.a.createElement(g.b,{paddingX:4,minWidth:"50%"},a.a.createElement(J.b,{to:c,external:!0},a.a.createElement(g.b,{display:"flex",alignItems:"center"},a.a.createElement(g.m,{icon:"arrow-up-right",accessibilityLabel:p.a._("Click through to ad","Icon for add click through link"),color:"darkGray",size:12}),a.a.createElement(g.b,{padding:2},a.a.createElement(g.J,{size:"sm"},m))),a.a.createElement(g.l,{size:"xs"},d)),a.a.createElement(J.b,{to:b},a.a.createElement(g.b,{display:"flex",alignItems:"center",marginTop:4},a.a.createElement(g.a,{name:m,src:h,size:"md"}),a.a.createElement(g.b,{paddingX:2},a.a.createElement(g.J,{size:"xs",bold:!0},p.a._("Promoted by","Ad is promoted by:")),a.a.createElement(g.J,{size:"xs"},m)))))),a.a.createElement(g.i,null)))}),Ha=n("8gFa"),Va=n.n(Ha);const Ga=1;function Wa(e,t){return e/t<Ga}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qa=e=>e?{height:"75vh"}:{minHeight:"300px"};class Ja extends i.PureComponent{constructor(...e){super(...e),Ya(this,"state",{mediaContainerWidth:null}),Ya(this,"setRef",e=>{this.ref=e}),Ya(this,"calculateDimensions",()=>{if(!this.ref)return;const e=this.ref.clientHeight,t=this.props,n=t.width,i=t.height,a=Wa(n,i)?n/i*e:this.ref&&this.ref.clientWidth;this.setState({mediaContainerWidth:a})}),Ya(this,"handleResize",Va()(()=>{this.calculateDimensions()},100))}componentDidMount(){window.addEventListener("resize",this.handleResize),this.calculateDimensions()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const e=this.props,t=e.children,n=e.width,a=e.height,o=this.state.mediaContainerWidth,r=Wa(n,a);return i.createElement("div",{ref:this.setRef,style:qa(r)},i.createElement("div",{style:{width:o,margin:"0 auto"}},i.createElement(g.b,{shape:"rounded",overflow:"hidden"},t)))}}var $a=n("kp2G"),Qa=n("drcg");var Ka=e=>{const t=e.block,n=e.pageId,i=e.pinId,o=e.onClickThrough,r=t.type,s=t.text,l=t.block_type,c=t.canonical_url,d=t.src_url,u=e=>{e&&Object(Z.a)(120,{view:3,viewParameter:157,component:228,element:11157,story_pin_page_id:n,objectId:i,src_url:d,canonical_url:c})};switch(l||r){case 4:const e=t.image,p=t.normalized_url;return e&&d&&p&&c?a.a.createElement(g.b,{marginTop:5,marginBottom:5},a.a.createElement(Qa.b,{onVisibilityChanged:u,image:e,linkText:s,sourceUrl:d,displayUrl:p,canonicalUrl:c,pageId:n,pinId:i,onClickThrough:o})):null;case 1:return a.a.createElement(g.b,{marginBottom:4,paddingX:2},a.a.createElement(g.l,{size:"sm",overflow:"normal"},s));case 0:default:return a.a.createElement(g.b,{paddingX:2,dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}}},a.a.createElement(g.J,{size:"lg",__dangerouslyIncreaseLineHeight:!0},a.a.createElement($a.a,null,s)))}};var Xa=e=>{const t=e.blocks,n=e.pageId,i=e.pinId,o=e.onClickThrough;return a.a.createElement(a.a.Fragment,null,t.filter(e=>e).map((e,t)=>a.a.createElement(Ka,{block:e,key:t,pageId:n,pinId:i,onClickThrough:o})))};var Za=Object(An.a)(class extends a.a.PureComponent{render(){const e=this.props,t=e.video,n=e.pinId,i=e.isPlaying,o=function(e){const t=e.video_list,n=void 0===t?{}:t;return{hls:n.V_HLSV4,hlsv3:n.V_HLSV3_MOBILE}}(t),r=o.hls,s=o.hlsv3,l=(r||{}).thumbnail;return a.a.createElement(Gn,{customThumbnail:l,pinId:n,video:{id:t.id,hls:r,hlsv3:s},isPlaying:i,muted:!1,showControls:!0,loop:!0,variant:"legacy"})}});function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class to extends a.a.PureComponent{constructor(...e){super(...e),eo(this,"state",{isPlaying:!1}),eo(this,"onVisibleVideo",e=>{this.setState({isPlaying:e})})}render(){const e=this.props,t=e.video,n=e.pinId;return a.a.createElement(Za,{video:t,pinId:n,onVisibilityChanged:this.onVisibleVideo,isPlaying:this.state.isPlaying})}}var no=e=>{const t=e.page,n=t.image,i=t.blocks,o=t.video,r=t.id,s=e.pinId,l=e.onClickThrough,c=(n||{}).images,d=(void 0===c?{}:c)["750x"],u=(o||{}).video_list,m=(void 0===u?{}:u).V_HLSV4;if(!d&&!m)return null;const h=(o?function(e){const t=e.video_list;return{hls:(void 0===t?{}:t).V_HLSV4}}(o):{}).hls||{},b=h.width,f=h.height,y=o?f:d.height,v=o?b:d.width;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ja,{width:v,height:y},!!o&&!!m&&a.a.createElement(to,{video:o,pinId:s}),d&&!m&&a.a.createElement(g.o,{src:d.url,alt:p.a._("Story pin image","Alt text for story pin image"),naturalHeight:d.height,naturalWidth:d.width})),!!i.length&&a.a.createElement(g.b,{marginTop:8},a.a.createElement(Xa,{blocks:i,pageId:r,pinId:s,onClickThrough:l})))};var io=e=>{const t=e.index,n=e.page,i=e.pinId,o=e.onClickThrough;return a.a.createElement(E.a,{viewParameter:157,component:228,auxData:{story_pin_page_id:n.id}},a.a.createElement(g.b,{display:"flex",justifyContent:"center",key:n.id},a.a.createElement(g.b,{width:540,dangerouslySetInlineStyle:{__style:{marginBottom:80}}},(e=>{switch(e.layout){case 1:return a.a.createElement(no,{page:e,pinId:i,onClickThrough:o});case 4:return a.a.createElement(Xa,{blocks:e.blocks,pageId:e.id,pinId:i,onClickThrough:o});case 2:return e.ad&&e.ad.id?a.a.createElement(za,{adId:e.ad.id,index:t}):null;default:return null}})(n))))};function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const oo=548,ro=755,so=160;var lo=Object(A.compose)(Object(o.connect)(),Object(D.b)({name:"PinResource",key:"detailedPin",options:({pin:{id:e}})=>({id:e,field_set_key:"detailed"})}))(class extends i.Component{constructor(...e){super(...e),ao(this,"logScrollEngagement",()=>{const e=this.props.pin.id;Object(Z.a)(7588,{view:3,viewParameter:157,objectId:e}),document.removeEventListener("scroll",this.logScrollEngagement)}),ao(this,"handleScrollToComments",()=>{this.commentsRef.current&&window.scrollTo(0,this.commentsRef.current.offsetTop-so)}),ao(this,"handleAttributionClick",()=>{Object(Z.a)(101,{view:3,viewParameter:157,component:230})}),ao(this,"commentsRef",a.a.createRef())}componentDidMount(){document.addEventListener("scroll",this.logScrollEngagement)}componentWillUnmount(){document.removeEventListener("scroll",this.logScrollEngagement)}render(){const e=this.props,t=e.pin,n=e.detailedPin,i=e.onNavigateBack,o=e.backButtonLabel,r=e.onUpdate,s=e.dispatch,l=e.onClickThrough,c=n.data||{},d=c.native_creator,u=c.aggregated_pin_data,m=void 0===u?{}:u,h=c.access,b=void 0===h?[]:h,f=c.story_pin_data,y=(void 0===f?{}:f).pages,v=void 0===y?[]:y,w=b.includes("write")||b.includes("delete"),_=v.filter(e=>0!==e.layout&&!(2===e.layout&&!e.ad)),C=t.creator_analytics;return a.a.createElement(E.a,{viewParameter:157,component:85},a.a.createElement(g.b,null,!!n.data&&a.a.createElement(Ge.a,{className:"sticky",position:"sticky"},a.a.createElement(Ra,{pin:n.data,onNavigateBack:i,scrollBreakpoint:oo,onScrollToComments:this.handleScrollToComments,onAttributionClick:this.handleAttributionClick,backButtonLabel:o,onEditSubmit:r,editable:w})),a.a.createElement(La,{pin:t,onScrollToComments:this.handleScrollToComments,onAttributionClick:this.handleAttributionClick}),n.data?a.a.createElement(a.a.Fragment,null,_.map((e,n)=>a.a.createElement(io,{page:e,isLastPage:_.length===n+1,key:n,index:n,pinId:t.id,onClickThrough:l})),a.a.createElement(g.b,{display:"flex",alignItems:"center",width:"100%",direction:"column",marginBottom:10},a.a.createElement(ba.a,null,e=>a.a.createElement(g.b,{width:ro,paddingY:10},!!C&&a.a.createElement(Ca.default,{pinId:t.id,stats:C,isVideo:!1,isStoryPin:!0,show90Days:!1}),!!d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(g.b,{marginBottom:10},a.a.createElement(_a,{creatorId:d.id,viewer:e})),a.a.createElement(g.i,null)),a.a.createElement(ui.a,{name:"CanonicalCard"},a.a.createElement("div",{ref:this.commentsRef},a.a.createElement(pt,{emptyStateProps:{dispatch:s,aggregatedPinDataId:m.id,doneCount:(m.aggregated_stats||{}).done||0,isDoneByMe:{}.isDoneByMe||!1,launchingView:"react-closeup",loggedInUser:e,pinId:t.id,pinTitle:t.title},isDoneByMe:{}.isDoneByMe||!1,pin:t,showCanonicalComments:!0}))),a.a.createElement(g.i,null),a.a.createElement(Y.a,{variant:"legacy",viewer:e,pin:t}))))):a.a.createElement(g.b,{paddingY:10},a.a.createElement(g.F,{accessibilityLabel:p.a._("Story pin pages are loading","Accessibility label for story pin pages loading spinner"),show:!0}))))}}),co=n("OLQZ"),uo=n.n(co),po=n("FGWo"),mo=Object(po.a)(12,(e,t)=>({pin_id:e.pinId,email_id:e.emailId,did_long_clickthrough:t.didLongClickThrough||!1,did_pin_clickthrough:t.didPinClickThrough||!1,did_repin:t.didRepin||!1,login_page_type:t.loginPageType||"unknown",autologin_method:t.autologinMethod})),ho=n("Wiy7"),go=n("nI4G"),bo=n("VI9K"),fo=n("4e+M"),yo=n("3XYW");function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){wo(e,t,n[t])})}return e}function wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Eo=e=>({closeupContainerHeight:0,firstLoadComplete:!1,hideBackButton:!1,loginModalOptions:null,modalOpen:!1,myTry:e.pin?{isDoneByMe:e.pin.done_by_me}:null,shopping:{catalogId:-1,variantId:void 0},pin:vo({},e.pin,e.pinResource.data),pinId:e.pinId,didLongClickThrough:!1,didPinClickThrough:!1,didShortClickThrough:!1,intervalId:null,landOnCurrentPage:!1,quickPromoteModalTriggered:!1,relatedPins:[],showBackButton:!0,showBackButtonLabel:!0,availableWidthForContentOnRight:!1,hasDoneClickthrough:null,hasDoneCloseup:null,viewportSize:"wide",carouselIndex:e.pin.carousel_data&&e.pin.carousel_data.index||0,showRelatedFeedUpsell:!0,relatedPinsUpsellShown:!1,suspiciousLinkModalStatus:fo.a.closed,showBackButtonShadow:null,width:null});function _o(e,t){switch(t.type){case"gallerySelect":return{shopping:t.select};case"pinLoaded":{const n=e.myTry?{}:{myTry:{isDoneByMe:t.pin.done_by_me}};return vo({pin:t.pin},n,{firstLoadComplete:!0})}case"tryChange":return{myTry:{isDoneByMe:t.isDoneByMe}};default:throw t.type,"impossible"}}var Co=n("spTd");function Oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){So(e,t,n[t])})}return e}function So(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xo=12e4,ko=5e3,Io=1056,Po=1135,To=630,jo=998,Ro=Object(i.lazy)(()=>Promise.all([n.e("ArticlePageDesktop~AuthHomePageDesktop~BusinessAccountConvertPageDesktop~BusinessAccountCreatePageDe~1cac07e8"),n.e("ExperienceHeroCommon")]).then(n.bind(null,"GjKX")));function Do({conversation_id:e,senderId:t,pinId:n}){hn.a.create("ApiResource",{url:`/v3/conversations/${e}/message/mark_seen/`,sender:t,pin:n}).callCreate()}const Lo={MODAL:"modal",PAGE:"page",PAGE_WITH_BACK_BUTTON:"pageWithBackButton"},Ao=(e,t)=>"narrow"!==e&&t,Mo={__style:{background:"linear-gradient(to bottom, rgb(238, 238, 238) 300px, rgb(255, 255, 255) 100%)"}};class Bo extends i.Component{constructor(...e){super(...e),So(this,"state",Eo(this.props)),So(this,"shouldShowAltLinks",()=>{const e=this.props.pin;return this.state.suspiciousLinkModalStatus===fo.a.closed&&e.click_through_link_quality&&e.click_through_link_quality.is_inaccessible}),So(this,"getAvailableSizeForFakeModalBackButtonLabel",e=>{const t=e||_i.a,n="pageWithBackButton"===this.props.presentationMode?t:20;return this.relatedPinsContainerRef&&this.relatedPinsContainerRef.getBoundingClientRect().top-n<0?0:this.closeupBodyContainerRef?this.closeupBodyContainerRef.getBoundingClientRect().left-n:0}),So(this,"setCloseupBodyContainerRef",e=>{this.closeupBodyContainerRef=e}),So(this,"setRelatedPinsContainerRef",e=>{this.relatedPinsContainerRef=e}),So(this,"setRelatedPinsHeaderRef",e=>{this.relatedPinsHeaderRef=e}),So(this,"setResultScrollContainerRef",e=>{this.resultScrollContainer||(this.resultScrollContainer=e,this.forceUpdate())}),So(this,"setRelatedPinsRef",e=>{this.relatedPinsRef=e}),So(this,"relatedProductsRef",a.a.createRef()),So(this,"closeupBodyRef",a.a.createRef()),So(this,"getCloseupContext",Object(ho.b)((e,t,n,i)=>({showCloseupContentRight:e,showLegoUpdates:i,viewportSize:t,width:n}))),So(this,"mounted",!1),So(this,"updateViewportSize",uo()(()=>{const e=this.state.viewportSize,t=this.props.pin,n=(Object(S.d)(Object(S.k)({pin:t}))||{}).embed,i=(Object(S.n)(Object(S.k)({pin:t}))||{}).video,a=n&&n.src,o=n&&"pinstory"===n.subtype,r=n&&"gif"===n.type,s=!!i&&Object(S.o)(i)||!!a&&!o&&!r,l=this.closeupBodyContainerRef?this.closeupBodyContainerRef.getBoundingClientRect():0;if(this.mounted){const t=s?jo:Io;this.setState(Oo({closeupContainerHeight:l&&l.height,hideBackButton:window&&("wide"===e&&window.innerWidth<=Po||"narrow"===e&&window.innerWidth<=To),viewportSize:window&&window.innerWidth>=t?"wide":"narrow"},l?{width:l.width}:{}))}},50)),So(this,"goToPreviousPin",()=>{const e=this.props,t=e.activateLeftRightArrowNavExp,n=e.leftRightArrowNavExpGroup;t&&(t(),n&&n.startsWith("enabled_left"))?this.handleBackButtonClick():this.navigatePins(-1)}),So(this,"goToNextPin",()=>{const e=this.props,t=e.activateLeftRightArrowNavExp,n=e.leftRightArrowNavExpGroup;n&&(n.startsWith("enabled_left")||n.startsWith("control_left"))||(t&&t(),this.navigatePins(1))}),So(this,"triggerQuickPromote",()=>{const e=this.props,t=e.pinResource,n=e.dispatch;this.setState({quickPromoteModalTriggered:!0}),n(Object(K.i)(t.data))}),So(this,"clickThroughTimer",()=>{const e=this.props.setPlacementExtraContext;clearInterval(this.state.intervalId),this.setState({didLongClickThrough:!0}),e({didLongClickThrough:!0})}),So(this,"handleClickThrough",(e,t)=>{this.shouldShowAltLinks()?this.setState({suspiciousLinkModalStatus:fo.a.open}):this.executeClickthrough(e,t)}),So(this,"executeClickthrough",(e,t)=>{const n=this.props,i=n.completePinClickthrough,a=n.pinId,o=n.updateExperienceForPlacement,r=n.setPlacementExtraContext,s=this.state,l=s.pin,c=s.didPinClickThrough,d=s.didShortClickThrough,u=s.hasDoneClickthrough,p=!!l.story_pin_data,m=p?228:4;let h=361;if(e?h=35:p&&(h=11157),u||(Object(yo.a)("HAS_DONE_CLICKTHROUGH").then(()=>o(12)),i()),c||(r({didPinClickThrough:!0}),this.setState({didPinClickThrough:!0})),Object(Z.a)(101,Oo({objectId:a,component:m,element:h},Object(Ma.a)(l)||{},t||{})),Object(Z.a)(12,Oo({objectId:a,view:3,viewParameter:Object(C.d)(Object(S.k)(this.props)),component:m,element:h},Object(Ma.a)(l)||{},t||{})),Object(go.b)("Lead",()=>{sa.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Pin Clickthrough"})}),e){const e=setInterval(this.clickThroughTimer,xo);this.setState({intervalId:e})}this.clickThroughStartTime=Date.now(),d&&this.setState({didShortClickThrough:!1})}),So(this,"handleModalCompleteOriginalClickthrough",()=>{this.executeClickthrough(),this.setState({suspiciousLinkModalStatus:fo.a.completed}),sa.default.increment("web_auth_alt_link_modal_completed_original")}),So(this,"handleModalCompleteAltClickthrough",()=>{this.executeClickthrough(),this.setState({suspiciousLinkModalStatus:fo.a.closed}),sa.default.increment("web_auth_alt_link_modal_completed_alternate")}),So(this,"handleModalDismiss",()=>{this.setState({suspiciousLinkModalStatus:fo.a.closed},()=>{this.relatedPinsRef&&(this.relatedPinsRef.scrollIntoView(),window.scrollBy(0,-en.a))})}),So(this,"handleFocus",()=>{const e=this.props.setPlacementExtraContext;clearInterval(this.state.intervalId),this.setState({didLongClickThrough:!1}),e({didLongClickThrough:!1})}),So(this,"handleWindowFocus",()=>{if(this.clickThroughStartTime>0){const e=Date.now()-this.clickThroughStartTime<ko;this.setState({didShortClickThrough:e}),this.clickThroughStartTime=0}}),So(this,"pwtMetadataRendered",!1),So(this,"pwtImageRendered",!1),So(this,"pwtTrackImageLoad",()=>{Object(En.c)({name:"CloseupImageRenderedTraceEvent"}),this.pwtImageRendered=!0,this.pwtMetadataRendered&&Object(En.f)(13,{viewParameter:Object(C.d)(Object(S.k)(this.props))})}),So(this,"handleClickLogging",()=>{Object(Z.a)(101,Oo({objectId:this.state.pin.id,component:4,element:0},Object(Ma.a)(this.state.pin)||{})),Object(go.b)("Lead",()=>{sa.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin"})})}),So(this,"handleBackButtonClick",()=>{const e=this.props,t=e.deepLinkBackGoesToBoard,n=e.goBack,i=e.routePush;return"deep_linking"===e.trafficSource&&!t?i("/"):n()}),So(this,"backButtonText",()=>{const e=this.props,t=e.deepLinkBackGoesToBoard,n=e.trafficSource;return a.a.createElement(m,{deepLinkBackGoesToBoard:t,trafficSource:n})}),So(this,"handleCarouselSwipe",e=>{const t=this.state.pin;this.setState({pin:Oo({},t,{carousel_data:Oo({},t.carousel_data,{index:e})})})}),So(this,"handleRelatedFeedVisibilityChange",e=>{if(e.length>0){const t=this.state.relatedPinsUpsellShown,n=e[0].intersectionRatio>0;n?this.setState({showRelatedFeedUpsell:!1}):n||t||this.setState({showRelatedFeedUpsell:!0,relatedPinsUpsellShown:!0})}}),So(this,"dispatch",(e,t)=>this.setState(_o(this.state,e),t)),So(this,"handleScroll",uo()(()=>{const e=this.state.showBackButtonShadow;if(this.relatedPinsRef){const t=_i.a,n=this.relatedPinsRef.getBoundingClientRect().top<=t;n&&!e?this.setState({showBackButtonShadow:!0}):!n&&e&&this.setState({showBackButtonShadow:!1})}},10)),So(this,"handleRelatedPinsLoaded",e=>{this.state.relatedPins.length!==e.length&&this.setState({relatedPins:e})}),So(this,"handleRelatedPinsUpsellOnTouch",({event:e})=>{const t=this.props,n=t.pin,i=t.viewer,a=Object(C.c)(n,i);e.stopPropagation(),a&&this.closeupBodyRef.current.relatedProductsRef?this.closeupBodyRef.current.relatedProductsRef.scrollIntoView():!a&&this.relatedPinsRef&&this.relatedPinsRef.scrollIntoView()}),So(this,"onWrapperClick",e=>{e.stopPropagation(),this.closeModal()}),So(this,"closeModal",()=>{Object(En.a)("closefakemodal",13),this.handleBackButtonClick()}),So(this,"setShowCloseupBackButton",e=>{this.setState({showBackButton:e})})}componentDidMount(){const e=this.props,t=e.completePinCloseup,n=e.conversation_id,i=e.dispatch,a=e.forceSendFeedback,o=e.isLandingPage,s=e.isLimitedLogin,l=e.pin,c=e.pinId,d=e.senderId,u=e.setPlacementExtraContext,p=e.viewer,m=e.shouldShowInbox,h=e.openInbox;this.mounted=!0,this.pinDeleteSubscriber=la.a.instance.subscribe(c,"pinDeleted",()=>{const e=aa.a.singleton(),t=ia()(l,"board.url","/");e.back()||Object(r.a)(t)}),n&&d&&c&&Do({conversation_id:n,senderId:d,pinId:c});const g=n;g&&(ga.a.instance.dispatch(Object(Co.e)(g)),ga.a.instance.dispatch(Object(Co.d)(g)),m&&h(),a&&this.handleSocialEmailLand()),(Object(x.d)({user:p})||Object(x.e)({user:p}))&&Object(yo.c)(p.id).then(({resource_response:{data:e={}}})=>{if(!this.mounted)return;const n=e.has_done_clickthrough,i=e.has_done_closeup;s||!1!==i||(Object(yo.a)("HAS_DONE_CLOSEUP"),t()),this.setState({hasDoneClickthrough:n,hasDoneCloseup:i})}),Object(ma.a)(u),(ha.b.localStorage.getItem("lastVisitedPage")||"").includes(`/pin/${c}`)&&o&&u({loginPageType:"pin"}),l.image_signature&&i(Object(bo.c)(l.image_signature)),this.updateViewportSize(),window.addEventListener("resize",this.updateViewportSize),window.addEventListener("focus",this.handleWindowFocus)}UNSAFE_componentWillReceiveProps(e){const t=e.pinResource.data,n=this.state,i=n.carouselIndex,a=n.firstLoadComplete;t&&!a&&(t.carousel_data&&(t.carousel_data.index=i),this.dispatch({type:"pinLoaded",pin:t}));const o=e.conversation_id,r=e.senderId,s=e.pinId;o&&r&&s&&this.props.pinId!==s&&Do({conversation_id:o,senderId:r,pinId:s})}componentDidUpdate(e){const t=e.pinResource,n=this.props,i=n.didRepin,a=n.pinResource,o=n.setPlacementExtraContext,r=n.showQuickPromote,s=this.state,l=s.pin,c=s.quickPromoteModalTriggered,d=Object(C.d)(Object(S.k)(this.props));!t.isLoaded&&a.isLoaded?(this.pwtMetadataRendered=!0,Object(En.c)({name:"CloseupMetadataRenderedTraceEvent"}),this.pwtImageRendered&&Object(En.f)(13,{viewParameter:d}),Object(Z.a)(7408,Oo({viewParameter:d,objectId:l.id,view:3,viewData:{pin_id:l.id,closeup_rich_types:l.shopping_flags||[]}},Object(Ma.a)(l)||{})),l.aggregated_pin_data&&(l.aggregated_pin_data.is_shop_the_look||l.aggregated_pin_data.is_stela)&&Object(Z.a)(7579,{viewParameter:d,objectId:l.id,view:3,commerce_data:JSON.stringify({pin_is_shop_the_look:l.aggregated_pin_data.is_shop_the_look,pin_is_stela:l.aggregated_pin_data.is_stela})})):a.isLoaded&&!this.pwtMetadataRendered&&(this.pwtMetadataRendered=!0,Object(En.c)({name:"CloseupMetadataRenderedTraceEvent"}),this.pwtImageRendered&&Object(En.f)(13,{viewParameter:d})),!e.pinResource.data&&a.data&&!c&&r&&this.triggerQuickPromote(),!e.didRepin&&i&&o({didRepin:!0})}componentWillUnmount(){this.pinDeleteSubscriber.unsubscribe(),delete this.pinDeleteSubscriber,window.removeEventListener("resize",this.updateViewportSize),window.removeEventListener("focus",this.handleWindowFocus),this.mounted=!1}getPinIndex(e,t){return e?e.indexOf(t):-1}sendFeedback(e){const t=this.props,n=t.conversation_id,i=t.onLoginClick,a=t.pinId,o=t.senderId,r=t.viewer;if(0!==e)if(r.isAuth&&2!==this.context.loginState){if(n){const t=function(e){return hn.a.create("BoardCollaboratorRequestResource",{conversation_id:e,peek:!0,ignore_bookmark:!0})}(n);let i;switch(e){case 1:i="thumbsUp";break;case-1:i="thumbsDown";break;case 2:default:i="heart"}ta(n,t,o,a,i,()=>{Object(Z.a)(7048,{objectId:a,eventData:{pinId:a,userId:o}})}),Object(Z.a)(101,{component:13115,element:10335,objectId:a,eventData:{pinId:a,userId:o}})}}else{const t=Ue.a.appendQueryString(window.location.href,{fsf:e}),n=Ue.a.appendQueryString(t,{hp:1});i?i(t):this.setState({loginModalOptions:{postLoginURL:t,postSignupURL:n}})}}handleSocialEmailLand(){const e=this.props,t=e.pinId,n=e.forceSendFeedback;"1"!==n&&"-1"!==n&&"2"!==n||this.sendFeedback(parseInt(n,10)),Object(Z.a)(7046,{component:13115,objectId:t,eventData:{pinId:t}})}navigatePins(e){const t=this.props,n=t.pinId,i=t.navigablePins,a=t.routeReplace,o=t.trafficSource,r=t.topLevelTrafficSource,s=t.topLevelTrafficSourceDepth,l=t.contextPinIds,c=!!this.props.activateLeftRightArrowNavExp&&this.props.activateLeftRightArrowNavExp().startsWith("enabled"),d=this.getPinIndex(i,n);if(c&&0===d&&-1===e&&this.handleBackButtonClick(),i&&i[d+e]){const t=i[d+e];a(c?{pathname:`/pin/${t}/`,state:{trafficSource:o,topLevelTrafficSource:r,topLevelTrafficSourceDepth:s,contextPinIds:l}}:`/pin/${t}/`)}}renderBodyContent(){const e=this.props,t=e.eligibleExperiences,n=void 0===t?{}:t,i=e.experience,o=e.isCloseupContentRightEligible,r=e.isCloseupShowTryIt,s=e.isLandingPage,l=e.isLfvCloseupShowAll,c=e.isLimitedLogin,d=e.pin,u=e.pinId,p=e.pinResource,m=e.presentationMode,h=e.requestContext,b=e.routePush,f=e.showRepinOnInitialRender,y=e.viewer,v=p.refreshData,w=this.state,E=w.closeupContainerHeight,_=w.didShortClickThrough,C=w.hasDoneClickthrough,O=w.myTry,x=w.pin,k=w.relatedPins,I=w.shopping,P=w.showRelatedFeedUpsell,T=w.suspiciousLinkModalStatus,j=w.viewportSize,R=x.carousel_data,D=(Object(S.d)(Object(S.k)({pin:d}))||{}).embed,L=D&&D.src,A=D&&"pinstory"===D.subtype,M=D&&"gif"===D.type,B=(Object(S.n)(Object(S.k)({pin:d}))||{}).video,F=!!B&&Object(S.o)(B)||!!L&&!A&&!M,N=this.shouldShowAltLinks(),U=!!h&&new X.c(h,"web_change_titles").enabled(),z=d.click_through_link_quality&&d.click_through_link_quality.alternate_links?d.click_through_link_quality.alternate_links:[],H=m===Lo.MODAL,V=Ao(j,o),G=r,W=l,Y=H?{boxShadow:"0px 4px 4px rgb(238, 238, 238)"}:null;return a.a.createElement(g.b,Object.assign({"data-test-id":"gradient",display:"flex",justifyContent:"center"},H?{dangerouslySetInlineStyle:Mo}:{}),T===fo.a.open&&a.a.createElement(fo.b,{altLinks:z,pin:d,handleModalCompleteOriginalClickthrough:this.handleModalCompleteOriginalClickthrough,handleModalCompleteAltClickthrough:this.handleModalCompleteAltClickthrough,handleModalDismiss:this.handleModalDismiss}),a.a.createElement(qi.a,{isWideVideo:F},a.a.createElement(ui.a,{name:"CloseupBody"},a.a.createElement("div",{ref:this.setCloseupBodyContainerRef},a.a.createElement(Yi,{carouselData:R,closeupContainerHeight:E,data:p.data,didShortClickThrough:_,dispatch:this.dispatch,eligibleExperiences:n,experience:i,goBack:this.handleBackButtonClick,handleCarouselSwipe:this.handleCarouselSwipe,hasDoneClickthrough:C,isCloseupShowTryIt:G,isLandingPage:s,isLfvCloseupShowAll:W,isWideVideo:F,myTry:O,onClickThrough:this.handleClickThrough,onImageLoad:this.pwtTrackImageLoad,onSaveButtonClick:this.handleClickLogging,onUpdate:v,outerBodyStyle:Y,pin:d,pinId:u,ref:this.closeupBodyRef,routePush:b,shopping:I,inChangeTitlesExp:U,shouldShowAltLinks:N,showCloseupContentRight:V,showFlashlight:!d.is_promoted,showInModal:H,showRepinOnInitialRender:!c&&f,viewer:y}),P&&k.length>0&&a.a.createElement(g.O,{mouseCursor:"pointer",onTouch:this.handleRelatedPinsUpsellOnTouch},a.a.createElement(pa,null))))))}renderCloseupRelatedPinsContent(){const e=this.props,t=e.pin,n=e.searchQuery,i=e.contextPinIds,o=e.topLevelTrafficSource,r=e.topLevelTrafficSourceDepth,s=e.trafficSource,l=this.state.relatedPins,c=a.a.createElement(g.b,{display:"flex",direction:"column",flex:"grow"},a.a.createElement("div",{className:"flex flex-auto flex-column",ref:this.setRelatedPinsContainerRef},a.a.createElement(ui.a,{name:"CloseupRelatedPins"},a.a.createElement("div",{ref:this.setRelatedPinsRef},a.a.createElement(B,{onRelatedFeedLoadedHandler:this.handleRelatedPinsLoaded,pin:t,searchQuery:n,contextPinIds:i,trafficSource:s,topLevelTrafficSource:o,topLevelTrafficSourceDepth:r,scrollContainer:void 0,goBack:this.handleBackButtonClick,backButtonLabel:this.backButtonText(),setShowCloseupBackButton:this.setShowCloseupBackButton,setRelatedPinsHeaderRef:this.setRelatedPinsHeaderRef,showRelatedPinsHeader:l&&l.length>0})))));return a.a.createElement(oa.a,{onVisibilityChange:this.handleRelatedFeedVisibilityChange},c)}renderContent(){const e=this.props,t=e.pin,n=e.pinResource,i=e.viewer,o=n.refreshData,r=n.error,s=this.state,l=s.didShortClickThrough,c=s.firstLoadComplete;if(0!==!Object.keys(t).length&&r)return a.a.createElement(Ji.a,{i18n:p.a});const d=t.story_pin_data_id?a.a.createElement(lo,{pin:t,onNavigateBack:this.handleBackButtonClick,backButtonLabel:this.backButtonText(),onUpdate:o,onClickThrough:this.handleClickThrough}):this.renderBodyContent();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{"data-test-id":c?"closeup-data-loaded":"",key:"closeup-content",className:"Closeup Module flex flex-auto justify-around flex-column",role:"presentation"},d,l&&!Object(C.c)(t,i)&&a.a.createElement(Si,null)),t&&t.id&&!t.is_promoted&&this.renderCloseupRelatedPinsContent())}render(){const e=this.props,t=e.isCloseupContentRightEligible,n=e.pin.story_pin_data_id,i=e.presentationMode,o=e.pinId,r=this.state,s=r.hideBackButton,l=r.showBackButtonShadow,c=r.viewportSize,d=i!==Lo.PAGE&&!n,p=this.renderContent();return a.a.createElement(h.a.Provider,{value:this.getCloseupContext(Ao(c,t),this.state.viewportSize,this.state.width,!1)},a.a.createElement(Qi.a,{placementId:12}),a.a.createElement(E.a,{view:3,objectId:o},a.a.createElement("div",{className:"reactCloseupScrollContainer",onFocus:this.handleFocus,ref:this.setResultScrollContainerRef},a.a.createElement($t.a,null,a.a.createElement(Ro,{placementId:12})),a.a.createElement($i.default,{placementId:12}),!s&&!n&&a.a.createElement(u.a,{onClick:this.handleBackButtonClick,showShadow:l,handleScroll:this.handleScroll}),d?a.a.createElement(_.b,{backgroundColor:"white",goBack:this.handleBackButtonClick,goToNext:this.goToNextPin,goToPrevious:this.goToPreviousPin,nextAndPreviousButtonsVisibility:"keyOnly",pageHeightStyle:"none"},p):a.a.createElement(a.a.Fragment,null,a.a.createElement(ra.a,{onClose:this.handleBackButtonClick,goToNext:this.goToNextPin,goToPrevious:this.goToPreviousPin}),p),a.a.createElement(Ki.a,{placementId:12}),a.a.createElement(ea,{placementId:12}))))}}So(Bo,"defaultProps",{presentationMode:Lo.PAGE,isCloseupShowTryIt:!0,isLfvCloseupShowAll:!0,isCloseupContentRightEligible:!0});var Fo=Object(A.compose)(Ot.e,mo)(Bo);const No="show_tried_it",Uo="show_core_closeup",zo=500500;var Ho=Object(A.compose)(Fi.a,Object(po.a)(1000075))(class extends i.PureComponent{componentDidMount(){const e=this.props.experience;if(e&&e.experience_id===zo){const t=e.experience_id,n=e.placement_id;this.props.experienceClient.viewExperience(n,t)}}componentDidUpdate(e){const t=e.experience,n=this.props.experience;if(n&&!t){const e=n.experience_id,t=n.placement_id;this.props.experienceClient.viewExperience(t,e)}}get addedProps(){return this.props.experience?{isCloseupShowTryIt:!(this.experienceDisplayData&&No in this.experienceDisplayData)||this.experienceDisplayData[No],isCloseupContentRightEligible:!(this.experienceDisplayData&&Uo in this.experienceDisplayData)||this.experienceDisplayData[Uo],isLfvCloseupShowAll:this.experienceDisplayData&&No in this.experienceDisplayData||!0}:Object.freeze({})}get experienceDisplayData(){const e=this.props.experience;return e&&e.display_data}render(){return(0,this.props.render)(this.addedProps)}});var Vo=Object(D.b)({name:"PinPageResource",key:"pinResource",options:({pinId:e})=>Object(C.b)(e)},{traceLoggerHandlerName:"pwt/pin_closeup_details"})(e=>e.children({pinResource:e.pinResource}));function Go({onClick:e}){return i.createElement(Oa.a,{accessibilityLabel:p.a._("Go back","Accessible icon for close button"),bgColor:"transparent",hoverBgColor:"lightGray",onClick:e},i.createElement(g.b,{display:"flex",alignItems:"center",justifyContent:"center",padding:1},i.createElement(g.b,{padding:1},i.createElement(g.m,{icon:"arrow-back",color:"darkGray",inline:!0,accessibilityLabel:"",size:20})),i.createElement(g.b,{padding:1},i.createElement(g.J,{bold:!0,color:"darkGray",size:"md"},p.a._("Back","Text for back button in the Pin creation flow")))))}var Wo=Object(Pt.a)(_a),Yo=n("dsfX"),qo=n("CAUj"),Jo=n("3Wjl");function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qo=Object(A.compose)(Object(D.b)({name:"PinResource",key:"detailedPin",options:({pinId:e})=>({id:e,field_set_key:"detailed"})}),Object(o.connect)(null,e=>({changeBoardPinCount:t=>e(Object(qo.d)(t)),changeUserPinCount:t=>e(Object(Jo.a)(t))})))(class extends i.Component{constructor(...e){super(...e),$o(this,"handleHide",()=>{const e=this.props.onHide;Object(Z.a)(7802,{}),e()}),$o(this,"handleDelete",()=>{Object(Z.a)(101,{component:13373,element:11186});const e=this.props,t=e.detailedPin,n=e.pinId,i=e.onDelete,a=e.onHide,o=e.changeBoardPinCount,r=e.changeUserPinCount,s=t.data||{};return hn.a.create("PinResource",{id:n}).callDelete().then(()=>{const e=s.board.id,t=s.pinner.id,l=s.section;o({boardId:e,sectionId:l&&l.id||void 0,increment:-1}),r({userId:t,increment:-1}),la.a.instance.publish(e,"pinDeleted",n),la.a.instance.publish(t,"pinDeleted"),la.a.instance.publish(n,"pinDeleted"),a(),i&&i()})})}render(){return a.a.createElement(Yo.b,{accessibilityCloseLabel:p.a._("Close","Close modal"),accessibilityModalLabel:p.a._("Delete this Pin","Accessibility label for modal to delete this status pin"),onDismiss:this.handleHide,heading:p.a._("Delete this Pin?","Heading for modal to delete this status pin"),size:"sm",footer:a.a.createElement(a.a.Fragment,null,a.a.createElement(g.b,{marginBottom:3},a.a.createElement(g.c,{color:"gray",text:p.a._("Delete","Button label for confirming the action of deleting status pin"),onClick:this.handleDelete})),a.a.createElement(g.b,null,a.a.createElement(g.c,{color:"red",text:p.a._("Cancel","Button label for cancelling the action to delete status pin"),onClick:this.handleHide})))},a.a.createElement(g.b,{padding:4},a.a.createElement(g.J,null,p.a._("If you delete this Pin, you won't be able to get it back.","Text to confirm whether user wants to delete the status pin"))))}}),Ko=n("QJ2d"),Xo=n("KCDi"),Zo=n("KsVg"),er=n("KDzr");function tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nr=Ko.a.settings.HELP_VIDEO_PINS,ir={backgroundGradient:{__style:{background:"linear-gradient(to bottom, #eee 200px, #fff 100%)",padding:"32px 0",width:"100%"}},closeupBoxShadow:{__style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 4px #eee",paddingBottom:"24px"}}};var ar=Object(A.compose)(Ft.withRouter,Zo.a,Object(o.connect)(({viewer:e,history:t},n)=>({viewer:e,isLandingPage:0===t.previous.length})))(class extends i.Component{constructor(...e){super(...e),tr(this,"state",{descriptionShowMore:!1,showDeletePinModal:!1,viewportSize:"wide"}),tr(this,"getCloseupContext",Object(ho.b)(e=>({showCloseupContentRight:!0,viewportSize:e}))),tr(this,"mounted",!1),tr(this,"updateViewportSize",uo()(()=>{this.mounted&&this.setState({viewportSize:window&&window.matchMedia("(min-width: 1056px)").matches?"wide":"narrow"})},50)),tr(this,"handleCloseDeleteStatusPinModal",()=>{this.setState({showDeletePinModal:!1})}),tr(this,"handleGoBack",()=>{const e=this.props,t=e.isLandingPage,n=e.router;Ue.a.getQueryStringParams().crossSite?window.history.back():t?n.push("/"):n.goBack()}),tr(this,"handleOnDeleteStatusPin",()=>{const e=this.props.showToast;this.setState({showDeletePinModal:!1}),e(({onHide:e})=>a.a.createElement(Xo.a,{onHide:e,text:p.a._("Pin deleted","Pin delete completion confirmation")})),this.handleGoBack()}),tr(this,"handleOpenDeleteStatusPinModal",()=>{this.setState({showDeletePinModal:!0}),Object(Z.a)(7803,{view:248})}),tr(this,"handleToggleExpand",()=>this.setState(e=>({descriptionShowMore:!e.descriptionShowMore}))),tr(this,"renderNonConversationalDetail",()=>{const e=this.props,t=e.hasDoneClickthrough,n=e.onCloseupBodyUpdate,i=e.pin,o=e.showCloseupContentRight,r=e.viewer,s=e.onClickThrough,l=i.id,c=i.is_native,d={pin:i},u=Object(S.k)(d),p=(Object(S.n)(u)||{}).video;return a.a.createElement(a.a.Fragment,null,this.showCreatorCard&&a.a.createElement(g.b,{marginBottom:3},a.a.createElement(Wo,{creatorId:this.creatorId,viewer:r,slotIndex:0,viewType:3,viewParameter:156,componentType:126,impressionType:"User",loggingId:this.creatorId})),c&&i&&a.a.createElement(Y.a,{followedByMe:!0,pin:i,variant:"legacy",viewer:r}),a.a.createElement(pi.a,Object.assign({hasDoneClickthrough:t,viewer:r,onUpdate:n,showMore:this.state.descriptionShowMore,onToggle:this.handleToggleExpand},d,{showCreatorCard:this.showCreatorCard,onClickThrough:s})),c&&p?a.a.createElement(g.b,{marginBottom:4},a.a.createElement(er.a,Object.assign({viewer:r,onUpdate:n,pinId:l,showCloseupContentRight:o},d))):null,!c&&i&&a.a.createElement(Y.a,Object.assign({},d,{variant:"legacy",viewer:r,isLfvCloseupShowAll:!1})))})}get creatorId(){const e=this.props.pin,t=e.third_party_pin_owner,n=e.link_domain,i=n&&n.official_user;return i||t?i?i.id:t.id:null}get showCreatorCard(){const e=this.props.pin;return(e.link_domain&&e.link_domain.official_user||!!e.third_party_pin_owner)&&!e.is_promoted}componentDidMount(){this.mounted=!0,this.updateViewportSize(),window.addEventListener("resize",this.updateViewportSize)}componentWillUnmount(){window.removeEventListener("resize",this.updateViewportSize),this.mounted=!1}render(){const e=this.state,t=e.showDeletePinModal,n=e.viewportSize,i=this.props,o=i.isLandingPage,r=i.pin,s=r||{},l=s.id,c=s.title,d=s.video_status_message||{},u={pin:r},m=Object(S.k)(u),b=(Object(S.f)(Object(S.i)(m))||{}).image564x,f=void 0===b?null:b,y=(Object(S.h)(Object(S.i)(m))||{}).imageOrig,v=f||(void 0===y?null:y),w=v&&v.url,_=(Object(S.n)(m)||{}).video,C=void 0===_?null:_,O=a.a.createElement(xi.a,u);let x=60,k=0;return v&&(x=v&&"wide"===n?Math.max(Math.min(v.width,496),60):Math.max(Math.min(v.width,564),60),k=v&&v.height?x/v.width*v.height:0),a.a.createElement(E.a,{view:248},a.a.createElement(h.a.Provider,{value:this.getCloseupContext(n)},a.a.createElement(g.b,{dangerouslySetInlineStyle:ir.backgroundGradient},a.a.createElement(g.b,{display:"flex",justifyContent:"center",paddingY:6},a.a.createElement(Ot.a,null,e=>a.a.createElement(g.J,{align:"center",inline:!0,size:"xl"},`${d.closeup} `,a.a.createElement(g.J,{bold:!0,inline:!0,size:"xl",key:"review-guidelines"},a.a.createElement(g.s,{inline:!0,href:nr},p.a._("Read our guidelines","Text link to Pinterest's video content guidelines")))))),a.a.createElement(g.b,{display:"flex",justifyContent:"center"},a.a.createElement(qi.a,null,a.a.createElement(g.b,{dangerouslySetInlineStyle:ir.closeupBoxShadow},a.a.createElement(g.b,{display:"flex",justifyContent:"between",alignItems:"center",paddingX:6,paddingY:4},a.a.createElement(Go,{onClick:this.handleGoBack}),a.a.createElement(g.b,{display:"flex",padding:1},a.a.createElement(g.c,{color:"gray",text:p.a._("Delete","Delete a status Pin"),onClick:this.handleOpenDeleteStatusPinModal}))),a.a.createElement(Yt.a,null,a.a.createElement(wi,null,O),a.a.createElement(Dn.a,{hasActionBar:!0,isCarousel:!(!r||!r.carousel_data),variant:"legacy"},a.a.createElement(g.b,{shape:"rounded",overflow:"hidden",height:k,width:x},C?a.a.createElement(Gn,{customThumbnail:w,muted:o,pinId:l,video:C,autoplay:!0,variant:"legacy"}):v&&a.a.createElement(g.o,{alt:c||"",color:"lightGray",naturalHeight:v.height,naturalWidth:v.width,src:v.url}))),a.a.createElement(qt.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(Jt,null,O),m&&this.renderNonConversationalDetail())))))),a.a.createElement(g.b,{display:"flex",justifyContent:"center",alignItems:"center",marginTop:6},a.a.createElement(g.m,{accessibilityLabel:p.a._("Lock","Accessibility label for lock icon"),icon:"lock",inline:!0,size:20}),a.a.createElement(g.b,{padding:2},a.a.createElement(g.J,{size:"lg"},p.a._("This is only visible to you","The status pin closeup page is only visible to the pin owner"))))),t&&a.a.createElement(Qo,{pinId:l,onDelete:this.handleOnDeleteStatusPin,onHide:this.handleCloseDeleteStatusPinModal})))}}),or=n("io0I");n("U5Pk");function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const sr={Tabs:{display:"flex",userSelect:"none",paddingTop:"4px",paddingBottom:"4px"}};class lr extends i.Component{constructor(...e){super(...e),rr(this,"state",{slideType:"",currentTabIndex:0,focusedTabIndex:void 0,hoveredTabIndex:void 0}),rr(this,"handleTabClick",(e,t)=>{const n=this.props.onChange,i=this.state.currentTabIndex;n({activeTabIndex:e,event:t}),i<e?this.setState({currentTabIndex:e,slideType:"slideRight"}):i>e?this.setState({currentTabIndex:e,slideType:"slideLeft"}):this.setState({slideType:"slide"})}),rr(this,"handleTabFocus",e=>this.setState({focusedTabIndex:e})),rr(this,"handleTabBlur",()=>this.setState({focusedTabIndex:void 0})),rr(this,"handleTabMouseEnter",e=>this.setState({hoveredTabIndex:e})),rr(this,"handleTabMouseLeave",()=>this.setState({hoveredTabIndex:void 0}))}render(){const e=this.props,t=e.tabs,n=e.activeTabIndex,i=e.txtSize,o=this.state,r=o.focusedTabIndex,s=o.hoveredTabIndex,l=o.slideType;return a.a.createElement(g.b,{height:52},a.a.createElement("div",{style:sr.Tabs,role:"tablist"},t.map(({text:e,href:t},o)=>{const c=o===n,d=o===s,u=o===r;return a.a.createElement("div",{"data-test-id":`tab-${o}`,key:`${t}-${o}`,style:{marginLeft:0!==o?"16px":0},className:c?`ExperimentalTabs ${l}`:""},a.a.createElement("a",{"aria-selected":c,href:t,onClick:e=>this.handleTabClick(o,e),onFocus:()=>this.handleTabFocus(o),onBlur:this.handleTabBlur,onMouseEnter:()=>this.handleTabMouseEnter(o),onMouseLeave:this.handleTabMouseLeave,role:"tab"},a.a.createElement(lt.b,{color:c||d||u?"darkGray":"gray",size:i||"xl",weight:"semibold"},e)))})))}}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dr=rt(class extends i.PureComponent{constructor(...e){super(...e),cr(this,"state",{selectedTabIndex:this.props.featuredCommentId?1:0,showComments:!this.props.hideDidIt}),cr(this,"handleShowComments",()=>this.setState({showComments:!this.state.showComments})),cr(this,"handleTabChanged",({event:e,activeTabIndex:t})=>{e.preventDefault(),this.setState({selectedTabIndex:t})}),cr(this,"updateCommentCount",e=>{const t=this.props,n=t.pin.id;(0,t.pinUpdateCommentCount)(n,e)})}get commentsHeading(){const e=this.props.commentCount;let t=p.a._("Comments","comments on a Pin");if(e){const n=p.a.ngettext("{{ count }} comment","{{ count }} comments",e,"comments on a Pin");t=Object(re.i)(n,{count:e.toString()})}return t}get mediaHeading(){const e=this.props,t=e.photoCount,n=e.videoCount;if(t>0&&n>0){const e=t+n;return Object(re.i)(p.a.ngettext("{{ count }} photo or video","{{ count }} photos & videos",e,"header text for photo or video tries on a Pin"),{count:e.toString()})}return t>0?Object(re.i)(p.a.ngettext("{{ count }} photo","{{ count }} photos",t,"header text for photo tries on a Pin"),{count:t.toString()}):n>0?Object(re.i)(p.a.ngettext("{{ count }} video","{{ count }} videos",n,"header text for video tries on a Pin"),{count:n.toString()}):p.a._("Photos","header text for photos tries on a Pin")}get tabs(){const e=this.props,t=e.hideDidIt;let n=[];if(e.showCanonicalComments){const e={text:a.a.createElement(st.a,{id:"canonicalCommentsTab"},this.commentsHeading),href:""};n=n.concat(e)}return t||(n=[{text:this.mediaHeading,href:""}].concat(n)),n}render(){const e=this.props,t=e.commentCount,n=e.emptyStateProps,i=e.hideDidIt,o=e.isDoneByMe,r=e.legoCloseupExpGroup,s=e.pin,l=e.showCanonicalComments,c=this.state,d=c.selectedTabIndex,u=c.showComments,m=0===d&&!i;let h=p.a._("Photos and Comments");i?h=this.commentsHeading:l||(h=this.mediaHeading);const b=((s.link_domain||{}).official_user||{}).id,f=s.aggregated_pin_data||{};return a.a.createElement(g.b,{"data-test-id":"canonical-card",dangerouslySetInlineStyle:{__style:{marginTop:en.k.includes(r)?"40px":"80px"}}},a.a.createElement(g.b,{display:"flex",justifyContent:"start",alignItems:"center"},i&&a.a.createElement(g.b,{marginEnd:1},a.a.createElement(lt.b,{size:"xl",weight:"semibold"},a.a.createElement(lt.b,{size:"xl",weight:"bold"},h))),i&&a.a.createElement(g.n,{accessibilityLabel:p.a._("Show more"),icon:u?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:this.handleShowComments})),!i&&l&&a.a.createElement(st.a,{id:"triedItCommentTabs"},a.a.createElement(lr,{activeTabIndex:d,tabs:this.tabs,onChange:this.handleTabChanged,txtSize:en.k.includes(r)?"lg":"xl"})),a.a.createElement(g.b,{display:m?"block":"none"},a.a.createElement(tt,{aggregatedPinDataId:f.id||"",emptyStateProps:n,isDoneByMe:o,didItData:f.did_it_data,pin:s,variant:"default"})),a.a.createElement(g.b,{display:m||!u?"none":"block"},a.a.createElement(ct.a,{commentCount:t,objectId:f.id,objectType:dt.a.pin,pinId:s.id,pinDomainOwnerId:b,privatePin:"secret"===s.privacy,variant:"default"})))}});var ur=Object(D.b)({name:"UserResource",options:({creatorId:e})=>({field_set_key:"grid_item",user_id:e}),key:"creator"})(e=>{const t=e.creatorId,n=e.isVideo,i=e.pin,o=e.viewer,r=e.creator,s=a.a.createElement(Wo,{creatorId:t,viewer:o,slotIndex:0,viewType:3,viewParameter:156,componentType:126,impressionType:"User",loggingId:t,profileUrlSuffix:n?"video_pins/":null,pin:i}),l=r?r.data:null,c=l?l.username:null;return a.a.createElement(g.b,{marginTop:4},a.a.createElement(mt.a,{avatarSize:45,user:l,username:c,viewParameter:156,viewType:3,pinId:i.id},s))});const pr=Object(i.lazy)(()=>n.e("FlashlightButtonCommon").then(n.bind(null,"Nq8Y")));var mr=({carouselData:e,handleCarouselSwipe:t,hasPinTags:n,imageProps:i,isHovered:o,pinId:r,shouldPadImage:s,showLegoUpdates:l,viewParameter:c})=>a.a.createElement(g.b,{position:"absolute",width:"100%",height:i.naturalHeight,display:"flex",justifyContent:"center"},a.a.createElement(g.b,{position:"absolute",top:!0,width:Cn(i,s).width,height:"100%",padding:l?5:3},a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 44px)"}}}),a.a.createElement(g.G,{bottom:12},a.a.createElement(g.b,{display:"flex",justifyContent:"between"},a.a.createElement(g.b,{width:44}),e&&a.a.createElement(g.b,{display:"flex",position:"relative",justifyContent:"center"},a.a.createElement(nn.a,{carouselIndex:e&&e.index,closeupImageHovered:o,componentType:85,handleCarouselSwipe:t,isCloseup:!0,pinId:r,viewParameter:c,viewType:3,variant:"default"})),a.a.createElement(g.b,{display:"flex",position:"relative"},a.a.createElement($t.a,null,a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}}},a.a.createElement(pr,{closeupImageHovered:o,pinId:r,variant:"default"})))))))),hr=n("x3u9"),gr=n("1OKt");function br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fr extends i.Component{constructor(...e){super(...e),br(this,"state",{linkRef:null}),br(this,"handleTooltipCompleteClick",()=>{window.open(`${Rt.a.GEN.templateConst.settings.HELP_URL}articles/claim-your-website`,"_blank")}),br(this,"saveLinkRef",e=>{this.setState({linkRef:e})})}renderLink(){const e=this.props,t=e.onClickThrough,n=e.legoGroup,i=e.pin,o=e.shouldShowAltLinks,r=e.viewer,s=Object(er.c)(i).currentDomain;if("Uploaded by user"===s){const e=i.pinner,t=e.full_name,n=e.username;return a.a.createElement(g.b,{display:"flex",direction:"row"},a.a.createElement(lt.b,{size:"xl",inline:!0},Object($.b)(p.a._("Uploaded by {{ user }}","link to user who uploaded the pin"),{user:a.a.createElement(J.b,{to:`/${n}`,key:"CloseupLink--NavigateLink"},a.a.createElement(lt.b,{size:"xl",inline:!0,weight:"semibold"},t||n))})))}const l=Object(gr.b)(s);let c;if([en.b,en.d,en.e,en.f].includes(n))c=a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{textDecoration:"underline"}}},a.a.createElement(lt.b,{size:[en.d,en.f].includes(n)?"lg":"xl"},l));else if(n===en.c)c=a.a.createElement(g.b,{alignItems:"center",display:"flex",justifyContent:"start"},a.a.createElement(g.m,{icon:"arrow-up-right",color:"darkGray",inline:!0,accessibilityLabel:Object(gr.c)(s),size:15}),a.a.createElement(g.b,{paddingX:2},a.a.createElement(lt.b,{size:"xl",weight:"semibold"},l)));else{const e={minHeight:36,padding:"0px 16px"},t=a.a.createElement(lt.b,{inline:!0,size:"sm",weight:"semibold"},l);c=a.a.createElement(gr.a,{borderRadius:30,domain:s,fontSize:"sm",fullWidth:!1,styleOverride:e,textNode:t})}return a.a.createElement(er.b,{link:c,onClickThrough:t,pin:i,shouldShowAltLinks:o,showDomainInLink:!0,viewer:r})}render(){const e=this.state.linkRef;return a.a.createElement(g.b,{display:"inlineBlock",position:"relative",width:"100%"},a.a.createElement("div",{ref:this.saveLinkRef},this.renderLink()),a.a.createElement(hr.a,{anchor:e,experienceIds:[500938],idealDirection:"down",onClickComplete:this.handleTooltipCompleteClick,placementId:12}))}}var yr=n("QxXR"),vr=n.n(yr),wr=n("rIOL"),Er=n.n(wr);function _r({category:e,ingredients:t,textSize:n="lg"}){return a.a.createElement(g.b,null,e&&a.a.createElement(g.b,null,a.a.createElement(lt.b,{weight:"semibold",size:n},e)),a.a.createElement("ul",null,t.map((e,t)=>a.a.createElement("li",{"data-test-id":"recipe-ingredient",key:t,itemProp:"recipeIngredient"},a.a.createElement(g.b,{marginTop:1},a.a.createElement(lt.b,{size:n},e.amt||null," ",e.name))))))}var Cr=n("1RKP"),Or=n("nufh");function Sr({recipeProps:e}){const t=e.recipe,n=t.name,i=t.categorizedIngredients,o=t.fromAggregatedData;let r;if(i&&i.length){const e=[];i.forEach(t=>e.push(t.ingredients));const t=Er()(vr()(e)).length;r=i&&i.length&&t?Object(re.c)(p.a.ngettext("{{ count }} ingredient","{{ count }} ingredients",t,"Ingredients title and count in closeup recipe description"),{count:t.toString()}):p.a._("Ingredients","Ingredients title and count in closeup recipe description")}return a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{marginTop:"80px"}}},a.a.createElement(Or.a,{itemScope:!0,itemType:en.g.RECIPE},a.a.createElement("meta",{content:n,itemProp:"name"}),a.a.createElement(g.b,{"data-test-id":"ingredients-heading",marginBottom:4},a.a.createElement(lt.b,{size:"xl",weight:"semibold"},o?n:r)),Array.isArray(i)&&i.length>0&&(1===i.length?a.a.createElement(g.b,{xs:{column:12},"data-test-id":"single-column-ingredients"},i.map(({category:e,ingredients:t},n)=>a.a.createElement(g.b,{marginBottom:2,key:n},a.a.createElement(_r,{category:e,ingredients:t,textSize:"sm"})))):a.a.createElement(g.b,{display:"flex","data-test-id":"dual-column-ingredients"},a.a.createElement(g.b,{xs:{column:6}},i.slice(0,Math.ceil(i.length/2)).map(({category:e,ingredients:t},n)=>a.a.createElement(g.b,{marginBottom:2,key:n},a.a.createElement(_r,{category:e,ingredients:t,textSize:"sm"})))),a.a.createElement(Cr.a,null),a.a.createElement(g.b,{xs:{column:6}},i.slice(Math.ceil(i.length/2)).map(({category:e,ingredients:t},n)=>a.a.createElement(g.b,{marginBottom:2,key:n},a.a.createElement(_r,{category:e,ingredients:t,textSize:"sm"}))))))))}const xr={__style:{marginBottom:"0",marginTop:"0",maxWidth:en.l,minWidth:en.j}};function kr({children:e,isWideVideo:t}){return a.a.createElement(h.a.Consumer,null,({showCloseupContentRight:n,viewportSize:i})=>a.a.createElement("div",{className:Gt()({showCloseupContentRight:n,closeupLegoContainer:!0}),onClick:e=>e.stopPropagation(),style:{height:"100%",width:"100%",borderRadius:32}},a.a.createElement(g.b,{dangerouslySetInlineStyle:t?xr:{}},e)))}function Ir({children:e,isWideVideo:t=!1}){return i.createElement(h.a.Consumer,null,({showCloseupContentRight:n,viewportSize:a})=>{const o=n&&"wide"===a,r=o?en.i:en.j;return i.createElement(g.b,{display:o?"flex":void 0,width:t?void 0:r,direction:t?"column":void 0},e)})}const Pr=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e(5),n.e(11),n.e("PinBetterSaveCommon")]).then(n.bind(null,"qoD0"))),Tr=Object(i.lazy)(()=>Promise.all([n.e(5),n.e("PinSaveButtonCommon")]).then(n.bind(null,"odTJ")));var jr=({audienceEstimationEnabled:e,boardCount:t,onClickCallback:n,onShareCallback:i,pin:o,requestContext:r,showRepinOnInitialRender:s,viewer:l,viewParameter:c})=>{return(({audienceEstimationEnabled:e,viewer:t,requestContext:n,pin:i,boardCount:a})=>(!i.content_sensitivity||!i.content_sensitivity.is_sensitive_content)&&!W({viewer:t,requestContext:n,pin:i})&&void 0!==a&&a>=2)({audienceEstimationEnabled:e,viewer:l,requestContext:r,pin:o,boardCount:"number"==typeof t?t:0})||e?a.a.createElement(g.b,{width:236},a.a.createElement($t.a,null,a.a.createElement(Pr,{pin:o,variant:"lego-closeup",viewParameter:c}))):a.a.createElement($t.a,null,a.a.createElement(Tr,{isCloseupPin:!0,onClickCallback:n,onShareCallback:i,showRepinOnInitialRender:s,pin:o,anchorString:".PinActionBar .repin.pinActionBarButton"}))};const Rr={background:"transparent",border:"0",display:"inline-block",fontSize:"16px",outline:"0",overflowX:"hidden",resize:"none",whiteSpace:"pre-wrap",width:"100%"};var Dr=Object(o.connect)(e=>({viewer:e.viewer}))(e=>{const t=e.viewer,n=t.fullName,i=t.imageMediumUrl;return a.a.createElement(g.b,{alignItems:"center",display:"flex",justifyContent:"between",shape:"rounded"},a.a.createElement(g.b,{flex:"none"},a.a.createElement(g.a,{name:n,size:"md",src:i})),a.a.createElement(g.b,{alignItems:"center",color:"lightGray",dangerouslySetInlineStyle:{__style:{border:"1px solid #EFEFEF",borderRadius:"26px"}},display:"flex",height:40,marginLeft:2,padding:4,width:"100%"},a.a.createElement("textarea",{maxLength:2e3,name:"unifiedCommentsTextBox",placeholder:p.a._("Add a comment","Adding text to a community comment"),rows:1,style:Rr}),a.a.createElement(g.m,{icon:"camera",accessibilityLabel:p.a._("Camera icon","Add a photo to a comment"),color:"darkGray",size:22})))});function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const Ar=44;function Mr(){const e=Lr(Object(i.useState)(!1),2),t=e[0],n=e[1];return a.a.createElement(g.O,{onMouseEnter:function(){n(!0)},onMouseLeave:function(){n(!1)}},a.a.createElement(g.b,{alignItems:"center",color:t?"lightWash":"lightGray",display:"flex",height:Ar,justifyContent:"center",shape:"pill"},a.a.createElement(lt.b,{weight:"semibold"},p.a._("Add a comment","Helper text for add a comment button"))))}var Br=n("GYbB");function Fr({user:e}){return a.a.createElement(g.b,null,a.a.createElement(lt.b,{size:"md",weight:"semibold"},Object(he.e)(e)))}const Nr=90;function Ur(e){const t=e.comment,n=t.tagged_users,i=t.tags,o=t.text,r=t.user,s=t.user,l=s.full_name,c=s.image_medium_url;return a.a.createElement(g.b,{display:"flex",direction:"row"},a.a.createElement(g.b,{flex:"none"},a.a.createElement(g.a,{name:l,size:"md",src:c})),a.a.createElement(g.b,{display:"flex",direction:"column"},a.a.createElement(g.b,{paddingX:2},a.a.createElement(Fr,{user:r}),a.a.createElement(Br.a,{allowReveal:!0,inUnifiedComments:!0,maxCharLength:Nr,taggedUsers:n,tags:i,text:o,size:"md"})),a.a.createElement(g.b,{display:"flex",direction:"row",paddingX:2},a.a.createElement(g.n,{accessibilityLabel:"Like",bgColor:"transparent",icon:"heart",iconColor:"darkGray",size:"sm"}),a.a.createElement(g.c,{color:"transparent",inline:!0,size:"sm",text:"Reply",textColor:"darkGray"}))))}function zr({unifiedCommentCount:e}){let t="";if(e>1){const n=p.a.ngettext("{{ count }} comment","{{ count }} comments",e,"comments on a Pin");t=Object(re.i)(n,{count:e.toString()})}return t}const Hr=429,Vr=4;var Gr=Object(A.compose)(Object(o.connect)((e,t)=>{const n=t.pin.aggregated_pin_data||{};return{commentCount:n.comment_count||0,objectId:n.id||"",photoCount:n.did_it_data&&n.did_it_data.images_count||0,videoCount:n.did_it_data&&n.did_it_data.videos_count||0}},()=>({})),Object(D.b)({name:"AggregatedCommentFeedResource",key:"feedResource",options:e=>({objectId:e.objectId,page_size:1})}))(function(e){const t=e.commentCount,n=e.feedResource,o=n.data,r=n.isLoaded,s=e.photoCount,l=e.pin,c=e.videoCount,d=t+s+c,u=s+c,m=l.aggregated_pin_data||{};return a.a.createElement(g.b,{width:Hr},a.a.createElement(g.b,{paddingY:4},a.a.createElement(lt.b,{size:"xl",weight:"bold"},p.a._("Comments","Comments header on a pin closeup"))),0===d?a.a.createElement(i.Fragment,null,a.a.createElement(lt.b,{size:"sm"},p.a._("Love this pin? Be sure to let the creator know.","Helper text for comments")),a.a.createElement(g.b,{paddingY:4},a.a.createElement(Dr,null))):a.a.createElement(i.Fragment,null,o&&o.length>0&&a.a.createElement(Ur,{comment:o[0]}),a.a.createElement(g.F,{accessibilityLabel:p.a._("Comments loading"),show:!r})),u>Vr&&a.a.createElement(g.b,{marginBottom:4},a.a.createElement(tt,{aggregatedPinDataId:m.id||"",didItData:m.did_it_data,inUnifiedComments:!0,pin:l,variant:"default"})),d>0&&a.a.createElement(i.Fragment,null,a.a.createElement(lt.b,{align:"right",color:"gray",size:"sm",weight:"bold"},a.a.createElement(zr,{unifiedCommentCount:d})),a.a.createElement(g.b,{paddingY:4},a.a.createElement(Mr,null))))});var Wr=e=>{const t=e.isWideVideo,n=e.pin,i=e.shouldPadImage,o=Object(S.k)({pin:n}),r=(Object(C.e)(o)||{}).attribution,s=void 0===r?{}:r,l=(Object(S.d)(o)||{}).embed,c=l&&l.src,d=t?en.l:en.j,u=a.a.createElement(h.a.Consumer,null,({showCloseupContentRight:e,viewportSize:n})=>{const o=a.a.createElement("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%",borderRadius:i?16:0},className:Gt()("IframeEmbed",{[s.providerName]:s.providerName})},a.a.createElement("iframe",{allowFullScreen:!0,id:Rt.a.VIDEO_IFRAME_ID,src:c.replace("http://","https://"),style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:p.a._("Embedded content","Accessible content for the embedded content iframe")}));return e&&"wide"===n?a.a.createElement(g.b,{marginBottom:6,marginEnd:t||i?0:6,width:d},o):o});return i?a.a.createElement(Zt,null,u):u};function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){qr(e,t,n[t])})}return e}function qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Jr=e=>{const t=(Object(S.k)(e)||{}).pin,n=void 0===t?{}:t,i=e||{},o=i.imageWidth,r=i.imageHeight;return i.pinTags?a.a.createElement(T,null,a.a.createElement(In,{pin:n,imageHeight:r,imageWidth:o})):null};class $r extends a.a.Component{constructor(...e){super(...e),qr(this,"calculateDimensions",({isGif:e,imgSrc:t,showCloseupContentRight:n,viewportSize:i})=>{const a=this.props.pin;return _n(t),Object(S.a)({imgSrc:t,inLegoCloseupView:!0,isGif:e,pin:a,showCloseupContentRight:n,viewportSize:i})})}render(){const e=this.props,t=e.carouselData,n=e.onClick,i=e.isHovered,o=e.onImageLoad,r=e.pin,s=e.showDomainLink,l=e.showFlashlight,c=e.handleCarouselSwipe,d=e.taggable,u=e.viewType,p=e.viewParameter,m=e.componentType,b=e.shouldShowAltLinks,f=e.shouldPadImage,y=e.styleOverrides,v=void 0===y?{}:y,w=e.overlay,E=e.imageContainerRef,_=Object(S.k)({pin:r}),C=Object(S.i)(_),O=(Object(S.f)(C)||{}).image564x,x=void 0===O?{}:O,k=(Object(S.h)(C)||{}).imageOrig,I=(void 0===k?{}:k).url,P=(Object(S.j)(_)||{}).link,T=(Object(S.d)(_)||{}).embed,j=(Object(S.l)(_)||{}).pinTags,R=T&&"gif"===T.type,D=R?T.src:x.url,L=r.id;let A,M,B=r.domain;if(t){const e=t.carousel_slots,n=t.id,i=t.index;A=e[i]&&e[i].link,M={carousel_slot_id:e[i]&&e[i].id,carousel_data_id:n,carousel_slot_index:i},B=e[i]&&e[i].domain}return a.a.createElement(h.a.Consumer,null,({showCloseupContentRight:e,showLegoUpdates:h,viewportSize:y})=>{const _=e&&i?{background:"#000",left:"auto",right:"auto"}:{},C=this.calculateDimensions({imgSrc:D,isGif:R,showCloseupContentRight:e,viewportSize:y}),O=a.a.createElement(g.b,Object.assign({ref:E},f?{dangerouslySetInlineStyle:{__style:{borderRadius:16,overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)"}}}:{}),a.a.createElement(cn,{carousel_data:t,componentType:m,domain:B||"",dominantColor:r.dominant_color,handleCarouselSwipe:c,hasPinTags:!!j,imageProps:C,imgSrc:D,isHovered:i,isPreviewImage:!(R||!D),onImageLoad:o,pinId:L,showDomainLink:s,styleOverrides:f||R?Yr({},v.maxWidth||{},{minWidth:C.naturalWidth}):{},variant:"default",viewParameter:p,viewType:u}));return a.a.createElement(g.b,Object.assign({position:"relative",display:"flex",justifyContent:"center",width:"100%",marginBottom:t?10:0,maxWidth:en.j},f?{height:"100%"}:{minWidth:en.j}),w,a.a.createElement(g.b,Object.assign({"data-test-id":"closeup-body-image-container",maxWidth:C.naturalWidth,width:"100%",onContextMenu:e=>{e.stopPropagation(),Object(Pn.a)("auth.context_menu_open.pin_closeup")}},f?{}:{maxHeight:C.naturalHeight,dangerouslySetInlineStyle:{__style:_}}),a.a.createElement(J.b,{auxData:M&&M,className:"imageLink",external:!0,onClick:n,pinId:r.id,to:A||P||I,shouldShowAltLinks:b},a.a.createElement(g.b,f?{height:"100%",display:"flex",alignItems:"center"}:{},d?a.a.createElement(wn,{pin:r}):null,a.a.createElement(Jr,{pin:r,pinTags:j,imageWidth:C.naturalWidth,imageHeight:C.naturalHeight}),R||!l?O:a.a.createElement(g.b,Object.assign({position:"relative",padding:3},Cn(C,f)),a.a.createElement(g.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0},O))))))})}}var Qr=e=>{const t=e.carouselData,n=e.handleCarouselSwipe,i=e.imageContainerRef,o=e.isHovered,r=e.isNux,s=e.onImageClick,l=e.onImageLoad,c=e.overlay,d=e.pin,u=e.shouldPadImage,p=e.shouldShowAltLinks,m=e.showFlashlight,h=e.showInModal,g=e.viewParameter,b=d.access,f=d.domain,y=d.link,v=b&&b.includes("tag"),w=f&&!!y&&!y.startsWith("https://i.pinimg.com"),_=u?{maxWidth:{maxWidth:en.j-en.h},minWidth:{},height:{},borderRadius:16}:{},C=a.a.createElement(E.a,{viewParameter:g,component:85},a.a.createElement(Dn.a,{hasActionBar:!0,isCarousel:!!t,shouldRoundLeftCorners:!r,styleOverrides:_,shouldPadImage:u,variant:"default"},a.a.createElement($r,{carouselData:t,viewType:3,viewParameter:g,componentType:85,handleCarouselSwipe:n,isHovered:o,onClick:s,onImageLoad:l,pin:d,taggable:v,shouldShowAltLinks:p,showDomainLink:w,showFlashlight:m,showInModal:h,shouldPadImage:u,overlay:c,imageContainerRef:i,styleOverrides:_})));return u?a.a.createElement(Zt,null,C):C};var Kr=({closeupContainerHeight:e,closeupIsFirstPageInHistoryStack:t,imageHeight:n,imageContainerRef:i,isWideVideo:o,pin:r,shouldPadImage:s})=>{const l=Object(S.k)({pin:r}),c=(Object(S.d)(l)||{}).embed,d=(Object(S.n)(l)||{}).video,u=c&&"gif"===c.type,p=(d&&d.hls||{}).width,m=(Object(S.f)(Object(S.i)(l))||{}).image564x,h=void 0===m?{}:m,b=p>=496?496:void 0,f=u?c.src:h.url,y=en.j-en.h,v=s?{maxWidth:{maxWidth:y},minWidth:{minWidth:y},height:{},borderRadius:16}:{},w=a.a.createElement(Dn.a,{hasActionBar:!0,isCarousel:!(!r||!r.carousel_data),isVideo:!0,isWideVideo:o,shouldPadImage:s,shouldRoundLeftCorners:n>=e,styleOverrides:v,variant:"default"},a.a.createElement(g.b,{minWidth:b,width:"100%",ref:i},a.a.createElement(Jn,{autoplay:!0,customThumbnail:f,isPromoted:r.is_promoted,muted:t,pinId:r.id,video:d,variant:"default"})));return s?a.a.createElement(Zt,null,w):w};var Xr=e=>{const t=e.carouselData,n=e.closeupContainerHeight,i=e.imageHeight,o=e.isNux,r=e.isWideVideo,s=e.overlay,l=e.pin,c=e.shouldPadImage,d=Object(S.k)({pin:l}),u=(Object(S.d)(d)||{}).embed,p=(Object(S.n)(d)||{}).video,m=u&&u.src,h=u&&"pinstory"===u.subtype,g=u&&"gif"===u.type;if(p){const t=e.closeupIsFirstPageInHistoryStack,o=e.imageContainerRef;return a.a.createElement(Kr,{closeupContainerHeight:n,closeupIsFirstPageInHistoryStack:t,imageContainerRef:o,imageHeight:i,isWideVideo:r,pin:l,shouldPadImage:c})}if(!m||g||h){const n=e.data,i=e.handleCarouselSwipe,r=e.imageContainerRef,d=e.isHovered,u=e.onImageClick,p=e.onImageLoad,m=e.shouldShowAltLinks,h=e.showFlashlight,g=e.showInModal,b=e.viewParameter;return a.a.createElement(Qr,{carouselData:t,data:n,handleCarouselSwipe:i,imageContainerRef:r,isHovered:d,isNux:o,onImageClick:u,onImageLoad:p,pin:l,shouldShowAltLinks:m,showFlashlight:h,showInModal:g,viewParameter:b,shouldPadImage:c,overlay:s})}return a.a.createElement(Wr,{isWideVideo:r,pin:l,shouldPadImage:c})};function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){es(e,t,n[t])})}return e}function es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ts=104,ns=80,is=160,as=Object(i.lazy)(()=>n.e("CloseupActionBarCommon").then(n.bind(null,"g5uw"))),os=Object(i.lazy)(()=>n.e("STLCloseupCarouselCommon").then(n.bind(null,"yg9E"))),rs=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"RjCY")));var ss=Object(A.compose)(Object(o.connect)(({history:e,viewer:t},{pin:n})=>({boardCount:t.isAuth?t.boardCount:void 0,closeupIsFirstPageInHistoryStack:0===e.previous.length,hideSaveButton:n&&n.pinner&&n.pinner.blocked_by_me}),e=>({followUser:t=>e(Object(Ni.a)(t)),unfollowUser:t=>e(Object(Ni.b)(t))})),Fi.a,Ot.e,Ft.withRouter)(class extends i.Component{constructor(...e){super(...e),es(this,"state",{clickthroughComponentForSurvey:"",followedByMe:null,isFlyoutOpen:!1,isShortImage:!1,isShowingMoreDetails:!1,metadataContainerHeight:0}),es(this,"setShortImage",()=>{this.setState({isShortImage:!0})}),es(this,"shouldComponentUpdate",(e,t)=>!(t===this.state&&e===this.props)),es(this,"componentWillUnmount",()=>{this._repinCompletionPromise&&this._repinCompletionPromise.cancel(),window.removeEventListener("focus",this.handleWindowFocus)}),es(this,"handleWindowFocus",()=>{const e=this.state.clickthroughComponentForSurvey;e&&this.webLinkSurveyRef.current&&this.webLinkSurveyRef.current.handleEgSurveyClick(e)}),es(this,"getSendButton",e=>{this.sendButton=e}),es(this,"webLinkSurveyRef",Object(i.createRef)()),es(this,"imageContainerRef",Object(i.createRef)()),es(this,"legoLinkClickthroughAnchorRef",Object(i.createRef)()),es(this,"maybeLinkRef",Object(i.createRef)()),es(this,"shouldHideGatorTriedItOnResurrected",()=>{const e=this.props.viewer.resurrectionInfo;let t=!1;return e&&(t=!e.resurrectionDate),t}),es(this,"hideActionButtons",!1),es(this,"_repinCompletionPromise",null),es(this,"viewParameter",Object(C.d)(Object(S.k)({pin:this.props.pin}))),es(this,"handleShareCallback",e=>{e&&e.stopPropagation(),this.handleFlyoutToggle()}),es(this,"handleFlyoutToggle",()=>{this.setState(e=>({isFlyoutOpen:!e.isFlyoutOpen}))}),es(this,"handleFlyoutDismiss",()=>{this.setState({isFlyoutOpen:!1})}),es(this,"toggleFollow",({event:e})=>{const t=this.state.followedByMe,n=this.props,i=n.followUser,a=n.pin,o=n.unfollowUser,r=a.pinner.id;t?i(r):o(r),this.setState({followedByMe:!t})}),es(this,"handleImageClickThrough",()=>{const e=this.props,t=e.experience,n=e.experienceClient,i=e.onClickThrough;t&&11021===t.experience_id&&n.completeExperience(12,11021),i(!0)}),es(this,"handleToggleShowMoreDetails",()=>this.setState({isShowingMoreDetails:!this.state.isShowingMoreDetails})),es(this,"forceRefresh",()=>{Object(r.a)("/")}),es(this,"setMetadataContainerHeight",e=>{const t=this.state.metadataContainerHeight,n=e&&e.getBoundingClientRect();if(!t&&n&&n.height){const t=e&&e.getBoundingClientRect();this.setState({metadataContainerHeight:t.height+is})}}),es(this,"calculateDimensions",({imgSrc:e,isGif:t,showCloseupContentRight:n,viewportSize:i})=>{const a=this.props.pin;return _n(e),Object(S.a)({imgSrc:e,inLegoCloseupView:!0,isGif:t,pin:a,showCloseupContentRight:n,viewportSize:i})}),es(this,"renderPinActionDropdown",()=>{const e=this.props,t=e.inChangeTitlesExp,n=e.pin,i=e.usePortal,o=Object(hi.a)(n,t),r=o.pinTitle,s=o.pinDescription,l=o.pinCategory,c=Object(S.k)({pin:n}),d=!!(Object(S.n)(c)||{}).video;let u;n.images&&(u=n.embed&&"gif"===n.embed.type?n.embed.src:n.images["736x"]&&n.images["736x"].url);const p=Object(Bi.j)(n);return a.a.createElement(Sa.a,{bestPinImgSrc:p,bgColor:"transparent",hideDownload:d,iconColor:"gray",iconSize:"md",pinCategory:l,pinDescription:s,pinId:n.id,pinImgSrc:u,pinTitle:r,reportPin:Object(di.a)({pin:n,viewParameter:this.viewParameter,viewType:3}),usePortal:i})}),es(this,"renderDetails",()=>{const e=this.props,t=e.legoCloseupExpGroup,n=e.myTry,i=e.onClickThrough,o=e.onCloseupBodyUpdate,r=e.pin,s=e.inChangeTitlesExp,l=e.shouldShowAltLinks,c=e.viewer,d=this.makeDetailsArgs(),u=d.isShopTheLook,p=d.nativePinStats,m=d.isVideo,b=d.showCreatorCard,f=d.creatorId,y=d.showCanonicalComments,v=d.isCanonical,w=t,E=Object(S.c)(Object(C.i)(Object(C.j)(Object(S.k)({pin:r}))));return a.a.createElement(h.a.Consumer,{"data-test-id":"CloseupContextConsumer"},({showLegoUpdates:e})=>a.a.createElement(g.b,{display:"flex",direction:"column",flex:"grow"},a.a.createElement(ci,{inChangeTitlesExp:s,onClickThrough:i,onUpdate:o,pin:r,shouldShowAltLinks:l,showLegoUpdates:e,viewer:c}),b&&a.a.createElement(ur,{creatorId:f,isVideo:m,pin:r,viewer:c}),E?a.a.createElement(Sr,{recipeProps:E}):null,u&&a.a.createElement($t.a,null,a.a.createElement(os,{pin:r})),Object.keys(p).length>0&&v&&!z(r)&&a.a.createElement(mi,{nativePinStats:p}),a.a.createElement(je.a,{name:"web_closeup_comments_update",isEligible:"enabled"===w},({anyEnabled:e})=>e?a.a.createElement(g.b,{marginTop:6},a.a.createElement(Gr,{pin:r})):a.a.createElement(g.b,null,!this.showBoardActivity&&(!this.hideDidIt||y)&&a.a.createElement(ui.a,{name:"CanonicalCard"},a.a.createElement(dr,{emptyStateProps:Zr({},this.didItProps),hideDidIt:this.hideDidIt,isDoneByMe:(n||{}).isDoneByMe||!1,isShopTheLook:u,legoCloseupExpGroup:t,pin:r,showCanonicalComments:y}))))))})}componentDidMount(){window.addEventListener("focus",this.handleWindowFocus)}componentDidUpdate(e,t){const n=t.isShortImage,i=t.metadataContainerHeight,a=this.state.metadataContainerHeight,o=this.props,r=o.pin,s=o.showCloseupContentRight,l=o.viewportSize,c=Object(S.k)({pin:r}),d=(Object(S.d)(c)||{}).embed,u=d&&"gif"===d.type,p=(Object(S.f)(Object(S.i)(c))||{}).image564x,m=void 0===p?{}:p,h=u?d.src:m.url,g=this.calculateDimensions({imgSrc:h,isGif:u,showCloseupContentRight:s,viewportSize:l});!n&&a!==i&&a>g.naturalHeight&&this.setShortImage()}static getDerivedStateFromProps(e,t){return null!==t.followedByMe?null:e.pin&&e.pin.is_native&&e.pin.native_creator?{followedByMe:e.pin.native_creator.followed_by_me}:e.pin&&e.pin.pinner?{followedByMe:e.pin.pinner.followed_by_me}:null}get didItProps(){const e=this.props,t=e.dispatch,n=e.myTry,i=e.viewer,a=e.pin,o=e.inChangeTitlesExp,r=a.aggregated_pin_data||{};return{dispatch:t,aggregatedPinDataId:r.id,doneCount:(r.aggregated_stats||{}).done||0,isDoneByMe:(n||{}).isDoneByMe||!1,launchingView:"react-closeup",loggedInUser:i,pinId:a.id,pinTitle:o?a.closeup_unified_title:a.title}}get hideDidIt(){const e=this.props,t=e.isCloseupShowTryIt,n=e.pin;return!t||this.shouldHideGatorTriedItOnResurrected()||!n.is_whitelisted_for_tried_it}get showBoardActivity(){return((this.props.pin||{}).board||{}).should_show_board_activity}makeDetailsArgs(){const e=this.props.pin,t=e.native_pin_stats,n={pin:e},i=Object(S.k)(n),a=(Object(S.n)(i)||{}).video;return{childProps:n,isShopTheLook:H(e),nativePinStats:t||{},isVideo:!!a,showCreatorCard:V(e),creatorId:N(e),showCanonicalComments:e.is_eligible_for_aggregated_comments,isCanonical:U(e)}}render(){const e=this.props,t=e.boardCount,n=e.carouselData,i=e.closeupContainerHeight,o=e.closeupIsFirstPageInHistoryStack,r=e.data,s=e.didShortClickThrough,l=e.experience,c=e.goBack,d=e.handleCarouselSwipe,u=e.hideSaveButton,m=e.isLandingPage,b=e.isWideVideo,f=e.legoCloseupExpGroup,y=e.onClickThrough,v=e.onImageLoad,w=e.onSaveButtonClick,E=e.onUpdate,_=e.outerBodyStyle,O=e.pin,k=e.requestContext,I=e.routePush,P=e.inChangeTitlesExp,T=e.shouldShowAltLinks,j=void 0!==T&&T,R=e.showFlashlight,D=e.showInModal,L=e.showRepinOnInitialRender,A=e.viewer,M=e.isLfvCloseupShowAll,B=this.state,N=B.isFlyoutOpen,H=B.isShowingMoreDetails,V=B.isShortImage,q=this.viewParameter,J=0!==Object.keys(O).length,$=O.access,Q=void 0===$?[]:$,K=O.promoted_is_removable,Z={pin:O},ee=Object(S.k)(Z),te=(Object(S.f)(Object(S.i)(ee))||{}).image564x,ne=void 0===te?{}:te,ie=(Object(S.d)(ee)||{}).embed,ae=(Object(S.n)(ee)||{}).video,oe=ie&&"gif"===ie.type,re=!!ae,se=Q.includes("write")||Q.includes("delete"),le=oe?ie.src:ne.url,ce=G(O,m),de=this.makeDetailsArgs().showCreatorCard;let ue=!1;l&&(ue=11020===l.experience_id&&l.display_data&&l.display_data.lite),this.hideActionButtons=ue||this.hideActionButtons;let pe=!1;A.isPartner&&O.is_quick_promotable&&Object(F.c)(k.locale||"")&&(pe=!0);const me=U(O),he=me?O.aggregated_pin_data.creator_analytics:O.creator_analytics,ge=me||z(O),be=new X.c(this.props.requestContext,"px_pinstats_90_day_default_on_grid").enabled(),fe=O.access&&O.access.includes("tag"),ye=W({viewer:A,requestContext:k,pin:O})?a.a.createElement(gi.a,{buttonType:"icon",pinId:O.id}):null,we=O.domain&&!!O.link&&!O.link.startsWith("https://i.pinimg.com"),Ee=this.renderDetails(),_e=u?null:a.a.createElement(jr,{audienceEstimationEnabled:pe,boardCount:t,onClickCallback:w,onShareCallback:this.handleShareCallback,pin:O,requestContext:k,showRepinOnInitialRender:L,viewer:A,viewParameter:q}),Ce=a.a.createElement(st.a,{id:"closeupActionBar"},a.a.createElement($t.a,null,a.a.createElement(as,{didItProps:this.didItProps,editable:se,goBack:c,gridDescription:O.description,hideButtons:this.hideActionButtons,iconColor:"darkGray",imageSrc:le,isFlyoutOpen:N,isOnSecretBoard:!1,onEditSubmit:E,onFlyoutDismiss:this.handleFlyoutDismiss,onToggleFlyout:this.handleFlyoutToggle,pin:O,pinActionDropdown:this.renderPinActionDropdown(),promoteButton:ye,promotedIsRemovable:K,routePush:I,saveButton:_e,shareButtonRef:this.getSendButton,taggable:fe,viewParameter:this.viewParameter}))),Oe=Object(x.d)({user:A})||Object(x.e)({user:A});return a.a.createElement(h.a.Consumer,null,({showCloseupContentRight:e,showLegoUpdates:t,viewportSize:l})=>{const c=this.calculateDimensions({imgSrc:le,isGif:oe,showCloseupContentRight:e,viewportSize:l}),u=t&&(V||c.naturalWidth<en.j),m=!(e&&"wide"===l)||Oe||b,h={enabled:!0,group:f};return a.a.createElement(kr,{isWideVideo:b},a.a.createElement(g.b,{position:"relative"},!s&&a.a.createElement(Mi,{imageContainerRef:this.imageContainerRef,maybeLinkRef:this.maybeLinkRef,legoLinkClickthroughAnchorRef:this.legoLinkClickthroughAnchorRef,pin:O,ref:this.webLinkSurveyRef}),a.a.createElement(g.b,{color:J?"white":"transparent",dangerouslySetInlineStyle:{__style:_},marginBottom:8,marginTop:5,position:"relative",shape:"rounded"},!J&&a.a.createElement(g.b,{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},a.a.createElement(g.F,{accessibilityLabel:p.a._("Pin loading"),show:!J})),J?a.a.createElement(g.b,{display:"flex",direction:"column"},a.a.createElement(Ir,{isWideVideo:b},a.a.createElement(Et.a,null,({hovered:e,onMouseEnter:s,onMouseLeave:l})=>{const p=R&&!oe&&!re&&a.a.createElement(mr,{carouselData:n,handleCarouselSwipe:d,imageProps:c,isHovered:e,pinId:O.id,shouldPadImage:u,showLegoUpdates:t,viewParameter:this.viewParameter});return a.a.createElement(g.b,Object.assign({position:"relative",width:b?"100%":en.j,overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderRadius:m?"32px 32px 0 0":"32px 0 0 32px"}},onMouseEnter:s,onMouseLeave:l},t?{display:"flex",justifyContent:"center"}:{}),a.a.createElement(Xr,{carouselData:n,closeupContainerHeight:i,closeupIsFirstPageInHistoryStack:o,data:r,handleCarouselSwipe:d,imageContainerRef:this.imageContainerRef,imageHeight:c.naturalHeight,isHovered:e,isNux:Oe,isWideVideo:b,onImageClick:()=>{this.handleImageClickThrough&&this.handleImageClickThrough(),this.setState({clickthroughComponentForSurvey:"imageContainer"})},onImageLoad:v,overlay:p,pin:O,shouldPadImage:u,shouldShowAltLinks:!!j,showDomainLink:we,showFlashlight:R,showInModal:D,viewParameter:this.viewParameter}))}),a.a.createElement(g.b,{width:b?void 0:en.j,maxWidth:b?en.l:void 0},r?a.a.createElement(g.b,{display:"flex",direction:"column",height:"100%"},a.a.createElement(g.G,{dangerouslySetZIndex:{__zIndex:Bt.f},top:_i.a},a.a.createElement(g.b,{color:"white",minHeight:en.a,dangerouslySetInlineStyle:{__style:Zr({paddingTop:"20px",paddingBottom:t?"16px":"40px",paddingLeft:"28px",paddingRight:"20px"},e?{borderRadius:"0px 32px 32px 0"}:{})}},Ce)),a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{height:`calc(100% - ${t?ns:ts}px)`}},display:"flex",direction:"column"},a.a.createElement(g.b,{ref:this.setMetadataContainerHeight},a.a.createElement(g.b,{paddingX:10,display:"flex",direction:"column"},ge&&a.a.createElement($t.a,null,a.a.createElement(rs,{pinId:O.id,stats:he,isVideo:re,isStoryPin:!!O.story_pin_data_id,showDivider:!pe,showMoreStatsLink:!pe,show90Days:be})),a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{zIndex:m?Bt.f:Bt.c}},display:"flex",direction:"row"},a.a.createElement(fr,{legoGroup:f,onClickThrough:()=>{y&&y(),this.setState({clickthroughComponentForSurvey:"legoMaybeLink"})},pin:O,shouldShowAltLinks:j,viewer:A}),a.a.createElement(g.b,{marginRight:-8,marginLeft:6,width:2,ref:this.legoLinkClickthroughAnchorRef})),a.a.createElement(xi.a,Object.assign({},Z,{inChangeTitlesExp:P,inLegoCloseupView:!0})),this.showBoardActivity?a.a.createElement(a.a.Fragment,null,ce&&a.a.createElement(g.b,{paddingY:3,marginBottom:3},a.a.createElement(Ei,{onClick:this.handleToggleShowMoreDetails,arrowDown:!H})),H&&Ee,a.a.createElement(ve,{inUserNoteExp:P,pin:O})):Ee))),a.a.createElement(g.b,{paddingX:10},!this.showBoardActivity&&de&&r&&a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{marginTop:"auto"}}},a.a.createElement(Y.a,Object.assign({},Z,{inUserNoteExp:P,isLfvCloseupShowAll:M,legoGroup:h.group,variant:"default",viewer:A}))),!this.showBoardActivity&&!de&&r&&a.a.createElement(g.b,{dangerouslySetInlineStyle:{__style:{marginTop:"auto"}}},a.a.createElement(Y.a,{followedByMe:!!this.state.followedByMe,inUserNoteExp:P,isLfvCloseupShowAll:M,legoGroup:h.group,onFollowClick:this.toggleFollow,pin:O,variant:"default",viewer:A})))):a.a.createElement(g.F,{accessibilityLabel:p.a._("Pin details loading"),show:!0}))),s&&Object(C.c)(O,A)&&a.a.createElement(Si,null)):null)))})}});const ls=1050;function cs({children:e,isWideVideo:t=!1}){const n=t?en.l:en.i,a=t?en.j:ls;return i.createElement(h.a.Consumer,null,({showCloseupContentRight:o,viewportSize:r})=>i.createElement(g.b,{maxWidth:o&&"wide"===r?n:a,width:t?"100%":null},e))}const ds=1050,us=628;function ps({children:e}){return i.createElement(h.a.Consumer,null,({viewportSize:t})=>i.createElement(g.b,{width:"wide"===t?ds:us},e))}function ms(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){hs(e,t,n[t])})}return e}function hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gs=12e4,bs=5e3,fs=1056,ys=1135,vs=630,ws=998,Es={cursor:"zoom-out",display:"flex",width:"100%"},_s=Object(i.lazy)(()=>Promise.all([n.e("ArticlePageDesktop~AuthHomePageDesktop~BusinessAccountConvertPageDesktop~BusinessAccountCreatePageDe~1cac07e8"),n.e("ExperienceHeroCommon")]).then(n.bind(null,"GjKX")));function Cs({conversation_id:e,senderId:t,pinId:n}){hn.a.create("ApiResource",{url:`/v3/conversations/${e}/message/mark_seen/`,sender:t,pin:n}).callCreate()}const Os={MODAL:"modal",PAGE:"page",PAGE_WITH_BACK_BUTTON:"pageWithBackButton"},Ss=(e,t,n)=>"narrow"!==e&&!n&&t;class xs extends i.Component{constructor(...e){super(...e),hs(this,"state",Eo(this.props)),hs(this,"shouldShowAltLinks",()=>{const e=this.props.pin;return this.state.suspiciousLinkModalStatus===fo.a.closed&&e.click_through_link_quality&&e.click_through_link_quality.is_inaccessible}),hs(this,"setCloseupBodyContainerRef",e=>{this.closeupBodyContainerRef=e}),hs(this,"setRelatedPinsContainerRef",e=>{this.relatedPinsContainerRef=e}),hs(this,"setRelatedPinsHeaderRef",e=>{this.relatedPinsHeaderRef=e}),hs(this,"setResultScrollContainerRef",e=>{this.resultScrollContainer||(this.resultScrollContainer=e,this.forceUpdate())}),hs(this,"setRelatedPinsRef",e=>{this.relatedPinsRef=e}),hs(this,"relatedProductsRef",a.a.createRef()),hs(this,"closeupBodyRef",a.a.createRef()),hs(this,"getCloseupContext",Object(ho.b)((e,t,n,i)=>({showCloseupContentRight:e,showLegoUpdates:i,viewportSize:t,width:n}))),hs(this,"mounted",!1),hs(this,"updateViewportSize",uo()(()=>{const e=this.state.viewportSize,t=this.props.pin,n=(Object(S.d)(Object(S.k)({pin:t}))||{}).embed,i=(Object(S.n)(Object(S.k)({pin:t}))||{}).video,a=n&&n.src,o=n&&"pinstory"===n.subtype,r=n&&"gif"===n.type,s=!!i&&Object(S.o)(i)||!!a&&!o&&!r,l=this.closeupBodyContainerRef?this.closeupBodyContainerRef.getBoundingClientRect():0;if(this.mounted){const t=s?ws:fs;this.setState(ms({closeupContainerHeight:l&&l.height,hideBackButton:window&&("wide"===e&&window.innerWidth<=ys||"narrow"===e&&window.innerWidth<=vs),viewportSize:window&&window.innerWidth>=t?"wide":"narrow"},l?{width:l.width}:{}))}},50)),hs(this,"goToPreviousPin",()=>{const e=this.props,t=e.activateLeftRightArrowNavExp,n=e.leftRightArrowNavExpGroup;t&&(t(),n&&n.startsWith("enabled_left"))?this.handleBackButtonClick():this.navigatePins(-1)}),hs(this,"goToNextPin",()=>{const e=this.props,t=e.activateLeftRightArrowNavExp,n=e.leftRightArrowNavExpGroup;n&&(n.startsWith("enabled_left")||n.startsWith("control_left"))||(t&&t(),this.navigatePins(1))}),hs(this,"triggerQuickPromote",()=>{const e=this.props,t=e.pinResource,n=e.dispatch;this.setState({quickPromoteModalTriggered:!0}),n(Object(K.i)(t.data))}),hs(this,"clickThroughTimer",()=>{const e=this.props.setPlacementExtraContext;clearInterval(this.state.intervalId),this.setState({didLongClickThrough:!0}),e({didLongClickThrough:!0})}),hs(this,"handleClickThrough",(e,t)=>{this.shouldShowAltLinks()?this.setState({suspiciousLinkModalStatus:fo.a.open}):this.executeClickthrough(e,t)}),hs(this,"executeClickthrough",(e,t)=>{const n=this.props,i=n.completePinClickthrough,a=n.pinId,o=n.updateExperienceForPlacement,r=n.setPlacementExtraContext,s=this.state,l=s.pin,c=s.didPinClickThrough,d=s.didShortClickThrough,u=s.hasDoneClickthrough,p=!!l.story_pin_data,m=p?228:4;let h=361;if(e?h=35:p&&(h=11157),u||(Object(yo.a)("HAS_DONE_CLICKTHROUGH").then(()=>o(12)),i()),c||(r({didPinClickThrough:!0}),this.setState({didPinClickThrough:!0})),Object(Z.a)(101,ms({objectId:a,component:m,element:h},Object(Ma.a)(l)||{},t||{})),Object(Z.a)(12,ms({objectId:a,view:3,viewParameter:Object(C.d)(Object(S.k)(this.props)),component:m,element:h},Object(Ma.a)(l)||{},t||{})),Object(go.b)("Lead",()=>{sa.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Pin Clickthrough"})}),e){const e=setInterval(this.clickThroughTimer,gs);this.setState({intervalId:e})}this.clickThroughStartTime=Date.now(),d&&this.setState({didShortClickThrough:!1})}),hs(this,"handleModalCompleteOriginalClickthrough",()=>{this.executeClickthrough(),this.setState({suspiciousLinkModalStatus:fo.a.completed}),sa.default.increment("web_auth_alt_link_modal_completed_original")}),hs(this,"handleModalCompleteAltClickthrough",()=>{this.executeClickthrough(),this.setState({suspiciousLinkModalStatus:fo.a.closed}),sa.default.increment("web_auth_alt_link_modal_completed_alternate")}),hs(this,"handleModalDismiss",()=>{this.setState({suspiciousLinkModalStatus:fo.a.closed},()=>{this.relatedPinsRef&&(this.relatedPinsRef.scrollIntoView(),window.scrollBy(0,-en.a))})}),hs(this,"handleFocus",()=>{const e=this.props.setPlacementExtraContext;clearInterval(this.state.intervalId),this.setState({didLongClickThrough:!1}),e({didLongClickThrough:!1})}),hs(this,"handleWindowFocus",()=>{if(this.clickThroughStartTime>0){const e=Date.now()-this.clickThroughStartTime<bs;this.setState({didShortClickThrough:e}),this.clickThroughStartTime=0}}),hs(this,"pwtMetadataRendered",!1),hs(this,"pwtImageRendered",!1),hs(this,"pwtTrackImageLoad",()=>{Object(En.c)({name:"CloseupImageRenderedTraceEvent"}),this.pwtImageRendered=!0,this.pwtMetadataRendered&&Object(En.f)(13,{viewParameter:Object(C.d)(Object(S.k)(this.props))})}),hs(this,"handleClickLogging",()=>{Object(Z.a)(101,ms({objectId:this.state.pin.id,component:4,element:0},Object(Ma.a)(this.state.pin)||{})),Object(go.b)("Lead",()=>{sa.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin"})})}),hs(this,"handleBackButtonClick",()=>{const e=this.props,t=e.deepLinkBackGoesToBoard,n=e.goBack,i=e.routePush;return"deep_linking"===e.trafficSource&&!t?i("/"):n()}),hs(this,"backButtonText",()=>{const e=this.props,t=e.deepLinkBackGoesToBoard,n=e.trafficSource;return a.a.createElement(m,{deepLinkBackGoesToBoard:t,trafficSource:n})}),hs(this,"handleCarouselSwipe",e=>{const t=this.state.pin;this.setState({pin:ms({},t,{carousel_data:ms({},t.carousel_data,{index:e})})})}),hs(this,"handleRelatedFeedVisibilityChange",e=>{if(e.length>0){const t=this.state.relatedPinsUpsellShown,n=e[0].intersectionRatio>0;n?this.setState({showRelatedFeedUpsell:!1}):n||t||this.setState({showRelatedFeedUpsell:!0,relatedPinsUpsellShown:!0})}}),hs(this,"dispatch",(e,t)=>this.setState(_o(this.state,e),t)),hs(this,"handleScroll",uo()(()=>{const e=this.state.showBackButtonShadow;if(this.relatedPinsRef){const t=_i.a,n=this.relatedPinsRef.getBoundingClientRect().top<=t;n&&!e?this.setState({showBackButtonShadow:!0}):!n&&e&&this.setState({showBackButtonShadow:!1})}},10)),hs(this,"handleRelatedPinsLoaded",e=>{this.state.relatedPins.length!==e.length&&this.setState({relatedPins:e})}),hs(this,"handleRelatedPinsUpsellOnTouch",({event:e})=>{const t=this.props,n=t.pin,i=t.viewer,a=Object(C.c)(n,i);e.stopPropagation(),a&&this.relatedProductsRef&&this.relatedProductsRef.current.scrollIntoView()}),hs(this,"onWrapperClick",e=>{e.stopPropagation(),this.closeModal()}),hs(this,"closeModal",()=>{Object(En.a)("closefakemodal",13),this.handleBackButtonClick()}),hs(this,"setShowCloseupBackButton",e=>{this.setState({showBackButton:e})})}componentDidMount(){const e=this.props,t=e.completePinCloseup,n=e.conversation_id,i=e.dispatch,a=e.forceSendFeedback,o=e.isLandingPage,s=e.isLimitedLogin,l=e.pin,c=e.pinId,d=e.senderId,u=e.setPlacementExtraContext,p=e.viewer,m=e.shouldShowInbox,h=e.openInbox;this.mounted=!0,this.pinDeleteSubscriber=la.a.instance.subscribe(c,"pinDeleted",()=>{const e=aa.a.singleton(),t=ia()(l,"board.url","/");e.back()||Object(r.a)(t)}),n&&d&&c&&Cs({conversation_id:n,senderId:d,pinId:c});const g=n;g&&(ga.a.instance.dispatch(Object(Co.e)(g)),ga.a.instance.dispatch(Object(Co.d)(g)),m&&h(),a&&this.handleSocialEmailLand()),(Object(x.d)({user:p})||Object(x.e)({user:p}))&&Object(yo.c)(p.id).then(({resource_response:{data:e={}}})=>{if(!this.mounted)return;const n=e.has_done_clickthrough,i=e.has_done_closeup;s||!1!==i||(Object(yo.a)("HAS_DONE_CLOSEUP"),t()),this.setState({hasDoneClickthrough:n,hasDoneCloseup:i})}),Object(ma.a)(u),(ha.b.localStorage.getItem("lastVisitedPage")||"").includes(`/pin/${c}`)&&o&&u({loginPageType:"pin"}),l.image_signature&&i(Object(bo.c)(l.image_signature)),this.updateViewportSize(),window.addEventListener("resize",this.updateViewportSize),window.addEventListener("focus",this.handleWindowFocus)}UNSAFE_componentWillReceiveProps(e){const t=e.pinResource.data,n=this.state,i=n.carouselIndex,a=n.firstLoadComplete;t&&!a&&(t.carousel_data&&(t.carousel_data.index=i),this.dispatch({type:"pinLoaded",pin:t}));const o=e.conversation_id,r=e.senderId,s=e.pinId;o&&r&&s&&this.props.pinId!==s&&Cs({conversation_id:o,senderId:r,pinId:s})}componentDidUpdate(e){const t=e.pinResource,n=this.props,i=n.didRepin,a=n.pinResource,o=n.setPlacementExtraContext,r=n.showQuickPromote,s=this.state,l=s.pin,c=s.quickPromoteModalTriggered,d=Object(C.d)(Object(S.k)(this.props));!t.isLoaded&&a.isLoaded?(this.pwtMetadataRendered=!0,Object(En.c)({name:"CloseupMetadataRenderedTraceEvent"}),this.pwtImageRendered&&Object(En.f)(13,{viewParameter:d}),Object(Z.a)(7408,ms({viewParameter:d,objectId:l.id,view:3,viewData:{pin_id:l.id,closeup_rich_types:l.shopping_flags||[]}},Object(Ma.a)(l)||{})),l.aggregated_pin_data&&(l.aggregated_pin_data.is_shop_the_look||l.aggregated_pin_data.is_stela)&&Object(Z.a)(7579,{viewParameter:d,objectId:l.id,view:3,commerce_data:JSON.stringify({pin_is_shop_the_look:l.aggregated_pin_data.is_shop_the_look,pin_is_stela:l.aggregated_pin_data.is_stela})})):a.isLoaded&&!this.pwtMetadataRendered&&(this.pwtMetadataRendered=!0,Object(En.c)({name:"CloseupMetadataRenderedTraceEvent"}),this.pwtImageRendered&&Object(En.f)(13,{viewParameter:d})),!e.pinResource.data&&a.data&&!c&&r&&this.triggerQuickPromote(),!e.didRepin&&i&&o({didRepin:!0})}componentWillUnmount(){this.pinDeleteSubscriber.unsubscribe(),delete this.pinDeleteSubscriber,window.removeEventListener("resize",this.updateViewportSize),window.removeEventListener("focus",this.handleWindowFocus),this.mounted=!1}getPinIndex(e,t){return e?e.indexOf(t):-1}sendFeedback(e){const t=this.props,n=t.conversation_id,i=t.onLoginClick,a=t.pinId,o=t.senderId,r=t.viewer;if(0!==e)if(r.isAuth&&2!==this.context.loginState){if(n){const t=function(e){return hn.a.create("BoardCollaboratorRequestResource",{conversation_id:e,peek:!0,ignore_bookmark:!0})}(n);let i;switch(e){case 1:i="thumbsUp";break;case-1:i="thumbsDown";break;case 2:default:i="heart"}ta(n,t,o,a,i,()=>{Object(Z.a)(7048,{objectId:a,eventData:{pinId:a,userId:o}})}),Object(Z.a)(101,{component:13115,element:10335,objectId:a,eventData:{pinId:a,userId:o}})}}else{const t=Ue.a.appendQueryString(window.location.href,{fsf:e}),n=Ue.a.appendQueryString(t,{hp:1});i?i(t):this.setState({loginModalOptions:{postLoginURL:t,postSignupURL:n}})}}handleSocialEmailLand(){const e=this.props,t=e.pinId,n=e.forceSendFeedback;"1"!==n&&"-1"!==n&&"2"!==n||this.sendFeedback(parseInt(n,10)),Object(Z.a)(7046,{component:13115,objectId:t,eventData:{pinId:t}})}navigatePins(e){const t=this.props,n=t.pinId,i=t.navigablePins,a=t.routeReplace,o=t.trafficSource,r=t.topLevelTrafficSource,s=t.topLevelTrafficSourceDepth,l=t.contextPinIds,c=!!this.props.activateLeftRightArrowNavExp&&this.props.activateLeftRightArrowNavExp().startsWith("enabled"),d=this.getPinIndex(i,n);if(c&&0===d&&-1===e&&this.handleBackButtonClick(),i&&i[d+e]){const t=i[d+e];a(c?{pathname:`/pin/${t}/`,state:{trafficSource:o,topLevelTrafficSource:r,topLevelTrafficSourceDepth:s,contextPinIds:l}}:`/pin/${t}/`)}}renderBodyContent(){const e=this.props,t=e.eligibleExperiences,n=void 0===t?{}:t,i=e.experience,o=e.isCloseupContentRightEligible,r=e.isCloseupShowTryIt,s=e.isLandingPage,l=e.isLfvCloseupShowAll,c=e.isLimitedLogin,d=e.legoCloseupExpGroup,u=e.pin,p=e.pinId,m=e.pinResource,h=e.presentationMode,b=e.requestContext,f=e.routePush,y=e.showRepinOnInitialRender,v=e.viewer,w=m.refreshData,E=this.state,_=E.closeupContainerHeight,C=E.didShortClickThrough,O=E.hasDoneClickthrough,x=E.myTry,k=E.pin,I=E.relatedPins,P=E.shopping,T=E.showRelatedFeedUpsell,j=E.suspiciousLinkModalStatus,R=E.viewportSize,D=k.carousel_data,L=(Object(S.d)(Object(S.k)({pin:u}))||{}).embed,A=L&&L.src,M=L&&"pinstory"===L.subtype,B=L&&"gif"===L.type,F=(Object(S.n)(Object(S.k)({pin:u}))||{}).video,N=!!F&&Object(S.o)(F)||!!A&&!M&&!B,U=this.shouldShowAltLinks(),z=!!b&&new X.c(b,"web_change_titles").enabled(),H=u.click_through_link_quality&&u.click_through_link_quality.alternate_links?u.click_through_link_quality.alternate_links:[],V=h===Os.MODAL,G=Ss(R,o,N),W=r,Y=l;return a.a.createElement(g.b,{"data-test-id":"gradient",display:"flex",justifyContent:"center"},j===fo.a.open&&a.a.createElement(fo.b,{altLinks:H,pin:u,handleModalCompleteOriginalClickthrough:this.handleModalCompleteOriginalClickthrough,handleModalCompleteAltClickthrough:this.handleModalCompleteAltClickthrough,handleModalDismiss:this.handleModalDismiss}),a.a.createElement(cs,{isWideVideo:N},a.a.createElement(ui.a,{name:"CloseupBody"},a.a.createElement("div",{ref:this.setCloseupBodyContainerRef},a.a.createElement(ss,{carouselData:D,closeupContainerHeight:_,data:m.data,didShortClickThrough:C,dispatch:this.dispatch,eligibleExperiences:n,experience:i,goBack:this.handleBackButtonClick,handleCarouselSwipe:this.handleCarouselSwipe,hasDoneClickthrough:O,isCloseupShowTryIt:W,isLandingPage:s,isLfvCloseupShowAll:Y,isWideVideo:N,legoCloseupExpGroup:d,myTry:x,onClickThrough:this.handleClickThrough,onImageLoad:this.pwtTrackImageLoad,onSaveButtonClick:this.handleClickLogging,onUpdate:w,outerBodyStyle:{boxShadow:"0 1px 20px 0 rgba(0, 0, 0, 0.1)",borderRadius:32},pin:u,pinId:p,ref:this.closeupBodyRef,routePush:f,shopping:P,inChangeTitlesExp:z,shouldShowAltLinks:U,showCloseupContentRight:G,showFlashlight:!u.is_promoted,showInModal:V,showRepinOnInitialRender:!c&&y,viewer:v,viewportSize:R}),T&&I.length>0&&a.a.createElement(g.O,{mouseCursor:"pointer",onTouch:this.handleRelatedPinsUpsellOnTouch},a.a.createElement(pa,null))))))}renderCloseupRelatedPinsContent(){const e=this.props,t=e.pin,n=e.searchQuery,i=e.contextPinIds,o=e.topLevelTrafficSource,r=e.topLevelTrafficSourceDepth,s=e.trafficSource,l=this.state.relatedPins,c=a.a.createElement(g.b,{display:"flex",direction:"column",flex:"grow"},a.a.createElement("div",{className:"flex flex-auto flex-column",ref:this.setRelatedPinsContainerRef},a.a.createElement(ui.a,{name:"CloseupRelatedPins"},a.a.createElement("div",{ref:this.setRelatedPinsRef},a.a.createElement(B,{onRelatedFeedLoadedHandler:this.handleRelatedPinsLoaded,pin:t,searchQuery:n,contextPinIds:i,trafficSource:s,topLevelTrafficSource:o,topLevelTrafficSourceDepth:r,scrollContainer:void 0,goBack:this.handleBackButtonClick,backButtonLabel:this.backButtonText(),setShowCloseupBackButton:this.setShowCloseupBackButton,setRelatedPinsHeaderRef:this.setRelatedPinsHeaderRef,showRelatedPinsHeader:l&&l.length>0})))));return a.a.createElement(oa.a,{onVisibilityChange:this.handleRelatedFeedVisibilityChange},c)}renderContent(){const e=this.props,t=e.pin,n=e.pinResource,i=e.searchQuery,o=e.trafficSource,r=e.viewer,s=n.refreshData,l=n.error,c=this.state,d=c.didShortClickThrough,u=c.firstLoadComplete;if(0!==!Object.keys(t).length&&l)return a.a.createElement(Ji.a,{i18n:p.a});const m=t.story_pin_data_id?a.a.createElement(lo,{pin:t,onNavigateBack:this.handleBackButtonClick,backButtonLabel:this.backButtonText(),onUpdate:s,onClickThrough:this.handleClickThrough}):this.renderBodyContent();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Closeup Module flex flex-auto justify-around flex-column","data-test-id":u?"closeup-data-loaded":"",key:"closeup-content",onClick:this.onWrapperClick,role:"presentation",style:Es},m,d&&!Object(C.c)(t,r)&&a.a.createElement(Si,null)),Object(C.c)(t,r)&&a.a.createElement(g.b,{display:"flex",justifyContent:"center",ref:this.relatedProductsRef},a.a.createElement(ps,null,a.a.createElement(Ve,{pin:t,searchQuery:i,trafficSource:o,variant:"full-column"}))),t&&t.id&&!t.is_promoted&&this.renderCloseupRelatedPinsContent())}render(){const e=this.props,t=e.isCloseupContentRightEligible,n=e.pin.story_pin_data_id,i=e.pinId,o=e.showLegoUpdates,r=this.state,s=r.hideBackButton,l=r.showBackButtonShadow,c=r.viewportSize,d=r.width,p=this.renderContent();return a.a.createElement(h.a.Provider,{value:this.getCloseupContext(Ss(c,t),c,d,o)},a.a.createElement(Qi.a,{placementId:12}),a.a.createElement(E.a,{view:3,objectId:i},a.a.createElement("div",{className:"reactCloseupScrollContainer",onFocus:this.handleFocus,ref:this.setResultScrollContainerRef},a.a.createElement($t.a,null,a.a.createElement(_s,{placementId:12})),a.a.createElement($i.default,{placementId:12}),!s&&!n&&a.a.createElement(u.a,{onClick:this.handleBackButtonClick,showShadow:l,handleScroll:this.handleScroll}),a.a.createElement(ra.a,{onClose:this.handleBackButtonClick,goToNext:this.goToNextPin,goToPrevious:this.goToPreviousPin}),p,a.a.createElement(Ki.a,{placementId:12}),a.a.createElement(ea,{placementId:12}))))}}hs(xs,"defaultProps",{presentationMode:Os.PAGE,isCloseupShowTryIt:!0,isLfvCloseupShowAll:!0,isCloseupContentRightEligible:!0});var ks=Object(A.compose)(Ot.e,mo)(xs),Is=n("EGTn");const Ps=(e={})=>{if(0===Object.keys(e).length)return"";const t=(e.name||"").trim(),n=p.a._("Recipe","Keep this short, its shown in browser tab as title");return t?`${t} | ${n}`:n},Ts=(e={})=>{if(0===Object.keys(e).length)return"";const t=["products","article","place"];for(const n of t){let t;if(t="products"===n?(e.type||[{}])[0]:e.type||{})return t.name||""}return""},js=(e={})=>{if(0===Object.keys(e).length)return"";const t=(e.description||"").trim(),n=((e.board||{}).name||"").trim(),i=((e.pinner||{}).full_name||"").trim(),a=140-n.length;let o;return t.length>5?(o=t.substring(0,a),n&&(o+=` | ${n}`)):i?o=n?`${p.a._("Pin by ","Keep this short, its shown in browser tab as title, context is Pin created by username")}${i}${p.a._(" on ","Keep this short, its shown in browser tab as title, context is Pin on some boards")}${n}`:`${p.a._("Pin by ","Keep this short, its shown in browser tab as title, context is Pin created by username")}${i}`:n&&(o=`${p.a._("Pin on ","Keep this short, its shown in browser tab as title, context is Pin on some boards")}${n}`),o||""};var Rs=n("CuRr");function Ds(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ls(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const As=()=>n.e("TitleCommon").then(n.bind(null,"4CRh")),Ms=1500,Bs=e=>Object(Is.b)(e)||(({pathname:e})=>/^\/pin\/[\w-]+\/activity\/tried\/?$/.test(e))(e);t.a=Object(A.compose)(Ft.withRouter,Object(o.connect)(({location:e,viewer:t})=>({history:e.history,viewer:t}),(e,t)=>({searchPinCloseupViewed:Object(A.bindActionCreators)(or.b,e)})),Ot.e)(class extends i.Component{constructor(...e){super(...e),Ls(this,"goBack",(e=!1)=>()=>{const t=(this.props.data||{}).board,n=this.props,i=n.history,a=n.router;this.historyHasNonCloseupOrDidItFeed(i)||e?e&&1===i.length?a.push(t.url):a.goBack():a.push("/")}),Ls(this,"historyHasNonCloseupOrDidItFeed",e=>e.find(e=>!Bs(e))),Ls(this,"presentationMode",()=>{const e=this.props.history;return e.length>0&&Object(Is.b)(e[e.length-1])&&this.historyHasNonCloseupOrDidItFeed(e)?Os.MODAL:Os.PAGE_WITH_BACK_BUTTON}),Ls(this,"redirectToLogin",(e,t=!1)=>{const n=e||window.location.href;Object(r.a)(`/login?next=${t?Ue.a.appendQueryString(n,{type:"signup"}):encodeURIComponent(n)}`)})}componentDidMount(){const e=this.props.requestContext,t=(void 0===e?{}:e).isBot;void 0!==t&&t||Object(Rs.b)()}componentWillUnmount(){const e=this.props,t=e.history,n=e.data,i=e.searchPinCloseupViewed,a=Object(Is.a)(t);a&&n&&n.id&&i(n.id,a),setTimeout(()=>{As().then(({default:e})=>{e.getInstance().setDefaultTitleText()})},Ms)}componentDidUpdate(e){const t=this.props.data,n=e.data;t&&n&&t!==n&&Object(Rs.a)()}render(){const e=this.props,t=e.data,n=e.history,i=e.route,o=e.routeParams,r=e.router,s=e.location,l=e.resourceLoaded,c=e.viewer,u=Ds(e,["data","history","route","routeParams","router","location","resourceLoaded","viewer"]),p=l&&t&&t.pinner&&c.isAuth&&c.username===t.pinner.username&&l&&t&&"extension"===t.method;let m=Ne(n,c.isAuth),h=m.trafficSource,g=m.topLevelTrafficSource,b=m.topLevelTrafficSourceDepth,f=m.contextPinIds;b>1&&"pin"!==h&&sa.default.increment("p2p.traffic_source.client",.1,{trafficSource:h,topLevelTrafficSource:g,topLevelTrafficSourceDepth:b});const y=Object(Is.a)(n);let v="";return t&&t.rich_metadata&&t.rich_metadata.recipe?v=Ps(t.rich_metadata.recipe):t&&t.rich_metadata&&(v=Ts(t.rich_metadata)),!v&&t&&(v=js(t)),a.a.createElement(it.a,{value:{featuredCommentId:o.comment_id}},a.a.createElement(je.a,{name:"web_page_title_in_tab_v2"},({group:e})=>(e.includes("enabled")&&setTimeout(()=>{As().then(({default:t})=>{t.getInstance().setDefaultTitleText(v,e)})},Ms),a.a.createElement(je.a,{name:"web_eg_closeup_left_right_arrow_navigate",activate:!1},({anyEnabled:e,customActivate:n,group:l})=>{if(e&&s.state){const e=s.state;e.trafficSource&&e.topLevelTrafficSource&&e.topLevelTrafficSourceDepth&&e.contextPinIds&&(h=e.trafficSource,g=e.topLevelTrafficSource,b=e.topLevelTrafficSourceDepth,f=e.contextPinIds)}return t&&Object(Mn.h)(t)?a.a.createElement(ar,Object.assign({pin:t},u)):a.a.createElement(Ho,{render:e=>a.a.createElement(Vo,{pinId:o.id},({pinResource:t})=>a.a.createElement(d,{pinId:o.id,pinResource:t},({completePinClickthrough:d,completePinCloseup:m,isLandingPage:v,isLimitedLogin:w,didRepin:E,navigablePins:_,openInbox:C,pin:O,shouldShowInbox:S,updateExperienceForPlacement:x})=>{const k=O.story_pin_data_id,I=!k;return a.a.createElement(je.a,{name:"web_closeup_immersive_nux",activate:I},({anyEnabled:P,group:T})=>a.a.createElement(je.a,{name:"web_closeup_immersive",activate:I&&!P},({anyEnabled:I,group:j})=>{const R=!k&&(P||I),D=T||j,L=en.k.includes(D);return R?a.a.createElement(ks,Object.assign({activateLeftRightArrowNavExp:n,contextPinIds:f,conversation_id:s.query.conversation_id,deepLinkBackGoesToBoard:p,emailId:s.query.e_t,forceSendFeedback:s.query.fsf,goBack:this.goBack(!!p),leftRightArrowNavExpGroup:l,legoCloseupExpGroup:D,messageId:s.query.message,onLoginClick:this.redirectToLogin,pinId:o.id,pinResource:t,presentationMode:this.presentationMode(),routeGoBack:r.goBack,routePush:r.push,routeReplace:r.replace,searchQuery:y,senderId:s.query.sender,showLegoUpdates:L,showQuickPromote:i.props.showQuickPromote,showRepinOnInitialRender:i.props.showRepin,topLevelTrafficSource:g,topLevelTrafficSourceDepth:b,trafficSource:h,completePinClickthrough:d,completePinCloseup:m,isLandingPage:v,isLimitedLogin:w,didRepin:E,navigablePins:_,openInbox:C,pin:O,shouldShowInbox:S,updateExperienceForPlacement:x,viewer:c},u,e)):a.a.createElement(Fo,Object.assign({activateLeftRightArrowNavExp:n,contextPinIds:f,conversation_id:s.query.conversation_id,deepLinkBackGoesToBoard:p,emailId:s.query.e_t,forceSendFeedback:s.query.fsf,goBack:this.goBack(!!p),leftRightArrowNavExpGroup:l,messageId:s.query.message,onLoginClick:this.redirectToLogin,pinId:o.id,pinResource:t,presentationMode:this.presentationMode(),routeGoBack:r.goBack,routePush:r.push,routeReplace:r.replace,searchQuery:y,senderId:s.query.sender,showQuickPromote:i.props.showQuickPromote,showRepinOnInitialRender:i.props.showRepin,topLevelTrafficSource:g,topLevelTrafficSourceDepth:b,trafficSource:h,completePinClickthrough:d,completePinCloseup:m,isLandingPage:v,isLimitedLogin:w,didRepin:E,navigablePins:_,openInbox:C,pin:O,shouldShowInbox:S,updateExperienceForPlacement:x,viewer:c},u,e))}))}))})}))))}})},FSbA:function(e,t,n){n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return d});var i=n("ePT2"),a=n("NoZx");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r={[a.a.BOARD_ACTIVITY]:"BoardActivityReactionResource",[a.a.BOARD_ACTIVITY_COMMENT]:"BoardActivityCommentReactionResource"};function s(e,t,n=1){return{type:"ACTIVITY_ITEM_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}function l(e,t,n){return r=>{const s=a.c[t],l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({activityId:e},n);return i.a.create(s,l).callUpdate().then(e=>{const t=e.resource_response.data;return r(function(e){return{type:"ACTIVITY_ITEM_UPDATED",payload:{data:e}}}(t)),t})}}function c(e,t,n,a){return o=>{if(n===a)return;const l=r[t],c={activityId:e,reactionType:a},d=i.a.create(l,c);0===a?d.callDelete({showError:!1}):d.callUpdate({showError:!1}),0!==n&&o(s(e,!1,n)),0!==a&&o(s(e,!0,a))}}function d(e,t,n,a,o=0){return l=>{const c=r[n];if(!a&&o>0){l(s(e,!1,o)),l(s(e,!0,t));const n={activityId:e,reactionType:o},a=i.a.create(c,n),r={activityId:e,reactionType:t},d=i.a.create(c,r);a.callDelete({showError:!1}).then(()=>{d.callCreate({showError:!1})})}else{const n={activityId:e,reactionType:t},o=i.a.create(c,n);a?o.callDelete({showError:!1}):o.callCreate({showError:!1}),l(s(e,!a,t))}}}},Fbxa:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n("Mr4W"),o=n.n(a),r=n("1/M5"),s=(n("MNJ6"),n("+U6O"));function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Component{constructor(e,t){super(e,t),l(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),l(this,"handleIndexUpdate",e=>{const t=this.props.indexManager;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),l(this,"handleSelectItem",e=>()=>{const t=this.props,n=t.disabled,i=t.onSelectItem;n||i(e)}),l(this,"handleMouseEnter",e=>({event:t})=>{const n=this.props,i=n.disabled,a=n.indexManager;i||a.updateIndex(e)}),l(this,"handleMouseLeave",({event:e})=>{const t=this.props,n=t.disabled,i=t.indexManager;n||i.setInactive()}),l(this,"renderItems",(e,t)=>{const n=this.props.renderItem,a=this.state.selectedIndex||{},o=a.row,r=a.section,l=e.customProps,c=void 0===l?{}:l,d=e.items,u=e.renderItem,p=c.isDisabled,m=void 0===p?e=>!1:p,h=t===r,g=u||n;return g&&d.map((e,n)=>{const a=m(e),r={section:t,row:n},l=h&&n===o;return i.createElement("div",{"data-test-id":"board-selection",key:n,ref:!a&&l&&this.setSelectedItemRef},a?g({item:e,hovered:l,sectionProps:c}):i.createElement(s.O,{onMouseEnter:this.handleMouseEnter(r),onMouseLeave:this.handleMouseLeave,onTouch:this.handleSelectItem(e),fullWidth:!1,shape:"rounded"},g({item:e,hovered:l,sectionProps:c})))})}),l(this,"renderSections",()=>{const e=this.props,t=e.renderSectionHeader;return e.sections.map((e,n)=>i.createElement(s.b,{key:n},t&&t(e,n),this.renderItems(e,n)))});const n=this.props.indexManager;this.state={selectedIndex:n.getIndex(),selectionMovedByKeyboard:!1},n.setUpdateCallback(this.handleIndexUpdate)}UNSAFE_componentWillReceiveProps(e){this.props.indexManager!==e.indexManager&&e.indexManager.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(){const e=this.containerRef;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&e){const t=o.a.findDOMNode(this.selectedItemRef);if(!(t instanceof HTMLElement))return;const n=t.getBoundingClientRect(),i=n.top,a=n.bottom,r=e.getBoundingClientRect(),s=r.top;a>=r.bottom?t.scrollIntoView(!1):i<=s&&t.scrollIntoView(!0)}}render(){const e=this.props,t=e.grow,n=void 0!==t&&t,a=e.maxHeight,o=e.fetchMore;return i.createElement(r.a,{fetchMore:o},({setRef:e,onScroll:t})=>i.createElement(s.b,{flex:n?"grow":void 0,height:n?"100%":void 0,maxHeight:a,onScroll:t,overflow:"auto",ref:t=>{this.containerRef=t,e(t)}},this.renderSections()))}}},GB3e:function(e,t,n){},GYbB:function(e,t,n){var i=n("GyhR"),a=n("Qo1m"),o=n("WE4s"),r=n("BQ43"),s=n("jcaw"),l=n("+U6O");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.PureComponent{constructor(...e){super(...e),c(this,"state",{truncate:!!this.props.text&&this.props.text.length>(this.props.maxCharLength||s.c)+this.revealText.length}),c(this,"showFullText",()=>this.setState({truncate:!1}))}get revealText(){return this.props.inUnifiedComments?a.a._("... More","click to see more of a long post"):a.a._("... See more","click to see more of a long post")}render(){const e=this.props,t=e.allowReveal,n=e.maxCharLength,a=e.size,c=e.tags,d=e.taggedUsers,u=e.text,p=this.state.truncate,m=p?u.substring(0,n||s.c).trim():u;return i.createElement(i.Fragment,null,i.createElement(o.a,{text:m,tags:c,taggedUsers:d,size:a}),p&&!t&&i.createElement(l.J,{inline:!0,bold:!0},this.revealText),p&&t&&i.createElement(r.a,{color:"darkGray",handleClick:this.showFullText,text:this.revealText,size:a}))}}c(d,"defaultProps",{allowReveal:!1,size:"md",tags:[],taggedUsers:[],text:""}),t.a=d},"H++a":function(e,t,n){n.r(t);var i=n("oFGA"),a=n("bWet"),o=n("CYq4"),r=n.n(o),s=n("ePT2"),l=n("q579"),c=n("aqOH");const d={open(e){const t=r()(e,d._validParams),n=d._getDialogType(e),i=d.generateFbRef(),o=e.object_type&&e.object_id&&"feed"===n;let u=l.a.absolutify(e.path);const p=l.a.getQueryStringParams();if(p.ptrf&&(u=l.a.appendQueryString(u,{ptrf:p.ptrf})),o&&(u=l.a.appendQueryString(u,{fb_ref:i})),t.method=n,"feed"===t.method){const n=d.getWindowOptions(e.width||580,e.height||400);let i="http://www.facebook.com/sharer/sharer.php?u="+u;t.picture&&(i+="&picture="+t.picture),t.name&&(i+="&title="+t.name),t.description&&(i+="&description="+t.description),t.caption&&(i+="&caption="+t.caption),window.open(encodeURI(i),"sharer",n)}else"send"===t.method?t.link=u:"share"===t.method&&(t.href=u),a.default.ensureInit(n=>{n.getLoginStatus(()=>{if("send"===t.method){n.ui(t);let i,a=10;const o=setInterval(()=>{!(i=function(){const e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(!e.length)return;if(1===e.length)return e[0];const t=e.splice(0,e.length-1);for(let n=0;n<t.length;n+=1)t[n].parentNode.removeChild(t[n]);return e[0]}())&&a||(clearInterval(o),i&&d.executeMessengerCallback(i,e.callback)),a-=1},1e3)}else"share"===t.method&&n.ui(t,t=>{if(o&&t&&!t.error_message){const t=s.a.create("LogFacebookFeedShare",{});t.options={object_type:e.object_type,object_id:e.object_id,fb_ref:i},t.callCreate({showError:!1})}e.callback&&e.callback(t)})})},c.default)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,t){let n=10;const i=setInterval(()=>{"0px"!==e.style.width&&n||(clearInterval(i),e.style.width="575px"),n-=1},1e3);t&&t()},generateFbRef(){let e="";for(;e.length<20;)e+=Math.floor(65535*Math.random()).toString(16);return(c.default.id||i.a.instance.unauth_id)+":"+e},_getDialogType:e=>d._validOptions.includes(e.type)?e.type:"feed",getWindowOptions(e,t){const n=e||580,i=t||400,a=screen.width,o=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+n+",height="+i+",left="+Math.round((a-n)/2)+",top="+(o>i?Math.round((o-i)/2):0)}};t.default=d},H5Gu:function(e,t,n){n.d(t,"a",function(){return c});var i=n("cjc9"),a=n("ePT2"),o=n("KyAb"),r=n("NoZx");const s={[r.a.BOARD]:"BoardActivityResource",[r.a.BOARD_ACTIVITY]:"BoardActivityCommentResource",[r.a.BOARD_ACTIVITY_COMMENT]:"BoardActivityNestedCommentResource"},l={[r.a.BOARD]:"boardId",[r.a.BOARD_ACTIVITY]:"activityId",[r.a.BOARD_ACTIVITY_COMMENT]:"activityId"};function c({contentMarkdown:e,imageSignatures:t,objectIds:n,parentId:c,parentType:d,text:u,tags:p,replyToCommentId:m}){return h=>{const g=s[d],b={[l[d]]:c,contentMarkdown:e,imageSignatures:t,objectIds:n,tags:p,text:u,replyToCommentId:m},f=r.b[d],y=d!==r.a.BOARD_ACTIVITY_COMMENT;return a.a.create(g,b).callCreate({showError:!0}).then(e=>{const t=e.resource_response.data;return h(function(e,t){return{type:"ACTIVITY_ITEM_CREATED",payload:{parentId:e,activityItem:t}}}(c,t)),h(Object(i.a)({feedId:c,feedType:f,itemIds:[t.id],itemType:t.type,prepend:y})),h(Object(o.b)(c)),e})}}},"HQ9/":function(e,t,n){n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});const i=(e,t)=>`${e}:${t||""}`,a=(e,t)=>e.feeds.profileBoards[i(t.username,t.boardOrder)],o=(e,t)=>t.isOverview?"xxWide":t.isOwnProfile&&e.ui.views&&e.ui.views.profileBoardView||"wide"},HW6o:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Mr4W"),r=n.n(o),s=n("4+0X");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=new Map;let d=null;const u=e=>{e.forEach(e=>{const t=c.get(e.target);t&&t(e)})},p=e=>{d.unobserve(e),c.delete(e)},m=(e,t,n)=>{const i=t?[0,.5,1]:[0,1],a={root:document.querySelector("#mainContainer"),rootMargin:"-64px 0px 0px 0px",threshold:i};d=d||new window.IntersectionObserver(u,a),c.set(e,n),d.observe(e)},h=e=>c.has(e);t.a=(e=>{class t extends i.Component{constructor(...e){super(...e),l(this,"seen",!1),l(this,"flushTimeout",null),l(this,"attachDenzelNavigateListener",()=>{this.denzelNavigateListener=s.a.instance.subscribe("site","navigateStarted",(e,t,n,i)=>{const a=new RegExp("/pin/[\\w|-]+/$");!i&&n&&"string"==typeof n.url&&a.test(n.url)&&this.leave()})}),l(this,"detachDenzelNavigateListener",()=>{this.denzelNavigateListener&&(this.denzelNavigateListener.unsubscribe(),delete this.denzelNavigateListener)}),l(this,"enter",e=>{const t=e.intersectionRatio>0||e.isIntersecting;this.seen=t,this.seen&&(this.props.onVisibilityChanged(!0),this.attachDenzelNavigateListener())}),l(this,"leave",()=>{const e=this._node;e&&h(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1,this.detachDenzelNavigateListener())}),l(this,"observe",()=>{try{this._node=r.a.findDOMNode(this)}catch(n){return}if(!this._node)return;const e=this.props.inAdsDesktopVideoExperiment,t=this._node;m(t,e,n=>{if(!c.has(t))return;const i=e?n.intersectionRatio>=.5:n.intersectionRatio>0||n.isIntersecting,a=this.props.trackFullVisible?n.intersectionRatio>=1:i,o=this.props.trackFullVisible?0===n.intersectionRatio:!a;!this.seen&&a?this.enter(n):this.seen&&o&&this.leave()})})}componentDidMount(){this.observe()}componentWillUnmount(){const e=this._node;e&&(this.leave(),p(e))}render(){return a.a.createElement(e,this.props)}}return l(t,"displayName",`WithVisibilityChanged(${e.displayName||e.name})`),t})},HcgI:function(e,t,n){var i=n("GyhR"),a=n("Q6EP"),o=n.n(a),r=n("iJ35");const s="__HashtagFlag__",l=4,c=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,d=(e,t)=>`/search/pins/?q=${encodeURIComponent(e)}&rs=${t}`;n.d(t,"a",function(){return p});const u={hashtags:function(e,t){const n=t.appendText||"",a=t.source||"hashtag_pinrep";let o=[];const u=[],p={};let m=0;const h=e=>(t,n)=>{if(t===s&&u.length){const t=u.shift();return m+=1,i.createElement(r.b,{to:d(t,a),key:`hashtag-${e}.${n}`},i.createElement("span",{className:"pinHashtag"},t))}return t};for(let i=0;i<e.length;i+=1){const t=e[i];if("string"==typeof t){const e=t.replace(c,e=>(u.push(e),p[e]=!0,s)).split(new RegExp(`(${s})`)).map(h(i));o=[...o,...e]}else o.push(t)}const g=[];return n&&n.replace(c,(e,t)=>(!p[e]&&m<l&&(m+=1,g.push(i.createElement("span",{key:"appended"+t}," ",i.createElement(r.b,{to:d(e,a)},i.createElement("span",{className:"pinHashtag"},e)))),p[e]=!0),e)),o=[...o,...g]}};class p extends i.Component{shouldComponentUpdate(e){return!o()(this.props,e)}render(){const e=this.props,t=e.text,n=e.options;if(""===t.trim())return t;let a=[t];for(const i of Object.keys(u))if(i in n){a=(0,u[i])(a,n[i])}return i.createElement("span",null,a)}}},HoR0:function(e,t,n){n.d(t,"h",function(){return i}),n.d(t,"j",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"f",function(){return r}),n.d(t,"i",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"k",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return p}),n.d(t,"d",function(){return m});const i=e=>({type:"SET_QUICK_REPORT",payload:{isQuickReport:e}}),a=e=>({type:"SHOW_QUICK_PROMOTE_PIN_SELECTION",payload:{sterlingCreateCampaignUrl:e}});function o(e){return{type:"SELECT_QUICK_PROMOTE_PIN",payload:{pin:e}}}function r(e){return e(),{type:"REMOVE_SELECT_QUICK_PROMOTE_PIN_MODAL",payload:{removeModal:e}}}function s(e,t=!1){return{type:"SHOW_QUICK_PROMOTE_MODAL",payload:{pin:e,isFirstAdCreate:t}}}function l(e){return e(),{type:"REMOVE_QUICK_PROMOTE_MODAL",payload:{removeModal:e}}}function c(e,t,n,i,a){return{type:"QUICK_PROMOTE_SET_DATA",payload:{hasValidBillingProfile:e,hasBusinessAddress:t,advertiserId:n,advertiserCountry:i,advertisers:a}}}function d(e){return{type:"QUICK_PROMOTE_SUCCESS_SUBMIT_INFO_FORM",payload:e}}function u(e){return{type:"QUICK_PROMOTE_CHANGE_ADVERTISER",payload:{advertiserId:e}}}function p(e){return{type:"QUICK_PROMOTE_PIN_SELECT_PAGE_OPEN_FROM_STERLING",payload:{sterlingAdvertiser:e.sterlingAdvertiser,isQuickReport:e.isQuickReport,isFromSterling:e.isFromSterling}}}function m(e){return{type:"QUICK_PROMOTE_SHOULD_OPEN_ON_STERLING",payload:{sterlingAdvertiser:e.sterlingAdvertiser,shouldOpenQuickPromoteOnSterling:e.shouldOpenQuickPromoteOnSterling,isQuickReport:e.isQuickReport,isFromSterling:e.isFromSterling}}}},HvLx:function(e,t,n){var i=n("ptua"),a=n("H3Xe");t.a=(e=>{const t=i.a.instance&&i.a.instance.getState()||{viewer:{}};return!t.viewer.isAuth||t.viewer.isLimitedLogin?e=>i.a.instance.dispatch(a.a):e})},I3yW:function(e,t,n){n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"f",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"g",function(){return d});const i=1,a=1,o=2,r=2,s=3,l=3,c=3,d=100},IBHH:function(e,t,n){var i=n("0qA3"),a=n("P/N6"),o=n("4uze");e.exports=function(e){return function(t,n,r){var s=Object(t);if(!a(t)){var l=i(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,r);return c>-1?s[l?t[c]:c]:void 0}}},IX6r:function(e,t,n){},IaXd:function(e,t,n){n.d(t,"a",function(){return s});var i=n("GyhR"),a=n("NmcB"),o=n("yJaP");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){const n=Object(o.b)(),s=n.componentType,l=n.contextLogData,c=n.viewParameter,d=n.viewType;return Object(i.useCallback)(()=>{Object(a.a)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}({component:s,view:d,viewParameter:c},l,t||{}))},[e,s,l,c,d])}},Ii6Q:function(e,t,n){n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var i=n("ePT2"),a=n("7m1P");function o(e,t){return i.a.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function r(e,t){return{type:a.a.USER_FOLLOW,payload:{id:e,value:t}}}function s(e,t=null){return n=>{o(e,t).callCreate().catch(()=>n(r(e,!1))),n(r(e,!0))}}function l(e,t=null){return n=>{o(e,t).callDelete().catch(()=>n(r(e,!0))),n(r(e,!1))}}},IqQH:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("CwDa"),s=n("UmN8"),l=n("+U6O");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=474,u=(e,t,n,i,o,r,c,u,p,m)=>{const h=e.images,g=e.details,b=void 0===g?"":g;let f,y,v,w;return u?(f=p||0,y=m||0,v=h&&h["564x"].url):i?(f=d,y=h&&Math.min(f/.8,f/(h["564x"].width/h["564x"].height)),v=h&&h["564x"].url):(y=h&&h["236x"].height,f=h&&h["236x"].width,v=h&&h["236x"].url),w=o?`${h["236x"].url} 1x`:i?`${h["564x"].url} 1x`:[h["474x"]&&`${h["474x"].url} 2x`,h["736x"]&&`${h["736x"].url} 3x`,h.orig&&`${h.orig.url} 4x`].filter(Boolean).join(", "),a.a.createElement(l.b,{key:`carousel slot ${t+n}`,height:y,width:f},a.a.createElement(s.a,{name:"web_image_loading_optimization"},({group:e})=>a.a.createElement(l.o,{alt:b||`carousel image ${n}`,naturalHeight:y,naturalWidth:f,onError:r,onLoad:c,src:v,srcSet:w,loading:e.includes("lazy")?"lazy":"auto",importance:e.includes("low")?"low":"auto"})))};class p extends i.Component{constructor(...e){super(...e),c(this,"state",{showBadge:!0}),c(this,"renderBadge",()=>{const e=this.props,t=e.carousel_data,n=e.isCloseup,i=e.showCarouselBadge,o=this.state.showBadge,r=t.carousel_slots,s=t.index,c=o?.8:0;return!n&&i?a.a.createElement(l.b,{display:"flex",justifyContent:"center",alignItems:"center",color:"darkGray",position:"absolute",right:!0,height:35,width:35,marginRight:5,marginTop:5,shape:"rounded",dangerouslySetInlineStyle:{__style:{zIndex:1,opacity:c,transition:"opacity .3s"}}},a.a.createElement(l.J,{color:"white",size:"md"},`${s+1}/${r.length}`)):null})}componentDidMount(){this.hideBadgeTimeout=setTimeout(()=>this.setState({showBadge:!1}),3e3)}componentDidUpdate(e){const t=this.state.showBadge,n=e.carousel_data.index,i=this.props.carousel_data.index;t&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout(()=>this.setState({showBadge:!1}),3e3)),n!==i&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}componentWillUnmount(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}render(){const e=this.props,t=e.isCloseup,n=e.carouselIndex,i=e.closeupHeight,o=e.closeupWidth,s=void 0===o?0:o,c=e.carousel_data,p=e.highResOnly,m=e.lowResOnly,h=e.onError,g=e.onLoad,b=e.pinId,f=e.isEditMode,y=c.carousel_slots,v=void 0===y?[]:y,w=c.index,E=void 0!==n?n:w;let _;return _=t?s:p?d:236,a.a.createElement(l.b,{height:i||"100%",width:_,overflow:"hidden"},!f&&this.renderBadge(),a.a.createElement(r.a,{trackCarousel:!0,key:`carousel-impression-key-${E}`,impressionType:"Pin",loggingId:b,slotIndex:w,viewParameter:72,viewType:1},a.a.createElement(l.b,{position:"absolute",height:i||"100%",width:_,overflow:"hidden"})),a.a.createElement(l.b,{width:_*v.length,dangerouslySetInlineStyle:{__style:{left:E*_*-1+"px",transition:"left .3s"}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative"},v.map((e,n)=>u(e,b,n,p,m,h,g,t,s,i))))}}c(p,"defaultProps",{showCarouselBadge:!0});t.a=Object(o.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}))(p)},"J+kV":function(e,t,n){n.d(t,"d",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return l});function i(e){return function(t,n){const i=[];t&&/\S/.test(t)||i.push(e.message);const a={errors:i,warnings:[]};return n&&n(a),a}}function a(e){return function(t,n){const i=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i"),a=[];(t=t&&t.trim())&&!t.match(i)&&a.push(e.message);const o={errors:a,warnings:[]};return n&&n(o),o}}function o(e){return function(t,n){const i=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&i.push(e.message);const a={errors:i,warnings:[]};return n&&n(a),a}}function r(e){return function(t,n){const i=[];(e.should_trim||!1)&&(t=t&&t.trim());const a=t.length;e.min&&a<e.min?i.push(e.minErrorString):e.max&&a>e.max&&i.push(e.maxErrorString);const o={errors:i,warnings:[]};return n&&n(o),o}}function s(e){return function(t,n){const i=[];e.pattern.test(t)||i.push(e.message);const a={errors:i,warnings:[]};return n&&n(a),a}}function l(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}},"JU/q":function(e,t,n){n.d(t,"a",function(){return i});const i="favorited"},"Je/+":function(e,t,n){var i=n("y+cA");n.d(t,"a",function(){return i.a});var a=n("Pxtx");n.d(t,"b",function(){return a.a})},K668:function(e,t,n){n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"m",function(){return p}),n.d(t,"j",function(){return m}),n.d(t,"l",function(){return h}),n.d(t,"k",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"e",function(){return f}),n.d(t,"h",function(){return y}),n.d(t,"f",function(){return v}),n.d(t,"c",function(){return w}),n.d(t,"i",function(){return _});var i=n("kQjJ"),a=n("XwKk"),o=n("borb"),r=n("ptua");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=e=>{const t=r.a.instance;let n;if(t){const i=t.getState();if(i.pins&&e){const t=i.pins[e],o=i.location;t&&(n=Object(a.a)(t,o))}}return n},d=e=>({id:e,field_set_key:"auth_web_main_pin",is_landing_page:!1,client_tracking_params:c(e)}),u=e=>{if(e&&e.pin){const t=e.pin.rich_metadata;if(t)return t.products?144:t.article?141:t.recipe?145:139;if(e.pin.story_pin_data)return 157}return 140},p=Object(i.a)(e=>{const t=e.pin,n=e.inChangeTitlesExp,i=t.carousel_data,a=t.title,o=t.closeup_unified_title;let r=n?o:a;if(i){const e=i.carousel_slots,t=void 0===e?[]:e,n=i.index;t[n]&&t[n].title&&(r=t[n].title)}return r?s({},e,{title:r}):null}),m=Object(i.a)(e=>{const t=e.pin.rich_metadata;return t?s({},e,{richMetadata:t}):null}),h=Object(i.a)(e=>{const t=e.richMetadata.title;return t?s({},e,{title:t}):null}),g=Object(i.a)(e=>{const t=e.pin.rich_summary;return t?s({},e,{richSummary:t}):null}),b=Object(i.a)(e=>{const t=e.richSummary.display_name;return t?s({},e,{displayName:t}):null}),f=Object(i.a)(e=>{const t=e.pin.attribution||{},n=t.author_url,i=t.url,a=t.author_name,o=t.title,r=t.provider_name,l=t.cc_url,c=t.embed;return r&&i?s({},e,{attribution:{providerUrl:i,providerName:r,title:o,authorUrl:n,authorName:a,ccUrl:l,embed:c}}):null}),y=Object(i.a)(e=>{const t=e.pin,n=e.richMetadata,i=t.buyable_availability,a=n.products,o=Array.isArray(a)?a.map(e=>{const t=e.name,n=e.offer_summary||{},a=n.in_stock,o=n.min_price,r=n.max_price,s=n.price;let l=null;return void 0!==o&&void 0!==r?l=`${o} - ${r}`:void 0!==s&&(l=`${s}`),t?{name:t,outOfStock:!1===i||!1===a,priceText:l}:null}).filter(e=>null!==e):[];return o.length>0?s({},e,{products:{first:o[0],rest:o.slice(1)}}):null}),v=Object(i.a)(e=>{const t=e.pin.buyable_product||{},n=t.title,i=t.items;return n&&i?s({},e,{buyableProduct:{name:n}}):null}),w=(e,t)=>!e.is_promoted&&"US"===t.country,E=e=>{const t=e||{},n=t.h,i=t.m,a={hours:n||0,minutes:i||0};return void 0!==n||void 0!==i?{h:n,m:i,time:a,isoDuration:Object(o.a)(a)}:null},_=Object(i.a)(e=>{const t=e.richMetadata.recipe||{},n=t.name,i=t.categorized_ingredients,a=t.diets,o=t.from_aggregated_data,r=t.cook_times,l=t.servings_summary,c=r||{},d=c.total,u=c.cook,p=c.prep,m=(l||{}).summary,h=E(p),g=E(u),b=E(d);return n?s({},e,{recipe:{name:n,categorizedIngredients:i,diets:a,fromAggregatedData:o,prepTime:h,cookTime:g,totalTime:b,servingSummary:m}}):null})},KCDi:function(e,t,n){n.d(t,"a",function(){return u});var i=n("GyhR"),a=n.n(i),o=n("PNko"),r=n.n(o),s=n("hvnN"),l=n.n(s),c=n("+U6O");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.Component{constructor(...e){super(...e),d(this,"state",{hiding:!1,visible:!1}),d(this,"handleHide",()=>{this.setState({hiding:!0}),this.timeout=setTimeout(this.props.onHide,200)}),d(this,"handleMouseEnter",()=>{this.timeout&&clearTimeout(this.timeout)}),d(this,"handleMouseLeave",()=>{this.timeout=setTimeout(this.handleHide,this.props.duration)})}componentDidMount(){setTimeout(()=>{this.setState({visible:!0})},100),this.timeout=setTimeout(this.handleHide,this.props.duration)}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const e=this.props,t=e.icon,n=e.imageUrl,i=e.href,o=e.onClick,s=e.text,l=e.openNewPage,d=this.props.color?this.props.color:"darkGray",u="string"==typeof s?s:`${s[0]} ${s[1]}`;let p=t;i&&(p=n?void 0:"arrow-circle-forward");const m=i||n?a.a.createElement("div",{className:"imageWrapper"},a.a.createElement("img",{className:"toastImage",src:n,alt:u})):void 0,h=a.a.createElement(c.M,{color:d,icon:p,text:s,thumbnail:m});return a.a.createElement("div",{className:r()("ToastBase","react",{visible:this.state.visible},{hiding:this.state.hiding}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-test-id":"toast"},i?a.a.createElement("a",{href:i,onClick:o,target:l?"_blank":null,rel:l?"noopener noreferrer":null},h):h)}}d(u,"propTypes",{color:l.a.oneOf(["orange","red","darkGray"]),icon:l.a.string,imageUrl:l.a.string,href:l.a.string,onClick:l.a.func,onHide:l.a.func.isRequired,text:function(e,t,n){if(e[t]){const i=e[t];if(i instanceof Array)return i.length<=2?null:new Error(t+" in "+n+" should contain a max of 2 strings")}return null},duration:l.a.number,openNewPage:l.a.bool}),d(u,"defaultProps",{duration:2e3})},KDzr:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("1OKt"),s=n("PNko"),l=n.n(s),c=n("iJ35"),d=n("hvnN"),u=n.n(d);function p(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{getText(){const e=this.props,t=e.accessibilityText,n=e.showText,i=e.text;return!n&&t?t:i&&"object"==typeof i?i.val:i}render(){const e=this.props,t=e.children,n=e.classes,i=e.discardClasses,o=e.showText,r=e.url,s=p(e,["children","classes","discardClasses","showText","url"]),d=l()(n,i?null:h.cssClasses);return a.a.createElement(c.b,Object.assign({className:d,to:r},s),t||a.a.createElement("em",null),a.a.createElement("span",{className:o?"buttonText":"accessibilityText"},this.getText()))}}m(h,"cssClasses",{NavigateButton:!0,Module:!0,Button:!0,btn:!0}),m(h,"propTypes",{accessibilityText:u.a.string,children:u.a.node,classes:u.a.array,discardClasses:u.a.bool,showText:u.a.bool,text:u.a.string,url:u.a.string}),m(h,"defaultProps",{classes:[]});var g=n("iN5V"),b=n("OtLr"),f=n("9Y9K"),y=n("+4EY"),v=n("cemY"),w=n("K668"),E=n("+U6O");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"c",function(){return k}),n.d(t,"a",function(){return I});const C=e=>e.pin?e.pin:{},O=e=>{const t=C(e).images,n=Object.keys(t||{}).reduce((e,n)=>{const i=t[n],a=i.url,o=i.width,r=i.height;return e&&a&&o&&r?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){_(e,t,n[t])})}return e}({},e,{[n]:{url:a,width:o,height:r}}):null},{});return n&&Object.keys(n).length>0?n:{}},S=e=>{const t=C(e),n=O(e),i=(Object(v.j)(Object(v.k)(e))||{}).link,a=void 0===i?null:i,o=(Object(w.i)(Object(w.j)(Object(v.k)(e)))||{}).recipe,r=(Object(w.h)(Object(w.j)(Object(v.k)(e)))||{}).products,s=(Object(w.f)(Object(v.k)(e))||{}).buyableProduct,l=(Object(v.b)(Object(w.j)(Object(v.k)(e)))||{}).article,c=(Object(v.m)(Object(w.j)(Object(v.k)(e)))||{}).tutorial,d=(c||{}).description,u=n.orig,p=void 0===u?{}:u,m=p.url,h=t.link_domain,g=t.domain,b=h?h.official_user||{}:t.origin_pinner||t.pinner||{},f=b.image_key||b.image_medium_url||b.image_small_url,y=b.username||g;return{pin:t,link:a,recipe:o,products:r,buyableProduct:s,article:l,tutorial:c,tutorialDescription:d,images:n,originalImage:p,originalImageUrl:m,linkDomain:h,domain:g,user:b,profileImgSrc:f,pinnerName:y,pinnerNameText:b.full_name||y}},x=Object(g.a)(".PinActionBar .website.pinActionBarButton, .linkModuleActionButton")(h),k=e=>{const t=e.carousel_data;let n="",i=S({pin:e}).domain;if(t){const e=t.carousel_slots,a=void 0===e?[]:e,o=t.index;a[o]&&(n=a[o].link||"",i=a[o].domain||i)}return{carouselLink:n,currentDomain:i}},I=Object(f.compose)(b.a)(e=>{const t=e.link,n=e.onClickThrough,i=e.pin,s=e.shouldShowAltLinks,l=e.showDomainInLink;if(!i.link||i.link.startsWith("https://i.pinimg.com"))return null;const c=S(e),d=(e=>{let t=o.a._("Visit","Default pin link button text");return!e.linkDomain||(e.recipe||{}).fromAggregatedData?t=e.link&&!e.link.startsWith("https://i.pinimg.com")?o.a._("Visit","Generalized pin link button text"):o.a._("Open","Button text for pin without link to view media"):e.products||e.buyableProduct?t=o.a._("Visit","Buyable pin link button text"):e.tutorial?t=o.a._("Visit","Make pin link button text"):e.recipe?t=o.a._("Make it","Recipe pin link button text"):e.article?t=o.a._("Read it","Article pin link button text"):e.link&&e.link.startsWith("https://i.pinimg.com")&&(t=o.a._("Open","Button text for pin without link to view media")),t})(c),u=k(i),p=u.carouselLink,m=u.currentDomain;return a.a.createElement(E.b,{width:"100%"},a.a.createElement(x,{className:"linkModuleActionButton",onClick:n,external:!0,to:p||c.link||c.originalImageUrl,useNewTab:!0,pinId:c.pin.id,shouldShowAltLinks:s},t||(l?a.a.createElement(r.a,{domain:m}):a.a.createElement(E.c,{text:d,size:"md"}))))});t.b=(e=>a.a.createElement(y.a,null,({isImmersiveCloseup:t})=>a.a.createElement(E.b,{alignItems:"center",display:"flex",justifyContent:"start"},a.a.createElement("div",Object.assign({className:"actionButton"},t?{}:{style:{width:"100%"}}),a.a.createElement(I,e)))))},Kb0Y:function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n.n(i),o=n("+U6O");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s={__path:"M8.134 8.116a1.25 1.25 0 0 0-1.768 0L4.25 10.232 2.134 8.116A1.25 1.25 0 0 0 .366 9.884L2.483 12 .366 14.116a1.25 1.25 0 0 0 1.768 1.768l2.116-2.117 2.116 2.117a1.248 1.248 0 0 0 1.768 0 1.25 1.25 0 0 0 0-1.768L6.018 12l2.116-2.116a1.25 1.25 0 0 0 0-1.768M24 8v8a2.5 2.5 0 0 1-2.5 2.5h-8A2.5 2.5 0 0 1 11 16V8a2.5 2.5 0 0 1 2.5-2.5h8A2.5 2.5 0 0 1 24 8"};class l extends i.PureComponent{constructor(...e){super(...e),r(this,"state",{hovered:!1}),r(this,"handleMouseEnter",e=>this.setState({hovered:!0})),r(this,"handleMouseLeave",e=>this.setState({hovered:!1}))}render(){const e=this.props,t=e.bold,n=e.icon,i=e.text,r=e.description,l=e.isContextMenuV2Exp,c=Array.isArray(i)?i.join(""):i;return a.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},a.a.createElement(o.b,{alignItems:"start",color:this.state.hovered?"lightGray":"transparent",display:"flex",direction:"row",overflow:"hidden",paddingX:4,paddingY:2,marginStart:-1,marginEnd:-1,title:c},!l&&n&&a.a.createElement(o.b,{flex:"none",padding:1},"unfollow"===n?a.a.createElement(o.m,{accessibilityLabel:"",color:"darkGray",dangerouslySetSvgPath:s,size:16}):a.a.createElement(o.m,{accessibilityLabel:"",color:"darkGray",icon:n,size:16})),a.a.createElement(o.b,{flex:"grow",display:"flex",direction:l?"row":"column",padding:1,width:"100%",alignItems:l?"center":"start"},a.a.createElement(o.J,{bold:t,size:l?"sm":"md",color:"darkGray"},i),a.a.createElement(o.b,{display:"flex",alignItems:"center"},!l&&r&&a.a.createElement(o.b,{marginTop:1},a.a.createElement(o.J,{color:"darkGray",overflow:"normal"},r))))))}}r(l,"defaultProps",{bold:!0})},Kqsi:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("Qo1m"),s=n("z/1d"),l=n("Irlq"),c=n("+U6O");var d=({followText:e,followerCount:t,userFollowed:n})=>Object(l.b)(r.a._("{{ followCount }} {{ followText }}"),{followCount:a.a.createElement(c.b,Object.assign({"data-test-id":"followCount",paddingX:1,key:"followCount"},n?{}:{dangerouslySetInlineStyle:{__style:{opacity:.75}}}),a.a.createElement(c.J,{color:n?"gray":"white",size:"lg"},a.a.createElement(s.a,{value:t,shortform:!0,shortformMaximumFractionDigits:0}))),followText:a.a.createElement(c.b,{"data-test-id":"followText",paddingX:1,key:"followText"},a.a.createElement(c.J,{bold:!0,color:n?"darkGray":"white",size:"lg"},e))}),u=n("KCDi"),p=n("KsVg"),m=n("9Y9K"),h=n("VI9K"),g=n("lixz"),b=n("Ii6Q");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(m.compose)(Object(o.connect)((e,{id:t,userFollowed:n})=>{const i=(e.users||{})[t],a=e.mostRecentPin;return{followerCount:i?i.follower_count:null,userFollowed:i?i.explicitly_followed_by_me:n,mostRecentPin:a?a.id:null}},e=>({follow:(t,n)=>e(Object(b.a)(t,n)),unfollow:(t,n)=>e(Object(b.b)(t,n)),clearMostRecentPin:()=>e(Object(h.b)(null))})),p.a)(class extends i.PureComponent{constructor(...e){super(...e),f(this,"handleClick",()=>{this.props.userFollowed?this.unfollow():this.follow()}),f(this,"handlePulsarClick",()=>{this.handleClick()}),f(this,"follow",()=>{const e=this.props,t=e.follow,n=e.id,i=e.onUserFollow,a=e.mostRecentPin,o=e.clearMostRecentPin;t(n,a),this.showConfirmation(),i&&i(!0),o()}),f(this,"handleToastClick",()=>{const e=this.props.isOwnProfile;Object(g.e)(e?14:15)}),f(this,"showConfirmation",()=>{const e=this.props,t=e.hideAllToasts,n=e.fullName,i=e.imageUrl,o=e.profileUrl,s=e.showToast;e.suppressToasts||(t(),s(({onHide:e})=>a.a.createElement(u.a,{onClick:this.handleToastClick,onHide:e,text:[r.a._("Now following","text that comes before a board/user name in toast"),n],href:o,imageUrl:i})))}),f(this,"unfollow",()=>{const e=this.props,t=e.id,n=e.onUserFollow,i=e.unfollow,a=e.mostRecentPin,o=e.clearMostRecentPin;i(t,a),n&&n(!1),o()})}renderButton(){const e=this.props,t=e.button,n=e.followerCount,i=e.inline,o=void 0!==i&&i,s=e.size,l=e.showFollowerCount,u=e.userFollowed,p=u?r.a._("Following","User follow button"):r.a._("Follow","User follow button");if(t)return t({followText:p,onClick:this.handleClick});if(l){const e="number"==typeof n?a.a.createElement(d,{followerCount:n,userFollowed:u,followText:p}):p;return a.a.createElement(c.O,{onTouch:this.handleClick},a.a.createElement(c.b,{color:u?"lightGray":"red",dangerouslySetInlineStyle:{__style:{borderRadius:"8px"}},paddingX:3,paddingY:3},a.a.createElement(c.b,{display:"flex",alignItems:"center"},e)))}return a.a.createElement(c.c,{color:u?"gray":"red",inline:o,onClick:this.handleClick,size:s,text:p})}render(){const e=this.props,t=e.showPulsar,n=e.userFollowed;return a.a.createElement(c.b,{position:"relative",display:"flex"},this.renderButton(),t&&a.a.createElement(c.O,{onTouch:this.handlePulsarClick},a.a.createElement(c.b,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}}},a.a.createElement(c.z,{paused:n||!1}))))}})},KsVg:function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n("hvnN"),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=()=>n.e("ToastsManagerCommon").then(n.bind(null,"tdRV"));function l(e){var t,n;return n=t=class extends i.Component{constructor(...e){super(...e),r(this,"showToast",e=>{this.context.showToast?this.context.showToast(e):s().then(({default:t})=>{t.showReactToast(e)})}),r(this,"hideAllToasts",()=>{this.context.hideAllToasts?this.context.hideAllToasts():s().then(({default:e})=>{e.removeAllToasts()})})}render(){return i.createElement(e,Object.assign({},this.props,{hideAllToasts:this.hideAllToasts,showToast:this.showToast}))}},r(t,"displayName",`WithShowToast(${e.displayName||e.name})`),r(t,"contextTypes",{showToast:o.a.func,hideAllToasts:o.a.func}),n}},KyAb:function(e,t,n){function i(e,t){return{type:"UPDATE_ACTIVITY_ITEM_COMMENT_COUNT",payload:{increment:t,id:e}}}function a(e){return i(e,!1)}function o(e){return i(e,!0)}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},L43L:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("QUnS"),r=n.n(o),s=n("+U6O");const l=({fill:e,width:t,color:n,isLego:i=!1})=>{const o="yellow"===n?"#e2780d":"#333",r="half"===e?a.a.createElement("svg",{height:t,width:t,viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{fill:o,d:"M12.00,0.00 L12.00,0.00 C11.40,0.00 10.79,0.35 10.57,1.06 L8.48,7.92 L1.49,7.92 C0.07,7.92 -0.54,9.75 0.59,10.62 L6.30,15.03 L4.16,22.04 C3.73,23.44 5.34,24.57 6.49,23.68 L12.00,19.43 L12.00,0.00 Z"}),a.a.createElement("path",{fill:"lightgray",d:"M12.00,0.00 L12.00,0.00 C12.60,0.00 13.21,0.35 13.43,1.06 L15.52,7.92 L22.51,7.92 C23.93,7.92 24.55,9.75 23.41,10.62 L17.70,15.03 L19.84,22.04 C20.27,23.44 18.66,24.57 17.51,23.68 L12.00,19.43 L12.00,0.00 Z"})):a.a.createElement("svg",{height:t,width:t,viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{fill:"full"===e?o:"lightgray",d:"M13.43,1.06 L15.52,7.92 L22.51,7.92 C23.93,7.92 24.54,9.75 23.41,10.62 L17.70,15.03 L19.84,22.04 C20.27,23.44 18.66,24.57 17.51,23.68 L12.00,19.43 L6.49,23.68 C5.34,24.57 3.73,23.44 4.16,22.04 L6.30,15.03 L0.59,10.62 C-0.54,9.75 0.07,7.92 1.49,7.92 L8.48,7.92 L10.58,1.06 C11.01,-0.35 12.99,-0.35 13.43,1.06"}));return a.a.createElement(s.b,{dangerouslySetInlineStyle:{__style:{marginRight:i?"3px":0}},display:"inlineBlock"},r)};function c({max_rating:e,rating:t,width:n,color:i,isLego:o=!1}){const s=[],c=function(e,t){return 5*(t=t<=e?t:e)/e}(parseFloat(e)||5,parseFloat(t)||0);if(isNaN(c))return null;const d=Math.floor(c),u=c-d;return r()(d,e=>s.push(a.a.createElement(l,{fill:"full",width:n,key:e,color:i,isLego:o}))),u>=.75?s.push(a.a.createElement(l,{fill:"full",width:n,key:s.length,color:i,isLego:o})):u>=.25&&s.push(a.a.createElement(l,{fill:"half",width:n,key:s.length,color:i,isLego:o})),r()(5-s.length,()=>s.push(a.a.createElement(l,{fill:"empty",width:n,key:s.length,color:i,isLego:o}))),a.a.createElement(a.a.Fragment,null,s)}},L5aL:function(e,t,n){n.r(t);var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("+U6O");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=5e3,c=15e3,d="surveyLoaded",u="surveyFinished";var p=class extends i.Component{constructor(...e){super(...e),s(this,"state",{surveyAccepted:!1,surveyLoaded:!1,surveyLoadFailed:!1}),s(this,"processIFrameMessage",e=>{const t=this.props,n=t.presentationDelay,i=void 0===n?l:n,a=t.onComplete,o=t.onView,r=t.surveyLink,s=e.origin||e.originalEvent.origin;r.startsWith(s)&&(e.data===u?a():e.data===d&&(window.clearTimeout(this.loadSurveyFailureTimeout),this.loadSurveyTimeout=window.setTimeout(()=>{o(),this.setState({surveyLoaded:!0})},i)))}),s(this,"handleShowSurvey",()=>{this.setState({surveyAccepted:!0})})}componentDidMount(){window.addEventListener("message",this.processIFrameMessage),this.loadSurveyFailureTimeout=window.setTimeout(()=>{this.state.surveyLoaded||(window.clearTimeout(this.loadSurveyTimeout),this.setState({surveyLoadFailed:!0}))},c)}componentWillUnmount(){window.removeEventListener("message",this.processIFrameMessage),window.clearTimeout(this.loadSurveyTimeout),window.clearTimeout(this.loadSurveyFailureTimeout)}render(){const e=this.state,t=e.surveyAccepted,n=e.surveyLoadFailed,i=e.surveyLoaded;if(n)return null;const s=this.props,l=s.acceptButtonText,c=s.bodyText,d=s.declineButtonText,u=s.onDismiss,p=s.subtitleText,m=s.surveyLink,h=s.titleText,g=a.a.createElement("iframe",{className:t?"PinnerSurvey":"SurveyHidden",src:m,title:o.a._("Pinterest Survey","Accessible label for survey frame")});return i?a.a.createElement("div",{style:{zIndex:1e3,position:"absolute"}},a.a.createElement(r.x,{accessibilityCloseLabel:o.a._("close","Accessible label for the modal close button"),accessibilityModalLabel:o.a._("Have a few minutes to take a survey?","User evaluation survey"),footer:!t&&a.a.createElement(r.b,{display:"flex",justifyContent:"end",deprecatedPadding:{x:1}},a.a.createElement("div",{className:"p1"},a.a.createElement(r.c,{text:d,onClick:u})),a.a.createElement("div",{className:"p1"},a.a.createElement(r.c,{color:"red",text:l,onClick:this.handleShowSurvey}))),heading:t?"":h,onDismiss:u,role:"alertdialog",size:t?"lg":"md"},a.a.createElement("div",null,g),!t&&a.a.createElement(r.b,{deprecatedPadding:3},a.a.createElement(r.J,{smSize:"xs",mdSize:"sm",lgSize:"md"},p),a.a.createElement(r.J,{smSize:"xs",mdSize:"sm",lgSize:"md"},c)))):g}},m=n("iz36"),h=n("dsfX"),g=n("iJ35");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends i.Component{constructor(...e){super(...e),b(this,"state",{surveyLoaded:!1}),b(this,"loadSurvey",()=>{this.setState({surveyLoaded:!0}),this.props.view()}),b(this,"handleDismiss",()=>{this.props.dismiss(),this.setState({surveyLoaded:!1})}),b(this,"handleComplete",()=>{this.props.complete(),this.setState({surveyLoaded:!1})})}componentDidMount(){const e=this.props.displayData.delay;this.surveyTimer=window.setTimeout(this.loadSurvey,e)}componentWillUnmount(){clearTimeout(this.surveyTimer)}render(){if(!this.state.surveyLoaded)return null;const e=this.props.displayData,t=e.buttons,n=e.detailed_text,i=e.title_text;return a.a.createElement(h.b,{accessibilityCloseLabel:o.a._("close","Accessible label for the modal close button"),heading:i,accessibilityModalLabel:o.a._("Would you mind taking a survey?","User eval survey"),onDismiss:this.handleDismiss,size:"sm",footer:a.a.createElement(r.b,{display:"flex",justifyContent:"end"},t.map((e,t)=>e.uri?a.a.createElement(r.b,{key:e.text,marginStart:1},a.a.createElement(g.b,{external:!0,to:e.uri},a.a.createElement(r.c,{color:"red",text:e.text,onClick:this.handleComplete}))):a.a.createElement(r.b,{key:e.text,marginStart:1},a.a.createElement(r.c,{text:e.text,onClick:this.handleDismiss}))))},a.a.createElement(r.b,{padding:3},a.a.createElement(r.J,{size:"lg",smSize:"sm",mdSize:"md",lgSize:"lg"},n)))}}function y({onComplete:e}){return a.a.createElement(r.b,{display:"flex",direction:"column",alignItems:"center",justifyContent:"center"},a.a.createElement(r.l,{size:"sm"},o.a._("Thank you!")),a.a.createElement(r.b,{marginTop:9},a.a.createElement(r.l,{size:"xl"},a.a.createElement("svg",{width:"132px",height:"132px",viewBox:"0 0 132 132",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.a.createElement("path",{d:"M132,66 C132,102.4485 102.4485,132 66,132 C29.5515,132 0,102.4485 0,66 C0,29.5515 29.5515,0 66,0 C102.4485,0 132,29.5515 132,66",id:"Fill-3",fill:"#FEDB86"}),a.a.createElement("path",{d:"M44,52.25 C44,56.8095 40.3095,60.5 35.75,60.5 C31.1905,60.5 27.5,56.8095 27.5,52.25 C27.5,47.6905 31.1905,44 35.75,44 C40.3095,44 44,47.6905 44,52.25",id:"Fill-5",fill:"#833821"}),a.a.createElement("path",{d:"M104.5,52.25 C104.5,56.8095 100.8095,60.5 96.25,60.5 C91.6905,60.5 88,56.8095 88,52.25 C88,47.6905 91.6905,44 96.25,44 C100.8095,44 104.5,47.6905 104.5,52.25",id:"Fill-7",fill:"#833821"}),a.a.createElement("path",{d:"M39.2843,85.02175 C41.0168,84.93925 42.6778,85.94025 43.3268,87.61225 C47.1328,97.42425 56.9008,103.68325 67.6423,103.19375 C78.3838,102.69875 87.5413,95.57075 90.4343,85.45625 C91.0503,83.31125 93.3328,82.05175 95.5163,82.64575 C97.7108,83.23975 98.9923,85.45625 98.3818,87.60125 C94.5263,101.08175 82.3218,110.57475 68.0108,111.23475 C53.6998,111.88925 40.6758,103.54575 35.6103,90.47225 C34.8073,88.39325 35.8798,86.06675 38.0138,85.28025 C38.4318,85.12625 38.8608,85.03825 39.2843,85.02175",id:"Fill-9",fill:"#833821"}))))),a.a.createElement(r.b,{marginTop:5,minWidth:170},a.a.createElement(r.c,{onClick:e,color:"red",text:o.a._("Back to feed","Button caption to close modal"),size:"lg"})))}var v=n("CwDa"),w=n("Y1te");function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _({pin:e,onSelect:t,slotIndex:n}){const o=E(Object(i.useState)(!1),2),s=o[0],l=o[1],c=E(Object(i.useState)(!1),2),d=c[0],u=c[1],p=E(Object(i.useState)(!1),2),m=p[0],h=p[1],g=e.image_medium_url,b=e.title,f=e.description,y={backgroundImage:`url(${g})`,backgroundSize:"cover",transformCenter:"50% 50%",transform:`scale(${s?1:.01})`,transition:"all 150ms",zIndex:d?1:0,cursor:"pointer"},_={background:"rgba(0, 0, 0, 0.6)",transition:"all 150ms",opacity:d||m?1:0};return a.a.createElement(v.a,{loggingId:e.cacheable_id,impressionType:"Pin",impressionAuxFields:{imageURL:g},slotIndex:n,viewType:370,viewParameter:3321},a.a.createElement(w.a,{onClick:()=>{t(),h(!m)}},a.a.createElement(r.b,{width:1,height:1,position:"absolute",top:!0,left:!0,bottom:!0,right:!0,display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(r.o,{src:g,onLoad:()=>l(!0),naturalWidth:1,naturalHeight:1,alt:"Preload image"})),a.a.createElement(r.b,{position:"absolute",dangerouslySetInlineStyle:{__style:y},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),shape:"rounded",overflow:"hidden",title:b||f,top:!0,left:!0,bottom:!0,right:!0},(d||m)&&a.a.createElement(r.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:_},display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(r.m,{icon:m?"heart":"heart-outline",color:"white",size:36,accessibilityLabel:""})))))}const C=5;function O({pins:e,onSelect:t}){const n=e.map((e,n)=>a.a.createElement(r.b,{flex:"grow",marginLeft:n%C!=0?2:0,position:"relative",marginBottom:2,key:e.id},a.a.createElement(_,{pin:e,onSelect:()=>t(e),slotIndex:n})));return a.a.createElement(r.b,{display:"flex",alignItems:"center",position:"relative",color:"white",direction:"column",height:"100%",width:"100%"},a.a.createElement(r.b,{display:"flex",flex:"grow",width:"100%"},n.slice(0,C)),a.a.createElement(r.b,{display:"flex",flex:"grow",width:"100%"},n.slice(C,2*C)))}function S({index:e,count:t}){return a.a.createElement(r.b,{width:"100%",height:18,display:"flex",justifyContent:"center",alignItems:"center"},new Array(t).fill().map((t,n)=>{const i=n===e,o=i?18:10,s=i?3:4,l=i?"red":"gray";return a.a.createElement(r.b,{key:n,shape:"circle",width:o,height:o,marginLeft:s,marginRight:s,color:l,flex:"none",dangerouslySetInlineStyle:{__style:{transition:"all 250ms"}}})}))}var x=n("NmcB");function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const I=5,P=10;function T({pins:e,onComplete:t,updateAnswers:n,onDismiss:s}){const l=k(Object(i.useState)(0),2),c=l[0],d=l[1],u=k(Object(i.useState)({}),2),p=u[0],m=u[1],h=e&&e.slice(c*P,(c+1)*P);return a.a.createElement(r.b,{display:"flex",direction:"column",height:"100%",width:"100%"},a.a.createElement(r.b,{display:"flex",justifyContent:"center",flex:"none",alignItems:"center",position:"relative"},a.a.createElement(r.l,{size:"xs"},o.a._("Select ideas that are relevant to you")),a.a.createElement(r.b,{position:"absolute",right:!0,top:!0,bottom:!0,marginTop:-1,marginRight:-2},a.a.createElement(r.n,{accessibilityLabel:"close",bgColor:"white",icon:"cancel",iconColor:"gray",onClick:()=>{Object(x.a)(101,{view:370,viewParameter:3321,component:13430,element:75,objectId:`${c}`}),s()}}))),a.a.createElement(r.b,{marginTop:8,flex:"grow"},h&&a.a.createElement(O,{pins:h,onSelect:e=>{const t=Object.assign({},p);p[e.cacheable_id]?(delete t[e.cacheable_id],Object(x.a)(107,{view:370,viewParameter:3321,component:13430,objectId:`${c}_${e.cacheable_id}`})):(t[e.cacheable_id]=!0,Object(x.a)(106,{view:370,viewParameter:3321,component:13430,objectId:`${c}_${e.cacheable_id}`})),m(t)}})),a.a.createElement(r.b,{display:"flex",marginTop:5,position:"relative",flex:"none"},a.a.createElement(r.b,{position:"absolute",top:!0,right:!0,bottom:!0,left:!0,display:"flex",justifyContent:"center",alignItems:"center"},a.a.createElement(S,{index:c,count:I})),a.a.createElement(r.b,{flex:"grow"}),a.a.createElement(r.b,{flex:"none",position:"relative",minWidth:100},a.a.createElement(r.c,{onClick:()=>{h&&n(h,p);const e=Object.keys(p);Object(x.a)(101,{view:370,viewParameter:3321,component:13430,element:96,objectId:`${c}_${e.length}`}),m({}),c+1===I?t():d(c+1)},color:"red",text:o.a._("Next","Button caption to go to next survey question"),size:"lg"}))))}var j=n("mBmT");function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const D=122;function L({image:{url:e,height:t,width:n},idx:o}){const s=R(Object(i.useState)(!1),2),l=s[0],c=s[1],d=R(Object(i.useState)(!0),2),u=d[0],p=d[1];Object(i.useEffect)(()=>()=>{p(!1)},[]);const m={backgroundImage:`url(${e})`,backgroundSize:"cover",transformCenter:"50% 50%",transform:l?"scale(1)":"scale(0.01)",transition:"all 150ms"},h=D*t/n;return a.a.createElement(r.b,{position:"relative",key:o},a.a.createElement(r.b,{height:1,width:1,position:"absolute",bottom:!0,right:!0},a.a.createElement(r.o,{src:e,onLoad:()=>{setTimeout(()=>u&&c(!0),1e3*Math.random())},naturalWidth:1,naturalHeight:1,alt:""})),a.a.createElement(r.b,{position:"relative",margin:1,dangerouslySetInlineStyle:{__style:m},height:h,width:D,shape:"rounded",overflow:"hidden"}))}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(){const e=A(Object(i.useState)(!1),2),t=e[0],n=e[1],o=A(Object(i.useState)(!1),2),s=o[0],l=o[1];t||(n(!0),setTimeout(()=>l(!0)));const c={transition:"transform 300000ms linear",transform:s?"translateY(-4600px)":"translateY(0px)"},d=j.a,u=Math.floor(d.length/3),p=[0,1].map(e=>d.slice(e*u).concat(d.slice(0,e*u)).map((e,t)=>a.a.createElement(L,{image:e,idx:t,key:t})));return a.a.createElement(r.b,{position:"relative",width:"100%",height:"100%"},a.a.createElement(r.b,{dangerouslySetInlineStyle:{__style:c},display:"flex"},p.map((e,t)=>a.a.createElement(r.b,{display:"flex",direction:"column",key:t},e))))}function B({onComplete:e,onDismiss:t}){return a.a.createElement(r.b,{width:"100%",height:"100%"},a.a.createElement(r.b,{display:"flex",height:532},a.a.createElement(r.b,{flex:"grow",height:"100%",marginLeft:2,marginRight:7,direction:"column",justifyContent:"center",display:"flex"},a.a.createElement(r.l,{size:"sm"},o.a._("Want to make Pinterest better?")),a.a.createElement(r.b,{marginTop:5,marginBottom:3},a.a.createElement(r.J,{size:"xl"},o.a._("Pick ideas you like to improve our recommendations"))),a.a.createElement(r.b,{marginTop:12,display:"flex"},a.a.createElement(r.b,{flex:"none",minWidth:135},a.a.createElement(r.c,{onClick:e,color:"red",text:o.a._("Let's do it!","Button caption to start survey"),size:"lg"})),a.a.createElement(r.b,{marginLeft:4,flex:"none",minWidth:118},a.a.createElement(r.c,{onClick:t,text:o.a._("Not now","Button caption to start survey"),size:"lg"})),a.a.createElement(r.b,{flex:"grow"}))),a.a.createElement(r.b,{flex:"none",width:264,marginTop:-12,marginBottom:-12,marginRight:-2},a.a.createElement(M,null))))}var F=n("ePT2"),N=n("IGno"),U=n("q579");function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H={modal:{zIndex:h.a,background:"rgba(0,0,0,0.7)"},overlay:{cursor:"zoom-out"}};class V extends i.PureComponent{constructor(...e){super(...e),z(this,"state",{isMounted:!1,pins:null,answers:{},page:"splash",templateData:null}),z(this,"loadSurvey",()=>{const e=this.props.surveyLink,t=U.a.getQueryStringParamsFromUrl(e),n=t.authId,i=t.sessionId,a=t.exp_name,o=t.exp_groups,r=t.survey_version,s=e.slice(0,e.indexOf("?")),l=s.slice(s.lastIndexOf("/")+1);this.requestData={auth_id:n,anket_session_id:i,survey_id:l,survey_version:r},F.a.create("AnketVisitsResource",this.requestData).callUpdate().then(({resource_response:{data:e={}}})=>{const t=e.session_internal,n=e.session_external,i=e.anket_response;Object.assign(this.requestData,{exp_name:a,exp_groups:o,session_internal:t,session_external:n,visit_id:i&&i.visitId})}).then(this.loadTemplateData)}),z(this,"loadTemplateData",()=>{F.a.create("AnketTemplateDataResource",this.requestData).callGet().then(({resource_response:{data:e={}}})=>{Object.assign(this.requestData,{template_context:e.template_data&&e.template_data.context});const t=e.pins,n=e.template_data;this.state.isMounted&&this.setState({pins:t,templateData:n})})}),z(this,"submitAnswers",()=>{const e=this.state,t=e.answers,n=e.templateData,i={};if(!n)return;let a=0;n.variables.pin_ids.forEach(e=>{i[`relevance_${e}`]=void 0===t[e]?0:t[e],1===t[e]&&(a+=1)}),Object(x.a)(7301,{view:370,viewParameter:3321,objectId:a.toString()}),F.a.create("AnketAnswersResource",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){z(e,t,n[t])})}return e}({},this.requestData,{answers:i})).callUpdate()}),z(this,"handleComplete",()=>{const e=this.state.page;"splash"===e?(this.setState({page:"question"}),Object(x.a)(13,{view:370,viewParameter:3321,component:13430})):"question"===e?(this.setState({page:"ending"}),Object(x.a)(13,{view:370,viewParameter:3321,component:13431})):"ending"===e&&this.handleDismiss()}),z(this,"updateAnswers",(e,t)=>{const n=this.state.answers,i=Object.assign({},n);0===Object.keys(t).length?e.forEach(e=>i[e.cacheable_id]=0):e.forEach(e=>{i[e.cacheable_id]=t[e.cacheable_id]?1:-1}),this.setState({answers:i})}),z(this,"handleDismiss",()=>{const e=this.props,t=e.onDismiss,n=e.onComplete,i=this.state.page;this.submitAnswers(),"ending"===i?n():t()})}componentDidMount(){this.setState({isMounted:!0}),document.body&&(document.body.style=document.body.style||{},document.body.style.overflow="hidden"),this.loadSurvey(),this.props.onView(),Object(x.a)(13,{view:370,viewParameter:3321,component:13429})}componentWillUnmount(){this.setState({isMounted:!1}),document.body&&document.body.style&&(document.body.style.overflow="auto")}render(){const e=this.state,t=e.pins,n=e.page;let i;return"splash"===n?i=a.a.createElement(B,{onComplete:()=>{Object(x.a)(101,{view:370,viewParameter:3321,component:13429,element:96}),this.handleComplete()},onDismiss:()=>{Object(x.a)(101,{view:370,viewParameter:3321,component:13429,element:75}),this.handleDismiss()}}):"question"===n?i=a.a.createElement(T,{updateAnswers:this.updateAnswers,pins:t,onComplete:this.handleComplete,onDismiss:this.handleDismiss}):"ending"===n&&(i=a.a.createElement(y,{onComplete:()=>{Object(x.a)(101,{view:370,viewParameter:3321,component:13431,element:76}),this.handleComplete()}})),a.a.createElement(N.a,null,a.a.createElement(r.q,null,a.a.createElement(r.b,{position:"fixed",top:!0,left:!0,bottom:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:H.modal}},a.a.createElement(w.a,{onClick:()=>{Object(x.a)(123,{view:370,viewParameter:3321,component:9,objectId:n}),this.handleDismiss()}},a.a.createElement(r.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:H.overlay}})),a.a.createElement(r.b,{color:"white",width:800,height:600,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",shape:"rounded"},a.a.createElement(r.b,{paddingX:10,paddingY:12,width:"100%",height:"100%",display:"flex",direction:"column",alignItems:"center",justifyContent:"center",position:"relative"},i)))))}}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function W(e){const t=e.placementId;return i.createElement(m.a,{placementId:t,type:5,disableAutoView:!0},({complete:e,dismiss:t,display_data:n,view:a})=>{const o=n.anket,r=n.buttons,s=n.delay,l=n.detailed_text,c=n.subtitle_text,d=n.title_text,u=G(r,2),m=u[0],h=u[1];return o&&h.uri&&h.uri.includes("survey_version=feed_vs_feed")?i.createElement(V,{surveyLink:h.uri,onComplete:e,onDismiss:t,onView:a}):o?i.createElement(p,{acceptButtonText:h.text,bodyText:l,declineButtonText:m.text,onComplete:e,onDismiss:t,onView:a,presentationDelay:s,subtitleText:c,surveyLink:h.uri,titleText:d}):i.createElement(f,{complete:e,dismiss:t,displayData:n,view:a})})}n.d(t,"default",function(){return W})},LCmp:function(e,t,n){n.d(t,"a",function(){return o});const i=80,a="…";function o(e,t=i,n=a){let o;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t])o=e.substring(0,t);else{const n=e.lastIndexOf(" ",t);o=e.substring(0,n)}return(o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+n}},MNJ6:function(e,t,n){n.d(t,"a",function(){return r});const i={row:0,section:0},a={row:-1,section:-1},o=()=>void 0;class r{constructor(e){this.index=Object.assign({},i),this.sections=e,this.updateCallback=o,this.selectItem=o}getIndex(){return this.index}isAtStart(){const e=this.index,t=e.row,n=e.section;return 0===t&&0===n}isAtEnd(){const e=this.index,t=e.row,n=e.section,i=this.sections[n]||[];return this.sections.length===n+1&&i.length===t+1}next(){if(this.isAtEnd())return;const e=this.index,t=e.row,n=e.section;t===a.row&&n===a.section?this.index=Object.assign({},i):this.sections[n].length>t+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const e=this.index,t=e.row,n=e.section;if(t===a.row&&n===a.section)this.index=Object.assign({},i);else if(t>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const e=this.index,t=e.row,n=e.section;this.selectItem((this.sections[n]||[])[t])}setInactive(){this.index=Object.assign({},a),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},Mce2:function(e,t,n){n.d(t,"a",function(){return o});var i=n("GyhR"),a=n("+U6O");function o(e){const t=e.children,n=e.display,o=e.id;return i.createElement(a.b,{"data-test-id":o,display:n},t)}},NmHc:function(e,t,n){var i=n("GyhR"),a=n("iJ35"),o=n("+U6O");t.a=(({pinId:e,sourceUrl:t,domain:n,onClick:r,bgColor:s,size:l,iconColor:c})=>t?i.createElement(a.b,{external:!0,onClick:r,pinId:e,stopPropagation:!0,to:t},i.createElement(o.n,{bgColor:s,icon:"arrow-up-right",accessibilityLabel:n,size:l,iconColor:c})):null)},NoZx:function(e,t,n){n.d(t,"c",function(){return d}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return p});var i=n("Q6EP"),a=n.n(i),o=n("mjrg"),r=n.n(o),s=n("eB/M");function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={boardactivity:"BoardActivityResource",boardactivitycomment:"BoardActivityCommentResource"},u={BOARD:"board",BOARD_ACTIVITY:"boardactivity",BOARD_ACTIVITY_COMMENT:"boardactivitycomment"},p={[u.BOARD]:s.a.BOARD_ACTIVITYITEMS,[u.BOARD_ACTIVITY]:s.a.BOARD_ACTIVITYCOMMENTS,[u.BOARD_ACTIVITY_COMMENT]:s.a.BOARD_ACTIVITYCOMMENTS},m={},h=(e,t)=>{const n=l({},r()({},e,t),t.content?{content:t.content}:{},t.reaction_counts?{reaction_counts:t.reaction_counts}:{});return a()(e,n)?e:n},g=e=>e.reduce((e,t)=>{if(11===t.activity_type&&t.comment&&t.ref_board_activity){const n=t.comment,i=t.ref_board_activity;n&&i&&(e.push(l({},n,{user:t.user})),e.push(i),e.push(l({},t,{comment:{id:n.id},ref_board_activity:{id:i.id}})))}else e.push(t);return e},[]);t.d=((e=m,t)=>{if("RESOURCE_FETCH_COMPLETE"===t.type||"RESOURCE_FETCH_MORE_COMPLETE"===t.type){const n=t.payload,i=n.data,a=n.name,o=n.options;if("BoardActivityCommentFeedResource"===a){const t=(i||[]).reduce((t,n)=>(t[n.id]=h(e[n.id],n),t),{});return l({},e,t)}if("BoardActivityFeedResource"===a){const t=g(i||[]).reduce((t,n)=>(t[n.id]=h(e[n.id],n),t),{});return l({},e,t)}if("BoardActivityResource"===a&&i){const t=i;return l({},e,{[t.id]:h(e[t.id],t)})}if("BoardActivityCommentResource"===a&&i){const t=i,n={[t.id]:h(e[t.id],t)};if(t.root_board_activity){const i=t.root_board_activity.id;n[i]=h(e[i],t.root_board_activity)}return l({},e,n)}if("NewsHubDetailsResource"===a&&i&&i.length>0&&i[0].content_items){const t={};return i.forEach(e=>{e.content_items.forEach(e=>{const n=e.content_object&&e.content_object.type;if(n===u.BOARD_ACTIVITY_COMMENT||n===u.BOARD_ACTIVITY){const n=e.content_object;g([n]).forEach(e=>t[e.id]=e)}})}),l({},e,t)}if(["PinResource","PinPageResource"].includes(a)&&i&&i.board_activity){const t=i.board_activity;return t.board=i.board,l({},e,{[t.id]:h(e[t.id],t)})}if(("BoardFeedResource"===a||"BoardSectionPinsResource"===a)&&("react_grid_pin_with_board_activity"===o.field_set_key||"partner_react_grid_pin_with_board_activity"===o.field_set_key)||"BoardActivityPinsFeedResource"===a){const t=(i||[]).reduce((t,n)=>{const i=n.board_activity;return i&&i.id&&(t[i.id]=h(e[i.id],i)),t},{});return l({},e,t)}}else{if("ACTIVITY_ITEM_CREATED"===t.type){const n=t.payload.activityItem;return l({},e,{[n.id]:n})}if("ACTIVITY_ITEM_DELETED"===t.type){const n=t.payload,i=n.activityId,a=n.activityType;if(a===u.BOARD_ACTIVITY_COMMENT||a===u.BOARD_ACTIVITY){const t=l({},e);return delete t[i],t}}else{if("ACTIVITY_ITEM_UPDATED"===t.type){const n=t.payload.data;return l({},e,{[n.id]:h(e[n.id],n)})}if("UPDATE_ACTIVITY_ITEM_COMMENT_COUNT"===t.type){const n=t.payload,i=n.increment,a=n.id,o=e[a];if(o&&[u.BOARD_ACTIVITY_COMMENT,u.BOARD_ACTIVITY].includes(o.type)){const t=l({},o,{comment_count:i?o.comment_count+1:o.comment_count-1});return l({},e,{[a]:t})}}else if("ACTIVITY_ITEM_UPDATE_REACTION_COUNT"===t.type){const n=t.payload,i=n.increment,a=n.id,o=n.reactionType,r=e[a]||{},s=r.reaction_counts,c=void 0===s?{}:s,d=c[o]||0,u=i?o:0,p=l({},r,{reaction_counts:l({},c,{[o]:i?d+1:Math.max(d-1,0)}),reaction_by_me:u});return l({},e,{[a]:p})}}}return e})},O0w9:function(e,t,n){n.d(t,"a",function(){return m}),n.d(t,"b",function(){return h});var i=n("GyhR"),a=n.n(i),o=n("TLUb"),r=n("ui7+"),s=n.n(r),l=n("+U6O");const c=4,d=92,u=140,p=2,m=(d+p)*c-p;function h({numPreviewPins:e=c,pins:t=[],totalCount:n=0}){const i=e,r=(d+p)*i-p,m=p,h=u,g=d;return a.a.createElement(l.t,{shape:"rounded",width:r},a.a.createElement(l.b,{display:"flex"},s()(0,i).map(e=>{const r=e===i-1,s=r&&!!n&&Math.max(0,n-i)||0,l=t[e];return a.a.createElement("div",{key:e,style:{paddingRight:!r&&m}},a.a.createElement(o.a,{additionalPinCount:s,additionalPinCountSize:"sm",height:h,isLastPreview:r,pin:l&&{imageUrl:l.image_large_url,description:l.description},width:g}))})))}},OUI7:function(e,t,n){n.d(t,"a",function(){return o});const i={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},a=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=i[e.charAt(n)]||e.charAt(n);return t},o=(e,t,n="name")=>{const i=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),i=e.split(" ");let o=0;for(let r=0;r<i.length;r+=1)(a(i[r]).includes(n[o])||i[r].includes(n[o]))&&(o+=1);return o===n.length})(e[n].toLowerCase(),i))}},OWio:function(e,t,n){},Oeu6:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("HvLx"),s=n("osqL"),l=n("9Y9K"),c=n("+U6O"),d=n("UmN8"),u=n("cemY"),p=n("NmcB");function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(l.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const i=((e&&t&&e[t]||{}).carousel_data||{}).index;return void 0!==n?{carouselSlotCurrentIndex:i||n||0}:{}}),function(e){return class extends i.PureComponent{constructor(...e){super(...e),h(this,"state",{showEditModal:!1}),h(this,"onHide",()=>{this.setState({showEditModal:!1}),(this.props.onToggleModal||u.p)(!1)}),h(this,"handlePinEditButtonClick",Object(r.a)(e=>{e&&e.stopPropagation();const t=this.props,n=t.component;(t.onToggleModal||u.p)(!0),Object(p.a)(101,m({element:3},n?{component:n}:{})),this.setState({showEditModal:!0})}))}render(){const t=this.props,n=t.pinId,i=t.onDelete,o=t.onSubmit,r=t.carouselSlotCurrentIndex,l=this.state.showEditModal,u=m({},this.props,{handlePinEditButtonClick:this.handlePinEditButtonClick});return a.a.createElement(c.h,null,a.a.createElement(e,u),l&&a.a.createElement(d.a,{name:"web_change_titles"},({anyEnabled:e})=>a.a.createElement(s.a,{carouselSlotCurrentIndex:r,onDelete:i,onHide:this.onHide,onSubmit:o,pinId:n,inUserNoteExp:e})))}}})},OtLr:function(e,t,n){var i=n("Ivf5"),a=n("8J6r"),o=n("XXWR"),r=n("dBWR"),s=n("9Y9K");function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=Object(a.createSelector)(e=>e.experiences.eligibleExperiences,e=>e.experiences.mountedPlacements,(e,t)=>t.placementId,(e,t,n)=>{const i=e[n];return t[n]&&Object(o.e)(i)?i:null});t.a=Object(i.connect)(function(e,t){return{experienceForPlacement:d(e,t)}},function(e){return Object(s.bindActionCreators)({completeExperience:r.a,dismissExperience:r.b,fetchAllExperiences:r.d,fetchExperienceForPlacement:r.c,triggerExperimentsForPlacement:r.i,viewExperience:r.h},e)},function(e,t,n){return l({experienceClient:l({},e,t)},n)})},Ovv4:function(e,t,n){var i=n("GyhR"),a=n("HW6o"),o=n("NmcB");t.a=(({beginEvent:e=2800,endEvent:t=2801,component:n},r)=>{const s=Object(a.a)(r);return a=>{let r=Object.assign({},a);return i.createElement(s,Object.assign({onVisibilityChanged:i=>{i?Object(o.a)(e,{component:n}):Object(o.a)(t,{component:n})}},r))}})},P4K9:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("z/1d"),s=n("ePT2"),l=n("qFs9"),c=n("Irlq"),d=n("+U6O");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=5,m=27,h=38,g=40,b=13;t.a=Object(l.a)(class extends a.a.Component{constructor(...e){super(...e),u(this,"state",{isOpen:this.props.editing,recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",()=>{this.setState({isOpen:!1})}),u(this,"mounted",!1),u(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),u(this,"handleKeyDown",e=>{e.keyCode===h?this.handlePrevHashtag(e):e.keyCode===g?this.handleNextHashtag(e):e.keyCode===m?this.handleClose(e):e.keyCode===b&&this.handleSubmit(e)}),u(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),u(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),u(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),u(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),u(this,"callResource",e=>{(0,this.props.makeCancelablePromise)(s.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,p),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}UNSAFE_componentWillReceiveProps(e){e.query!==this.props.query&&""!==e.query&&this.callResource(e.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const e=this.state,t=e.recommendations,n=e.resourceLoaded,i=e.selectedIndex,s=this.props,l=s.anchor,u=s.idealDirection,p=t.filter(e=>e.query),m=u||"down",h="flyout_"+p.length;return n&&p.length>0?a.a.createElement("div",{className:"HashtagFlyout"},a.a.createElement(d.j,{key:h,anchor:l,idealDirection:m,onDismiss:this.onDismiss,size:"sm"},a.a.createElement("div",{className:"HashtagRecommendations"},p.length>0?p.map((e,t)=>a.a.createElement("div",{className:"HashtagItem",key:e.query},a.a.createElement(d.O,{onTouch:t=>this.addHashtag(e.query),fullWidth:!1},a.a.createElement(d.b,{display:"flex",justifyContent:"between",alignItems:"center",color:t===i?"lightGray":"transparent",deprecatedPadding:1},a.a.createElement(d.b,{flex:"grow"},a.a.createElement(d.J,{inline:!0,size:"sm",bold:!0},e.query)),a.a.createElement(d.b,{flex:"none"},a.a.createElement(d.J,{inline:!0,size:"xs"},Object(c.b)(o.a.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout"),{count:a.a.createElement(r.a,{value:Number(e.pin_count),key:"pinCount"})}))))))):null))):null}})},PCgV:function(e,t,n){n.d(t,"c",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return l});const i=["AU","CA","GB","IE","NZ","US","FR","DE","AT","IT","ES","NL","BE","PT","CH","NL","BE","PT","CH","SE","NO","DK","FI"],a=["US","GB","IE","NZ","AU","CA","FR","DE","AT","IT","ES","NL","BE","PT","CH","DK","SE","NO","FI"],o=e=>i.includes(e.toUpperCase()),r=e=>a.includes(e.toUpperCase()),s=e=>e.reduce((e,t)=>(e||0)+(t||0),0),l=(e,t,n)=>{const i={numDays:n};return t.forEach(t=>{if(e[t].length>=2*n){const a=s(e[t].slice(0,n)),o=s(e[t].slice(-n));i[t]={total:o,trend:a?(o-a)/a:0}}}),i}},PG6j:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("CST5"),s=n("QG6s");const l=["mousedown","touchstart"];class c extends i.Component{constructor(...e){var t,n,i;super(...e),i=(e=>{const t=e.target;e.stopPropagation(),e.preventDefault(),this.node&&this.node.contains(t)||this.props.onDeleteConfirmation(null)}),(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){l.forEach(e=>{document.body&&document.body.addEventListener(e,this.handleClick)})}componentWillUnmount(){l.forEach(e=>{document.body&&document.body.removeEventListener(e,this.handleClick)})}render(){const e=this.props,t=e.onDeleteConfirmation,n=e.didItData.id;return a.a.createElement(s.a,{onHide:t.bind(null,null)},a.a.createElement("div",{className:"ConfirmDialog Module inModal",style:{outline:"none"}},a.a.createElement("form",{className:"standardForm",ref:e=>{this.node=e}},a.a.createElement("h1",null,o.a._("Are you sure?","Confirmation dialog for deleting data")),a.a.createElement("div",{className:"body"},a.a.createElement("p",null,o.a._("This will remove this photo","Confirmation dialog for deleting data"))),a.a.createElement("div",{className:"formFooter"},a.a.createElement("div",{className:"formFooterButtons"},a.a.createElement(r.a,{onClick:t.bind(null,null),text:o.a._("Cancel","Cancel the deleting data in a modal form")}),a.a.createElement(r.a,{className:"confirm",onClick:t.bind(null,n),text:o.a._("Delete","Confirmation of deleting data"),type:"primary"}))))))}}},PTtk:function(e,t,n){n.d(t,"a",function(){return r});var i=n("GyhR"),a=n("+U6O"),o=n("yzmC");function r({children:e,isWideVideo:t=!1}){return i.createElement(o.a.Consumer,null,({showCloseupContentRight:n,viewportSize:o})=>{const r=n&&"wide"===o;return i.createElement(a.b,{display:r?"flex":void 0,paddingX:6,width:"100%",direction:t?"column":void 0},e)})}},Pj55:function(e,t,n){n.d(t,"a",function(){return r});var i=n("GyhR"),a=n.n(i),o=n("Qo1m");function r(){return a.a.createElement(a.a.Fragment,null,o.a._("300 million","[m10n] number of monthly active users on pinterest"))}},Pxtx:function(e,t,n){var i=n("GyhR"),a=n("Kb0Y"),o=n("iJ35"),r=n("+U6O");t.a=(({bold:e,description:t,external:n,hasDividerAfter:s,icon:l,onClick:c,text:d,url:u})=>{const p=i.createElement(r.b,{role:"listitem",overflow:"hidden"},i.createElement(a.a,{bold:e,description:t,icon:l,text:d}));return i.createElement(r.b,null,u?i.createElement(o.b,{to:u,external:n,onClick:c},p):i.createElement(r.O,{onTouch:c,fullWidth:!1},p),s&&i.createElement(r.i,null))})},QG2C:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Mr4W"),r=n.n(o);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(...e){super(...e),s(this,"state",{horizontalOffset:0,verticalOffset:0}),s(this,"calculateAndSetOffsets",(e,t,n,i)=>{const a=t/2,o=e/2;this._subjectWidth=i;const r=-((this.props.subjectWidthOverride||i)/2-a),s=-((this.props.subjectHeightOverride||n)/2-o);this.setState({horizontalOffset:r,verticalOffset:s})}),s(this,"positionSubject",()=>{const e=this._subject,t=this.props.anchor;if(!t||!e)return;const n=r.a.findDOMNode(t);if(n&&n instanceof Element){const t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),a=t.height,o=t.width,r=i.height,s=i.width;this.calculateAndSetOffsets(a,o,r,s)}})}componentDidMount(){this.positionSubject()}shouldComponentUpdate(e,t){const n=this.props,i=this.state;return!(Object.keys(n).every(t=>n[t]===e[t])&&Object.keys(i).every(e=>i[e]===t[e]))}componentDidUpdate(){const e=this._subject;if(e){e.getBoundingClientRect().width!==this._subjectWidth&&this.positionSubject()}}render(){return i.createElement("div",{ref:e=>{this._subject=e},style:{position:"absolute",left:this.state.horizontalOffset,top:this.state.verticalOffset}},this.props.children)}}var c=n("hvnN"),d=n.n(c),u=n("+U6O");function p(e){const t=e.paused,n=e.size,a=void 0===n?135:n;return i.createElement(u.b,{dangerouslySetInlineStyle:{__style:{animationIterationCount:t?0:"infinite",outline:"none",boxShadow:"none"}},display:t?"none":"block",height:a,position:"relative",width:a},i.createElement("div",{className:"PulsarNewInnerCircle"},i.createElement("div",{className:"outerCircle"})))}p.propTypes={paused:d.a.bool,size:d.a.number};var m=n("UmN8");const h=136;t.a=function(e){const t=e.anchor,n=e.onTouch,i=e.paused;return a.a.createElement(l,{anchor:t,subjectHeightOverride:h,subjectWidthOverride:h},a.a.createElement(u.O,{onTouch:({event:e})=>n(e),shape:"circle",fullWidth:!1},a.a.createElement(m.a,{name:"web_nux_new_gestalt_pulsar_animation"},({anyEnabled:e})=>e?a.a.createElement(p,{paused:i}):a.a.createElement(u.z,{paused:i}))))}},QG6s:function(e,t,n){var i=n("GyhR"),a=n("e5Rh"),o=n.n(a),r=n("PNko"),s=n.n(r),l=n("Qo1m"),c=n("dg2R"),d=n("IGno"),u=n("+U6O");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o.a.defaultStyles={};t.a=class extends i.Component{constructor(...e){super(...e),p(this,"pauseImpressionsTracking",()=>{c.b.pause()}),p(this,"resumeImpressionsTracking",()=>{c.b.resume()}),p(this,"handleHide",()=>{this.resumeImpressionsTracking(),this.props.onHide&&this.props.onHide()}),p(this,"handleOpen",()=>{this.pauseImpressionsTracking(),this.props.onAfterOpen&&this.props.onAfterOpen()})}componentDidMount(){this.pauseImpressionsTracking()}componentWillUnmount(){this.resumeImpressionsTracking()}render(){const e=this.props,t=e.allowClickAndDrag,n=e.className,a=e.loading,r=e.noButton,c=e.onHide,p=e.type,m=e.style,h=void 0===m?{}:m,g=s()(n,"dangerouslyDisableFocusStyle","Module","ReactModal__Content","inModal",{modalHasClose:!!c},{ConfirmDialog:"confirm"===p},{PushNotificationSettings:"notifications"===p}),b=a?i.createElement(u.F,{accessibilityLabel:l.a._("Loading content","Accessibility label for loading modal content"),show:!0}):null,f=c&&!r?i.createElement("button",{className:"Button Module borderless cancelButton closeModal inModal show",onClick:this.handleHide,type:"button"},i.createElement(u.m,{icon:"cancel",accessibilityLabel:l.a._("Close modal"),size:20})):null;return i.createElement(d.a,{allowClickAndDrag:t},i.createElement(o.a,{ariaHideApp:!1,className:g,isOpen:!0,onAfterOpen:this.handleOpen,onRequestClose:this.handleHide,shouldCloseOnOverlayClick:!0,style:h},b,this.props.children,f))}}},QPas:function(e,t,n){n.d(t,"c",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return p}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return h}),n.d(t,"f",function(){return g});var i=n("GyhR"),a=n.n(i),o=n("Aa8G"),r=n("Qo1m"),s=n("Irlq"),l=n("+Yt8"),c=n("+U6O");const d=(e,t,n)=>{const i=(e=>{const t=e.toString(),n=t.length;if(n>6){const e=t.slice(0,n-6);return Object(s.b)(r.a.ngettext("{{ num }} million","{{ num }} million",parseInt(e,10),"[m10n] Audience size in millions for a pin, e.g. 12 million"),{num:e}).join("")}if(n>3){const e=t.slice(0,n-3);return Object(s.b)(r.a.ngettext("{{ num }} thousand","{{ num }} thousand",parseInt(e,10),"[m10n] Audience size in thousands for a pin, e.g. 12 thousand"),{num:e}).join("")}return""})(t);return Object(s.b)(r.a._("Great {{boldedTopic}} Pin! Reach more of the estimated {{ boldAudienceSize }} people interested in Pins like yours.","[m10n] Telling a user their pin is great, and that they can reach a related audience of a certain size. Variables are emphasized/bolded"),{boldedTopic:a.a.createElement(c.J,{key:"boldedTopic",size:n,inline:!0,bold:!0},e),boldAudienceSize:a.a.createElement(c.J,{key:"boldAudienceSize",size:n,inline:!0,bold:!0},i)})},u=e=>{const t=parseFloat(e);return!isNaN(t)&&Number.isFinite(t)?t:0},p=(e,t,n,i,a)=>{const o=n&&String(n.estimate)||"0",r=n&&n.score||"0",s=n&&n.score&&String(n.id)||"0";120===e?Object(l.c)("render",a,e,t,{audience_sizing_reach_estimation:o,audience_sizing_coterie_score:r,audience_sizing_coterie_id:s,pin_id:i}):101===e&&Object(l.c)("click",a,e,t,{audience_sizing_reach_estimation:o,audience_sizing_coterie_score:r,audience_sizing_coterie_id:s,pin_id:i})},m=e=>{const t=o.a.getInstance().v2GetGroup("smb_create_pin_audience_size_upsell")||"";return e.isPartner&&(t.startsWith("enabled")||"control"===t)},h=e=>{const t=o.a.getInstance(),n=t.v2GetGroup("smb_create_pin_audience_size_upsell")||"";["control_perf","enabled_perf"].includes(n)?t.v2ActivateExperiment("smb_create_pin_audience_size_upsell"):e&&["enabled","control"].includes(n)&&t.v2ActivateExperiment("smb_create_pin_audience_size_upsell")},g=e=>{const t=o.a.getInstance().v2GetGroup("smb_create_pin_audience_size_upsell")||"";return e&&"enabled"===t}},QmNf:function(e,t,n){const i={1:{reactionType:1,backgroundColor:"#ffe0e0",iconColor:"#e60023"},6:{reactionType:6,backgroundColor:"#c6eade"},7:{reactionType:7,backgroundColor:"#dceef5"},8:{reactionType:8,backgroundColor:"#fee9b6",iconColor:"#b469eb"},9:{reactionType:9,backgroundColor:"#efe1fb",iconColor:"#f9b804"}};t.a=i},QxXR:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,i=0,a=[];++t<n;){var o=e[t];o&&(a[i++]=o)}return a}},Qzkb:function(e,t,n){n.d(t,"c",function(){return O}),n.d(t,"a",function(){return k}),n.d(t,"d",function(){return I}),n.d(t,"b",function(){return P});var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("167h"),s=n("Ae3S"),l=n("4fCo"),c=n("Qo1m"),d=n("BQ43"),u=n("Irlq"),p=n("DKjr"),m=n("NmcB"),h=n("TzyI"),g=n("BY4F"),b=n("Y2BC"),f=n("21DP"),y=n("YAB1"),v=n("jfHI"),w=n("9Y9K"),E=n("+U6O"),_=n("eB/M");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=2;class S extends i.Component{constructor(...e){super(...e),C(this,"state",{inCreationMode:!1,isLoadingNewCreatedComment:!1}),C(this,"handleAddComment",e=>{const t=this.props,n=t.createComment,i=t.objectId,a=t.objectType,o=t.pinId,r=t.updateCommentCount;this.toggleCreationMode(),this.setState({isLoadingNewCreatedComment:!0}),n({objectType:a,objectId:i,pinId:o,tags:e.tags,text:e.contentMarkdown}).then(()=>this.setState({isLoadingNewCreatedComment:!1})),r(o||i,1),a===f.a.pin&&Object(m.a)(7,{objectId:this.props.pinId})}),C(this,"toggleCreationMode",()=>this.setState({inCreationMode:!this.state.inCreationMode})),C(this,"renderComments",()=>{const e=this.props,t=e.didItOwnerId,n=e.depth,i=void 0===n?0:n,o=e.feedItems,r=e.feedResource.isLoaded,d=e.isManagedView,u=e.objectId,p=e.objectType,m=e.pinDomainOwnerId,h=e.pinId,g=e.variant,b=this.state.isLoadingNewCreatedComment;return a.a.createElement(E.b,null,o&&o.length>0&&a.a.createElement(l.a,null,e=>a.a.createElement(E.b,null,o.map((n,o)=>a.a.createElement(E.b,{marginBottom:2,key:n.id},a.a.createElement(s.a,{aggregatedCommentId:n.id,depth:i+1,didItOwnerId:t,isManagedView:d,objectType:p,parentObjectId:h||u,pinDomainOwnerId:m,viewerId:e.id,variant:g}))))),a.a.createElement(E.F,{accessibilityLabel:c.a._("Comments loading"),show:!r||b}))}),C(this,"renderLeaveAComment",()=>{const e=this.props,t=e.objectType,n=e.parentObjectId,i=e.privatePin,o=this.state.inCreationMode;return a.a.createElement(E.b,{display:"flex",marginTop:6},a.a.createElement(E.b,{flex:"grow","data-test-id":"add-comment"},a.a.createElement(r.a,{hideAddObjects:!0,onAddItem:this.handleAddComment,onCancelItem:this.toggleCreationMode,onEnter:this.toggleCreationMode,objectType:t,onAddPinModeChange:()=>{},parentObjectId:n,privatePin:i,replyToObject:null,statusType:o?"textInflightCreation":"textStaticDisplay"})))})}render(){const e=this.props,t=e.commentCount,n=e.feedItems,i=e.feedResource,o=i.isLoaded,r=i.isAtEnd,s=i.fetchMore,l=e.isManagedView,p=e.objectType,m=e.variant,h=this.state.isLoadingNewCreatedComment,g=!!n&&o&&t>n.length&&!r,b=n?t-n.length:0,y=Object(u.b)(c.a.ngettext("{{commentCount}} comment","{{commentCount}} comments",b,"Show comments link with count"),{commentCount:String(b)}),v=p===f.a.aggregatedComment,w=p===f.a.pin&&(n&&0===n.length||0===t)&&o&&!h,_="default"===m;return a.a.createElement(E.b,{"data-test-id":"aggregated-comment-list",column:12,marginTop:v&&!_?2:0,paddingY:v||_?0:2},this.renderComments(),g&&a.a.createElement(E.b,{marginTop:3},a.a.createElement(d.a,{text:y,handleClick:s})),w&&a.a.createElement(E.b,{paddingY:_?0:2},a.a.createElement(E.J,{size:_?"sm":"md"},c.a._("Share feedback, ask a question or give a high five"))),p!==f.a.aggregatedComment&&!l&&this.renderLeaveAComment())}}C(S,"defaultProps",{reverseOrder:!1});const x=(e,t)=>{const n=t.objectType;let i=(e,t)=>null;return n===f.a.pin?i=Object(w.bindActionCreators)(p.a,e):n===f.a.didIt&&(i=Object(w.bindActionCreators)(h.e,e)),{createComment:Object(w.bindActionCreators)(y.a,e),updateComment:Object(w.bindActionCreators)(v.b,e),updateCommentCount:i}};const k=Object(w.compose)(Object(o.connect)((e,t)=>{const n=e.feeds[_.a.AGGREGATED_COMMENTS];return{feedItems:function(e,t){return e?e.filter((e,n,i)=>i.map(e=>e[t]).indexOf(e[t])===n):e}((void 0===n?{}:n)[t.objectId],"id")||[]}},x),g.b,Object(b.b)({name:"AggregatedCommentFeedResource",key:"feedResource",options:e=>({objectId:e.objectId,page_size:e.initialLoadCount||2,redux_normalize_feed:!0,featured_ids:e.featuredCommentId?[e.featuredCommentId]:null})}))(S),I=Object(w.compose)(Object(o.connect)((e,t)=>{const n=e.feeds[_.a.AGGREGATED_COMMENTS];return{feedItems:(void 0===n?{}:n)[t.objectId]||[]}},x),Object(b.b)({name:"AggregatedCommentReplyFeedResource",key:"feedResource",options:e=>({objectId:e.objectId,page_size:e.initialLoadCount||2,redux_normalize_feed:!0})}))(S),P=Object(w.compose)(Object(o.connect)((e,t)=>{const n=e.feeds[_.a.AGGREGATED_COMMENTS];return{feedItems:(void 0===n?{}:n)[t.objectId]||[]}},x),Object(b.b)({name:"DidItCommentsResource",key:"feedResource",options:e=>({objectId:e.objectId,page_size:e.initialLoadCount||2,redux_normalize_feed:!0})}))(S)},RPeA:function(e,t,n){const i=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},a=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};a.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new i(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},a.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},a.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},a.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},a.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1},t.a=a},RYWx:function(e,t,n){var i=n("GyhR"),a=n("Qo1m"),o=n("E56J"),r=n("Je/+");const s=()=>o.default.increment("windows.download.blob.error"),l=(e,t,n)=>{const i=new window.Windows.Storage.Pickers.FileSavePicker;i.suggestedStartLocation=window.Windows.Storage.Pickers.PickerLocationId.picturesLibrary;const r=(e=>{const t=e.split("/"),n=t[t.length-1],i=n.split(".");if(i.length>1){const e=i.pop();return{extension:`.${e}`,extensionName:e.toUpperCase(),name:i.join()}}return{extension:".",extensionName:a.a._("Unknown","Label for file picker drop down when the file type is not known"),name:n}})(t),l=r.extension,c=r.extensionName,d=r.name;i.suggestedFileName=n||d,i.fileTypeChoices.insert(c,[l]),i.pickSaveFileAsync().then(t=>{t&&(window.Windows.Storage.CachedFileManager.deferUpdates(t),t.openAsync(window.Windows.Storage.FileAccessMode.readWrite).then(t=>{const n=e.msDetachStream();window.Windows.Storage.Streams.RandomAccessStream.copyAsync(n,t).then(()=>{t.flushAsync().done(()=>{n.close(),t.close(),o.default.increment("windows.download.blob.success")},s)},s)},s))})};t.a=(({filename:e,imgSrc:t,category:n})=>{if(!t)return null;return i.createElement(r.b,{onClick:()=>{((e,t)=>{try{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onreadystatechange=(()=>{if(4===i.readyState)if(200!==i.status)o.default.increment("windows.download.blob.nodownload",.1,{status:i.status});else{const n=i.response;l(n,e,t)}}),i.send(null)}catch(n){o.default.increment("windows.download.blob.xhrexception",.1,{error:n})}})(t,e)},text:a.a._("Download image","Button to download Pin image")})})},Reqc:function(e,t,n){n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var i=n("GyhR"),a=n("+U6O");function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const r={__style:{borderRadius:4}},s={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function l(){return i.createElement(a.b,{alignItems:"center",color:"red",dangerouslySetInlineStyle:r,display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},i.createElement(a.b,{dangerouslySetInlineStyle:s,display:"inlineBlock",height:18,position:"relative",shape:"circle",width:18}))}function c(e){let t=e.disabled,n=e.submitting,r=e.text,s=o(e,["disabled","submitting","text"]);return i.createElement(a.b,{display:"flex",position:"relative"},n&&i.createElement(l,null),i.createElement(a.c,Object.assign({},s,{inline:!0,color:"red",type:"submit",text:r,disabled:t||n})))}},RjCY:function(e,t,n){n.r(t),n.d(t,"default",function(){return b});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("yXM0"),s=n("iJ35"),l=n("z/1d"),c=n("NmcB"),d=n("+U6O");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=350,m=({isStoryPin:e=!1,isVideo:t})=>{const n=[{iconType:"play",displayText:o.a._("Video views","Label for views of a video pin on closeup page"),field:"video_views"},{iconType:"clock",displayText:o.a._("Avg. time","Label for average time of a video pin on closeup page"),field:"video_average_time"},{iconType:"angled-pin",displayText:o.a._("Saves","Label for saves of a video pin on closeup page"),field:"save"}],i=[{iconType:"eye",displayText:o.a._("Impressions","Label for impressions of a pin on closeup page"),field:"impression"},{iconType:"angled-pin",displayText:o.a._("Saves","Label for saves of a pin on closeup page"),field:"save"},{iconType:"arrow-up-right",displayText:o.a._("Link clicks","Label for click-throughs of a pin on closeup page"),field:"clickthrough",iconSize:14}];return t?n:i},h=()=>{Object(c.a)(101,{view:3,component:13077,element:10573})},g=({statsData:e,statsList:t})=>a.a.createElement(a.a.Fragment,null,t.map(({iconType:t,iconSize:n=16,field:i,displayText:o},r)=>a.a.createElement(d.b,{key:r,column:4,display:"flex",justifyContent:"center"},a.a.createElement(d.b,{"data-test-id":"pin-stats-closeup",marginTop:1},a.a.createElement(d.m,{accessibilityLabel:o,color:"darkGray",icon:t,size:n})),a.a.createElement(d.b,{marginLeft:1},a.a.createElement(d.J,{bold:!0,size:"xl"},a.a.createElement(l.a,{value:e[i],shortform:!0,shortformMaximumFractionDigits:1})),a.a.createElement(d.J,{overflow:"normal",bold:!0,size:"sm"},o)))));function b(e){const t=e.pinId,n=e.stats,i=e.isStoryPin,l=e.isVideo,c=e.showDivider,b=void 0===c||c,f=e.showMoreStatsLink,y=void 0===f||f,v=e.show90Days,w=m(e);if(!n)return null;const E=v?"90d":"30d",_=l||i?n.all_time:n[E];if(!_||0===Object.keys(_).length)return null;const C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}({},_,l?{video_average_time:Object(r.a)(_.video_average_time)}:{});return a.a.createElement(d.b,{marginTop:2},a.a.createElement(d.b,{display:"flex",justifyContent:"around",paddingY:2},a.a.createElement(g,{statsData:C,statsList:w})),a.a.createElement(d.b,{width:"100%",maxWidth:p,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}}},y&&a.a.createElement(s.b,{key:"pinAnalyticsLink",onClick:h,to:`/pin/${t}/analytics`},a.a.createElement(d.c,{text:o.a._("See more stats","Button that links to detailed pin stats page")}))),y&&a.a.createElement(d.b,{"data-test-id":"onlyYouCanSeeThis",display:"flex",justifyContent:"center",alignItems:"center",paddingY:3},a.a.createElement(d.b,{display:"inlineBlock",marginRight:1},a.a.createElement(d.J,{bold:!0,size:"xs"},l||i?o.a._("Lifetime of Pin","Time range of the pin stats data"):o.a._("Last 30 days.","Time range of the pin stats data"))),a.a.createElement(d.J,{size:"xs"},o.a._("Only you can see this","Prompt that only you can see the analytics page"))),b&&a.a.createElement(d.i,null))}},Rs3f:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("D+W/"),r=n("E56J");t.a=class extends a.a.PureComponent{constructor(...e){var t,n,i;super(...e),i=(e=>{const t=this.props,n=t.onClose,i=t.goToNext,a=t.goToPrevious,s=e.keyCode||e.code;if(e.ctrlKey||e.metaKey)return;const l=((document.activeElement||{}).tagName||"").toLowerCase();["input","select","button","textarea"].includes(l)||document.activeElement&&document.activeElement.isContentEditable||(s===o.a.KeyCode.LEFT?(e.preventDefault(),e.stopPropagation(),a(),r.default.increment("web_keydown_left")):s===o.a.KeyCode.RIGHT?(e.preventDefault(),e.stopPropagation(),i(),r.default.increment("web_keydown_right")):s===o.a.KeyCode.ESCAPE&&(e.preventDefault(),e.stopPropagation(),n()))}),(n="handleKeyDown")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}},SMmS:function(e,t,n){n.d(t,"a",function(){return h}),n.d(t,"c",function(){return y});var i=n("GyhR"),a=n("Ivf5"),o=n("jlBG"),r=n("E56J"),s=n("hvnN"),l=n.n(s),c=n("7Iyi");function d(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=(e,t)=>JSON.stringify(e)===JSON.stringify(t);function h(e,t){return Object(o.a)("function"==typeof e?e(t):e||{})}const g=(e,t={})=>n=>{var a,o;return o=a=class extends i.Component{constructor(...n){super(...n),p(this,"loadData",n=>{const i=t;e.forEach(({options:e,name:t})=>{const a="function"==typeof e?e(n):e;n.dispatch(Object(c.a)(t,a,void 0,void 0,i.traceLoggerHandlerName))})}),p(this,"loadMoreData",n=>{const i=t;e.forEach(({options:e,name:t})=>{const a="function"==typeof e?e(n):e;n.dispatch(Object(c.d)(t,a,void 0,void 0,i.traceLoggerHandlerName))})}),p(this,"resourcesHash",JSON.stringify(e.map(e=>u({},e,{options:h(e.options,this.props)}))))}componentDidMount(){!1!==t.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}shouldComponentUpdate(e){const t=[...Object.keys(this.props),...Object.keys(e)];for(const n of t)if("resourceData"===n){if(!m(this.props.resourceData,e.resourceData))return!0}else if(this.props[n]!==e[n])return!0;return!1}UNSAFE_componentWillUpdate(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);const n=JSON.stringify(e.map(e=>u({},e,{options:h(e.options,t)})));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}render(){const e=this.props,t=e.error,a=e.isAtEnd,o=e.isFetching,r=e.resourceData,s=e.resourceLoaded,l=d(e,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete l.onResourceError,delete l.onResourceLoaded,i.createElement(n,Object.assign({},r,l,{error:t,fetchMoreData:()=>this.loadMoreData(this.props),isAtEnd:a,isFetching:o,refreshData:()=>this.loadData(this.props),resourceLoaded:s}))}},p(a,"WrappedComponent",n),p(a,"displayName",1===e.length?e[0].name:`${e.length} resources`),p(a,"propTypes",{dispatch:l.a.func.isRequired,error:l.a.any,isFetching:l.a.bool.isRequired,onResourceError:l.a.func,onResourceLoaded:l.a.func,resourceData:l.a.objectOf(l.a.any).isRequired,resourceLoaded:l.a.bool.isRequired}),o},b=(e,t={})=>n=>{const i={name:e.name,options:e.options||{},key:e.key||"data"};return Object(a.connect)((e=>{const t={};return e=>(n,i)=>{const a=n.resources,o=a.fetching,s=a.data,l=e.some(({name:e,options:t})=>o[e]&&o[e][h(t,i)]),c={};let d;const u=[];e.forEach(({name:e,options:n,key:a})=>{if(s[e]){const o=h(n,i);if(t[e]||(o in s[e]?r.default.increment("webapp.withResource.cache-hit",.05,{resource:e,cache_size:Object.keys(s[e]).length,level:"success",v:1}):Object.keys(s[e]).length?r.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:e,cache_size:Object.keys(s[e]).length,level:"error",v:1,xFoundKeys:JSON.stringify(Object.keys(s[e])),xExpectedKey:o}):r.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:e,cache_size:Object.keys(s[e]).length,level:"warn",v:1,xFoundKeys:null,xExpectedKey:o})),t[e]=!0,s[e][o]){const t=s[e][o],n=t.data,i=t.nextBookmark,r=t.error;c[a]=n,u.push(i),r&&(d=r)}}else r.default.increment("webapp.withResource.no-cache",.05,{resource:e,cache_size:0,level:"error",v:1})});const p=e.every(({key:e})=>void 0!==c[e]);return{resourceLoaded:p,isAtEnd:p&&!l&&u.every(e=>"-end-"===e),isFetching:l,nextBookmark:u[0],resourceData:c,error:d}}})()([i]))(g([i],t)(n))};t.b=b;const f=({name:e,options:t})=>(n,i)=>{const a=n.resources.data;if(a[e]){const n=h(t,i);if(a[e][n]){return{data:a[e][n].data}}}return{data:null}};function y({name:e,options:t}){return Object(a.connect)(f({name:e,options:t||{}}))}},T42Z:function(e,t,n){t.a=["#e60023","#F23434","#E3780C","#364A4C","#004B91","#8046A5","#0A6955","#0FA573","#133A5E","#0084FF","#5B2677","#B469EB","#6E0F3C"]},THGe:function(e,t,n){n.d(t,"a",function(){return r});var i=n("GyhR"),a=n.n(i),o=n("d9lF");function r({accessibilityLabel:e,handleClick:t,icon:n}){return a.a.createElement(o.a,{accessibilityLabel:e,onClick:t,icon:n})}},TLUb:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("VSY/"),s=n("+U6O");function l({pinCount:e,height:t,size:n}){const i=Object(r.i)(o.a._("+{{ pinCount }}","+N count overlay on pin selections"),{pinCount:e});return a.a.createElement(s.b,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,.2)"}},display:"flex",justifyContent:"center",height:t},"sm"===n?a.a.createElement(s.J,{color:"white",size:"sm",bold:!0},i):a.a.createElement(s.l,{color:"white",size:"xs"},i))}function c({additionalPinCount:e,additionalPinCountSize:t="lg",pin:n,width:i,height:o,rounded:r}){return a.a.createElement(s.t,{height:o,width:i,shape:r?"rounded":"square",wash:!0},n&&a.a.createElement(s.o,{alt:n.description,color:n.dominantColor,fit:"cover",naturalHeight:o,naturalWidth:i,src:n.imageUrl},!!e&&a.a.createElement(l,{pinCount:e,height:o,size:t})))}},TMjA:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("PNko"),r=n.n(o),s=n("CtGn"),l=n("Qo1m"),c=n("iJ35"),d=n("HcgI"),u=n("z/1d"),p=n("+4EY"),m=n("hX7C"),h=n("+U6O");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=200,f=({onClick:e,showButton:t,showMore:n,trimmedUserNote:i})=>a.a.createElement(h.b,null,t?a.a.createElement(h.b,{"data-test-id":"hashtag-link"},a.a.createElement(h.J,{size:"sm",inline:!0},a.a.createElement(d.a,{text:n?i:Object(m.b)(i,b),options:{hashtags:{source:"hashtag_closeup"}}})),a.a.createElement(h.b,{display:"inlineBlock",marginStart:1},a.a.createElement(h.O,{fullWidth:!1,onTouch:e},a.a.createElement(h.J,{bold:!0,size:"sm",inline:!0},n?l.a._("Less"):l.a._("More"))))):a.a.createElement(h.b,{"data-test-id":"hashtag-link"},a.a.createElement(h.J,{inline:!0,size:"sm"},a.a.createElement(d.a,{text:i,options:{hashtags:{source:"hashtag_closeup"}}}))));var y=class extends i.Component{constructor(...e){super(...e),g(this,"state",{showMore:!1}),g(this,"handleClick",()=>{this.setState({showMore:!this.state.showMore})})}render(){const e=this.props,t=e.inUserNoteExp,n=e.isLfvSimplifiedCloseupExp,i=e.legoStyles,o=e.onProfileClick,d=e.pin,m=e.savedToText,g=d.aggregated_pin_data,y=d.closeup_user_note,v=d.pinner,w=void 0===v?{}:v,E=d.unified_user_note,_=w.username,C=w.image_medium_url,O=w.full_name,S=`/${_}/`,x=((t?E:y)||"").trim(),k=((g||{}).aggregated_stats||{}).saves;return a.a.createElement(p.a,null,({isImmersiveCloseup:e})=>a.a.createElement(h.b,e?{dangerouslySetInlineStyle:{__style:i}}:{paddingY:3},a.a.createElement("div",{className:"AggregatedCloseupCard",style:{padding:"0",borderTop:"none"}},a.a.createElement("div",{className:r()("pinActivityContainer","flex","flex-column",{center:!x}),style:{padding:0}},a.a.createElement(h.b,{display:"flex"},a.a.createElement(c.b,{onClick:o,to:S},a.a.createElement(s.a,null,({active:t,focused:n,hovered:i,onBlur:o,onFocus:r,onMouseEnter:s,onMouseLeave:l})=>a.a.createElement(h.b,{marginEnd:2,onFocus:r,onBlur:o,onMouseEnter:s,onMouseLeave:l},a.a.createElement(h.t,{wash:e&&(i||t||n),shape:"circle"},a.a.createElement(h.a,{size:"md",name:O,src:C}))))),a.a.createElement(h.b,Object.assign({flex:"grow"},e?{display:"flex",alignItems:"center",width:"100%"}:{},t&&x?{display:"inlineBlock"}:{}),a.a.createElement(h.b,{display:"flex",justifyContent:"between",marginLeft:-5,marginRight:-5},a.a.createElement(h.b,{paddingX:5},a.a.createElement(h.J,{size:e?"sm":"md"},O&&m?m:null)),!!k&&!e&&a.a.createElement(h.b,{flex:"none",paddingX:5},a.a.createElement(h.m,{accessibilityLabel:l.a._("Pin","Accessiblity label for pin icon"),color:"darkGray",icon:"pin",inline:!0}),a.a.createElement(u.a,{value:k,shortform:!0,shortformMaximumFractionDigits:0}))),n&&(!e||t)&&x&&a.a.createElement(f,{onClick:this.handleClick,showButton:x.length>b,showMore:this.state.showMore,trimmedUserNote:x})))))))}},v=n("b7z0"),w=n("cemY"),E=n("Irlq"),_=n("z/cr"),C=n("lixz");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S=({children:e,semibold:t})=>t?a.a.createElement(v.b,{inline:!0,size:"sm",weight:t?"semibold":"bold"},e):e,x=e=>{const t=e.board,n=e.handleProfileClick,i=e.isOwnPin,o=e.pinner,r=e.section,s=e.variant,d=t.name,u=t.privacy,p=t.url,m=o.username,h=o.full_name,g=`/${m}/`,b="default"===s,f=b?"underlineLink":"",y=a.a.createElement(c.b,{className:f,key:"board",to:p},a.a.createElement(S,{semibold:b},d));if(i){if(r){const e=`${p}${r.slug}/`;return Object(E.b)(l.a._("You saved to {{ sectionName }} in {{ boardName }}","Showing that you saved this pin to a section within a board on closeup"),{sectionName:a.a.createElement(c.b,{className:f,key:"section",to:e},a.a.createElement(S,{semibold:b},r.title)),boardName:y})}return Object(E.b)(l.a._("{{ You }} saved to {{ boardName }}","Indicating you saved this pin to a board on closeup"),{You:a.a.createElement(c.b,{className:f,onClick:n,key:"you",to:g},a.a.createElement(S,{semibold:b},l.a._("You",'"you" in "{{ You }} saved to {{ boardName }}"'))),boardName:y})}if("protected"===u)return Object(E.b)(l.a._("{{ pinnerName }} saved this Pin","Showing who saved this pin, but not which board (private board), on closeup"),{pinnerName:a.a.createElement(c.b,{className:f,onClick:n,key:"pinner",to:g},a.a.createElement(S,{semibold:b},h))});if(r){const e=`${p}${r.slug}/`;return Object(E.b)(l.a._("{{ pinnerName }} saved to {{ sectionName }} in {{ boardName }}","Showing who saved this pin to a section within a board on closeup"),{pinnerName:a.a.createElement(c.b,{className:f,onClick:n,key:"pinner",to:g},a.a.createElement(S,{semibold:b},h)),sectionName:a.a.createElement(c.b,{className:f,key:"section",to:e},a.a.createElement(S,{semibold:b},r.title)),boardName:y})}return Object(E.b)(l.a._("{{ pinnerName }} saved to {{ boardName }}","Showing who saved this pin to which board on closeup"),{pinnerName:a.a.createElement(c.b,{className:f,onClick:n,key:"pinner",to:g},a.a.createElement(S,{semibold:b},h)),boardName:y})};t.a=class extends i.Component{constructor(...e){super(...e),O(this,"handleProfileClick",()=>{const e=this.props,t=e.pin.pinner,n=e.viewer.username===t.username;Object(C.e)(n?14:15)}),O(this,"handleFollowClick",e=>{const t=this.props.onFollowClick;t&&t(e)})}render(){const e=this.props,t=e.followedByMe,n=e.legoGroup,i=e.inUserNoteExp,o=e.isLfvCloseupShowAll,r=e.variant,s=e.viewer,l=(Object(w.k)(this.props)||{}).pin,c=l.pinner,d=void 0===c?{}:c,u=l.section,p=l.board,m=a.a.createElement(x,{board:p,handleProfileClick:this.handleProfileClick,isOwnPin:d.id===(s.isAuth&&s.id),pinner:d,section:u,variant:r});let g={};const b="default"===r;return b&&(g=_.k.includes(n)?{marginBottom:"20px"}:{marginBottom:"40px"}),a.a.createElement(h.b,b?{dangerouslySetInlineStyle:{__style:{marginTop:_.k.includes(n)?"40px":"80px"}}}:{},a.a.createElement(y,{followedByMe:t,inUserNoteExp:i,isLfvSimplifiedCloseupExp:o,legoStyles:g,onFollowClick:this.handleFollowClick,onProfileClick:this.handleProfileClick,pin:l,savedToText:m}))}}},TRIq:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("HvLx"),r=n("Qo1m"),s=n("iEzj"),l=n("+U6O");t.a=s.a.makeSendShareButton(({handleSendShareFlyoutButtonClick:e,viewType:t})=>a.a.createElement("div",{className:"pinRepSendShareFlyoutButton"},a.a.createElement(l.c,{onClick:({event:t})=>{t&&t.stopPropagation&&t.stopPropagation(),Object(o.a)(e)()},text:r.a._("Send","Send a pin"),color:"gray",accessibilityLabel:r.a._("Send","Accessible label to send a pin")})))},TzyI:function(e,t,n){var i=n("cjc9"),a=n("jvv/"),o=n("ePT2");var r={USER_DID_IT_DATA_CREATE:"USER_DID_IT_DATA_CREATE",USER_DID_IT_DATA_DELETE:"USER_DID_IT_DATA_DELETE",USER_DID_IT_DATA_UPDATE:"USER_DID_IT_DATA_UPDATE",USER_DID_IT_DATA_UPDATE_COMMENT_COUNT:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",USER_DID_IT_DATA_FETCH:"USER_DID_IT_DATA_FETCH"},s=n("eB/M");n("7Iyi");function l(e){return{type:r.USER_DID_IT_DATA_DELETE,payload:{id:e}}}function c(e,t,n,a,l,c){const d={aggregatedPinDataId:e,details:n,image_signatures:a,pin_id:l,publish_facebook:c};return n=>{o.a.create("DidItActivityResource",d).callCreate().then(a=>{const o=a.resource_response.data;n(function(e){return{type:"PIN_DID_IT",payload:{id:e,value:!0}}}(l)),n(function(e){return{type:r.USER_DID_IT_DATA_CREATE,payload:{user_did_it_data:e}}}(o)),n(Object(i.a)({feedId:e,feedType:s.a.USER_DID_IT_DATA,itemIds:[o.id],itemType:o.type})),n(Object(i.a)({feedId:t,feedType:s.a.USER_DID_IT_DATA,itemIds:[o.id],itemType:o.type}))},e=>{})}}function d({aggregatedPinDataId:e,id:t,isOwnedByMe:n,pinId:i,username:r}){return c=>{o.a.create("DidItActivityResource",{user_did_it_data_id:t}).callDelete().then(o=>{n&&c(function(e){return{type:"PIN_DID_IT",payload:{id:e,value:!1}}}(i)),c(l(t)),c(Object(a.a)({feedId:e,feedType:s.a.USER_DID_IT_DATA,itemIds:[t],itemType:"userdiditdata"})),c(Object(a.a)({feedId:r,feedType:s.a.USER_DID_IT_DATA,itemIds:[t],itemType:"userdiditdata"}))},e=>{})}}function u(e,t){return{type:r.USER_DID_IT_DATA_UPDATE_COMMENT_COUNT,payload:{id:e,increment:t}}}function p({id:e,details:t,image_signatures:n,pinId:i}){const a={details:t,image_signatures:n,user_did_it_data_id:e,pin_id:i};return e=>{o.a.create("DidItActivityResource",a).callUpdate().then(t=>{const n=t.resource_response.data;e(function(e){return{type:r.USER_DID_IT_DATA_UPDATE,payload:{user_did_it_data:e}}}(n))},e=>{})}}function m(e,t,n,i,r){const c={reason:i,detailed_reasons:t,user_did_it_data_id:n};return t=>{o.a.create("DidItActivityFlagResource",c).callCreate().then(()=>{t(l(n)),t(Object(a.a)({feedId:e,feedType:s.a.USER_DID_IT_DATA,itemIds:[n],itemType:"userdiditdata"})),t(Object(a.a)({feedId:r,feedType:s.a.USER_DID_IT_DATA,itemIds:[n],itemType:"userdiditdata"}))},e=>{})}}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return m})},U1Om:function(e,t,n){n.d(t,"f",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"e",function(){return p}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return h});var i=n("L3DD"),a=n("PCgV"),o=n("hCBh"),r=n("rQW8");const s=(e,t)=>{return Object.keys(t).filter(n=>{const i=t[String(n)];return(i.pinner||{}).id===e.id&&!i.is_repin}).map(e=>t[e])},l=(e,t)=>{return s(e,t).filter(e=>{if(e.created_at){return Object(r.j)(e.created_at).ms<20*r.b}return!1})},c=Object.freeze({NOT_ANSWERED:0,YES:1,NO:2,NOT_SURE:3}),d=["en","fr","de","es","it","pt","nl","nb","fi","sv","da","nl","pt"],u=e=>{const t=e.toLowerCase();return!!d.find(e=>t.startsWith(e))},p=(e,t)=>!(!e||!e.isAuth)&&Object(a.c)(e.country),m=e=>e.isAuth&&!e.isPartner&&!Object(o.e)({user:e})&&!Object(o.d)({user:e}),h=({requestContext:e,router:t,pinId:n})=>{((e,t)=>{const n=Object(i.a)("/business/convert",{next:t});e.push(n)})(t,(e=>e?`/business/ad_create?pinId=${e}`:"/business/ad_create")(n))}},U5Pk:function(e,t,n){},"UHJ+":function(e,t,n){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return c});const i={type:"OPEN_NOTIFICATIONS_DROPDOWN"},a={type:"CLOSE_NOTIFICATIONS_DROPDOWN"},o={type:"OPEN_CONVERSATIONS_DROPDOWN"},r={type:"CLOSE_CONVERSATIONS_DROPDOWN"},s=e=>({updateBadgeCount:t=>{e({type:"UPDATE_BADGE_COUNT",payload:t})}}),l=e=>({openNotificationsDropdown:()=>e(i),closeNotificationsDropdown:()=>e(a)}),c=e=>({openConversationsDropdown:()=>e(o),closeConversationsDropdown:()=>e(r)})},UHkV:function(e,t,n){var i=n("GyhR"),a=n("Qo1m"),o=n("+U6O");t.a=function({type:e}){const t={group:{accessibilityLabel:a.a._("group board","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:a.a._("protected board","Board picker protected board icon"),icon:"lock"},secret:{accessibilityLabel:a.a._("secret board","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:a.a._("board with sections","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:a.a._("board with sections","Board picker board with sections icon"),icon:"arrow-down"}}[e];return i.createElement(o.b,{marginLeft:1},i.createElement(o.b,{marginStart:2},"sections"===e||"sectionsInline"===e?i.createElement(o.m,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):i.createElement(o.m,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})))}},US6J:function(e,t,n){n.d(t,"b",function(){return p}),n.d(t,"a",function(){return m});var i=n("Ch7k"),a=n("C2AX"),o=n("QzGC"),r=n.n(o),s=n("+Wpr");function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){if(e.image){const t=e.image.images.originals,n=t.height,i=t.url,a=t.width;return{id:r()(),height:n,src:i,width:a,type:"webImage",signature:e.image_signature}}if(e.video&&e.video.video_list&&e.video.video_list.V_HLSV4){const t=e.video.video_list.V_HLSV4,n=t.height,i=t.width,a=t.url,o=t.thumbnail;return{id:r()(),width:i,height:n,src:a,customCoverImg:{src:o},type:"webVideo",signature:e.video_signature}}return null}function u(e){if(!e)return s.c;const t=e.text,n=e.src_url,i=void 0===n?"":n,a=e.canonical_url,o=void 0===a?"":a,r=e.normalized_url,l=e.image,c=e.image_signature;return{text:t,srcUrl:i,canonicalUrl:o,normalizedUrl:r,imageUrl:l&&l.images.originals&&l.images.originals.url||"",imageSignature:c,isFetching:!1}}function p(e){const t=e.blocks.filter(e=>1===e.block_type)[0],n=e.blocks.filter(e=>0===e.block_type)[0],i=e.blocks.filter(e=>4===e.block_type)[0];return l({},s.b,{title:t&&t.text||"",description:n&&n.text||"",linkBlock:u(i),media:d(e)})}function m(e){return(t,n)=>{e&&e.story_pin_data&&t(function(e){return(t,n)=>{const o=e.id,r=e.board,s=e.section,c=e.story_pin_data,d={mode:"edit",selectedItem:l({boardId:r.id,title:s?s.title:r.name},s?{sectionId:s.id}:{}),type:"story",status:"saved",pinItemIds:[],pinItemIndex:0};t(Object(i.a)(o,d)),c.pages.map(p).forEach((e,n)=>{t(Object(a.a)(o,n.toString(),e,{saveIndex:!0}))})}}(e))}}},UmN8:function(e,t,n){var i=n("fxqt");n("GyhR"),n("1ZRU"),n("2YES");n.d(t,"a",function(){return i.a})},"V+Hv":function(e,t,n){n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var i=n("GyhR");const a=n("AdUJ").a;function o({children:e}){return e(Object(i.useContext)(a))}function r(){return Object(i.useContext)(a)}},VI9K:function(e,t,n){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o});const i=e=>({type:"MOST_RECENT_PIN",payload:{id:e}}),a=e=>({type:"MOST_RECENT_PLP",payload:{plpPinId:e}}),o=e=>({type:"MOST_RECENT_PIN_IMAGE",payload:{image_signature:e}})},VLF8:function(e,t,n){var i=n("WQSK"),a=n("vR+M"),o=n("XQD6"),r=n("D+W/");let s;const l={},c={};c[r.a.BrowserType.CHROME]={url:"https://chrome.google.com/webstore/detail/gpdjojdkbbmdfjfahjcgigfpmkopogic",newWindow:!0},c[r.a.BrowserType.FIREFOX]={url:"https://assets.pinterest.com/ext/Pinterest_Firefox.xpi",newWindow:!1},c[r.a.BrowserType.SAFARI]={url:"https://safari-extensions.apple.com/details/?id=com.pinterest.extension-HWZFLG9PNK",newWindow:!0},c[r.a.BrowserType.IE]={url:"https://about.pinterest.com/assets/ext/Pinterest-IE-0.0.4.exe",newWindow:!1},c[r.a.BrowserType.OPERA]={url:"https://addons.opera.com/en/extensions/details/pinterest-8/?display=en",newWindow:!0},l.handleExtensionInstall=(e=>{const t=function(){const e=a.a.getBrowser();return e?c[e].url:void 0}();t&&(Object(o.a)(t,function(){const e=a.a.getBrowser();return e?c[e].newWindow:void 0}()),e())}),l.isExtensionInstalled=(()=>s),l.isChrome=(()=>a.a.getBrowser()===r.a.BrowserType.CHROME),l.extensionReady=((e=100)=>new Promise(t=>{setTimeout(()=>{document.body&&(s=document.body.hasAttribute("data-pinterest-extension-installed"),i.set("bei",s.toString()),a.a.getBrowser()===r.a.BrowserType.OTHER&&(s=!0),t(s))},e)})),l.initBrowserExtension=(()=>{(()=>Promise.resolve().then(n.bind(null,"yxuo")))().then(({default:e})=>{e.logToServer(e.SERVER_LOG_TYPE.BROWSER_EXTENSION,e.HTTP_METHOD.POST,{browser_extension_installed:s})})}),t.a=l},Vw3o:function(e,t,n){var i=n("GyhR"),a=n.n(i);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const l=32,c=13;t.a=(e=>{const t=s(Object(i.useState)(!1),2),n=t[0],d=t[1],u=e.hoverProps,p=void 0===u?{}:u,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({},r(e,["hoverProps"]),n?p:{}),h=m.reactionType,g=void 0===h?1:h,b=m.iconSize,f=void 0===b?24:b,y=m.iconColor,v=void 0===y?"#8e8e8e":y,w=m.backgroundSize,E=void 0===w?40:w,_=m.backgroundColor,C=void 0===_?"transparent":_,O=m.onTouch,S=void 0===O?e=>{}:O,x=e=>()=>{d(e)},k=((e,t)=>({width:e,height:e,backgroundColor:t,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100%",outline:"none",cursor:"pointer"}))(E,C),I=x(!0),P=x(!1),T=(e=>t=>{const n=t.charCode;[l,c].includes(void 0===n?0:n)&&(t.preventDefault(),e(t))})(S),j=((e,t)=>({width:e,height:e,fill:t}))(f,v),R=(e=>{const t={get 1(){return a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M22.17775,13.37483l-9.131,8.992a1.50152,1.50152,0,0,1-2.094,0l-9.131-8.992a6.19189,6.19189,0,0,1,0-8.773,6.29509,6.29509,0,0,1,8.834,0l1.344,1.344,1.344-1.344a6.29509,6.29509,0,0,1,8.834,0,6.19189,6.19189,0,0,1,0,8.773"})))},get 6(){return a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M17.7642,6.4536 L20.4632,5.1946 C20.7112,5.0786 20.8192,4.7836 20.7032,4.5356 C20.5872,4.2866 20.2922,4.1796 20.0432,4.2946 L17.3442,5.5536 C17.0962,5.6696 16.9892,5.9646 17.1042,6.2136 C17.1892,6.3936 17.3682,6.4996 17.5552,6.4996 C17.6252,6.4996 17.6962,6.4846 17.7642,6.4536 M15.1962,3.4056 L16.4542,0.7056 C16.5712,0.4566 16.4632,0.1616 16.2152,0.0456 C15.9672,-0.0684 15.6712,0.0376 15.5552,0.2866 L14.2962,2.9856 C14.1812,3.2346 14.2882,3.5296 14.5362,3.6456 C14.6042,3.6766 14.6762,3.6916 14.7462,3.6916 C14.9332,3.6916 15.1122,3.5856 15.1962,3.4056 M16.1502,5.0956 C16.0232,5.0956 15.8962,5.0476 15.7992,4.9506 C15.6052,4.7566 15.6052,4.4426 15.7992,4.2486 L18.6072,1.4406 C18.8012,1.2466 19.1152,1.2466 19.3092,1.4406 C19.5032,1.6346 19.5032,1.9486 19.3092,2.1426 L16.5012,4.9506 C16.4042,5.0476 16.2772,5.0956 16.1502,5.0956",fill:"#4990E2"}),a.a.createElement("path",{d:"M4.5488,5.5176 L17.9998,18.8966 C17.6938,19.9636 17.1248,21.1626 16.2918,22.0036 C13.6548,24.6656 9.3808,24.6656 6.7438,22.0036 L5.1528,20.3976 L2.5438,17.7706 L1.5428,16.7616 C0.9568,16.1696 0.9568,15.2106 1.5428,14.6196 C2.1288,14.0276 3.0788,14.0276 3.6648,14.6196 L1.0128,11.9426 C0.3288,11.2526 0.3288,10.1336 1.0128,9.4436 C1.6958,8.7536 2.8038,8.7536 3.4878,9.4436 L2.0728,8.0166 C1.3898,7.3266 1.3898,6.2076 2.0728,5.5176 C2.7568,4.8276 3.8648,4.8276 4.5488,5.5176",fill:"#833821"}),a.a.createElement("path",{d:"M23.5,8.7241 L23.5,17.0211 L23.491,17.0211 C23.541,18.8211 22.88,20.6371 21.497,22.0111 C18.826,24.6631 14.496,24.6631 11.825,22.0111 L10.213,20.4111 L6.57,16.7921 L5.557,15.7861 C4.963,15.1971 4.963,14.2421 5.557,13.6521 C6.15,13.0631 7.112,13.0631 7.706,13.6521 L5.02,10.9851 C4.327,10.2971 4.327,9.1821 5.02,8.4951 C5.712,7.8071 6.834,7.8071 7.527,8.4951 L6.094,7.0721 C5.401,6.3851 5.401,5.2701 6.094,4.5821 C6.786,3.8951 7.909,3.8951 8.602,4.5821 L10.034,6.0051 C9.342,5.3181 9.342,4.2031 10.034,3.5161 C10.727,2.8281 11.849,2.8281 12.542,3.5161 L16.241,7.1891 L17.02,7.9611 L19.954,10.8751 L19.954,8.7241 C19.954,7.7521 20.748,6.9641 21.727,6.9641 C22.706,6.9641 23.5,7.7521 23.5,8.7241",fill:"#F9B804"})))},get 7(){return a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M17.6143,13.6953 L17.6253,13.6953 C16.6433,14.6703 16.0313,16.0133 16.0053,17.5003 L16.0003,17.5003 L16.0003,20.0003 L8.0003,20.0003 L8.0003,17.5003 L7.9953,17.5003 C7.9723,16.0023 7.3523,14.6513 6.3613,13.6733 C4.9033,12.2233 4.0003,10.2173 4.0003,8.0003 C4.0003,3.5813 7.5813,0.0003 12.0003,0.0003 C16.4183,0.0003 20.0003,3.5813 20.0003,8.0003 C20.0003,10.2293 19.0863,12.2443 17.6143,13.6953",fill:"#FEDB86"}),a.a.createElement("path",{d:"M8,20 L16,20 L16,22.5 C16,23.329 15.329,24 14.5,24 L9.5,24 C8.671,24 8,23.329 8,22.5 L8,20 Z",fill:"#8E8E8D"}),a.a.createElement("path",{d:"M13,10 L13,20 L11,20 L11,10 C11,9.448 11.448,9 12,9 C12.552,9 13,9.448 13,10",fill:"#F9B804"}),a.a.createElement("path",{d:"M14.7671,9.0757 C14.6391,9.2067 14.5801,9.3947 14.6111,9.5787 L14.9811,11.8347 C15.0571,12.2987 14.5911,12.6527 14.1911,12.4337 L12.2531,11.3687 C12.0951,11.2817 11.9051,11.2817 11.7471,11.3687 L9.8091,12.4337 C9.4101,12.6527 8.9431,12.2987 9.0191,11.8347 L9.3901,9.5787 C9.4201,9.3947 9.3611,9.2067 9.2331,9.0757 L7.6651,7.4787 C7.3421,7.1497 7.5201,6.5767 7.9661,6.5087 L10.1331,6.1797 C10.3101,6.1527 10.4641,6.0367 10.5431,5.8687 L11.5121,3.8167 C11.7121,3.3947 12.2881,3.3947 12.4881,3.8167 L13.4571,5.8687 C13.5361,6.0367 13.6891,6.1527 13.8671,6.1797 L16.0341,6.5087 C16.4801,6.5767 16.6581,7.1497 16.3351,7.4787 L14.7671,9.0757 Z",fill:"#4990E2"})))},get 8(){return a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M12,19 C10.619,19 9.5,20.119 9.5,21.5 C9.5,22.881 10.619,24 12,24 C13.381,24 14.5,22.881 14.5,21.5 C14.5,20.119 13.381,19 12,19 M18.75,6.75 C18.75,9.121 17.47,11.39 15.489,12.529 C15.034,12.791 14.348,13.857 14.348,14.87 C14.348,16.167 13.297,17.217 12,17.217 C10.703,17.217 9.652,16.167 9.652,14.87 C9.652,12.32 11.122,9.624 13.147,8.459 C13.599,8.2 14.055,7.53 14.055,6.75 C14.055,5.617 13.133,4.696 12,4.696 C10.867,4.696 9.945,5.617 9.945,6.75 C9.945,8.047 8.895,9.098 7.598,9.098 C6.301,9.098 5.25,8.047 5.25,6.75 C5.25,3.028 8.277,0 12,0 C15.723,0 18.75,3.028 18.75,6.75"})))},get 9(){return a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("path",{d:"M19,12.5 C20.104,12.5 21,13.396 21,14.5 C21,15.604 20.104,16.5 19,16.5 L11.504,16.5 C12.147,18.242 12.502,20.094 12.502,22 C12.502,23.104 11.605,24 10.502,24 C9.396,24 8.502,23.104 8.502,22 C8.502,18.966 7.357,16.093 5.286,13.884 C3.878,12.521 3,10.614 3,8.5 C3,4.358 6.357,1 10.5,1 L16.75,1 C17.717,1 18.5,1.784 18.5,2.75 C18.5,3.716 17.717,4.5 16.75,4.5 L19,4.5 C20.104,4.5 21,5.396 21,6.5 C21,7.604 20.104,8.5 19,8.5 C20.104,8.5 21,9.396 21,10.5 C21,11.604 20.104,12.5 19,12.5"})))}};return t[e]||t[1]})(g);return a.a.createElement("div",{role:"button",tabIndex:0,style:k,onMouseOver:I,onFocus:I,onMouseOut:P,onBlur:P,onKeyPress:T,onClick:S},a.a.createElement("div",{style:j},R))})},WE4s:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("kp2G"),r=n("iJ35"),s=n("+U6O");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.PureComponent{constructor(...e){super(...e),l(this,"parseText",()=>{const e=this.props,t=e.tags,n=e.taggedUsers,i=e.text,o=e.size;if(!t.length||!n||t.length!==n.length)return this.renderRegularText(i,"1");let r=0,l=[];return t.forEach((e,t)=>{const n=i.substring(r,e.offset);r=e.offset+e.length;const a=i.substring(e.offset,r);l=l.concat(this.renderRegularText(n,`${t}a`)).concat(this.renderTaggedText(a,t,`${t}b`))}),l=l.concat(this.renderRegularText(i.substring(r),"2")),a.a.createElement(s.J,{inline:!0,leading:"tall",size:o},l)}),l(this,"renderRegularText",(e,t)=>a.a.createElement(s.J,{key:t,inline:!0,leading:"tall",size:this.props.size},a.a.createElement(o.a,null,e))),l(this,"renderTaggedText",(e,t,n)=>a.a.createElement(r.b,{key:n,stopPropagation:!0,to:`/${this.props.taggedUsers[t].username}`},a.a.createElement(s.J,{inline:!0,leading:"tall",size:this.props.size,bold:!0,color:"blue"},e)))}render(){return a.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},this.parseText())}}l(c,"defaultProps",{size:"md"})},Wiy7:function(e,t,n){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});const i=(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n]),a=e=>t=>{const n=[];return function(...a){const o=this,r=n.find(e=>e.context===o&&i(e.args,a));if(r)return r.result;const s={context:o,args:a,result:t.apply(this,a)};return n.push(s),e&&n.length>e&&n.shift(),s.result}},o=a(1),r=a()},"Wo+T":function(e,t,n){var i=n("Efhe"),a=n("RPeA");const o=function(){this._uidToData={}};Object.assign(o.prototype,{add(e){let t=this.getCurrentUid();t=null!==t?t:this._getNewUid(),this._uidToData[t]=e},getCurrentUid:()=>window.location.href,_getNewUid:()=>window.location.href,getCurrent(){return this._uidToData[this.getCurrentUid()]},get(e){return this._uidToData[e]},getHistoryRecordCount(){return Object.keys(this._uidToData).length}});var r=o;const s=function(e,t,n){this.url=e,this.moduleUid=t,this.backgroundModuleUid=n||null,this.numHopsToBackground=0},l=function(e,t){this.module=e,this.backgroundModule=t||null},c=function(){this._browserHistory=null,this._seenModules=null,this._pageInfoCache={},this._init()};Object.assign(c.prototype,{start(e){e&&(e.uid=this._getNewUid(e),this._addToHistory(e,null))},_init(){this._seenModules=new a.a(10),this._browserHistory=new r},populateNavigateData(e){e.fromHistoryUid=this._browserHistory.getCurrentUid()},getModule(e,t){let n=null,i=null,a=null,o=null;return(o=t.reuseLast?this._browserHistory.get(t.fromHistoryUid):this._browserHistory.getCurrent())&&(n=this._seenModules.get(o.moduleUid),a=o.moduleUid,i=this._seenModules.get(o.backgroundModuleUid)),n||(n=new e,a=null!==a?a:this._getNewUid(n),n.uid=a),this._addToHistory(n,i),new l(n,i)},updateBackgroundModule(e,t){const n=this._browserHistory.getCurrent(),i=this._browserHistory.get(t.fromHistoryUid);e?(n.backgroundModuleUid=e.uid,this._seenModules.set(e.uid,e),t.fromNavigate&&i&&(n.numHopsToBackground=i.numHopsToBackground+1)):(n.backgroundModuleUid=null,n.numHopsToBackground=0)},cancelNavigation(){const e=this._browserHistory.getCurrent();this._seenModules.remove(e.moduleUid),this._go(-1)},closeCurrentModule(){const e=this._browserHistory.getCurrent();e&&0!==e.numHopsToBackground&&this._go(-e.numHopsToBackground)},back(){return this._browserHistory.getHistoryRecordCount()>1&&(this._go(-1),!0)},setPageInfo(e){const t=this._getUrl();this._pageInfoCache[t]=e},getPageInfo(e){return e=e||this._getUrl(),this._pageInfoCache[e]},_go(e){window.history.go(e)},_getUrl:()=>window.location.href,_getNewUid:e=>e.cid,_addToHistory(e,t){const n=this._getUrl(),i=t?t.uid:null;let a=this._browserHistory.getCurrent();a||(a=new s(n,e.uid,i)),this._browserHistory.add(a),this._seenModules.set(e.uid,e),t&&this._seenModules.set(i,t)}});const d=function(){this._pageInfoCache={}};Object.assign(d.prototype,{start(){},populateNavigateData(){},getModule:(e,t)=>[new e({}),[]],updateBackgroundModule(){},cancelNavigation(){},closeCurrentModule(){},setPageInfo(e){const t=this._getUrl();this._pageInfoCache[t]=e},getPageInfo(e){return e=e||this._getUrl(),this._pageInfoCache[e]},_getUrl:()=>window.location.href});const u=Object(i.a)()?c:d;let p=null;u.singleton=(()=>(p||(p=new u),p));t.a=u},"Ww6/":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=(n("GB3e"),n("Fpqi")),s=n("PNko"),l=n.n(s),c=n("/Mjl"),d=n("+U6O");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){const t=e.debugImpressionStarted,n=e.debugImpressionLogged,a=e.slotIndex,o=n||t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}({},n&&!t?{opacity:.1}:{},t?{backgroundColor:"#adebad"}:{},{height:"100%",width:"100%"}):null;return i.createElement("div",{style:o},(t||n)&&i.createElement(d.b,{position:"absolute",padding:2,color:"darkGray",dangerouslySetInlineStyle:{__style:{zIndex:c.a.debugPinImpressions}}},i.createElement(d.J,{size:"xl",color:"white"},a)),e.children)}var m=n("Uc2O"),h=n("m2OL"),g=n("UgxU"),b=n("rSK6"),f=n("Qo1m"),y=n("E56J"),v=n("exzK"),w=n("iJ35"),E=n("NmHc"),_=n("hvnN"),C=n.n(_),O=n("fifU"),S=n("Mce2"),x=n("s3m5"),k=n("NoZx"),I=n("buVl"),P=n("UmN8"),T=n("nI4G"),j=n("k9eC"),R=n("lixz"),D=n("NmcB"),L=n("4OrY");function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){M(e,t,n[t])})}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=23,F=15;class N extends i.Component{constructor(...e){super(...e),M(this,"state",{hovered:!1,focused:!1,active:!1}),M(this,"handleFocus",()=>{this.setState({focused:!0})}),M(this,"handleMouseDown",()=>{this.setState({active:!0})}),M(this,"handleMouseUp",()=>{this.setState({active:!1})}),M(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),M(this,"handleMouseLeave",()=>{this.setState({active:!1,hovered:!1})}),M(this,"renderRightArrowClickthrough",()=>{const e=this.props,t=e.backgroundColor,n=e.borderRadius,a=e.denseViewSelected,o=e.domain,r=e.textColor,s=e.maxHeight,l=a?F:B,c=Object(L.a)(o,{maxLength:l});return i.createElement(d.b,{padding:2,color:t,display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:n}},maxHeight:s},i.createElement(d.b,{display:"flex",flex:"none"},i.createElement(d.m,{icon:"arrow-up-right",accessibilityLabel:f.a._("link","Website url link"),size:14,color:r})),i.createElement(d.b,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},i.createElement(d.J,{bold:!0,size:"sm",color:r,truncate:!0},c)))})}render(){const e=this.props,t=e.borderRadius,n=e.bottom,a=e.hoverStyle,o=e.isEligibleForWebCloseup,r=e.onClick,s=e.pinId,l=e.position,c=e.sourceUrl,u=e.paddingX;if(!c)return null;const p=this.state.hovered||this.state.focused||this.state.active?a:{};return i.createElement(d.b,{position:l,bottom:n},i.createElement(d.b,{alignItems:"end",display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1,padding:2},i.createElement(d.b,{minWidth:0,paddingX:u},!o&&i.createElement(d.b,{position:"relative",dangerouslySetInlineStyle:{__style:A({borderRadius:t},p)},onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp},i.createElement(w.b,{external:!0,onClick:r,pinId:s,stopPropagation:!0,to:c},this.renderRightArrowClickthrough())))))}}M(N,"defaultProps",{textColor:"darkGray",backgroundColor:"lightGray",borderRadius:4,position:"absolute",bottom:!0,hoverStyle:{},paddingX:1});var U=n("2YES"),z=n("FSbA"),H=n("9Y9K"),V=n("zBQm");function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){W(e,t,n[t])})}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Y=Object(i.lazy)(()=>n.e("NuxOneClickSaveButtonCommon").then(n.bind(null,"/zC8"))),q=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e("PersistentOneClickSaveCommon")]).then(n.bind(null,"d94/"))),J=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e(5),n.e(11),n.e("PinBetterSaveCommon")]).then(n.bind(null,"qoD0"))),$=Object(i.lazy)(()=>n.e("PinPromoteButtonCommon").then(n.bind(null,"Is9E"))),Q=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"24KF"))),K=Object(i.lazy)(()=>Promise.all([n.e(5),n.e("PinSaveButtonCommon")]).then(n.bind(null,"odTJ"))),X=Object(i.lazy)(()=>n.e("PinRepSendShareFlyoutButtonCommon").then(n.bind(null,"pi5b"))),Z=Object(i.lazy)(()=>n.e("BoardActivityPinRepLikeButtonCommon").then(n.bind(null,"1pwd"))),ee=e=>{const t=e.style,n=G({},void 0===t?{}:t,{zIndex:c.a.pinActionWrapper});return a.a.createElement(d.b,Object.assign({},e,{dangerouslySetInlineStyle:{__style:n}}))};class te extends a.a.Component{constructor(...e){super(...e),W(this,"state",{isReactionBarShowing:!1}),W(this,"onToggleFlyout",()=>{const e=this.props,t=e.isFlyoutOpen;(0,e.onToggleFlyout)(!t)}),W(this,"handleOnSourceImageClick",()=>{const e=this.props,t=e.imageSignature,n=e.requestContext,i=e.slotIndex;Object(R.e)(13),new j.c(n,"smb_pin_stats_from_business_profile").enabled(),this.handleClickLogging(35,{grid_index:i,image_signature:t})}),W(this,"handleToggleHover",e=>{this.props.onToggleFlyout(!1,e)}),W(this,"handleToggleSubmenu",(e,t)=>{this.props.onToggleFlyout(e,t,"save")}),W(this,"handleDropdownClose",()=>{this.props.onToggleFlyout(!1)}),W(this,"handleClickthroughLogging",()=>{const e=this.props,t=e.componentType,n=e.contextLogData,i=e.pin,a=e.slotIndex,o=e.viewType,r=e.viewParameter,s=i.id;Object(D.a)(12,G({},n,{view:o,viewParameter:r,component:t,objectId:s,grid_index:a})),this.handleClickLogging(162)}),W(this,"handleSaveButtonClick",()=>{this.handleClickLogging(0),Object(T.b)("Lead",()=>{y.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin Click"})})}),W(this,"handleLikeButtonClick",({event:e})=>{e&&e.stopPropagation&&(e.stopPropagation(),this.toggleReaction())}),W(this,"handleLikeButtonTouch",e=>{e&&e.stopPropagation&&(e.stopPropagation(),this.toggleReaction())}),W(this,"toggleReaction",()=>{const e=this.props,t=e.boardActivity,n=e.updateReaction,i=e.reactionByMe,a=e.pin;let o=0;0===i&&(o=1),n(t&&t.id||a.id,k.a.BOARD_ACTIVITY,i,o)})}getViewInfo(){const e=this.props,t=e.viewType,n=e.showEditPinButton,i=5===t,a=2===t,o=4===t;return{isBoardView:i,isSearchView:a,isProfileView:o,isOwnProfileView:o&&n,isOwnBoardView:(i||164===t)&&n,isOwnPinSearchView:a&&n}}cropImageStyles(){const e=this.props,t=e.imageHeight,n=e.pin,i=e.truncatePinHeight;let a={};const o=n.story_pin_data_id;if(n.image_crop&&i&&!o&&(0!==n.image_crop.min_y||1!==n.image_crop.max_y)){const e=n.image_crop.min_y,i=n.image_crop.max_y;a={marginTop:e>0?-1*e*t+"px":"0px",marginBottom:i<1?Math.round(-1*(1-i)*t)+"px":"0px"}}return a}handleClickLogging(e,t){const n=this.props,i=n.componentType,a=n.contextLogData,o=n.viewParameter,r=n.viewType,s=n.pin.id;Object(D.a)(101,G({},a,t,{component:i,view:r,viewParameter:o,element:e,objectId:s}))}renderSendShareButton(e){const t=this.props,n=t.images,i=t.pin.id,o=t.viewType;return a.a.createElement(S.a,{id:"share-button"},a.a.createElement(O.a,null,a.a.createElement(X,{imageSrc:n&&n["236x"].url,onClick:()=>this.handleClickLogging(98),onToggleFlyout:this.onToggleFlyout,onFlyoutDismiss:this.handleDropdownClose,pinId:i,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:this.props.isFlyoutOpen,viewType:o,backgroundColor:"transparentDarkGray",iconColor:"white",iconSize:e})))}renderEditButton(e){const t=this.props,n=t.pin,i=n.id,o=n.carousel_data,r=t.viewParameter,s=t.viewType;return a.a.createElement(S.a,{id:"edit-button"},a.a.createElement(O.a,null,a.a.createElement(Q,{component:0,pinId:i,onToggleModal:this.handleToggleHover,view:s,viewParameter:r,carouselSlotCurrentIndex:o&&o.index,style:e})))}renderEditAndSendRow(e,t){const n={bgColor:"transparentDarkGray",iconColor:"white",size:"md"};return a.a.createElement(ee,{padding:1,position:"absolute",top:!0,left:!0,display:"flex"},e&&a.a.createElement(d.b,{padding:1},this.renderSendShareButton("md")),t&&a.a.createElement(d.b,{padding:1},this.renderEditButton(n)))}renderPrimaryButtons(){const e=this.props,t=e.hideSaveButton,n=e.inNewUserOneTapExperiment,i=e.onSave,o=e.pin,r=e.showRepinButton,s=e.showPromoteButton,l=e.showCondensedInfo,c=e.showButtons,u=e.viewer,p=e.saveOptions,m=e.viewParameter,h=e.showClickthroughButton,g="controlled"===p.type,b=p&&"persistentOneClickSave"===p.type,f=g&&p.saved&&p.save,v=r||s,w=p&&"none"!==p.type?p.renderPinSaveTooltip:void 0;if(!(f||c&&v||!!w||b))return h?a.a.createElement(d.b,{position:"absolute",bottom:!0,color:"transparentDarkGray",right:!0,marginBottom:2,marginRight:2,shape:"pill"},a.a.createElement(d.b,{paddingX:3,paddingY:1},a.a.createElement(d.J,{color:"white",bold:!0,size:"xs"},"Open"))):null;if(t)return null;let E=null;const _=a.a.createElement(S.a,{id:"pin-save-button"},a.a.createElement(O.a,null,a.a.createElement(K,{onClickCallback:()=>{this.handleClickLogging(0),Object(T.b)("Lead",()=>{y.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin Click"})})},onToggleModal:this.handleToggleHover,oneTapSave:g?p:void 0,pin:o,renderPinSaveTooltip:w})));s?E=a.a.createElement(S.a,{id:"promote-button"},a.a.createElement(O.a,null,a.a.createElement($,{pin:o}))):"inline"===p.type?E=a.a.createElement(S.a,{id:"better-save"},a.a.createElement(O.a,null,a.a.createElement(J,{initialSelection:p&&p.initialSelection,useMasonryFlyout:!0,onSave:()=>{p&&p.onSave&&p.onSave(),i&&i()},onToggleFlyout:this.handleToggleSubmenu,onToggleModal:this.handleToggleHover,pin:o,renderPinSaveTooltip:w,viewParameter:m,renderSavedStatus:null}))):"persistentOneClickSave"===p.type?E=a.a.createElement(O.a,null,a.a.createElement(q,{onToggleModal:this.handleToggleHover,pin:o,saveOptions:p})):(f||r&&u.isAuth)&&(E=n?a.a.createElement(S.a,{id:"nux-one-click-save"},a.a.createElement(O.a,null,a.a.createElement(Y,{onClickCallback:this.handleSaveButtonClick,pin:o}))):_),l&&(E=_);const C="inline"!==p.type||l?"auto":"100%";return a.a.createElement(ee,{padding:2,position:"absolute",top:!0,right:!0,width:C},E)}renderGradientOverlay(e){const t=this.props.showButtons;return a.a.createElement(d.b,{position:"relative"},e,t&&a.a.createElement(d.b,{bottom:!0,left:!0,height:"100%",position:"absolute",right:!0,top:!0,width:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",opacity:.3}}}))}renderClickThrough(e){const t=this.props,n=t.denseViewSelected,i=t.domain,o=t.isEligibleForWebCloseup,r=t.pin.id,s=t.sourceUrl;return a.a.createElement(N,{denseViewSelected:n,domain:i,isEligibleForWebCloseup:o,sourceUrl:s,pinId:r,position:e,textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})}renderHolisticHoverOwnPinViewCondensed(){const e=this.props,t=e.pin.id,n=e.domain,i=e.sourceUrl,o=e.showEditPinButton,r={size:"md",iconColor:"white",bgColor:"transparentDarkGray"},s=G({pinId:t,domain:n,sourceUrl:i,bgColor:"transparentDarkGray"},r);return a.a.createElement(ee,{padding:1,width:"100%",position:"absolute",bottom:!0,left:!0,display:"flex",alignItems:"center",justifyContent:"around"},a.a.createElement(d.b,{padding:1},a.a.createElement(d.b,{width:40,height:40},a.a.createElement(E.a,Object.assign({},s,{onClick:this.handleClickthroughLogging})))),a.a.createElement(d.b,{padding:1},o&&this.renderEditButton(r)),a.a.createElement(d.b,{padding:1},this.renderSendShareButton("md")))}renderHolisticHoverOwnPinView(){const e=this.props,t=e.showSendButton,n=e.showEditPinButton,i=e.pin.id,o=e.domain,r=e.isEligibleForWebCloseup,s=e.sourceUrl,l={iconColor:"white",bgColor:"transparentDarkGray",size:"sm"};return a.a.createElement(ee,{padding:1,position:"absolute",bottom:!0,left:!0,display:"flex",width:"100%",alignItems:"center",height:50},a.a.createElement(d.b,{width:"65%"},a.a.createElement(N,{domain:o,isEligibleForWebCloseup:r,sourceUrl:s,pinId:i,position:"relative",textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})),a.a.createElement(d.b,{width:"35%",display:"flex",justifyContent:"end"},n&&a.a.createElement(d.b,{padding:1},this.renderEditButton(l)),t&&a.a.createElement(d.b,{padding:1},this.renderSendShareButton("sm"))))}renderReactionButton(e,t){const n=this.props.denseViewSelected;return a.a.createElement(S.a,{id:"board-reactions-button"},a.a.createElement(O.a,null,a.a.createElement(P.a,{name:"group_boards_reactions",activate:!1},({anyEnabled:t,customActivate:i})=>a.a.createElement(Z,{pin:e,activateReactionsExperiment:i,inReactionsExperiment:t,onShowReactionsBar:()=>{this.setState({isReactionBarShowing:!0})},onHideReactionsBar:()=>{this.setState({isReactionBarShowing:!1})},supportsReactionBar:!n}))))}renderSecondaryButtons(){return this.props.showCondensedInfo?this.renderHolisticHoverOwnPinViewCondensed():this.renderHolisticHoverOwnPinView()}renderTopButtons(){const e=this.props,t=e.pin,n=e.showReactions,o=e.showButtons,r=e.reactionByMe,s=this.state.isReactionBarShowing;let l=null;if(n){const e=0!==r;if(o){const e=s?"100%":null;l=a.a.createElement(i.Fragment,null,a.a.createElement(ee,{width:e,position:"absolute",top:!0,left:!0,padding:2},this.renderReactionButton(t,r)),this.renderSecondaryButtons())}else e&&(l=a.a.createElement(ee,{position:"absolute",top:!0,left:!0,padding:2},this.renderReactionButton(t,r)))}else l=a.a.createElement(i.Fragment,null,o&&this.renderSecondaryButtons(),this.renderPrimaryButtons());return l}render(){const e=this.props,t=e.currentlyPlayingVideo,n=e.children,o=e.isEligibleForAnalyticsCloseup,r=e.pin,s=r.carousel_data,c=r.id,u=r.videos,p=e.selection,m=e.showButtons,h=e.viewParameter,g=e.viewType,b=e.componentType,f=this.cropImageStyles(),y=!!u&&!!u.video_list,E=(u&&u.video_list&&u.video_list[Object.keys(u.video_list)[0]]||{}).duration,_=void 0===E?0:E;return a.a.createElement(d.b,{"data-test-id":s?"carousel-pin":"",position:"relative"},m&&s&&a.a.createElement(v.a,{pinId:c,componentType:b,viewParameter:h,viewtype:g}),a.a.createElement(w.b,{deeplinkUrls:Object(I.m)(c),onClick:this.handleOnSourceImageClick,forceRefresh:1,extraData:{isReact:!0,reactData:this.props.pin,searchOptions:this.props.searchOptions},style:{cursor:"zoom-in",display:"block",position:"relative"},to:Object(V.b)(c,o||!1)},a.a.createElement(d.t,{shape:"rounded",wash:!0},a.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:f},minHeight:55},this.renderGradientOverlay(n))),a.a.createElement(d.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0})),p!==Qe.NO_SELECTION&&a.a.createElement("div",{className:l()("pinSelectionBorder",{selected:p===Qe.SELECTED})}),a.a.createElement(i.Fragment,null,this.renderTopButtons(),m||!y||t?null:a.a.createElement(ee,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},a.a.createElement(x.a,{duration:_}))))}}W(te,"propTypes",{buyableProduct:C.a.shape({id:C.a.string}),componentType:C.a.number.isRequired,contextLogData:C.a.shape({}),description:C.a.string.isRequired,domain:C.a.string,dominantColor:C.a.string,doneCount:C.a.number,imageHeight:C.a.number.isRequired,imageWidth:C.a.number.isRequired,inNewUserOneTapExperiment:C.a.bool,isEligibleForWebCloseup:C.a.bool,onSave:C.a.func,onToggleFlyout:C.a.func.isRequired,pin:C.a.shape({attribution:C.a.shape({author_name:C.a.string,provider_favicon_url:C.a.string}),buyable_product:C.a.shape({}),description:C.a.string,id:C.a.string.isRequired,image_url:C.a.string,image_crop:C.a.shape({max_y:C.a.number,min_y:C.a.number}),images:C.a.shape({"236x":C.a.shape({width:C.a.number,height:C.a.number,url:C.a.string}).isRequired,"474x":C.a.shape({width:C.a.number,height:C.a.number,url:C.a.string}),"736x":C.a.shape({width:C.a.number,height:C.a.number,url:C.a.string}),orig:C.a.shape({width:C.a.number,height:C.a.number,url:C.a.string})}),is_promoted:C.a.bool,link:C.a.string,place_summary:C.a.shape({name:C.a.string}),rich_summary:C.a.shape({display_name:C.a.string,favicon_link:C.a.string,site_name:C.a.string})}),pinsBoardEditableByViewer:C.a.bool.isRequired,pinTitle:C.a.string,requestContext:U.b,saveOptions:C.a.shape({type:C.a.oneOf(["classic","inline","controlled","persistentOneClickSave"]).isRequired}).isRequired,searchOptions:C.a.shape({query:C.a.string.isRequired,scope:C.a.string.isRequired}),selection:C.a.oneOf(["NO_SELECTION","SELECTED","UNSELECTED"]).isRequired,showOnPinAnalyticsNUX:C.a.bool,showButtons:C.a.bool.isRequired,showCondensedInfo:C.a.bool,showEditPinButton:C.a.bool.isRequired,showPromoteButton:C.a.bool,showRepinButton:C.a.bool.isRequired,showSendButton:C.a.bool.isRequired,slotIndex:C.a.number,sourceUrl:C.a.string,truncatePinHeight:C.a.bool,viewer:C.a.shape({isAuth:C.a.bool,username:C.a.string,id:C.a.string}).isRequired,viewParameter:C.a.number,viewType:C.a.number,isFlyoutOpen:C.a.bool.isRequired,showClickthroughButton:C.a.bool}),W(te,"defaultProps",{onToggleFlyout:()=>{},pinsBoardEditableByViewer:!1,showCondensedInfo:!1,showOnPinAnalyticsNUX:!1,showPromoteButton:!1});var ne=Object(o.connect)((e,t)=>{const n=t.pin.id,i=t.boardActivity,a=e.ui.app.videosAutoplaying,o=Object(V.j)(n,a),r=i&&i.id||n,s=e.activityItems[r];let l=0;return s&&null!==s.reaction_by_me&&void 0!==s.reaction_by_me&&(l=s.reaction_by_me),{currentlyPlayingVideo:o,reactionByMe:l}},(e,t)=>({updateReaction:Object(H.bindActionCreators)(z.c,e)}))(te),ie=n("vl7u");function ae(e){const t=e.feedbackType,n=e.topic,i=e.pinner||{},o=i.full_name,r="topic"===t,s=!r&&"followed"===t,l=`/${i.username}/`,c=Object(ie.g)(n),u=`/search/pins/?q=${encodeURIComponent(c)}&rs=image_only_attribution`,p=r?u:l,m={topic:f.a._("From {topic}","attribution on pin rep"),followed:f.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:f.a._("Picked for you","attribution on pin rep"),pfy:f.a._("Picked for you","attribution on pin rep")}[t];if(!m)return null;if(s||r){const e=0===m.indexOf("{"),t=r?n:o,i=e?m.slice(m.indexOf("}")+1):m.slice(0,m.indexOf("{"));return e?a.a.createElement(d.b,{display:"inlineBlock",marginTop:1},a.a.createElement(w.b,{to:p},a.a.createElement(d.J,{bold:!0,inline:!0,size:"xs",truncate:!0},t)),a.a.createElement(d.J,{inline:!0,size:"xs"},i)):a.a.createElement(d.b,{display:"inlineBlock",marginTop:1},a.a.createElement(d.J,{inline:!0,size:"xs"},i),a.a.createElement(w.b,{to:p},a.a.createElement(d.J,{bold:!0,inline:!0,size:"xs",truncate:!0},t)))}return a.a.createElement(d.b,{display:"inlineBlock",marginTop:1},a.a.createElement(d.J,{inline:!0,size:"xs"},m))}var oe=n("Irlq");function re({pin:e,feedbackType:t,imageOnlyAttribution:n,isHovering:i,isVideo:o,onClickThrough:r,sourceUrl:s}){const l=Object(I.m)(e.id),c=e.attribution||{},u=c.author_url||c.provider_url,p=c.author_name,m=c.rich_site_name||c.provider_name,h=p?Object(oe.b)(f.a._("by {{ authorName }}","attribution on pin rep"),{authorName:p}):m,g=!h&&e.has_required_attribution_provider?e.domain:h,b=u||s,y=b&&g,v=i&&!y&&n&&!o&&!e.is_native&&"followed"!==t,E=(e.source_interest||{}).name,_="io-topic-attr-"+E;return a.a.createElement(a.a.Fragment,null,y&&a.a.createElement(d.b,{paddingY:1},a.a.createElement(d.J,{size:"sm",bold:!0},a.a.createElement(w.b,{deeplinkUrls:l,external:!0,onClick:r,pinId:e.id,stopPropagation:!0,style:{color:"#898989"},to:b},g))),n&&t&&a.a.createElement(d.b,{"data-test-id":_}),v&&t&&a.a.createElement(ae,{feedbackType:t,pinner:e.pinner,topic:E}))}var se=n("xP02");function le({avatarUrl:e,creditNameLink:t,name:n=""}){return t?a.a.createElement(w.b,{className:"underlineLink",stopPropagation:!0,to:t},a.a.createElement(d.a,{name:n,src:e,size:"sm"})):a.a.createElement(d.a,{name:n,src:e,size:"sm"})}function ce({name:e,creditNameLink:t}){return a.a.createElement(d.b,null,t?a.a.createElement(w.b,{className:"underlineLink",stopPropagation:!0,to:t},a.a.createElement(d.J,{truncate:!0,size:"xs",bold:!0},e)):a.a.createElement(d.J,{truncate:!0,size:"xs",bold:!0},e))}function de({title:e,link:t}){return e?a.a.createElement(d.b,null,t?a.a.createElement(w.b,{className:"underlineLink",stopPropagation:!0,to:t},a.a.createElement(d.J,{truncate:!0,size:"xs"},e)):a.a.createElement(d.J,{truncate:!0,size:"xs"},e)):null}var ue=n("VI9K");const pe=32,me=e=>!!e.promoter&&!e.is_downstream_promotion;var he=Object(o.connect)(null,e=>({setMostRecentPin:t=>e(Object(ue.b)(t))}))(function({hideTitle:e,pin:t,viewType:n,viewParameter:i,setMostRecentPin:o}){const r=t.board,s=t.promoter,l=t.pinner||{},c=me(t),u=t.promoter||l,p=()=>{o(t.id),Object(D.a)(101,{view:n,viewParameter:i,element:c?283:27,objectId:t.id})};let m,h,g,b,y,v;c&&s?(m=`/${s.username}/`,h=f.a._("Promoted by"),b=s.full_name,v=s.image_small_url):(m=r&&r.url,h=l.full_name,b=r&&r.name&&"protected"!==r.privacy?r.name:"",v=l.image_small_url,g=`/${l.username}/`,y=r?r.url:"");const E=!c&&!!s,_=a.a.createElement(d.b,{display:"flex",direction:"row",alignItems:"center",marginLeft:-1,marginRight:-1},a.a.createElement(d.b,{paddingX:1},a.a.createElement(se.a,{user:u,username:u&&u.username,avatarSize:pe,isDarkPromoter:E,pinId:t.id,viewParameter:i},a.a.createElement(le,{avatarUrl:v,creditNameLink:g,name:h}))),a.a.createElement(d.b,{paddingX:1,overflow:"hidden"},a.a.createElement(ce,{creditNameLink:g,name:h}),!e&&a.a.createElement(de,{link:y,title:b})));return!m||g||y?_:a.a.createElement(w.b,{className:"underlineLink",stopPropagation:!0,onClick:p,to:m},_)});const ge=Object(i.lazy)(()=>n.e("BoardActivityPinRepReactionsCommon").then(n.bind(null,"sB4Q"))),be=e=>e&&e.board_activity&&e.board_activity.id||e.id;var fe=function({pin:e,feedbackType:t,hideAttribution:n,imageOnlyAttribution:i,isHovering:o,imageOnly:r,isVideo:s,onClickThrough:l,onReactionReplyClick:u,showCredits:p,showPinReactionsReply:m,sourceUrl:h,viewParameter:g,viewType:b}){const f=e.promoter||!r&&(p||"followed"===t),y=e.board&&e.board.should_show_board_activity;let v=f&&!n;("promoted"===t||e.promoter&&!e.is_downstream_promotion)&&(v=!0);const w=be(e);return a.a.createElement(a.a.Fragment,null,a.a.createElement(re,{pin:e,feedbackType:t,imageOnlyAttribution:i,isHovering:o,isVideo:s,onClickThrough:l,sourceUrl:h}),(f||y)&&a.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:{zIndex:c.a.max,position:"relative"}},paddingY:1},!y&&v&&a.a.createElement(he,{hideTitle:!!y,pin:e,viewParameter:g,viewType:b}),y&&a.a.createElement(d.b,{position:"relative","data-test-id":"board-activity-reactions",minHeight:16},a.a.createElement(O.a,null,a.a.createElement(ge,{pinId:e.id,activityId:w,showReply:m})))))},ye=n("HcgI");var ve=Object(o.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}))(({carousel_data:e,description:t})=>{let n=t;if(e){const t=e.carousel_slots,i=void 0===t?[]:t,a=e.index;i[a]&&i[a].details&&(n=i[a].details)}const i=e?{height:"39px",overflow:"hidden"}:{};return a.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:i},paddingY:1},a.a.createElement(d.J,{size:"sm",bold:!0},a.a.createElement(ye.a,{text:n,options:{hashtags:{appendText:`${n}`,source:"hashtag_pinrep"}}})))}),we=n("EQo2");var Ee=Object(o.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}))(({carousel_data:e,pinId:t,sourceUrl:n,pinDeeplinkUrls:i,handleOneTapLogging:o})=>{let r,s="one-tap-desktop",l=n;if(e){const t=e.carousel_slots,n=void 0===t?[]:t,i=e.id,a=e.index;n[a]&&n[a].link&&(l=n[a].link),r={carousel_slot_id:n[a]&&n[a].id,carousel_data_id:i,carousel_slot_index:a},s+="-carousel"}return a.a.createElement(P.a,{name:"web_grid_immersive"},({anyEnabled:e})=>a.a.createElement(P.a,{name:"ads_desktop_whitespace_gaps"},({anyEnabled:n})=>a.a.createElement("div",{"data-test-id":!e&&n?"oneTapPromotedPin":"otpp"},a.a.createElement(S.a,{id:s},a.a.createElement(w.b,{auxData:r&&r,className:"oneTapNavigateLink",deeplinkUrls:i,external:!0,onClick:o,pinId:t,stopPropagation:!0,to:l})))))});function _e({buyableProduct:e,showProductInfo:t,richSummary:n}){if(!t)return null;let i,o;if(e){const t=e.display_active_min_price,n=e.display_active_max_price;o=e.is_available,i=t===n?t:`${t} - ${n}`}else if(n&&(n.products||[]).length>0){const e=n.products[0].offer_summary||{},t=e.availability;i=e.price,1===t?o=!0:2===t&&(o=!1)}return i?a.a.createElement(d.b,{display:"flex",paddingY:1},a.a.createElement(d.b,{marginRight:2},a.a.createElement(d.J,{size:"sm"},i)),void 0!==o&&a.a.createElement(d.J,{size:"sm",color:o?"darkGray":"gray"},o?f.a._("In stock","A product Pin that is available"):f.a._("Out of stock","A product Pin that is out of stock"))):null}const Ce=76;var Oe=function({chips:e}){return a.a.createElement(d.b,{display:"flex",direction:"row",justifyContent:"between"},e.map(e=>{const t=e.images["750x"]||{};return a.a.createElement(d.b,{marginTop:1,key:e.id},a.a.createElement(w.b,{stopPropagation:!0,to:`/pin/${e.id}/`},a.a.createElement(d.t,{shape:"rounded",width:Ce,height:Ce,wash:!0},a.a.createElement(d.o,{alt:"",naturalHeight:t.height,naturalWidth:t.width,src:t.url,fit:"cover"}))))}))},Se=n("mnfC"),xe=n("E1Qe"),ke=n("19Gw"),Ie=n("4081"),Pe=n("cNuv"),Te=n("k3nM"),je=n("bUMO"),Re=n("mcMS");function De({richSummary:e}){return a.a.createElement(d.b,{display:"flex"},!!e.display_cook_time&&a.a.createElement(d.b,{alignItems:"center",display:"flex"},a.a.createElement(d.m,{icon:"clock",accessibilityLabel:f.a._("cooking time","time it takes to cook a recipe"),color:"darkGray",size:10,inline:!0}),a.a.createElement(d.b,{paddingX:1},a.a.createElement(d.J,{inline:!0,size:"sm"},!!e.display_cook_time&&Object(je.a)(Object(Re.b)(e.display_cook_time))))))}var Le=n("TRIq"),Ae=n("LCmp"),Me=n("q579"),Be=n("kR61"),Fe=n("dmID"),Ne=n("wHKh"),Ue=n("3BJc"),ze=n("JsRk"),He=n("kIql"),Ve=n("hCBh");function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){We(e,t,n[t])})}return e}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return Qe}),n.d(t,"a",function(){return Xe});const Ye=Object(i.lazy)(()=>n.e("PinFeedbackButtonCommon").then(n.bind(null,"w8LQ"))),qe=Object(i.lazy)(()=>n.e("PinFeedbackConfirmationCommon").then(n.bind(null,"+LSA"))),Je=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"dmID"))),$e=228,Qe={NO_SELECTION:"NO_SELECTION",SELECTED:"SELECTED",UNSELECTED:"UNSELECTED"},Ke=e=>{const t=e.aggregated_pin_data.creator_analytics,n=e.creator_analytics,i=e.story_pin_data_id;return!n||!!!i&&t?t:n},Xe={boardCount:C.a.number,carouselIndex:C.a.number,componentType:C.a.number,contextLogData:C.a.shape({}),createdAt:C.a.string,debugImpressionStarted:C.a.bool,debugImpressionLogged:C.a.bool,dispatch:C.a.func,feedbackText:C.a.shape({title:C.a.oneOfType([C.a.string,C.a.arrayOf(C.a.node)]),subTitle:C.a.oneOfType([C.a.string,C.a.arrayOf(C.a.node)])}),hideFeedbackButton:C.a.bool,hideHover:C.a.bool,showImageOnly:C.a.bool,isShareable:C.a.bool,showCondensedInfo:C.a.bool,feedback:C.a.shape({type:C.a.oneOf(["promoted","followed","topic","pfyBoard","pfy","search","newsHub","default"]).isRequired,data:C.a.shape({})}),lowResOnly:C.a.bool,highResOnly:C.a.bool,onError:C.a.func,onLoad:C.a.func,pin:xe.a.isRequired,pinsBoardEditableByViewer:C.a.bool,router:C.a.shape({push:C.a.func.isRequired}),saveOptions:C.a.shape({type:C.a.oneOf(["classic","inline","controlled","persistentOneClickSave"]).isRequired}),savedInfo:C.a.shape({boardId:C.a.string,localPinId:C.a.string,sectionId:C.a.string,title:C.a.string,url:C.a.string}),searchOptions:C.a.shape({query:C.a.string.isRequired,scope:C.a.string.isRequired}),selection:C.a.oneOf([Qe.NO_SELECTION,Qe.SELECTED,Qe.UNSELECTED]),requestContext:U.b,showCredits:C.a.bool,showFeedback:C.a.bool,showPinReactionsReply:C.a.bool,showProductInfo:C.a.bool,slotIndex:C.a.number.isRequired,truncatePinHeight:C.a.bool,viewer:C.a.shape({id:C.a.string,isAuth:C.a.bool,isPartner:C.a.bool,username:C.a.string}),viewParameter:C.a.number,viewType:C.a.number};class Ze extends a.a.Component{constructor(...e){super(...e),We(this,"state",{isHovering:!1,flyoutShown:!1,flyoutSource:"send",isNewlySaved:!1,savedInfo:this.props.savedInfo}),We(this,"onPinRepClick",e=>{const t=this.props,n=t.pin,i=n.id,a=n.is_promoted,o=t.requestContext,r=t.router,s=t.viewer,l=t.setCurrentVideo,c=t.videosAutoplaying,d=Object(V.b)(i,this.isEligibleForAnalyticsCloseup());Object(V.j)(i,c)&&(0===this.currentVideoCurrentTime||this.currentVideoCurrentTime)&&l({pinId:i,isPromoted:a,currentTime:this.currentVideoCurrentTime}),Object(T.b)("Lead",()=>{y.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Pin Click"})});const u=e.target;if(!u||!u.nodeName||!u.parentElement)return;const p=new m.b(this.context.userAgent.raw,this.context.userAgent.platform);if(p.shouldDeepLink(document.referrer,this.context.userAgent,s.isAuth))return e.preventDefault(),void p.navigateToDeepLink(this.context.unauthId,Object(I.m)(i));const h=u.parentElement,g=u.nodeName,b=h.nodeName,f=h.parentElement&&h.parentElement.nodeName;"A"!==g&&"A"!==b&&"BUTTON"!==g&&"BUTTON"!==b&&"A"!==f&&"BUTTON"!==f&&(new j.c(o,"smb_pin_stats_from_business_profile").enabled(),e.metaKey||e.ctrlKey?(e.preventDefault(),window.open(d)):r.push(d))}),We(this,"getComponentType",()=>this.props.componentType||0),We(this,"getSourceURL",()=>{const e=this.props.pin,t=e.link;return e.tracked_link||t}),We(this,"getPinTypes",()=>{const e=this.props.pin,t=e.attribution,n=e.buyable_product,i=e.carousel_data,a=e.embed,o=e.is_collage_pin,r=e.is_eligible_for_web_closeup,s=e.rich_summary,l=e.videos,c=[];i&&c.push("carousel"),r&&c.push("oneTap"),Object(V.i)(l)&&c.push("video");const d=a||t&&t.embed||null;return d&&"gif"===d.type&&c.push("gif"),d&&d.src&&!d.type&&c.push("embeddedVideo"),(n||s&&"product"===s.type_name)&&c.push("product"),s&&"recipe"===s.type_name&&c.push("recipe"),o&&c.push("collage"),c}),We(this,"feedbackHelpers",Object(b.a)({i18n:f.a,interpolateNamedTemplate:oe.b})),We(this,"handleSave",()=>{this.setState({isHovering:!0})}),We(this,"handleOneTapLogging",()=>{const e=this.props,t=e.contextLogData,n=e.pin.id,i=r.a.getInstance(),a=i.getViewFromContext();this.handleClickthroughLogging(!0),Object(D.a)(13,Ge({},t,{closeup_navigation_type:"web_closeup",objectId:n,component:0,view:3})),i.addViewToContext(a)}),We(this,"_getPrefetchCompletionPercent",e=>{if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const t=window.prefetchCompletion[e],n=t.downloadedAssets,i=t.totalAssets;return i?(n/i*100).toFixed(3).toString():"-1"}),We(this,"handleClickthroughLogging",e=>{const t=this.props,n=t.contextLogData,i=t.pin,a=i.id,o=i.link,r=t.slotIndex,s=t.viewType,l=t.viewParameter;Object(D.a)(12,Ge({},n,{view:s,viewParameter:l,component:this.getComponentType(),objectId:a,grid_index:r,pin_id:a,prefetch_percentage_complete:e?this._getPrefetchCompletionPercent(o):null}))}),We(this,"handleReactionReplyClick",e=>()=>this.props.router.push(e)),We(this,"handleToggleFlyout",(e,t=!1,n)=>{const i=!(!e&&!t);this.setState({flyoutShown:e,isHovering:i,flyoutSource:n})}),We(this,"handleMouseOver",()=>{this.state.isHovering||this.setState(()=>({isHovering:!0}))}),We(this,"handleMouseLeave",()=>{this.state.isHovering&&this.setState(()=>({isHovering:!1}))}),We(this,"handleCurrentVideoCurrentTimeChanged",e=>{const t=this.props,n=t.pin,i=t.videosAutoplaying,a=n.id;Object(V.j)(a,i)&&(this.currentVideoCurrentTime=e.time)})}static getDerivedStateFromProps(e,t){return e.savedInfo&&t.savedInfo!==e.savedInfo?{isNewlySaved:!0,savedInfo:e.savedInfo}:null}get canDelete(){return(this.props.pin.access||[]).includes("delete")}get isOwnPin(){return(this.props.pin.access||[]).includes("write")}getTruncatedString(e){const t=this.props.pin.is_promoted?60:50;return e&&Object(Ae.a)(e.trim(),t)||""}getPinTitle(){const e=this.props.pin,t=e.carousel_data,n=e.title,i=e.buyable_product,a=e.rich_summary,o=a&&"mobile application"!==a.type_name;if(this.isOwnPin&&!t)return"";if(t){const e=t.carousel_slots,n=void 0===e?[]:e,i=t.index;if(n[i]&&n[i].title)return n[i].title.trim()}return this.getTruncatedString(n||o&&a.display_name||i&&i.title)}getFeedbackType(){const e=this.props,t=e.feedback,n=e.viewParameter,i=e.pin;return this.feedbackHelpers.getFeedbackType({board:i.board,feedback:t,viewParameter:n,pin:i,pinner:i.pinner})}isEligibleForAnalyticsCloseup(){const e=this.props,t=e.requestContext,n=e.viewParameter,i=e.viewer,a=92===n,o=43===n;let r=!1;return this.isOwnPin&&i.isPartner&&!a&&!o&&(r=new j.c(t,"smb_pin_stats_from_business_profile").enabledWithNoActivation()),r}render(){const e=this.props,t=e.boardCount,n=e.carouselIndex,i=e.contextLogData,o=e.createdAt,r=e.debugImpressionLogged,s=e.debugImpressionStarted,u=e.denseViewSelected,m=e.feedback,b=e.feedbackText,y=e.isHomefeedContextualMenuTooltipExperience,v=e.isNewOrResurrectedNonPartner,w=e.isSocialSeasonalBoard,E=e.hideAttribution,_=e.hideFeedbackButton,C=e.showCondensedInfo,x=e.showFeedbackOverlay,k=e.isShareable,T=e.hideHover,R=e.hideSaveButton,D=e.lowResOnly,L=e.highResOnly,A=e.onError,M=e.onLoad,B=e.pin,F=e.pinsBoardEditableByViewer,N=e.saveOptions,U=e.savedInfo,z=e.searchOptions,H=e.selection,G=void 0===H?Qe.NO_SELECTION:H,W=e.showImageOnly,Y=e.slotIndex,q=e.truncatePinHeight,J=e.viewer,$=e.viewParameter,Q=e.viewType,K=e.showCredits,X=e.showFeedback,Z=e.showProductInfo,ee=e.showPinReactionsReply,te=e.showPinStats,ie=e.showSavedInfo,ae=e.undoAction,oe=e.undoText,re=e.requestContext,se="boolean"==typeof W?W:v,le=v,ce=B.ad_match_reason,de=B.aggregated_pin_data,ue=B.board,pe=B.board_activity,me=B.buyable_product,ge=B.carousel_data,be=B.creator_analytics,Ce=B.debug_info_html,xe=B.description,je=void 0===xe?"":xe,Re=B.domain,Ae=B.dominant_color,Ue=B.grid_title,ze=B.id,He=B.image_signature,We=B.images,Xe=B.is_quick_promotable,Ze=B.is_eligible_for_web_closeup,et=B.pinner,tt=void 0===et?{}:et,nt=B.promoted_is_removable,it=B.promoter,at=B.recommendation_reason,ot=B.rich_summary,rt=B.source_interest,st=B.category,lt=this.state,ct=lt.flyoutShown,dt=lt.flyoutSource,ut=lt.isHovering,pt=lt.isNewlySaved,mt=this.getSourceURL(),ht=((g.a.instance.getPlacedExperience(12)||{}).display_data||{}).lite,gt=(this.isOwnPin||this.canDelete)&&!ht,bt=!ht&&k,ft=Ge({},i,Object(Be.a)(B,i)),yt=((de||{}).aggregated_stats||{}).done,vt=(de||{}).pin_tags_chips,wt=We&&We["236x"].height,Et=We&&We["236x"].width,_t=this.getPinTypes(),Ct=Object(V.g)(B),Ot=Object(Fe.getEligiblePinTypes)(_t),St=Ot.isCarousel,xt=Ot.isOneTap,kt=Ot.isRecipe,It=Ot.isStoryPin,Pt=Ot.isVideo,Tt=It?"":this.getTruncatedString(Ue),jt=this.getPinTitle(),Rt=this.getTruncatedString(je),Dt=se,Lt=!Dt&&"string"==typeof Ue&&!ge,At=!Dt&&!jt&&!Lt,Mt=!(Dt||!jt||Lt||w),Bt=l()("PinRep","Module","Pin","hasAttribution","summary","fullWidth",{flyoutShown:ct}),Ft=Object(Ne.j)(B),Nt=_t.length>0,Ut=!xt&&!St&&Pt||kt&&!St&&(!B.rich_summary||!B.rich_summary.aggregate_rating||!B.rich_summary.aggregate_rating.review_count),zt=!w&&Mt&&jt.length>0,Ht=!w&&At&&Rt.length>0,Vt=!zt&&!Ht&&w,Gt=J.isAuth&&J.isEmployee&&Ce,Wt=0!==Object.keys(be||{}).length||0!==Object.keys(de||{}).length&&0!==Object.keys(de.creator_analytics||{}).length,Yt=N||(!gt&&void 0!==t&&t>1?{type:"inline"}:{type:"classic"}),qt=J.isAuth&&bt&&k&&!Vt,Jt="persistentOneClickSave"===Yt.type,$t=Yt&&Yt.savedInfo&&Yt.savedInfo.title||"",Qt=this.getFeedbackType();let Kt=Re;if(ge){const e=n||ge.index||0,t=ge.carousel_slots,i=void 0===t?[]:t,a=i[e]&&i[e].link||"";Kt=(Kt=a&&Me.a.parse(a).hostname)&&Kt.replace("www.","")||Re}const Xt=B.is_native||B.promoter||!Dt&&(K||"followed"===Qt),Zt=B.board&&B.board.should_show_board_activity,en=Zt&&Xt&&!E,tn=1===Y&&!!y,nn=new j.c(re,"px_pinstats_90_day_default_on_grid").enabled();return a.a.createElement(d.b,{position:"relative"},a.a.createElement("div",{className:Bt,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,"data-test-id":"pin","data-test-pin-id":B.id},U&&ie&&a.a.createElement(S.a,{id:"savedInfo"},a.a.createElement(d.b,{width:"172px",marginTop:Jt?3:2,paddingY:3,paddingX:3,position:"absolute",left:!0,top:!0,dangerouslySetInlineStyle:{__style:{zIndex:c.a.saved}}},a.a.createElement(Se.a,{isNewlySaved:pt,name:Jt?$t:U.title,url:Jt?Yt&&Yt.savedInfo&&Yt.savedInfo.url:U.url}))),a.a.createElement(p,{debugImpressionLogged:r,debugImpressionStarted:s,slotIndex:this.props.slotIndex},a.a.createElement("div",{className:l()("pinWrapper",X&&"disableHover"),"data-test-id":"pinWrapper",onClick:this.onPinRepClick},en&&Zt&&a.a.createElement(d.b,{marginBottom:2},a.a.createElement(he,{hideTitle:!!Zt,pin:B,viewParameter:$,viewType:Q})),Ze&&a.a.createElement(Ee,{pinDeeplinkUrls:Object(I.m)(ze),handleOneTapLogging:this.handleOneTapLogging,pinId:ze,sourceUrl:mt}),a.a.createElement(P.a,{name:"web_nux_one_tap_save",isEligible:J.isAuth&&Object(Ve.d)({user:J,days:7})},({anyEnabled:e})=>a.a.createElement(ne,{boardActivity:pe,buyableProduct:me,componentType:this.getComponentType(),contextLogData:ft,denseViewSelected:u,description:je,domain:Kt,dominantColor:Ae,doneCount:yt,hideSaveButton:R,imageHeight:wt,imageSignature:He,images:We,imageWidth:Et,showReactions:Zt,isEligibleForWebCloseup:Ze,isEligibleForAnalyticsCloseup:this.isEligibleForAnalyticsCloseup(),inNewUserOneTapExperiment:e,onSave:this.handleSave,onToggleFlyout:this.handleToggleFlyout,pin:B,pinsBoardEditableByViewer:F,pinTitle:jt,requestContext:re,saveOptions:Yt,searchOptions:z,selection:G,showButtons:!!(ut&&!T||ct),showCondensedInfo:C,showEditPinButton:gt,showPromoteButton:Xe,showRepinButton:!Xe&&!nt,showSendButton:qt,slotIndex:Y,sourceUrl:mt,truncatePinHeight:q,viewer:J,viewParameter:$,viewType:Q,isFlyoutOpen:ct&&"save"!==dt},a.a.createElement(P.a,{name:"ads_desktop_video_ads",isEligible:Pt},({anyEnabled:e})=>!Pt||!e&&Ct?a.a.createElement(we.a,{lowResOnly:D,highResOnly:L,onLoad:M,onError:A,pin:B,saved:!!U}):a.a.createElement(Te.a,{inAdsDesktopVideoExperiment:e,isExperimentalPinRep:!1,lowResOnly:D,highResOnly:L,onLoad:M,onError:A,pin:B,saved:!!U,onTimeChange:this.handleCurrentVideoCurrentTimeChanged,viewType:Q,viewParameter:$,currentTimeFromPinRep:this.currentVideoCurrentTime})))),!!vt&&!C&&a.a.createElement(Oe,{chips:vt}),Vt&&a.a.createElement(d.b,{marginTop:2,marginBottom:3,width:"100%"},a.a.createElement(d.b,{width:$e,margin:"auto"},a.a.createElement(Le.a,{onFlyoutDismiss:()=>this.handleToggleFlyout(!ct&&"save"!==dt),onToggleFlyout:()=>this.handleToggleFlyout(!ct&&"save"!==dt),pinId:B.id,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:ct&&"save"!==dt,viewType:Q}))),(!Dt||Qt)&&!C&&!Vt&&(Nt||te||zt||Ht||Z||o||Lt||Gt||Qt)&&a.a.createElement(d.b,{display:"flex",direction:"row",marginTop:1},a.a.createElement(d.b,{paddingX:2,flex:"grow",width:"100%"},te&&Wt&&a.a.createElement(ke.a,{stats:Ke(B),isVideo:Pt,isStoryPin:!!B.story_pin_data_id,show90Days:nn}),o&&!Ct&&a.a.createElement(d.b,{paddingY:1},a.a.createElement(d.J,{color:"darkGray",size:"xs"},f.a.getHumanizedTimesince(o))),Nt&&!Ut&&a.a.createElement(d.b,{"data-test-id":"pin-type",minHeight:St&&xt?40:24},a.a.createElement(O.a,null,a.a.createElement(Je,{componentType:0,viewParameter:$,viewType:Q,pinId:ze,pin:B,types:_t}))),a.a.createElement(d.b,{display:"flex",justifyContent:"between"},a.a.createElement(d.b,{column:12},a.a.createElement(P.a,{name:"web_creators_story_pin_display",activate:!0,isEligible:!!B.story_pin_data_id},({anyEnabled:e})=>e&&a.a.createElement(d.b,{paddingY:1},a.a.createElement(Pe.a,{icon:"story-pin",pinId:ze}))),a.a.createElement(_e,{buyableProduct:me,richSummary:ot,showProductInfo:Z}),Lt&&Tt.length>0&&a.a.createElement(d.b,{paddingY:1},a.a.createElement(d.J,{size:"sm",bold:!0},a.a.createElement(ye.a,{text:Tt,options:{hashtags:{appendText:Tt,source:"hashtag_pinrep"}}}))),Mt&&jt.length>0&&a.a.createElement(Ie.a,{title:jt,pinId:ze}),At&&Rt.length>0&&a.a.createElement(ve,{description:Rt,pinId:ze}),kt&&a.a.createElement(De,{richSummary:ot}),a.a.createElement(fe,{feedbackType:Qt,hideAttribution:E,imageOnly:Dt,imageOnlyAttribution:le,isHovering:ut,isVideo:Pt,onClickThrough:this.handleClickthroughLogging,onReactionReplyClick:this.handleReactionReplyClick,pin:B,showCredits:K,showPinReactionsReply:ee,sourceUrl:mt,viewParameter:$,viewType:Q}))),Gt&&a.a.createElement(d.b,{paddingY:1},a.a.createElement("pre",null,Ce))),a.a.createElement(d.b,{display:"flex",direction:"column",alignItems:"center"},!_&&Qt&&a.a.createElement(d.b,{"data-test-id":"feedback-button",display:"flex",justifyContent:"end",position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:c.a.max}},width:24,height:24},a.a.createElement(O.a,null,a.a.createElement(Ye,{ad_match_reason:ce,bestPinImgSrc:Ft,board:ue,feedbackData:m&&m.data||{},feedbackType:Qt,hideDownload:Pt,isHomefeedContextualMenuTooltip:tn,pinDescription:Rt,pinTitle:jt,pinId:ze,pinCategory:st,pinImage:We&&We["236x"].url,pinner:tt,promoter:it,recommendationReason:at,reportPin:Object(h.a)({pin:B,viewParameter:$,viewType:Q}),sourceInterest:rt,viewParameter:$,viewType:Q})))))))),a.a.createElement(P.a,{name:"web_homefeed_control_panel_nag",activate:!1},({anyEnabled:e})=>a.a.createElement(P.a,{name:"web_homefeed_control_panel_pin_feedback"},({anyEnabled:t})=>a.a.createElement(P.a,{name:"web_homefeed_control_contextual_menu_v2"},({anyEnabled:n})=>!!X&&a.a.createElement(O.a,null,a.a.createElement(qe,{feedbackText:b,feedbackType:Qt,pinId:ze,pinImage:We&&We["236x"].url,undoAction:ae,undoText:oe,isContextMenuV2Exp:n,isHomefeedControlPanelExp:e||t,showFeedbackOverlay:x}))))))}}We(Ze,"propTypes",Xe),We(Ze,"contextTypes",{unauthId:C.a.string.isRequired,userAgent:C.a.shape({platform:C.a.string.isRequired,platformVersion:C.a.arrayOf(C.a.number),raw:C.a.string.isRequired})}),We(Ze,"defaultProps",{pinsBoardEditableByViewer:!1,showCondensedInfo:!1,truncatePinHeight:!0,showSavedInfo:!0});t.c=Object(H.compose)(ze.withRouter,He.a,U.e,Object(o.connect)(({boards:e,experiences:t,pins:n,ui:i,viewer:a},{pin:{id:o,board:r}})=>{const s=n[o],l=a.isAuth?a.boardCount:void 0,c=r&&r.id,d=e.content[c],u=d&&(d.access||[]).includes("write"),p=e.isSocialSeasonalBoard,m=void 0!==p&&p,h=a.isAuth&&(Object(Ve.d)({user:a})||Object(Ve.e)({user:a}))&&!a.isPartner;let g;if(s){const e=s.carousel_data;g=e&&e.index}const b=t&&t.eligibleExperiences&&t.eligibleExperiences[1000116]&&501093===t.eligibleExperiences[1000116].experience_id,f=i.app?i.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}};return{isSocialSeasonalBoard:m,boardCount:l,carouselIndex:g,isHomefeedContextualMenuTooltipExperience:b,feedbackText:s&&s.feedbackText,hideSaveButton:s&&s.pinner&&s.pinner.blocked_by_me,isNewOrResurrectedNonPartner:h,isShareable:!d||"secret"!==d.privacy,pinsBoardEditableByViewer:u,savedInfo:s&&s.savedInfo,showFeedback:s&&s.showFeedback,showFeedbackOverlay:s&&s.showFeedbackOverlay,undoAction:s&&s.undoAction,undoText:s&&s.undoText,videosAutoplaying:f}},(e,t)=>({setCurrentVideo:t=>e(Object(Ue.c)(t))})))(Ze)},XHfN:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("8gFa"),r=n.n(o),s=n("tcFq");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e){const t=e.eventData.videoEvent,n=t.videoDuration,i=t.startTime,a=t.endTime,o=t.videoStartTime,r=t.videoEndTime,s=t.isAudible,d=t.height,u=t.width,p=t.playbackState,m=t.quartile,h=t.quartilePercentValue,g=t.windowHeight,b=t.windowWidth,f=t.viewability;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}({},c(e,["eventData"]),{eventData:{videoEventData:{videoDuration:n,time:i,endTime:a,videoTime:o,endVideoTime:r,isAudible:s,height:d,width:u,playbackState:p,quartile:m,quartilePercentValue:h,windowHeight:g,windowWidth:b,viewability:f}}})}var u=n("BEiP"),p=n("NmcB"),m=n("+U6O");function h(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){b(e,t,n[t])})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return S});const f=[0,.25,.5,.75,.95,.97],y=[0,.5,.8,1],v={threshold:y},w=1e3,E=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function _(){return(new Date).getTime()}function C(e,t){for(let n=0;n<t.length;n+=1){const i=t[n],a=t[n+1];if(null==a)return i;if(i<=e&&e<a)return i}return null}function O(e){return!!e.volume&&e.volume>0}class S extends a.a.Component{constructor(e){super(e),b(this,"handleWindowResize",()=>{const e=this.getDimensions(),t=this.currentInterval,n=t.height,i=t.width;e.height!==n||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}),b(this,"handleTimeChange",e=>{if(!this.currentInterval.videoDuration)return;const t=function(e){return C(e,f)}(e.time*w/this.currentInterval.videoDuration);if(this.props.playing&&null!=t&&f.includes(t)&&!this.seenQuartiles.has(t)){const e=_();this.logVideoEvent(6906,g({},this.currentInterval,{startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*t),quartilePercentValue:t})),this.seenQuartiles.add(t)}this.videoTime=e.time*w,this.props.onTimeChange&&this.props.onTimeChange(e)}),b(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=e.duration*w,this.props.onDurationChange&&this.props.onDurationChange(e)}),b(this,"handleReady",e=>{this.ready||(this.ready=!0,this.startNewInterval({playbackState:this.getPlaybackState(this.props)})),this.props.onReady&&this.props.onReady(e)}),b(this,"onEnded",e=>{this.logFourthQuartileEvent(),this.seenQuartiles=new Set,this.props.onEnded&&this.props.onEnded(e)}),b(this,"handleVisibilityChange",(e,t)=>{if(0===e.length)return;const n=e.slice(-1)[0],i=function(e){return C(e,y)}(Number.parseFloat(n.intersectionRatio.toFixed(2)));null!=i&&i!==this.currentInterval.viewability&&this.startNewInterval({viewability:i})}),b(this,"handleClose",()=>{this.startNewInterval()}),b(this,"handleContextMenu",e=>{e.preventDefault()});const t=_();this.ready=!1,this.handleWindowResize=r()(this.handleWindowResize,1e3),this.videoWrapperRef=a.a.createRef(),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:O(e),playbackState:this.getPlaybackState(e),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.seenQuartiles=new Set}componentDidMount(){this.currentInterval=g({},this.currentInterval,this.getDimensions()),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e){const t={};O(e)&&!O(this.props)?t.isAudible=!1:!O(e)&&O(this.props)&&(t.isAudible=!0);const n=this.getPlaybackState(this.props);this.getPlaybackState(e)!==n&&(t.playbackState=n),Object.keys(t).length>0&&this.startNewInterval(t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e){return this.ready?e.playing?E.PLAYING:E.PAUSED:E.LOADING}getDimensions(){let e,t;if("object"==typeof this.videoWrapperRef&&this.videoWrapperRef.current){const n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const n=t.height,i=t.width,a=t.windowHeight,o=t.windowWidth,r=t.viewability,s=h(t,["height","width","windowHeight","windowWidth","viewability"]);if(null!=n&&null!=i&&null!=a&&null!=o&&null!=r){const t=g({},s,{height:n,width:i,windowHeight:a,windowWidth:o,viewability:r});Object(p.a)(e,d(g({},this.props.contextLogData,{eventData:{videoEvent:t}})))}}logFourthQuartileEvent(){const e=_();this.logVideoEvent(6906,g({},this.currentInterval,{startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1}))}startNewInterval(e){const t=_();this.logVideoEvent(6904,g({},this.currentInterval,{endTime:t,videoEndTime:this.videoTime})),this.currentInterval=g({},this.currentInterval,e,{startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1})}render(){const e=this.props,t=(e.contextLogData,h(e,["contextLogData"]));return t.onDurationChange=this.handleDurationChange,t.onReady=this.handleReady,t.onTimeChange=this.handleTimeChange,t.onEnded=this.onEnded,a.a.createElement(s.a,{options:v,onVisibilityChange:this.handleVisibilityChange},a.a.createElement("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu},a.a.createElement(u.a,t)))}}b(S,"defaultProps",m.P.defaultProps)},Y1te:function(e,t,n){n.d(t,"a",function(){return s});var i=n("GyhR");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=32,r=13;class s extends i.Component{constructor(...e){super(...e),a(this,"handleKeyPress",e=>{const t=this.props.onClick;!t||e.charCode!==o&&e.charCode!==r||(e.preventDefault(),t())})}render(){const e=this.props,t=e.selected,n=e.rounded,o=e.color,r=e.onClick,s=e.children,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e}({cursor:r?"pointer":"default",borderRadius:n?"8px":0,boxShadow:t?`0 0 0 2px ${o}`:"none",outline:"none"},e.style);return i.createElement("div",{role:"button",onClick:r,onKeyPress:this.handleKeyPress,tabIndex:"0",style:l},s)}}a(s,"defaultProps",{selected:!1,rounded:!0,color:"#e60023"})},Y2BC:function(e,t,n){n.d(t,"a",function(){return m}),n.d(t,"b",function(){return g});var i=n("GyhR"),a=n("Ivf5"),o=n("jlBG"),r=n("E56J"),s=n("hvnN"),l=n.n(s),c=n("YD1u"),d=n("7Iyi");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p="-end-";function m(e={},t){return Object(o.a)("function"==typeof e?e(t):e)}function h(e={},t){return"function"==typeof e?e(t):e}function g(e,t={}){const n=e.key;function o(t){const i={};let a,o,s,l,d={fetching:i,data:i};const h={};function g(e,i,r){return e&&(a=e),i&&(o=i),r&&(s=r),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}({},a,{dispatch:t,[n]:o},s)}return function({resources:t,history:n},o){const s=t.fetching,u=t.data,b=!(a&&Object(c.a)(a,o)),f=!(s===d.fetching&&u===d.data);if(!b&&!f&&l)return l;const y=m(e.options,o);if(b&&!f&&l)return g(o);const v=s[e.name]||i,w=d.fetching[e.name]||i,E=u[e.name]||i,_=d.data[e.name]||i;h[e.name]||(0===Object.keys(E).length?r.default.increment("webapp.withResource.no-cache",.05,{resource:e.name,cache_size:0,level:"warn",v:2,xFoundKeys:null,xExpectedKey:y}):y in E?r.default.increment("webapp.withResource.cache-hit",.05,{resource:e.name,cache_size:Object.keys(E).length,level:"success",v:2}):r.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:e.name,cache_size:Object.keys(E).length,level:"error",v:2,xFoundKeys:JSON.stringify(Object.keys(E)),xExpectedKey:y})),h[e.name]=!0;const C=v!==w||E!==_||v[y]!==w[y]||E[y]!==_[y];if(!b&&!C&&l)return l;if(b&&!C&&l)return g(o);d={fetching:s,data:u};const O=E[y]||{},S=O.data,x=O.error,k=O.nextBookmark,I=O.isPrefetch,P=O.prefetchHasBeenRead,T=Boolean(v[y]),j=Boolean(E[y]);return g(o,{data:S,error:x,isAtEnd:j&&!T&&k===p,isFetching:T,isLoaded:j,nextBookmark:k,isPrefetch:I,prefetchHasBeenRead:P},{history:n})}}return function(r){class s extends i.Component{constructor(...n){super(...n),u(this,"state",{isRefreshing:!1}),u(this,"optionsKey",m(e.options,this.props)),u(this,"fetchDisabled",e=>!!t.dangerouslyDisableFetch&&t.dangerouslyDisableFetch(e||this.props)),u(this,"loadData",n=>{this.fetchDisabled(n)||n.dispatch(Object(d.a)(e.name,h(e.options,n),t.moduleRenderOptions,t.headers,t.traceLoggerHandlerName))}),u(this,"fetchMore",()=>{const n=this.props.dispatch;this.fetchDisabled()||n(Object(d.d)(e.name,h(e.options,this.props),t.moduleRenderOptions,t.headers,t.traceLoggerHandlerName))}),u(this,"refreshData",()=>{this.fetchDisabled()||(this.loadData(this.props),this.setState({isRefreshing:!0}))})}UNSAFE_componentWillMount(){const i=this.props,a=i.dispatch,o=i.history,r=i[n];r.isLoaded&&t.enabledRouteRefresh&&o.current&&"POP"!==o.current.action&&!this.fetchDisabled()?this.setState({isRefreshing:!0}):r.isLoaded&&o.current&&"POP"!==o.current.action&&t.acceptPrefetch&&r.isPrefetch&&!r.prefetchHasBeenRead&&!this.fetchDisabled()&&a(Object(d.h)(e.name,h(e.options,this.props)))}componentDidMount(){const e=this.props[n],i=this.state.isRefreshing;!1!==t.allowStale&&e.isLoaded&&!i||this.loadData(this.props)}UNSAFE_componentWillReceiveProps(t){const i=this.props[n],a=this.state.isRefreshing,o=m(e.options,t);o!==this.optionsKey&&(this.loadData(t),this.optionsKey=o),a&&i.data!==t[n].data&&this.setState({isRefreshing:!1})}render(){const e=this.props[n],t=this.state.isRefreshing;return e.fetchMore=this.fetchMore,e.refreshData=this.refreshData,e.isRefreshing=t,i.createElement(r,this.props)}}return u(s,"WrappedComponent",r),u(s,"displayName",`WithResource[${e.name}](${r.displayName||r.name})`),u(s,"propTypes",{dispatch:l.a.func.isRequired,[n]:l.a.shape({data:l.a.any,error:l.a.any,isAtEnd:l.a.bool.isRequired,isFetching:l.a.bool.isRequired,isLoaded:l.a.bool.isRequired})}),Object(a.connectAdvanced)(o)(s)}}},YAB1:function(e,t,n){n.d(t,"a",function(){return l});var i=n("cjc9"),a=n("ePT2"),o=n("eB/M"),r=n("21DP");const s={[r.a.aggregatedComment]:"AggregatedCommentReplyResource",[r.a.pin]:"AggregatedCommentResource",[r.a.didIt]:"DidItCommentsResource"};function l({objectId:e,pinId:t,tags:n,text:r,replyToCommentId:l,objectType:c}){return d=>{const u=s[c],p={objectId:e,pinId:t,tags:n,text:r,replyToCommentId:l};return a.a.create(u,p).callCreate({showError:!1}).then(t=>{const n=t.resource_response.data;return d(function(e,t){return{type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:e,aggregatedComment:t}}}(e,n)),d(Object(i.a)({feedId:e,feedType:o.a.AGGREGATED_COMMENTS,itemIds:[n.id],itemType:n.type})),t})}}},YEMi:function(e,t,n){var i=n("GyhR"),a=n("ykrh"),o=n("+U6O");t.a=function({pinTags:e,onDotClick:t,width:n,height:r}){const s=e.map((e,o)=>{const s=e.pin_tag_key,l=e.x_percent,c=e.y_percent,d=e.anchor_x,u=e.anchor_y,p=e.bbox_width,m=e.bbox_height,h={transition:"opacity 500ms ease-in-out",transitionDelay:`${50*o}ms`,animationDelay:`${50*o}ms`},g=p?l+p/2:l,b=m?c+m/2:c;return i.createElement(a.a,{key:s,x:n*(d||g)/100,y:r*(u||b)/100,onClick:e=>t&&t(e,s),backdropDiameter:32,dotDiameter:16,style:h,zIndex:2})});return i.createElement(o.b,null,s)}},YG9m:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("+U6O");const s={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},l={overlay:{__style:{backgroundColor:"#000",opacity:.8}}};t.a=(({backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:i,pinTitle:c})=>a.a.createElement(r.b,null,a.a.createElement(r.o,{alt:c||"",naturalHeight:t,naturalWidth:n,src:e},a.a.createElement(r.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:l.overlay}),a.a.createElement(r.b,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",top:!0,left:!0,height:"100%",width:"100%"},a.a.createElement(r.b,null,a.a.createElement(r.O,{shape:"rounded",onTouch:i},a.a.createElement(r.b,{alignItems:"center",display:"flex",padding:2},a.a.createElement(r.m,{accessibilityLabel:o.a._("Watch again","Button when pressed restarts the video"),color:"white",dangerouslySetSvgPath:s,size:30}),a.a.createElement(r.b,{margin:1}),a.a.createElement(r.J,{bold:!0,color:"white",size:"xl",overflow:"normal"},o.a._("Watch again","Clickable label when pressed restarts the video")))))))))},YkTi:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("PNko"),s=n.n(r),l=n("Qo1m"),c=n("iJ35"),d=n("VSY/");class u extends i.Component{constructor(...e){var t,n,a;super(...e),a=(()=>{const e=this.props,t=e.fullName,n=e.imageSrc;return n?i.createElement("img",{alt:t,src:n,title:Object(d.i)(l.a._("More from {{ fullName }}"),{fullName:t})}):i.createElement("span",{className:"icon"},t[0].toUpperCase())}),(n="getContent")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}render(){return i.createElement("div",null,this.getContent())}}var p=n("+U6O"),m=n("Ii6Q"),h=n("NmcB");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b extends i.Component{constructor(...e){super(...e),g(this,"state",{isFollowing:this.props.user.explicitly_followed_by_me||!1}),g(this,"handleFollowClick",()=>{const e=this.props,t=e.follow,n=e.unfollow,i=e.user;this.state.isFollowing?(n(i.id),this.setState({isFollowing:!1})):(t(i.id),this.setState({isFollowing:!0})),this.props.logData&&Object(h.a)(101,this.props.logData)})}renderFollowButton(){const e=this.state.isFollowing,t=this.props.isSelf,n=e?l.a._("Unfollow"):l.a._("Follow");return t?a.a.createElement(p.c,{inline:!0,disabled:!0,text:l.a._("That's you!","Text describing that the person's avatar is you")}):a.a.createElement(p.c,{color:e?"gray":"red",inline:!0,onClick:this.handleFollowClick,text:n})}render(){const e=this.props,t=e.className,n=e.showName,i=e.showFollow,o=e.size,r=e.subtitle,l=e.title,d=e.user,m=void 0===d?{}:d,h=m.full_name,g=m.username,b=m.image_key||m.image_medium_url||m.image_small_url;return a.a.createElement("div",{className:s()("Module","User","hasText","thumb",o,t)},a.a.createElement(p.b,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1},a.a.createElement(p.b,{flex:"grow",paddingX:1},a.a.createElement(c.b,{className:"profileSource",to:`/${g}/`},a.a.createElement("div",{className:"thumbImageWrapper"},a.a.createElement(u,{fullName:m.full_name,imageSrc:b})),l&&a.a.createElement("h3",{className:"title"},l),n&&a.a.createElement("h4",{className:"fullname"},h),r&&a.a.createElement("div",{className:"subtitle"},r))),i&&a.a.createElement(p.b,{paddingX:1},this.renderFollowButton())))}}g(b,"defaultProps",{followedByMe:!1,showFollow:!1,showName:!1,size:"small",subtitle:"",viewType:"thumb"});t.a=Object(o.connect)(null,e=>({follow:t=>e(Object(m.a)(t)),unfollow:t=>e(Object(m.b)(t))}))(b)},Yq20:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("hGZ8"),r=n("KsVg");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=2e3;class c extends i.Component{constructor(...e){super(...e),s(this,"componentDidMount",()=>{this.experienceToastsTimeout=window.setTimeout(()=>this.triggerEducationToasts(),l)})}componentWillUnmount(){window.clearTimeout(this.experienceToastsTimeout)}triggerEducationToasts(){const e=this.props,t=e.showToast,n=e.hideAllToasts,i=e.completionOnDismissal,r=e.placementId;n(),t(({onHide:e})=>a.a.createElement(o.a,{completionOnDismissal:i,onHide:e,placementId:r,shouldLogClicks:!1}))}render(){return null}}s(c,"defaultProps",{completionOnDismissal:!1}),t.a=Object(r.a)(c)},Yu3F:function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n.n(i),o=n("ce8s"),r=n("1kao"),s=n("+U6O");function l({accessibilityLabel:e,bgColor:t,hoverBgColor:n,children:i,onClick:l}){return a.a.createElement(o.a,{accessibilityLabel:e,onClick:l,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"}},({active:e,focused:o,hovered:l})=>a.a.createElement(r.a,{active:e,bgColor:t,focused:o,hovered:l,hoverBgColor:n,shape:"pill"},a.a.createElement(s.b,{display:"flex",alignItems:"center",justifyContent:"center",padding:1},i)))}},YvLn:function(e,t,n){},Z34B:function(e,t,n){n.d(t,"a",function(){return a});var i=n("GyhR");function a(e){return t=>{const n=n=>{const a=e(n)||null;return null===a?null:i.createElement(t,a)};return n.displayName=`WithValidProps(${String(t.displayName||t.name)})`,n}}},ZyBG:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("POeB"),r=n("bWet"),s=n("n/kK"),l=n("Qo1m");class c extends i.Component{componentDidMount(){r.default.ensureInit(e=>{s.a.fbConnectedAccountMatchesLoggedInAccount(e,null)||(o.default.showError(l.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),this.props.onError&&this.props.onError())})}render(){return null}}var d=n("Y2BC"),u=n("cemY"),p=n("+U6O");const m=()=>i.createElement("div",{style:{alignItems:"center",background:"#fff",borderRadius:"8px",display:"flex",height:"155px",justifyContent:"center",outline:"none",width:"300px"}},i.createElement(p.F,{accessibilityLabel:l.a._("Tried it"),show:!0}));var h=n("NmcB"),g=n("VSY/"),b=n("Ivf5"),f=n("PG6j"),y=n("sH1f"),v=n("KHqo"),w=n("ePT2"),E=n("q579"),_=n("AHpX"),C=n("9Y9K"),O=n("tsSC");function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){x(e,t,n[t])})}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k=500;var I=Object(C.compose)(O.a,Object(_.DropTarget)(e=>e.accepts,{drop:(e,t)=>{e.onDrop&&e.onDrop(e,t)}},(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()})))(class extends i.Component{constructor(...e){super(...e),x(this,"attemptToAttachVideoTag",()=>{if(this._videoContainerRef&&this._videoContainerRef.childNodes[0])return;const e=this.props,t=e.videoUrls,n=e.width,i=e.height;if(!t||!t.length)return;const a=document.createElement("video"),o=Object.keys(t);for(let r=0;r<o.length;r+=1){const e=document.createElement("source");e.type="hls"===o[r]?"m3u8":"video/mp4",t[o[r]]&&(e.src=t[o[r]]),a.appendChild(e)}a.addEventListener("loadedmetadata",()=>{setTimeout(()=>this.captureFrame(a),k)},!1),a.height=i,a.setAttribute("crossOrigin","anonymous"),a.width=n,a.loop=!0,a.load(),this._videoContainerRef&&this._videoContainerRef.appendChild(a)}),x(this,"_videoContainerRef",null),x(this,"removeVideoTag",()=>{this._videoContainerRef&&this._videoContainerRef.childNodes[0]&&this._videoContainerRef.removeChild(this._videoContainerRef.childNodes[0])}),x(this,"captureFrame",e=>{const t=this.props,n=t.onVideoLoaded,i=t.uploadId,a=t.videoId,o=document.createElement("canvas");o.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight);const r=o.toDataURL();i&&a&&n({video:{videoId:a,uploadId:i,thumbnail:r}})}),x(this,"clear",({event:e})=>{e.stopPropagation(),this.removeVideoTag(),this.props.handleRemoveClick()})}get isPin(){const e=this.props,t=e.display,n=e.imagePreviewSrc,i=e.videoUrls;return!("pin"!==t||!n&&!i)}renderProgressBar(){const e=this.props,t=e.imagePreviewSrc,n=e.isVideo,i=e.progress,o=100===i||0===i||!t&&!n?"uploadProgressBar transition":"uploadProgressBar",r=t||n?i:0;return a.a.createElement("div",{className:o,style:{width:`${r}%`}})}renderDropZone(){return a.a.createElement(p.b,null,a.a.createElement(p.b,{justifyContent:"center",alignItems:"center",display:"flex"},a.a.createElement(p.b,{justifyContent:"center",alignItems:"center",display:"flex"},a.a.createElement(p.m,{color:"darkGray",icon:"camera",accessibilityLabel:l.a._("Add a Photo","Add a photo as part of a form"),size:32}))),a.a.createElement(p.b,{marginTop:2,paddingX:12},a.a.createElement(p.J,{align:"center",color:"darkGray",bold:!0},l.a._("Drag and drop or click to upload","Label on drag/drop area for uploading a pin"))))}renderImage(){const e=this.props,t=e.height,n=e.imagePreviewSrc,i=e.width,o=l.a._("Your Upload","Image a pinner just uploaded to a form");return this.isPin?a.a.createElement("img",{alt:o,src:n}):a.a.createElement(p.o,{alt:o,src:n,fit:"cover",naturalHeight:t,naturalWidth:i})}renderResetButton(){return a.a.createElement(p.b,{top:!0,left:!0,position:"absolute",margin:2},a.a.createElement(p.n,{accessibilityLabel:l.a._("Remove Photo","Remove photo from a form"),bgColor:"lightGray",icon:"clear",iconColor:"darkGray",onClick:this.clear,size:"sm"}))}renderContent(){const e=this.props,t=e.height,n=e.imagePreviewSrc,i=e.isHovering,o=e.isVideo,r=e.isVideoComplete,s=e.isOver,c=e.thumbnail,d=e.videoUrls,u=e.allowReset,m=void 0===u||u,h=e.width,g=d?a.a.createElement("video",{height:this.isPin?"auto":t,width:h,autoPlay:!0,controls:!0,loop:!0,poster:c||""},Object.keys(d).map(e=>a.a.createElement("source",{src:d[e],type:"hls"===e?"m3u8":"video/mp4",key:e}))):null,b=s?"lightGray":"white";return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.t,{shape:"rounded",height:"100%"},a.a.createElement(p.b,{color:b,height:"100%",justifyContent:"center",alignItems:"center",display:"flex"},!n&&!o&&this.renderDropZone(),o&&!d&&a.a.createElement(p.b,null,r&&a.a.createElement(p.J,{size:"lg",bold:!0,align:"center"},l.a._("Processing Video","Loading message shown while user video is uploading")),a.a.createElement(p.b,{paddingY:4},a.a.createElement(p.F,{show:!0,accessibilityLabel:l.a._("Video uploading","Loading spinner while video uploads")}))),g,n&&this.renderImage())),(n||d)&&m&&i&&this.renderResetButton())}render(){const e=this.props,t=e.connectDropTarget,n=e.height,i=e.imagePreviewSrc,o=e.onClick,r=e.videoUrls,s=e.width,l=e.hoverHandlers,c=l.onMouseOver,d=l.onMouseLeave,u=this.isPin?"auto":n,m={width:s,border:this.isPin?0:"2px dashed #8e8e8e",borderRadius:"10px",cursor:i?"default":"pointer",height:u,marginLeft:"auto",marginRight:"auto",outline:"none",padding:0},h=a.a.createElement(p.b,{position:"relative"},this.renderProgressBar(),i||r?a.a.createElement("div",{onMouseEnter:c,onMouseLeave:d,style:S({},m)},this.renderContent()):a.a.createElement("button",{style:m,onClick:o,onMouseEnter:c,onMouseLeave:d},this.renderContent()));return t(a.a.createElement("div",null,h))}});function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=2e9,j=1e3,R=["video/quicktime","video/mp4"],D=e=>e>=200&&e<400;class L extends a.a.Component{constructor(...e){super(...e),P(this,"state",{file:null,imagePreviewSrc:this.props.existingImageSrc||"",isVideo:!1,isVideoComplete:!1,thumbnail:null,videoUrls:null,uploadId:null,errorFlyout:null,progress:0}),P(this,"mounted",!1),P(this,"containerRef",null),P(this,"fileReader",null),P(this,"file",null),P(this,"fileInputRef",null),P(this,"xhr",null),P(this,"CHECK_VIDEO_TIMEOUT",null),P(this,"ERROR_MESSAGE",l.a._("Unable to upload video. Please try again later.","Error shown when we can't accept video uploads")),P(this,"handleFileDrop",(e,t)=>{if(t&&(!this.xhr||4===this.xhr.readyState)){const e=t.getItem().files[0];this.handleFile(e)}}),P(this,"handleFile",e=>{const t=this.props.onImageUploadStart;e.size>T?this.showError(l.a._("The video is too large. The maximum size is 2 GB.","Error if a user tries to upload a video that is too large")):this.props.allowVideo&&R.includes(e.type)?(this.loadVideo(e),t()):(this.fileReader.onload=(()=>this.uploadImage(e)),this.fileReader.readAsDataURL(e),t())}),P(this,"showError",e=>{const t=a.a.createElement(p.j,{color:"red",anchor:this.containerRef,idealDirection:this.props.idealErrorDirection,onDismiss:()=>this.setState({errorFlyout:null}),size:"sm",shouldFocus:!1},a.a.createElement(p.b,{padding:3},a.a.createElement(p.J,{bold:!0,color:"white"},a.a.createElement("span",null,e))));this.removePreview(t)}),P(this,"openFileDialog",()=>{this.state.imagePreviewSrc||this.state.isVideo||(Object(h.a)(101,{component:192,element:1156}),this.fileInputRef&&this.fileInputRef.click())}),P(this,"openFile",e=>{const t=e.target.files[0];this.handleFile(t)}),P(this,"removePreview",e=>{this.setState({imagePreviewSrc:"",progress:0,isVideo:!1,isVideoComplete:!1,videoUrls:null,errorFlyout:e}),this.fileInputRef&&(this.fileInputRef.value=""),this.xhr&&this.xhr.abort&&(this.xhr.abort(),this.xhr=null),this.CHECK_VIDEO_TIMEOUT&&clearTimeout(this.CHECK_VIDEO_TIMEOUT),this.props.onReset&&this.props.onReset()}),P(this,"loadVideo",e=>{this.setState({isVideo:!0}),w.a.create("VIPResource",{type:"video"}).callCreate().then(t=>{const n=t.resource_response.data,i=n.upload_id,a=n.upload_url,o=n.upload_parameters;this.setState({uploadId:i}),this.uploadVideo(e,i,a,o)},()=>{this.showError(this.ERROR_MESSAGE)})}),P(this,"checkForVideo",e=>{w.a.create("VIPResource",{upload_ids:[e]}).callGet().then(t=>{if(t.resource_response&&t.resource_response.data&&t.resource_response.data[e]){const n=t.resource_response.data[e],i=n.status,a=n.signature;"processing"===i||"registered"===i?this.CHECK_VIDEO_TIMEOUT=setTimeout(()=>this.checkForVideo(e),j):"succeeded"===i?w.a.create("VideoUrlsResource",{signatures:[a]}).callGet().then(t=>this.handleVideoUploadSuccess(t,a,e)):this.showError(this.ERROR_MESSAGE)}else this.showError(this.ERROR_MESSAGE)})}),P(this,"uploadImage",e=>{this.setState({imagePreviewSrc:this.fileReader.result,isVideo:!1});const t=E.a.absolutify("/upload-image/"),n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("X-CSRFToken",v.default.getCSRFToken()),n.setRequestHeader("X-UPLOAD-SOURCE",this.props.uploadSource||"unknown"),n.setRequestHeader("Accept","application/json"),n.upload.onprogress=(e=>{const t=Math.round(100*e.loaded/e.total);this.setState({progress:t})}),n.onload=(()=>{if(D(n.status)){const e=JSON.parse(n.responseText);e.success?(this.props.onImageUploadFinished({image:{height:e.height,url:e.image_url,width:e.width}}),this.setState({errorFlyout:null})):this.showError(e.error)}});const i=new FormData;i.append("img",e),n.send(i),this.xhr=n})}componentDidMount(){this.mounted=!0,this.fileReader=new FileReader}componentWillUnmount(){this.mounted=!1}uploadVideo(e,t,n,i){const a=new XMLHttpRequest;a.open("POST",n,!0),a.onload=(()=>{D(a.status)?this.setState({errorFlyout:null,progress:100,isVideoComplete:!0}):this.showError(l.a._("Something went wrong. Please try again later.","Error if video fails to upload")),this.checkForVideo(t)}),a.upload.onprogress=(e=>{const t=Math.round(100*e.loaded/e.total);this.setState({progress:t})});const o=new FormData;for(const r in i)o.append(r,i[r]);o.append("file",e),a.send(o),this.xhr=a}handleVideoUploadSuccess(e,t,n){if(!this.mounted)return;const i=e.resource_response.data,a=`https://i.pinimg.com/${i[t].metadata.thumbnail}`,o=i[t].urls;this.setState({videoUrls:o,thumbnail:a});const r=new XMLHttpRequest;r.onload=(()=>{const e=new FileReader;e.onloadend=(()=>{this.props.onImageUploadFinished({video:{uploadId:n,imageBase64:e.result}})}),e.readAsDataURL(r.response)}),r.open("GET",a),r.responseType="blob",r.send()}render(){const e=y.NativeTypes.FILE,t=this.state,n=t.errorFlyout,i=t.imagePreviewSrc,o=t.isVideo,r=t.isVideoComplete,s=t.progress,l=t.thumbnail,c=t.videoUrls,d=this.props,u=d.allowReset,m=d.allowVideo,h=d.display,g=d.existingImageSrc,b=d.height,f=d.width,v=i||g,w=m?"image/*,video/mp4,video/quicktime":"image/*";return a.a.createElement("div",{ref:e=>{this.containerRef=e}},a.a.createElement(p.b,{display:"visuallyHidden"},a.a.createElement("input",{accept:w,onChange:this.openFile,ref:e=>{this.fileInputRef=e},type:"file"})),a.a.createElement(I,{allowReset:u,onClick:this.openFileDialog,handleRemoveClick:this.removePreview,imagePreviewSrc:v,accepts:[e],onDrop:this.handleFileDrop,height:b,width:f,progress:s,isVideo:o,isVideoComplete:r,videoUrls:c,thumbnail:l,display:h}),n)}}P(L,"defaultProps",{onImageUploadStart:()=>{}});var A=L,M=n("P4K9"),B=n("KCDi"),F=n("nskd"),N=n("KsVg"),U=n("TzyI");function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H=1e3,V=3e3,G=366,W=366,Y=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/;var q=Object(C.compose)(Object(b.connect)(null,(e,t)=>({createUserDidItData:Object(C.bindActionCreators)(U.a,e),deleteUserDidItData:Object(C.bindActionCreators)(U.b,e),updateUserDidItData:Object(C.bindActionCreators)(U.d,e)})),F.a,N.a)(class extends i.PureComponent{constructor(...e){super(...e),z(this,"state",{id:this.props.pinActivity.id,imageUrlToSend:this.props.pinActivity.oldImageUrl,notes:this.props.pinActivity.notes,showDeleteModal:!1,submitted:!1,inTypeahead:!1,typeaheadValue:""}),z(this,"getImageSignature",()=>{w.a.create("DidItImageUploadResource",{image_url:this.state.imageUrlToSend}).callCreate().then(e=>e?this.sendThisDidIt(e.resource_response.data.image_signature):this.sendThisDidIt())}),z(this,"setTextAreaRef",e=>{this._textAreaRef=e}),z(this,"handleTextInputChange",({value:e})=>{this.setState({notes:e.substring(0,H)}),e.length>H?this.forceUpdate():this.handleHashtagTypeahead(e)}),z(this,"handleHashtagTypeahead",e=>{const t=Y.exec(e),n=t?t[0]:"";!this.state.inTypeahead&&n?this.setState({inTypeahead:!0,typeaheadValue:n}):this.state.inTypeahead&&(n?this.setState({typeaheadValue:n}):this.setState({inTypeahead:!1,typeaheadValue:""}))}),z(this,"closeModal",()=>{(this.props.onDoneStateChanged||(e=>{}))(!1)}),z(this,"addHashtag",e=>{this.setState({inTypeahead:!1,typeaheadValue:"",notes:this.state.notes.replace(Y,e)})}),z(this,"handleTextAreaBlur",()=>{this.state.inTypeahead&&this._textAreaRef&&this._textAreaRef.getElementsByTagName("TEXTAREA")[0].focus()}),z(this,"handleImageReset",()=>this.setState({imageUrlToSend:null})),z(this,"handleFinishImageUpload",e=>{e.image&&this.setState({imageUrlToSend:e.image.url})}),z(this,"handleDoneClick",()=>{const e=this.props.pinId;this.setState({submitted:!0}),Object(h.a)(101,{view:101,component:192,element:1112,objectId:e}),this.handleDoneSubmission()}),z(this,"handleDoneSubmission",()=>{const e=this.state.imageUrlToSend,t=this.props.pinActivity;return e?e!==t.oldImageUrl?this.getImageSignature():this.sendThisDidIt(t.image_signatures[0]):this.sendThisDidIt()}),z(this,"handleDeleteConfirmation",e=>{const t=this.props,n=t.aggregatedPinDataId,i=t.deleteUserDidItData,a=t.loggedInUser.username,o=t.pinId;this.setState({showDeleteModal:!1}),e&&(Object(h.a)(101,{view:101,component:192,element:1264,objectId:o}),i({aggregatedPinDataId:n,id:e,isOwnedByMe:!0,pinId:o,username:a}))}),z(this,"handleShowDeleteModal",()=>this.setState({showDeleteModal:!0})),z(this,"newStateFields",e=>{const t=e.pinActivity;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){z(e,t,n[t])})}return e}({id:t.id,notes:t.notes,imageUrlToSend:t.oldImageUrl},this.state)}),z(this,"renderTypeahead",()=>this.state.inTypeahead?a.a.createElement(M.a,{addHashtag:this.addHashtag,anchor:this._textAreaRef,editing:!0,query:this.state.typeaheadValue,idealDirection:"up"}):null)}sendThisDidIt(e){const t=this.props,n=t.aggregatedPinDataId,i=t.createUserDidItData,o=t.isDoneByMe,r=t.loggedInUser.username,s=t.onDoneStateChanged,c=t.pinId,d=t.shareToFacebookCheckedOn,u=t.shareToFacebookPermissionGranted,p=t.updateUserDidItData,m=this.state,h=m.id,g=m.notes;o?h&&p({id:h,details:g,image_signatures:e?[e]:[],pinId:c}):i(n,r,g,e?[e]:[],c,d&&u),(s||(e=>{}))(!0),-1===window.location.href.indexOf(this.props.loggedInUser.username+"/tried")&&this.props.showToast(({onHide:e})=>a.a.createElement(B.a,{duration:V,href:`/${this.props.loggedInUser.username}/tried`,onHide:e,text:l.a._("Nice work! Pins you've tried live on your profile","Congratulations after trying a pin")}))}render(){const e=this.state,t=e.imageUrlToSend,n=e.notes,i=e.showDeleteModal,o=e.submitted,r=this.props,s=r.aggregatedPinDataId,c=r.isDoneByMe,d=r.pinActivity,u=t?"didItPhotoBox transitionUp":"didItPhotoBox",m=t?"didItTextBox transitionIn":"didItTextBox",h=d.notes!==n,g=d.oldImageUrl!==t,b=""!==n.trim(),y=!t||!b||!h&&!g;return a.a.createElement(p.b,null,a.a.createElement(p.b,{marginTop:4,paddingX:12},a.a.createElement(p.b,{xs:{column:12}},a.a.createElement("div",{className:u},a.a.createElement(p.b,{deprecatedMargin:{bottom:2},color:"transparent",shape:"rounded",alignItems:"center",justifyContent:"center",xs:{display:"flex",column:12}},a.a.createElement(A,{display:"image",existingImageSrc:t,onImageUploadFinished:this.handleFinishImageUpload,idealErrorDirection:"up",onReset:this.handleImageReset,height:G,width:W,uploadSource:"pinner"}))))),a.a.createElement("div",{className:m},a.a.createElement(p.b,{width:366,dangerouslySetInlineStyle:{__style:{marginLeft:"auto",marginRight:"auto"}},margin:3},a.a.createElement("div",{ref:this.setTextAreaRef},a.a.createElement(p.K,{id:"trynotes",onChange:this.handleTextInputChange,onBlur:this.handleTextAreaBlur,placeholder:l.a._("Add a note or tip","Tip input for tried it"),value:n})),this.renderTypeahead(),this.state.notes.length>900&&a.a.createElement(p.b,{deprecatedPadding:{y:1}},a.a.createElement(p.J,{align:"right",size:"sm",smSize:"xs",mdSize:"xs",lgSize:"sm"}," ",this.state.notes.length,"/",H," ")))),a.a.createElement(p.b,{display:"flex",justifyContent:"end"},i&&a.a.createElement(f.a,{didItData:d,aggregatedPinDataId:s,onDeleteConfirmation:this.handleDeleteConfirmation}),o?a.a.createElement(p.b,{alignItems:"center",marginRight:2},a.a.createElement(p.F,{accessibilityLabel:l.a._("submit","accessible label for loading spinner on submit button"),show:!0})):null,a.a.createElement(p.b,{display:"flex",marginBottom:3,marginRight:4},c&&a.a.createElement(p.b,{deprecatedMargin:{right:1}},a.a.createElement(p.c,{onClick:this.handleShowDeleteModal,text:l.a._("Delete","delete button in modal for tried-it info"),inline:!0,size:"md"})),!c&&a.a.createElement(p.b,{deprecatedMargin:{right:1}},a.a.createElement(p.c,{onClick:this.closeModal,text:l.a._("Cancel","cancel button in modal for tried-it info"),inline:!0,size:"md"})),a.a.createElement(p.b,null,a.a.createElement(p.c,{color:"red",disabled:y,onClick:this.handleDoneClick,text:l.a._("Done","done button in modal for tried-it info"),inline:!0,size:"md"})))))}});function J(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Q=({pinTitle:e})=>{let t;return t=e?g.c(l.a._("Add a photo of {{pinTitle}}","Adding photo of a pin"),{pinTitle:e}):l.a._("Add a photo","Adding a photo"),a.a.createElement(p.b,{display:"flex",justifyContent:"center"},a.a.createElement(p.b,{deprecatedMargin:{top:5,bottom:3,left:5,right:5}},a.a.createElement(p.J,{size:"xl",bold:!0,align:"center"},t)))};function K(e){const t=e.data,n=t.details,i=t.images,a=t.image_signatures;return{id:t.id,notes:n||"",oldImageUrl:(((i||{})[0]||{})["200x"]||{}).url,image_signatures:a}}class X extends i.Component{constructor(...e){super(...e),$(this,"onDoneStateChanged",e=>{(this.props.onDoneStateChanged||(e=>{}))(e),e&&this.props.rawPinActivity.refreshData&&this.props.rawPinActivity.refreshData()}),$(this,"renderTextHeader",()=>{const e=this.props.pinTitle;return a.a.createElement(p.b,null,a.a.createElement(Q,{pinTitle:e}),a.a.createElement(p.i,null))})}shouldComponentUpdate(e){const t=this.props.rawPinActivity;return!(t&&0!==Object.keys(t).length&&!e.rawPinActivity.isLoaded)}render(){const e=this.props.rawPinActivity,t=e.isLoaded,n=this.props,i=(n.onDoneStateChanged,J(n,["onDoneStateChanged"]));let o=null;return o=this.renderTextHeader(),t&&e?a.a.createElement(p.b,{columns:12,shape:"rounded"},o,a.a.createElement(q,Object.assign({onDoneStateChanged:this.onDoneStateChanged,pinActivity:K(e)},i))):a.a.createElement(m,null)}}var Z=n("K668");function ee(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne="publish_actions",ie=Object(d.b)({name:"DidItUserPinActivityResource",key:"rawPinActivity",options:({aggregatedPinDataId:e})=>({aggregated_pin_data_id:e,username:"me"})},{allowStale:!1})(X),ae=Object(d.b)({name:"DidItActivityResource",key:"rawPinActivity",options:({userDidItDataId:e})=>({user_did_it_data_id:e,username:"me"})},{allowStale:!1})(X),oe=e=>e.isDoneByMe&&e.userDidItDataId?a.a.createElement(ae,e):e.isDoneByMe?a.a.createElement(ie,e):a.a.createElement(X,Object.assign({rawPinActivity:{isLoaded:!0,data:{}}},e));var re=Object(d.b)({name:"PinResource",key:"pin",options:({pinId:e})=>({id:e,field_set_key:"detailed"})})(class extends i.PureComponent{constructor(...e){super(...e),te(this,"state",{shareToFacebookCheckedOn:!1,shareToFacebookDisabled:!1,shareToFacebookPermissionGranted:!1}),te(this,"onToggleFacebookShare",()=>{this.state.shareToFacebookCheckedOn?(Object(h.a)(101,{view:101,component:192,element:1365,objectId:this.props.pin.data.id}),this.setState({shareToFacebookCheckedOn:!1})):window.FB.login(e=>{e.authResponse?s.a.checkFbTimelinePermission({success:()=>{Object(h.a)(101,{view:101,component:192,element:1365,objectId:this.props.pin.data.id}),this.setState({shareToFacebookCheckedOn:!0,shareToFacebookPermissionGranted:!0})},error:()=>{this.setState({shareToFacebookCheckedOn:!1,shareToFacebookPermissionGranted:!1,shareToFacebookDisabled:!0})}}):this.setState({shareToFacebookCheckedOn:!1,shareToFacebookPermissionGranted:!1,shareToFacebookDisabled:!0})},{scope:ne})}),te(this,"renderFacebookSharing",()=>{const e=this.state.shareToFacebookCheckedOn,t=e?"#e60023":"#ffffff";return a.a.createElement(p.b,{display:"flex",position:"absolute",justifyContent:"around",alignItems:"center",deprecatedMargin:{left:4,bottom:5},bottom:!0,left:!0},a.a.createElement(p.b,{xs:{column:1}},a.a.createElement("button",{className:"didItFacebookShareButton","aria-label":l.a._("Share on Facebook","Share tried-it on Facebook"),onClick:this.onToggleFacebookShare,style:{padding:e?"4px":"8px",borderRadius:"50%",border:e?"0":"2px solid #8e8e8e",backgroundColor:t,outline:"none"}},e&&a.a.createElement(p.m,{accessibilityLabel:l.a._("Share on Facebook","Share tried-it on Facebook"),size:12,color:"white",icon:"check"}),a.a.createElement(c,null))),a.a.createElement(p.b,{deprecatedPadding:{x:1}},a.a.createElement(p.J,{bold:!0,size:"sm",smSize:"xs",mdSize:"xs",lgSize:"sm"},l.a._("Share on Facebook","Share tried-it on Facebook"))))})}render(){const e=this.props,t=e.pin,n=e.isDoneByMe,i=ee(e,["pin","isDoneByMe"]);if(!t.isLoaded)return a.a.createElement(m,null);const o=this.state,r=o.shareToFacebookCheckedOn,s=o.shareToFacebookPermissionGranted,l=(Object(Z.l)(Object(Z.j)(Object(u.k)(this.props)))||{}).title,c=t.data.aggregated_pin_data.did_it_data.videos_count+t.data.aggregated_pin_data.did_it_data.images_count;return a.a.createElement(p.b,{color:"white",shape:"rounded",display:"flex",column:12},!n&&this.renderFacebookSharing(),a.a.createElement(oe,Object.assign({},i,{doneCount:c,pinTitle:l,isDoneByMe:n,shareToFacebookCheckedOn:r,shareToFacebookPermissionGranted:s})))}}),se=n("QG6s"),le=n("c61H");function ce(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ue=()=>{};class pe extends i.PureComponent{constructor(...e){super(...e),de(this,"state",{modalShown:!1}),de(this,"onTriedItButtonClick",this.props.authAction(({event:e})=>{e&&e.stopPropagation(),this.handleModalStateChange(!0),Object(h.a)(101,{view:101,component:this.props.thriftComponentType,element:1141,objectId:this.props.pinId,is_create:!this.props.isDoneByMe})})),de(this,"onHideModal",()=>{this.handleModalStateChange(!1),Object(h.a)(101,{view:101,component:192,element:75,objectId:this.props.pinId})}),de(this,"onModalDoneStateChanged",e=>{this.handleModalStateChange(!1,e)}),de(this,"handleModalStateChange",(e,t)=>{this.setState({modalShown:e},()=>{e||(this.props.onDoneStateChanged||ue)(null!=t?t:this.props.isDoneByMe),(this.props.onToggleModal||ue)(e)})})}render(){const e=this.props,t=e.isDoneByMe,n=ce(e,["isDoneByMe"]);return a.a.createElement("div",null,this.props.children({onTriedItButtonClick:this.onTriedItButtonClick}),this.state.modalShown?a.a.createElement(se.a,{onHide:this.onHideModal},a.a.createElement(re,Object.assign({},n,{isDoneByMe:t,onDoneStateChanged:this.onModalDoneStateChanged}))):null)}}de(pe,"defaultProps",{aggregatedPinDataId:""});t.a=Object(le.a)(pe)},a1cj:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("l7ju"),r=n("iJ35"),s=n("hvnN"),l=n.n(s),c=n("nufh"),d=n("Z34B"),u=n("N95m"),p=(n("OWio"),n("PNko")),m=n.n(p),h=n("qQ1r"),g=n("AZKp");function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y={xs:5,sm:4,md:3,lg:2,xl:1},v={xs:"24px",sm:"36px",md:"48px",lg:"64px",xl:"96px"};function w(e){const t=e.accessibilityLevel,n=e.children,i=e.color,o=void 0===i?"darkGray":i,r=e.id,s=void 0===r?null:r,l=e.overflow,c=void 0===l?"breakWord":l,d=e.size,u=void 0===d?"md":d,p=e.truncate,f=void 0!==p&&p,w=e.weight,E=void 0===w?"normal":w,_=b({color:h.a[o],fontSize:v[u]},"semibold"===E?{fontWeight:g.a.semibold}:{},"breakWord"===c?{hyphens:"auto",wordWrap:"break-word"}:{}),C=t||y[u];return a.a.createElement(`h${C}`,b({id:s,style:_,className:m()("LegoGestalt_Font",{LegoGestalt_TextTruncate:f})},f&&"string"==typeof n?{title:n}:null),n)}var E=n("z/cr"),_=n("+4EY"),C=n("yzmC"),O=n("cemY"),S=n("K668"),x=n("+U6O");const k=({children:e})=>i.createElement(_.a,null,({isImmersiveCloseup:t})=>i.createElement(x.b,{marginBottom:t?0:3,marginTop:t?4:0},e)),I=Object(d.a)(o.a)(e=>{const t=(Object(O.j)(e)||{}).link,n=(Object(O.h)(Object(O.i)(e))||{}).imageOrig,a=void 0===n?{}:n,o=e.inLegoCloseupView,s=e.pin.carousel_data;let l,c=t,d=e.children;if(s){const e=s.carousel_slots,t=void 0===e?[]:e,n=s.index;t[n]&&(c=t[n].link||c,d=t[n].title||d)}return d&&(l=o?i.createElement(C.a.Consumer,null,({showLegoUpdates:e})=>i.createElement(w,Object.assign({size:"sm",weight:"semibold"},e?{overflow:"normal"}:{}),d)):i.createElement(x.l,{size:"xs"},d)),i.createElement("div",{itemProp:"name"},i.createElement(r.b,{to:c||a.url,noFollow:!0,target:!0,onClick:e.onClick},e.smallerFontSize?i.createElement(x.J,{size:"lg",bold:!0},e.children):l))}),P=({children:e})=>i.createElement("div",{itemProp:"offers",itemScope:!0,itemType:E.g.OFFER},e);P.propTypes={children:l.a.oneOfType([l.a.element,l.a.arrayOf(l.a.element)]).isRequired};const T=Object(d.a)(o.a)(e=>{const t=e.id,n=(Object(O.g)(Object(O.i)(e))||{}).image736x;return i.createElement("div",null,i.createElement("meta",{content:`https://${u.CANONICAL_MAIN_DOMAIN}/pin/${t}/`,itemProp:"url"}),n&&i.createElement("meta",{content:n.url,itemProp:"image"}))}),j=Object(d.a)(e=>Object(S.m)(Object(o.a)(e)))(e=>i.createElement(k,null,i.createElement(c.a,null,i.createElement(I,e,i.createElement(x.b,null,e.title))))),R=Object(d.a)(e=>Object(S.h)(Object(S.j)(Object(o.a)(e))))(e=>{const t=e.products.first.name;return i.createElement(k,null,i.createElement(c.a,{itemType:E.g.PRODUCT},i.createElement(I,e,t,i.createElement(T,e))))}),D=Object(d.a)(e=>Object(S.f)(Object(o.a)(e)))(e=>i.createElement(k,null,i.createElement(c.a,{itemType:E.g.PRODUCT},i.createElement(P,null,i.createElement(I,e,i.createElement("div",null,e.buyableProduct.name)))))),L=Object(d.a)(e=>Object(O.b)(Object(S.j)(Object(o.a)(e))))(e=>i.createElement(k,null,i.createElement(c.a,{itemType:E.g.ARTICLE},i.createElement(I,e,i.createElement("div",null,e.article.name))))),A=Object(d.a)(e=>Object(S.i)(Object(S.j)(Object(o.a)(e))))(e=>{const t=e.recipe,n=t.name,a=t.summaryText;return i.createElement(k,null,i.createElement(c.a,{itemType:E.g.RECIPE},i.createElement(I,e,i.createElement(x.b,null,n),a&&i.createElement(x.b,null,a&&a.toLowerCase().trim()))))}),M=Object(d.a)(e=>Object(O.m)(Object(S.j)(Object(o.a)(e))))(e=>!e.tutorial.fromAggregatedData&&e.tutorial.name&&i.createElement(k,null,i.createElement(c.a,null,i.createElement(I,e,i.createElement("div",null,e.tutorial.name))))||null),B=Object(d.a)(e=>Object(S.g)(Object(S.k)(Object(o.a)(e))))(e=>i.createElement(k,null,i.createElement(c.a,null,i.createElement(I,e,i.createElement("div",null,e.displayName)))));t.a=(e=>{const t=Object(S.j)(Object(o.a)(e));return i.createElement("div",{className:"CloseupTitleCard"},Object(S.h)(t)?i.createElement(R,e):Object(S.m)(Object(o.a)(e))?i.createElement(j,e):Object(O.m)(t)?i.createElement(M,e):Object(S.i)(t)?i.createElement(A,e):Object(S.f)(Object(o.a)(e))?i.createElement(D,e):Object(O.b)(t)?i.createElement(L,e):Object(S.g)(Object(S.k)(Object(o.a)(e)))?i.createElement(B,e):null)})},"aE8+":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("ce8s"),r=n("1kao"),s=n("+U6O");const l=({active:e,borderRadius:t,focused:n,hovered:i,shape:o,bgColor:l,size:c,isHorizontalText:d,boxSize:u,children:p})=>a.a.createElement(r.a,{active:e,borderRadius:t,focused:n,hovered:i,shape:o,bgColor:l,size:c},a.a.createElement(s.b,{xs:{display:d?"flex":"flexColumn"},alignItems:"center",justifyContent:"center",padding:d?2:1,height:u,width:u},p));t.a=(e=>{const t=e.accessibilityLabel,n=e.borderRadius,i=e.buttonWidth,r=void 0===i?null:i,c=e.children,d=e.onClick,u=e.shape,p=void 0===u?"pill":u,m=e.bgColor,h=void 0===m?"transparent":m,g=e.size,b=void 0===g?"lg":g,f=e.isHorizontalText,y={display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",width:r};let v="";if("circle"===p)switch(b){case"xs":v=24;break;case"sm":v=32;break;case"md":v=40;break;case"lg":v=48;break;case"xl":v=56;break;default:v=48}return a.a.createElement(s.b,null,a.a.createElement(o.a,{accessibilityLabel:t,onClick:d,style:y},({active:e,focused:t,hovered:i})=>a.a.createElement(l,{active:e,borderRadius:n,focused:t,hovered:i,shape:p,bgColor:h,size:b,isHorizontalText:f,boxSize:v},c)))})},aaO7:function(e,t,n){function i(e,t,n,i){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:n,undoText:i}}}function a(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function o(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function r(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function s(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}n.d(t,"e",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return s})},ay7J:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Mr4W"),r=n.n(o),s=n("D+W/"),l=n("Qo1m"),c=(n("MNJ6"),n("+U6O"));t.a=class extends i.Component{constructor(...e){var t,n,i;super(...e),i=(e=>{const t=this.props,n=t.disabled,i=t.indexManager;if(!n)switch(e.which){case s.a.KeyCode.ENTER:case s.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),i.select();break;case s.a.KeyCode.UP:e.preventDefault(),i.prev();break;case s.a.KeyCode.DOWN:e.preventDefault(),i.next()}}),(n="handleKeyDown")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const e=this._input;if(e){const t=r.a.findDOMNode(e);if(t instanceof HTMLElement){const e=t.querySelector("input");e&&e.focus()}}}render(){const e=this.props,t=e.onChange,n=e.value;return a.a.createElement("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"}},a.a.createElement(c.C,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:e})=>t(e),placeholder:l.a._("Search","search bar placeholder text"),ref:e=>{this._input=e},value:n}))}}},b7z0:function(e,t,n){n.d(t,"a",function(){return u});var i=n("GyhR"),a=n.n(i),o=(n("OWio"),n("PNko")),r=n.n(o),s=n("qQ1r"),l=n("AZKp");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={xs:"12px",sm:"14px",md:"16px",lg:"18px",xl:"21px"};class u extends a.a.Component{constructor(...e){super(...e),c(this,"state",{isRTL:!1})}componentDidMount(){this.setState(()=>({isRTL:Boolean(document&&document.body&&document.body.style&&"rtl"===document.body.style.direction)}))}render(){const e=this.props,t=e.align,n=void 0===t?"left":t,i=e.children,o=e.color,u=void 0===o?"darkGray":o,p=e["data-test-id"],m=e.inline,h=void 0!==m&&m,g=e.italic,b=void 0!==g&&g,f=e.leading,y=e.overflow,v=void 0===y?"breakWord":y,w=e.size,E=void 0===w?"md":w,_=e.truncate,C=void 0!==_&&_,O=e.weight,S=void 0===O?"normal":O,x=e.__dangerouslyIncreaseLineHeight,k=void 0!==x&&x,I=this.state.isRTL,P=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}({fontSize:d[E],color:s.a[u],fontWeight:l.a[S]},"short"===f?{lineHeight:1.2}:{},"tall"===f||k?{lineHeight:1.5}:{},"center"===n?{textAlign:"center"}:{},"justify"===n?{textAlign:"justify"}:{},"left"===n?{textAlign:I?"right":"left"}:{},"right"===n?{textAlign:I?"left":"right"}:{},"breakWord"===v?{hyphens:"auto",wordWrap:"break-word"}:{},b?{fontStyle:"italic"}:{},b?{}:{fontStyle:"normal"}),T=h?"span":"div";return a.a.createElement(T,Object.assign({className:r()("LegoGestalt_Font",{LegoGestalt_TextTruncate:C}),style:P},p?{"data-test-id":p}:{},C&&"string"==typeof i?{title:i}:{}),i)}}t.b=u},bD8p:function(e,t,n){n.d(t,"a",function(){return d});var i=n("GyhR"),a=n("+U6O"),o=n("yzmC");const r=1050,s=912,l=590,c=788;function d({children:e,isWideVideo:t=!1}){const n=t?c:s,d=t?l:r;return i.createElement(o.a.Consumer,null,({showCloseupContentRight:o,viewportSize:r})=>i.createElement(a.b,{maxWidth:o&&"wide"===r?n:d,width:t?"100%":null},e))}},bFYa:function(e,t,n){function i(e,t,n){return{type:"PIN_ITEM_ADD_PIN_TAG",payload:{pinItemId:e,pinTagId:t,pinTag:n}}}n.d(t,"a",function(){return i})},bUMO:function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("z/1d"),s=n("Irlq");function l({m:e,h:t,rm:n,rh:i}){return e&&(!t||i<=0)?Object(s.b)(o.a.ngettext("{{mins}} minute","{{mins}} minutes",n),{mins:a.a.createElement(r.a,{key:"recipe-minutes",maximumFractionDigits:2,value:n})}):t?Object(s.b)(o.a.ngettext("{{hrs}} hour","{{hrs}} hours",i),{hrs:a.a.createElement(r.a,{key:"recipe-hours",maximumFractionDigits:2,value:i})}):null}},bWet:function(e,t,n){n.r(t);var i=n("TzVy"),a=n("2EPj"),o=n.n(a),r=n("ePT2"),s=n("91Tc"),l=n("aqOH");n("k9eC");let c=!1;const d={ensureInit(e,t=l.default,n="en_US",i){s.default.load([],`//connect.facebook.net/${n}/sdk.js`,"fb"),s.default.ready("fb",()=>{this._fbCallback(e,t,i)}),window.fb_init=1},_fbCallback(e,t,n){const i=window.FB;i&&(c||(n&&(n.check("enabled_fb_and_prevent_google_one_tap_error_refresh")||n.check("enabled_scroll_and_prevent_google_one_tap_error_refresh")||n.check("enabled_load_secondary_content_after_user_scroll")||n.check("enabled_load_secondary_content_after_fb_success"))?i.init({appId:o.a.FB_KEY,status:!0,xfbml:!0,version:"v2.7"}):i.init({appId:o.a.FB_KEY,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",e=>{d.refreshAccessToken(t)}),c=!0,window.fb_init=2),e(i))},ensureLoggedIn(e,t){d.ensureInit(t=>{d.logIn(t,e)},t)},logIn(e,t){e&&(e.getUserID()?t(e):e.login(()=>{t(e)}))},refreshAccessToken(e){e.isAuthenticated()&&e.attributes.facebook_id&&!e.isLimitedLogin()&&d.ensureInit(e=>{if(e.getUserID()){const t=e.getAccessToken();if(t){r.a.create("UserSocialNetworkResource",{facebook_token:t}).callUpdate({showError:!1})}}},e)},injectTrackingPixel(e){!function(){const e=window._fbq||(window._fbq=[]);if(!e.loaded){const t=document.createElement("script");t.async=!0,t.src="//connect.facebook.net/en_US/fbds.js";const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),e.loaded=!0}}(),window._fbq=window._fbq||[],window._fbq.push(["track",e,{value:"0.00",currency:"USD"}])}};t.default=i.a.expose("Facebook",d)},boD7:function(e,t,n){n.r(t),n.d(t,"default",function(){return d});var i=n("GyhR"),a=n.n(i),o=n("VSY/"),r=n("Qo1m"),s=n("Mce2"),l=n("b7z0"),c=n("+U6O");function d(e){const t=e.commentCount,n=void 0===t?0:t,i=e.reactionCounts,d=void 0===i?{}:i,u=e.hideReplyCount,p=e.isLikedByMe,m=void 0!==p&&p,h=e.onLikeClick,g=e.onLikeCountClick,b=e.onReplyClick,f=e.onReplyCountClick,y=e.flyout,v=e.small,w=e.variant,E=d[1]||0,_=!!E&&o.i(r.a.ngettext("{{likeCount}} like","{{likeCount}} likes",E),{likeCount:E}),C=!!n&&o.i(r.a.ngettext("{{commentCount}} reply","{{commentCount}} replies",n),{commentCount:n}),O=v?1:2,S="default"===w;return a.a.createElement(c.b,{display:"flex",alignItems:"center"},a.a.createElement(c.b,{display:"flex",marginStart:-O,marginEnd:-O},a.a.createElement(c.b,{paddingX:O},a.a.createElement(s.a,{id:"reactions-like"},a.a.createElement(c.n,{accessibilityLabel:"Like",bgColor:"transparent",icon:"heart",iconColor:m?"red":"gray",onClick:h,size:v?"sm":"md"}))),a.a.createElement(c.b,{paddingX:O},a.a.createElement(s.a,{id:"reactions-reply"},a.a.createElement(c.n,{accessibilityLabel:"Reply",bgColor:"transparent",icon:"speech",iconColor:"gray",onClick:b,size:v?"sm":"md"}))),!!y&&a.a.createElement(c.b,{paddingX:O},y)),a.a.createElement(c.b,{display:"flex",flex:"grow",justifyContent:"end",marginStart:-3,marginEnd:-3},!!_&&a.a.createElement(s.a,{id:"reactions-like-count"},a.a.createElement(c.b,{paddingX:3},a.a.createElement(c.O,{shape:"rounded",onTouch:g},a.a.createElement(l.b,{size:"sm",color:"gray",weight:S?"semibold":"bold"},_)))),!!C&&!u&&a.a.createElement(s.a,{id:"reactions-reply-count"},a.a.createElement(c.b,{paddingX:3},f?a.a.createElement(c.O,{shape:"rounded",onTouch:f},a.a.createElement(l.b,{size:"sm",color:"gray",weight:S?"semibold":"bold"},C)):a.a.createElement(l.b,{size:"sm",color:"gray",weight:S?"semibold":"bold"},C)))))}},boTm:function(e,t,n){var i=n("GyhR"),a=n("CtGn"),o=n("Qo1m"),r=n("iJ35"),s=n("Mce2"),l=n("b7z0"),c=n("+U6O");t.a=function(e){const t=e.fullName,n=e.imageUrl,d=e.isPromoted,u=e.profileUrl,p=e.verified,m=e.color,h=void 0===m?"darkGray":m,g=e.onNavigateClick,b=e.openNewTab,f=i.createElement(a.a,null,({active:e,focused:a,hovered:o,onBlur:r,onFocus:s,onMouseEnter:l,onMouseLeave:d})=>i.createElement(c.b,{onFocus:s,onBlur:r,onMouseEnter:l,onMouseLeave:d},i.createElement(c.t,{wash:o||e||a,shape:"circle"},i.createElement(c.a,{size:"md",name:t,src:n,verified:p})))),y=i.createElement(i.Fragment,null,d&&i.createElement(l.b,{truncate:!0,size:"sm",weight:"semibold"},o.a._("Promoted by","indicating the username of the person who promoted the pin")),i.createElement(s.a,{id:"creator-profile-name"},i.createElement(l.b,{color:h,size:"sm",truncate:!0,weight:"semibold"},t)));return i.createElement(c.b,{display:"flex",alignItems:"center",marginLeft:-1,marginRight:-1},i.createElement(c.b,{flex:"none",paddingX:1},u?i.createElement(r.b,{className:"underlineLink",onClick:g,to:u,internalNewTab:b},f):f),i.createElement(c.b,{flex:"grow",display:"flex",direction:"column",paddingX:1},u?i.createElement(r.b,{className:"underlineLink",onClick:g,to:u,internalNewTab:b},y):y))}},borb:function(e,t,n){t.a=function({hours:e,minutes:t}){return`PT${e}H${t}`}},c61H:function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("H3Xe");const s=e=>({isLimitedLogin:e.viewer.isLimitedLogin,isAuth:e.viewer.isAuth});function l(e){const t=t=>{const n=t.dispatch,i=t.isAuth,o=t.isLimitedLogin,s=!i||o?e=>e=>{e&&e.stopPropagation(),n(r.a)}:e=>e;return a.a.createElement(e,Object.assign({authAction:s},t))};return t.displayName=`WithAuthenticatedAction(${String(e.displayName||e.name)})`,Object(o.connect)(s)(t)}},cNuv:function(e,t,n){var i=n("GyhR");function a({color:e="#333",height:t}){const n=14*t/10;return i.createElement("svg",{width:n,height:t,viewBox:"3 3 18 18",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fill:e,d:"M20.571 8.573h-3.428V12h1.714v1.715h-1.714v3.428h-1.714V6.86h5.142v1.714zM12 17.144V6.86h1.714v10.285H12zm-1.714-8.571H5.143v6.857H8.57v-1.714H6.857V12h3.429v5.143H3.429V6.86h6.857v1.714zM5.143 3.43A5.143 5.143 0 0 0 0 8.573v6.857a5.143 5.143 0 0 0 5.143 5.143h13.714A5.143 5.143 0 0 0 24 15.43V8.573a5.143 5.143 0 0 0-5.143-5.143H5.143z"}))}var o=n("Qo1m"),r=n("L43L"),s=n("Y2BC"),l=n("+U6O");const c=20,d=12,u=1,p="M21,17.6119404 L21,9.15332448 C21,7.0136795 20.7772185,6.23779253 20.3588815,5.45557032 C19.9405445,4.67334809 19.3266519,4.05945552 18.5444297,3.64111848 C17.7622075,3.22278146 16.9863205,3 14.8466755,3 L6.3880595,3 C6.46224202,2.80834445 6.54669936,2.63211874 6.64111848,2.45557032 C7.05945552,1.67334809 7.67334809,1.05945552 8.45557032,0.64111848 C9.23779253,0.222781464 10.0136795,0 12.1533245,0 L17.8466755,0 C19.9863205,0 20.7622075,0.222781464 21.5444297,0.64111848 C22.3266519,1.05945552 22.9405445,1.67334809 23.3588815,2.45557032 C23.7772185,3.23779253 24,4.0136795 24,6.15332448 L24,11.8466755 C24,13.9863205 23.7772185,14.7622075 23.3588815,15.5444297 C22.9405445,16.3266519 22.3266519,16.9405445 21.5444297,17.3588815 C21.3678813,17.4533006 21.1916556,17.5377581 21,17.6119404 Z M6.15332448,6 L11.8466755,6 C13.9863205,6 14.7622075,6.22278146 15.5444297,6.64111848 C16.3266519,7.05945552 16.9405445,7.67334809 17.3588815,8.45557032 C17.7772185,9.23779253 18,10.0136795 18,12.1533245 L18,17.8466755 C18,19.9863204 17.7772185,20.7622075 17.3588815,21.5444297 C16.9405445,22.3266518 16.3266519,22.9405445 15.5444297,23.3588815 C14.7622075,23.7772186 13.9863205,24 11.8466755,24 L6.15332448,24 C4.0136795,24 3.23779253,23.7772186 2.45557032,23.3588815 C1.67334809,22.9405445 1.05945551,22.3266518 0.64111849,21.5444297 C0.222781467,20.7622075 0,19.9863204 0,17.8466755 L0,12.1533245 C0,10.0136795 0.222781467,9.23779253 0.64111849,8.45557032 C1.05945551,7.67334809 1.67334809,7.05945552 2.45557032,6.64111848 C3.23779253,6.22278146 4.0136795,6 6.15332448,6 Z";var m=Object(s.b)({name:"PinResource",key:"detailedPin",options:({pinId:e})=>({id:e,field_set_key:"detailed"})})(function(e){const t=e.detailedPin.data,n=t?t.story_pin_data.page_count:null;return i.createElement(l.b,{display:"flex",alignItems:"center",height:c},i.createElement(l.m,{dangerouslySetSvgPath:{__path:p},accessibilityLabel:o.a._("Story Pin Icon","Icon indicating this Pin is a story"),size:d,color:"darkGray"}),n&&i.createElement(l.b,{marginLeft:u},i.createElement(l.J,{inline:!0,size:"xs",bold:!0},n)))});n.d(t,"a",function(){return b});const h={__path:"M6 5h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm8 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1z"},g=e=>{switch(e){case"arrow-up-right":return o.a._("Promoted Pin","Icon indicating this Pin is promoted");case"play":return o.a._("Video Pin","Icon indicating this Pin is a video");case"gif":return o.a._("GIF Pin","Icon indicating this Pin is a GIF");case"tag":return o.a._("Product Pin","Icon indicating this Pin is a product");case"star":return o.a._("Recipe Pin","Icon indicating this Pin is a recipe");case"story-pin":return o.a._("Story Pin","Icon indicating this Pin is a story");case"collage":return o.a._("Collage Pin","Icon indicating this Pin is a collage");default:return""}};function b({max_rating:e,icon:t,text:n,rating:o,pinId:s}){let c;if(t)switch(t){case"star":c=i.createElement(r.a,{rating:o||"",max_rating:e,width:10});break;case"gif":c=i.createElement(a,{height:10,color:"#333"});break;case"story-pin":c=i.createElement(m,{pinId:s});break;default:const n={accessibilityLabel:g(t),color:"darkGray",size:10,inline:!0};c=i.createElement(l.b,{display:"flex",alignItems:"center",marginRight:1},"collage"===t?i.createElement(l.m,Object.assign({dangerouslySetSvgPath:h},n)):i.createElement(l.m,Object.assign({icon:t},n)))}return i.createElement(l.b,{display:"flex",alignItems:"center"},c,n&&i.createElement(l.b,{marginLeft:1},i.createElement(l.J,{inline:!0,size:"sm"},n.trim().substring(0,25))))}},cSL5:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("CpsV"),r=n("5Iwg"),s=n("Qo1m"),l=n("tsSC"),c=n("+U6O");var d=Object(l.a)(function(e){const t=e.buttonLabel,n=e.isHovering,a=e.isRowItem,o=e.hasHoverState,r=e.hoverHandlers,l=e.name,d=e.onClick,u=l||t||s.a._("Create board");return i.createElement(c.O,{onMouseEnter:r.onMouseOver,onMouseLeave:r.onMouseLeave,onTouch:d},i.createElement(c.b,{alignItems:"center",color:o&&n?"lightGray":"white",display:"flex",flex:a?"shrink":"none",height:64,width:"100%"},i.createElement(c.b,{marginLeft:6,marginRight:3,"data-test-id":"createBoardButton"},i.createElement(c.m,{accessibilityLabel:s.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})),l?i.createElement(c.b,{margin:1},i.createElement(c.J,{inline:!0,overflow:"normal",__dangerouslyIncreaseLineHeight:!0}," ",s.a._("Create: ")," ")):null,i.createElement(c.J,{truncate:!0,align:"center",bold:!0,inline:!0,__dangerouslyIncreaseLineHeight:!0}," ",u," ")))}),u=n("MNJ6"),p=n("ay7J"),m=n("lixz"),h=n("Fbxa");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return f});const b="",f=2;t.b=class extends i.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:b}),g(this,"handleSelectItem",e=>{const t=this.props,n=t.onCreate,i=t.onSelected;!e&&n?n(this.state.searchQuery):e&&i(e),(n||e)&&this.setState({searchQuery:""})}),g(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),g(this,"renderSectionHeader",(e,t)=>e.title?a.a.createElement(c.b,null,t>0&&a.a.createElement(c.i,null),a.a.createElement(c.b,{deprecatedPadding:{x:3,y:1}},a.a.createElement(c.J,{size:"sm"},e.title))):null),g(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const i=this.props,r=i.boardSavedTo,s=i.isSelectMode,l=i.disabledRowId,c=this.state.searchQuery,d=n.inSectionSelection,u=void 0!==d&&d,p=r&&r.board===e.id?r&&r.state:null,m="board_section"===e.type;return a.a.createElement(o.a,{isSelectMode:s,disabled:e.id===l&&u,item:e,isSection:m,isWithinSectionPicker:u,saveState:p,searchQuery:c,selected:t,size:"md"})})}componentDidUpdate(e){!e.isLoaded&&this.props.isLoaded&&this.setPWTLoadingEnd()}setPWTLoadingEnd(){Object(m.f)(16,{error:this.props.hasLoadError})}render(){const e=this.props,t=e.boardSavedTo,n=e.createButtonLabel,i=e.hasLowBoardCount,o=e.getSections,l=e.isLoaded,m=e.onCreate,g=e.pinId;if(l){const e=this.state.searchQuery,s=o(e);return this.indexManager=new u.a(s.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),a.a.createElement(c.b,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}}},!i&&a.a.createElement(c.b,null,a.a.createElement(c.b,{paddingX:6,marginBottom:4,marginTop:1},a.a.createElement(p.a,{disabled:!!t,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:e})),a.a.createElement(c.i,null)),a.a.createElement(h.a,{disabled:!!t,grow:!i&&!e,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:s}),a.a.createElement(c.i,null),m&&a.a.createElement(d,{buttonLabel:n,hasHoverState:!0,name:e,onClick:()=>m(e)}),i&&g&&a.a.createElement(r.a,{onBoardSelected:m,pinId:g}))}return a.a.createElement(c.b,{deprecatedPadding:{y:5}},a.a.createElement(c.F,{accessibilityLabel:s.a._("loading section picker","accessibility label for the loading spinner the repin picker"),show:!0}))}}},ce8s:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("CtGn");t.a=(e=>{const t=e.accessibilityLabel,n=e.children,i=e.className,r=e.dataTestId,s=e.onClick,l=e.style;return a.a.createElement(o.a,null,({active:e,focused:o,hovered:c,onBlur:d,onFocus:u,onMouseDown:p,onMouseEnter:m,onMouseLeave:h,onMouseUp:g})=>a.a.createElement("button",{"data-test-id":r,"aria-label":t,style:l,onBlur:d,onFocus:u,onMouseDown:p,onMouseEnter:m,onMouseLeave:h,onMouseUp:g,onClick:s,className:i},n({active:e,focused:o,hovered:c})))})},cemY:function(e,t,n){var i=n("z/cr");var a=({imgSrc:e,inLegoCloseupView:t,isGif:n,pin:a,showCloseupContentRight:o,viewportSize:r})=>{const s=O(Object(k.a)({pin:a})),l=(g(s)||{}).image564x,c=void 0===l?{}:l,d=(y(s)||{}).imageOrig,u=void 0===d?{}:d,p=0===Object.keys(c).length?u:c,m=p.height,b=p.width,f=(h(O(Object(k.a)({pin:a})))||{}).image236x,v=(void 0===f?{}:f).url,w=t?i.j:496,E=t?i.j:564,_=o&&"wide"===r?Math.max(Math.min(b,w),60):Math.max(Math.min(b,E),60),C=_/b*m;return{alt:a.description,src:n?e:v,naturalHeight:C,naturalWidth:_}};var o=e=>{const t=(e||[]).reduce((e,t)=>t.name?e.concat({name:t.name}):e,[]);return t.length>0?t:null},r=n("kQjJ");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=Object(r.a)(e=>{const t=e.richMetadata.article||{},n=t.name,i=t.description,a=t.authors,r=t.date_published;return n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}({},e,{article:{name:n,description:i,authors:o(a),datePublished:r&&new Date(r)||void 0}}):null});function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=Object(r.a)(e=>{const t=e.recipe.categorizedIngredients;return t&&t.length>0?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){c(e,t,n[t])})}return e}({},e,{categorizedIngredients:t}):null});function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=e=>t=>{const n=t.images[e]||{},i=n.url,a=n.width,o=n.height;return i&&a&&o?{url:i,width:a,height:o}:null},h=Object(r.a)(e=>{const t=m("236x")(e);return t&&u({},e,{image236x:t})}),g=Object(r.a)(e=>{const t=m("564x")(e);return t&&u({},e,{image564x:t})}),b=Object(r.a)(e=>{const t=m("736x")(e);return t&&u({},e,{image736x:t})});function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=Object(r.a)(e=>{const t=e.images.orig||{},n=t.url,i=t.width,a=t.height;return n&&i&&a?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){f(e,t,n[t])})}return e}({},e,{imageOrig:{url:n,width:i,height:a}}):null}),v=n("K668");function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=Object(r.a)(e=>{const t=e.pin.embed||{},n=t.type,i=t.src,a=t.subtype,o=(Object(v.e)(e)||{}).attribution,r=(void 0===o?{}:o).embed,s=(void 0===r?{}:r).src,l=i||s;return l?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){w(e,t,n[t])})}return e}({},e,{embed:{type:n,src:l,subtype:a}}):null});function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){C(e,t,n[t])})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=Object(r.a)(e=>{const t=e.pin.images,n=Object.keys(t||{}).reduce((e,n)=>{const i=t[n],a=i.url,o=i.width,r=i.height;return e&&a&&o&&r?_({},e,{[n]:{url:a,width:o,height:r}}):null},{});return n&&Object.keys(n).length>0?_({},e,{images:n}):null});function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=Object(r.a)(e=>{const t=e.pin,n=t.tracked_link,i=t.link,a=n||i;return a?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){S(e,t,n[t])})}return e}({},e,{link:a}):null}),k=n("l7ju");function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=Object(r.a)(e=>{const t=(e.pin.aggregated_pin_data||{}).pin_tags;return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){I(e,t,n[t])})}return e}({},e,{pinTags:t}):null});function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=Object(r.a)(e=>{const t=e.richMetadata.tutorial,n=t||{},i=n.name,a=n.description,o=n.from_aggregated_data;return t&&i?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){T(e,t,n[t])})}return e}({},e,{tutorial:{name:i,description:a,fromAggregatedData:o}}):null});function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const D=e=>{const t=e||{},n=t.thumbnail,i=t.url,a=t.width,o=t.height;return n&&i&&a&&o&&{thumbnail:n,url:i,width:a,height:o}||void 0};var L=Object(r.a)(e=>{const t=e.pin.videos||{},n=t.id,i=t.video_list,a=void 0===i?{}:i,o=a.V_720P,r=a.V_HLSV4,s=a.V_HLSV3_MOBILE,l=D(r),c=D(s),d=D(o),u=d||l||c;return n&&u?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){R(e,t,n[t])})}return e}({},e,{video:{id:n,hasVideo:u,mp4:d||void 0,hls:l||void 0,hlsv3:c||void 0}}):null});var A=e=>{const t=e.hlsv3,n=e.hls,i=t||n;return!!i&&i.width>i.height},M=(...e)=>{};n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return h}),n.d(t,"f",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return y}),n.d(t,"d",function(){return E}),n.d(t,"i",function(){return O}),n.d(t,"j",function(){return x}),n.d(t,"k",function(){return k.a}),n.d(t,"l",function(){return P}),n.d(t,"m",function(){return j}),n.d(t,"n",function(){return L}),n.d(t,"o",function(){return A}),n.d(t,"p",function(){return M})},cjc9:function(e,t,n){function i(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,"a",function(){return i})},ckdM:function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n.n(i),o=n("V+Hv");function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l({children:e,className:t,forwardRef:n,position:i,style:s={}}){const l=Object(o.b)();return a.a.createElement("div",{className:t,ref:n,style:r({top:l},i?{position:i}:{},s)},e)}},d424:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("+U6O");function r({accessibilityLabel:e,arrowOnly:t=!1,direction:n,onClick:i,show:r}){const s="back"===n;return a.a.createElement(o.b,{position:"absolute",left:s,right:!s,top:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundImage:`linear-gradient(to ${s?"left":"right"}, transparent 0%, #fff 90%)`}}},a.a.createElement(o.b,{height:"100%",width:44,display:"flex",justifyContent:"center",alignItems:"center"},r&&a.a.createElement(o.n,{accessibilityLabel:e,bgColor:t?"transparent":"white",icon:s?"arrow-back":"arrow-forward",iconColor:"darkGray",onClick:i})))}var s=n("v7Si");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=class extends a.a.Component{constructor(...e){super(...e),l(this,"state",{isHovering:!1,showBack:!1,showForward:!1}),l(this,"saveScrollBarRef",e=>{this.scrollbar=e}),l(this,"refreshArrows",()=>{const e=this.state,t=e.showBack,n=e.showForward;if(this.scrollbar){const e=this.scrollbar,i=e.offsetWidth,a=e.scrollLeft,o=a>0,r=a+i<e.scrollWidth;o===t&&r===n||this.setState({showBack:o,showForward:r})}}),l(this,"scroll",e=>{this.scrollbar&&0!==e&&(this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.scrollAnimationManager=Object(s.b)(this.scrollbar,e,0,{onAnimationComplete:()=>{this.refreshArrows(),this.scrollAnimationManager=null}}),this.scrollAnimationManager.start())}),l(this,"handleMouseEnter",()=>this.setState({isHovering:!0})),l(this,"handleMouseLeave",()=>this.setState({isHovering:!1})),l(this,"handleResizeOrScroll",()=>this.refreshArrows()),l(this,"handleBackArrowClick",()=>{const e=this.props,t=e.columnWidth,n=e.gutterWidth;if(this.scrollbar){const e=this.scrollbar.scrollLeft,i=e>t+n?t+n:e;this.scroll(-i)}}),l(this,"handleForwardArrowClick",()=>{const e=this.props,t=e.columnWidth,n=e.gutterWidth;if(this.scrollbar){const e=this.scrollbar,i=e.offsetWidth,a=e.scrollLeft,o=e.scrollWidth-a-i,r=o>t+n?t+n:o;this.scroll(r)}})}componentDidMount(){this.props.hideArrows||(window.addEventListener("resize",this.handleResizeOrScroll),this.refreshArrows())}componentWillUnmount(){this.props.hideArrows||window.removeEventListener("resize",this.handleResizeOrScroll)}render(){const e=this.props,t=e.accessibilityBackLabel,n=e.accessibilityForwardLabel,i=e.arrowOnly,s=void 0!==i&&i,l=e.columnWidth,c=e.gutterWidth,d=e.hideArrows,u=void 0!==d&&d,p=e.items,m=e.paddingY,h=e.hideScrollbar,g=e.showArrowButton,b=this.state,f=b.isHovering,y=b.showBack,v=b.showForward;return a.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:{position:"relative"}},a.a.createElement("div",{ref:this.saveScrollBarRef,onScroll:this.handleResizeOrScroll,style:{overflowX:h?"hidden":"auto"}},a.a.createElement(o.b,{display:"flex",position:"relative",paddingY:m},p.map((e,t)=>{const n={__style:{marginRight:t===p.length-1?0:c}};return a.a.createElement(o.b,{key:t,width:l,dangerouslySetInlineStyle:n},e)}))),y&&!u&&a.a.createElement(r,{accessibilityLabel:t,arrowOnly:s,direction:"back",onClick:this.handleBackArrowClick,show:f||g||!1}),v&&!u&&a.a.createElement(r,{accessibilityLabel:n,arrowOnly:s,direction:"forward",onClick:this.handleForwardArrowClick,show:f||g||!1}))}}},d9lF:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("ce8s"),r=n("+U6O");function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l={base:{borderRadius:"50%"},hovered:{backgroundColor:"rgb(226, 226, 226)"},active:{backgroundColor:"rgb(218, 218, 218)"},focused:{boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0}},c=({accessibilityLabel:e,active:t,focused:n,hovered:i,icon:o,isSVG:c})=>{const d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}({},l.base,i?l.hovered:{},t?l.active:{},n?l.focused:{});return a.a.createElement(r.b,{"data-test-id":"lego-icon-wrapper",color:"transparent",shape:"circle",dangerouslySetInlineStyle:{__style:d}},a.a.createElement(r.b,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:44,minWidth:44}}},c?a.a.createElement(r.m,{accessibilityLabel:e,dangerouslySetSvgPath:{__path:o},color:"darkGray",inline:!0,size:20}):a.a.createElement(r.m,{accessibilityLabel:e,icon:o,color:"darkGray",inline:!0,size:20})))};t.a=(e=>{const t=e.accessibilityLabel,n=e.onClick,i=e.icon,r=e.isSVG,s=e.shadowType;return a.a.createElement(o.a,{accessibilityLabel:t,className:s||"",dataTestId:"lego-button",onClick:n,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"}},({active:e,hovered:n,focused:o})=>a.a.createElement(c,{active:e,accessibilityLabel:t,hovered:n,focused:o,icon:i,isSVG:r}))})},dMYx:function(e,t,n){n.d(t,"a",function(){return i});const i={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user"}},dmID:function(e,t,n){n.r(t);var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("4gpq"),s=n("cNuv"),l=n("lglE");const c=e=>e.charAt(0).toUpperCase()+e.slice(1);var d=n("/Mjl"),u=n("+U6O"),p=n("kR61");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"getEligiblePinTypes",function(){return h}),n.d(t,"PinType",function(){return g});const h=e=>e.reduce((e,t)=>{return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){m(e,t,n[t])})}return e}({},e,{[`is${"story-pin"===t?"StoryPin":function(e){return c(Object(l.a)(e))}(t)}`]:!0})},{isCarousel:!1,isEmbeddedVideo:!1,isGif:!1,isOneTap:!1,isProduct:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1}),g=({pin:e,pinId:t,types:n})=>{const i=e.promoter,o=h(n),l=o.isStoryPin,c=o.isOneTap,m=o.isCarousel,g=o.isEmbeddedVideo,b=o.isRecipe,f=o.isProduct,y=o.isGif;return c?m?a.a.createElement(u.b,{paddingY:1},a.a.createElement(u.b,{position:"relative",marginBottom:2,marginLeft:2,dangerouslySetInlineStyle:{__style:{zIndex:d.a.max}}},a.a.createElement(r.a,{pinId:t,variant:"legacy"})),a.a.createElement(s.a,{text:(i||{}).full_name,icon:"arrow-up-right"})):a.a.createElement(u.b,{paddingY:1},a.a.createElement(s.a,{text:(i||{}).full_name,icon:"arrow-up-right"})):m?a.a.createElement(r.a,{pinId:t,variant:"legacy"}):y?a.a.createElement(u.b,{paddingY:1},a.a.createElement(s.a,{icon:"gif"})):g?a.a.createElement(u.b,{paddingY:1},a.a.createElement(s.a,{icon:"play"})):f?a.a.createElement(u.b,{paddingY:1},a.a.createElement(s.a,{text:Object(p.b)(e),icon:"tag"})):b?e.rich_summary&&e.rich_summary.aggregate_rating&&e.rich_summary.aggregate_rating.review_count?a.a.createElement(u.b,{paddingY:1},a.a.createElement(s.a,{text:e.rich_summary.aggregate_rating.review_count.toString(),icon:"star",rating:e.rich_summary&&e.rich_summary.aggregate_rating?e.rich_summary.aggregate_rating.rating_value:"",max_rating:e.rich_summary&&e.rich_summary.aggregate_rating?e.rich_summary.aggregate_rating.best_rating:""})):null:l?a.a.createElement(u.b,{paddingY:1},a.a.createElement(s.a,{icon:"story-pin"})):null};t.default=Object(o.connect)(({pins:e},t)=>{const n=t.pinId,i=t.pin;return{pin:e[n]||i}})(g)},drcg:function(e,t,n){n.d(t,"a",function(){return m});var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("Qo1m"),s=n("iJ35"),l=n("HW6o"),c=n("UmN8"),d=n("NmcB"),u=n("+U6O");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=e=>{const t=e.sourceUrl,n=e.linkText,i=e.displayUrl,o=e.image,l=e.pageId,m=e.canonicalUrl,h=e.pinId,g=e.storyPinDataId,b=e.onTouch,f=e.onClickThrough,y=e.isLoading,v={story_pin_page_id:l,story_pin_data_id:g,src_url:t,canonical_url:m},w=()=>{f&&f(!1,v)},E=()=>{Object(d.a)(101,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}({objectId:h,view:3,viewParameter:157,component:228,element:11157},v))},_=(o||{}).images,C=(void 0===_?{}:_)["345x"],O=a.a.createElement(u.b,{display:"flex",shape:"rounded",overflow:"hidden",alignItems:"center",dangerouslySetInlineStyle:{__style:{border:"1px solid lightGray"}}},a.a.createElement(u.b,{minWidth:80,width:80,height:80,flex:"none",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid lightGray",backgroundColor:y||C.url?void 0:"#EFEFEF"}}},y?a.a.createElement(u.F,{accessibilityLabel:r.a._("Loading website","a11y for loading spinner"),show:!0}):((e,t)=>e&&e.url?a.a.createElement(u.o,{fit:"cover",src:C.url,alt:t,naturalHeight:C.height,naturalWidth:C.width}):a.a.createElement(u.m,{dangerouslySetSvgPath:{__path:"M21.001,7.241 L16.948,11.293 L15.888,10.233 L16.56,9.561 C17.146,8.976 17.146,8.026 16.56,7.44 C15.974,6.855 15.024,6.855 14.439,7.44 L13.768,8.112 L12.707,7.052 L16.759,3 L21.001,7.241 Z M11.293,16.949 L7.241,21.001 L2.999,16.76 L7.052,12.707 L8.111,13.767 L7.44,14.439 C6.855,15.025 6.855,15.974 7.44,16.56 C8.025,17.146 8.976,17.145 9.561,16.56 L10.232,15.888 L11.293,16.949 Z M14.639,0.879 L10.586,4.931 C9.415,6.102 9.415,8.001 10.586,9.173 L11.647,10.233 L10.232,11.647 L9.172,10.586 C8.001,9.415 6.102,9.415 4.931,10.586 L0.879,14.638 C-0.293,15.81 -0.293,17.709 0.879,18.88 L5.12,23.122 C6.291,24.293 8.19,24.293 9.361,23.122 L13.414,19.07 C14.585,17.898 14.585,15.999 13.414,14.828 L12.354,13.767 L13.768,12.354 L14.828,13.414 C15.999,14.585 17.898,14.585 19.069,13.414 L23.121,9.362 C24.293,8.191 24.293,6.292 23.121,5.12 L18.88,0.879 C17.709,-0.293 15.81,-0.293 14.639,0.879 Z"},accessibilityLabel:r.a._("Default link block icon","Icon for default link blocks without an image"),color:"gray",size:35}))(C,n)),a.a.createElement(u.b,{paddingX:5,flex:"grow",overflow:"hidden",dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}}},a.a.createElement(u.J,{size:"lg",bold:!0,truncate:!0},n),a.a.createElement(u.J,{size:"sm",color:"blue"},i)));return b?a.a.createElement(u.O,{shape:"rounded",onTouch:b},O):a.a.createElement(c.a,{name:"web_story_pin_link_block_click_through_logging"},({anyEnabled:e})=>{const n=e?w:E;return a.a.createElement(s.b,{to:t,onClick:n,target:"blank",pinId:h},O)})},h=Object(l.a)(m);t.b=Object(o.connect)(({pins:e},{pinId:t})=>({storyPinDataId:t&&e&&e[t]&&e[t].story_pin_data_id}))(h)},"eB/M":function(e,t,n){n.d(t,"a",function(){return s}),n.d(t,"c",function(){return d});var i=n("HQ9/");function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=["search_banner_story","search_articles_story","hashtag_pins_story"],s={AGGREGATED_COMMENTS:"aggregatedComments",BOARD_ACTIVITYITEMS:"boardActivityItems",BOARD_ACTIVITYCOMMENTS:"boardActivityComments",BOARD_PINS:"boardPins",BOARD_SECTIONS:"boardSections",HOMEFEED_MORE_IDEAS_TABS:"homefeedMoreIdeasTabs",SEARCH_PINS:"searchPins",SECTION_PINS:"sectionPins",USER_DID_IT_DATA:"userDidItData",PROFILE_BOARDS:"profileBoards"},l={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:s.USER_DID_IT_DATA,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:s.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{objectId:e}})=>({type:s.AGGREGATED_COMMENTS,id:e,reversed:!0}),BoardActivityFeedResource:({options:{board_id:e}})=>({type:s.BOARD_ACTIVITYITEMS,id:e}),BoardActivityCommentFeedResource:({options:{activityId:e,parentType:t}})=>({type:s.BOARD_ACTIVITYCOMMENTS,id:e,reversed:"boardactivitycomment"===t}),BoardFeedResource:({options:{board_id:e}})=>({type:s.BOARD_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:s.SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:s.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t}})=>({type:s.PROFILE_BOARDS,id:Object(i.c)(e,t)}),BaseSearchResource:({options:{auto_correction_disabled:e,scope:t,filters:n,query_pin_sigs:i,query:a,user:o},data:l})=>({type:s.SEARCH_PINS,id:e?`auto-correction-disabled:${t}:${n||""}:${o||""}:${i||""}:${a}`:`${t}:${n||""}:${o||""}:${i||""}:${a}`,items:l&&l.results&&l.results.filter(e=>!(e.story_type&&r.includes(e.story_type)))||[]}),DidItCommentsResource:({options:{objectId:e}})=>({type:s.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:s.USER_DID_IT_DATA,id:e}),MoreIdeasTabsResource:()=>({type:s.HOMEFEED_MORE_IDEAS_TABS,id:"hf"})},c={aggregatedComments:{},boardActivityItems:{},boardActivityComments:{},boardPins:{},boardSections:{},homefeedMoreIdeasTabs:{},searchPins:{},sectionPins:{},userDidItData:{},profileBoards:{}};function d(e,t,n){const i=[...e],a=i.splice(t,1)[0];return i.splice(n,0,a),i}t.b=((e=c,t)=>{switch(t.type){case"RESOURCE_FETCH_COMPLETE":case"RESOURCE_FETCH_MORE_COMPLETE":{const n=t.payload;if(!n.options.redux_normalize_feed)return e;const i=l[n.name](n),o=i.type,r=i.id,c=i.items,d=i.reversed;let u=(c||n.data||[]).map(e=>((e,t)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===s.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"boardactivity":return{id:e.id,type:"boardactivity"};case"boardactivitycomment":return{id:e.id,type:"boardactivitycomment"};case"board_section":return{type:"board_section",id:e.id};case"userdiditdata":return{type:"userdiditdata",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"board_first_pin_slot":return{type:"board_first_pin_slot",pinId:e.pin_id,id:e.id,image:e.image,description:e.description,saves:e.saves,impressions:e.impressions,link:e.link};default:return{type:"pin",id:e.id}}})(e,o));d&&(u=u.reverse());const p=e[o][r];if(p||"RESOURCE_FETCH_MORE_COMPLETE"!==t.type){const n=p||[];let i=u;return"RESOURCE_FETCH_MORE_COMPLETE"===t.type&&(i=d?u.concat(n):n.concat(u)),a({},e,{[o]:a({},e[o],{[r]:i})})}break}case"FEED_ITEM_REORDERED":{const n=t.payload,i=n.feedType,o=n.feedId,r=n.itemType,l=n.targetItemId,c=n.sourceItemId,u=e[i]||{},p=u[o]||[];let m=-1,h=-1;if([s.BOARD_PINS,s.SECTION_PINS,s.BOARD_SECTIONS,"profileBoards"].includes(i)&&(m=p.findIndex(e=>e.type===r&&e.id===c),h=p.findIndex(e=>e.type===r&&e.id===l)),-1!==m&&-1!==h)return a({},e,{[i]:a({},u,{[o]:d(p,m,h)})});break}case"FEED_ITEMS_REMOVED":{const n=t.payload,i=n.feedType,o=n.feedId,r=n.inverseSelection,l=n.itemType,c=n.itemIds,d=void 0===c?[]:c,u=e[i]||{},p=u[o];if(p&&p.length>0&&(i===s.SECTION_PINS||i===s.BOARD_PINS)){const t=p.filter(e=>{const t=d.includes(e.id);return!(e.type===l&&(r&&!t||!r&&t))});return a({},e,{[i]:a({},u,{[o]:t.find(e=>"pin"===e.type)?t:[]})})}if(p&&p.length>0&&i===s.BOARD_SECTIONS)return a({},e,{[i]:a({},u,{[o]:p.filter(e=>{const t=d.includes(e.id);return!(e.type===l&&t)})})});if(p&&p.length>0&&(i===s.BOARD_ACTIVITYITEMS||i===s.AGGREGATED_COMMENTS||i===s.BOARD_ACTIVITYCOMMENTS||i===s.USER_DID_IT_DATA))return a({},e,{[i]:a({},u,{[o]:p.filter(e=>{const t=d.includes(e.id);return!(e.type===l&&t)})})});break}case"FEED_ITEMS_ADDED":{const n=t.payload,i=n.feedType,o=n.feedId,r=n.itemType,l=n.itemIds,c=void 0===l?[]:l,d=n.prepend,u=e[i]||{},p=u[o];if(p&&(i===s.SECTION_PINS||i===s.BOARD_PINS)){const t=c.map(e=>({id:e,type:r}));let n=0;return"story"===(p[0]||{}).type&&(n=1),"story"===(p[1]||{}).type&&(n=2),a({},e,{[i]:a({},u,{[o]:[...p.slice(0,n),...t,...p.slice(n)]})})}if(p&&i===s.BOARD_SECTIONS){const t=c.reverse().map(e=>({id:e,type:"board_section"}));return a({},e,{[i]:a({},u,{[o]:p?[...t,...p]:[...t]})})}if(i===s.BOARD_ACTIVITYITEMS||i===s.AGGREGATED_COMMENTS||i===s.BOARD_ACTIVITYCOMMENTS){const t=c.map(e=>({id:e,type:r}));return a({},e,{[i]:a({},u,{[o]:p?[...d?t:p,...d?p:t]:t})})}if(i===s.USER_DID_IT_DATA){const t=c.map(e=>({id:e,type:r})),n=p?[...t,...p]:t;return a({},e,{[i]:a({},e[i],{[o]:n})})}break}case"FEED_INVALIDATE":{const n=t.payload,i=n.feedType,o=n.feedId,r=e[i]||{};if(r[o])return a({},e,{[i]:a({},r,{[o]:null})});break}}return e})},eRYL:function(e,t,n){n.d(t,"a",function(){return o});var i=n("GyhR"),a=n("+U6O");function o(e){const t=e.htmlFor,n=e.errorMessage;return i.createElement(a.p,{htmlFor:t},i.createElement(a.b,{marginTop:1},i.createElement(a.J,{color:"red",size:"sm"},n)))}},eei7:function(e,t,n){},evwu:function(e,t,n){n.d(t,"g",function(){return b}),n.d(t,"h",function(){return f}),n.d(t,"b",function(){return y}),n.d(t,"i",function(){return v}),n.d(t,"e",function(){return w}),n.d(t,"d",function(){return E}),n.d(t,"m",function(){return _}),n.d(t,"f",function(){return O}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return x}),n.d(t,"l",function(){return k}),n.d(t,"j",function(){return I}),n.d(t,"k",function(){return P});var i=n("UhjI"),a=n("wCwf"),o=n("E56J"),r=n("ePT2"),s=n("eB/M"),l=n("j/DJ"),c=n("3Wjl"),d=n("7Iyi");function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m="board_create",h="board_delete",g="board_edit";function b(){return{type:"BOARDS_FETCH_ALL_IF_NEEDED",payload:{}}}function f(){return{type:"BOARDS_FETCH_LAST_PINNED_TO_IF_NEEDED",payload:{}}}function y(e,t){return Object(d.a)("BoardResource",{board_id:e,field_set_key:t})}function v(){return(e,t)=>{const n=t().viewer;n.isAuth&&Object(l.b)(n.username).forEach(t=>{e(t)})}}function w(e){const t=u({},e);return n=>(n({type:"BOARD_CREATE",payload:{board:e}}),r.a.create("BoardResource",t).callCreate().then(e=>{i.a.trackEvent(m,"success");const a=e.resource_response.data;return a&&(n(v()),n(function(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}(t,a))),a}).catch(e=>{throw i.a.trackEvent(m,"error"),e}))}function E(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function _(e){return t=>{const n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},a=u({board_id:e.id,name:e.name,description:e.description,category:e.category,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations},n);return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:a}}),r.a.create("BoardResource",a).callUpdate().then(n=>{i.a.trackEvent(g,"success");const o=n&&n.resource_response&&n.resource_response.data||e;t(E(a,o))}).catch(e=>{throw i.a.trackEvent(g,"error"),e})}}function C(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function O(e){return(t,n)=>{const a=n().boards.content[e],o=a.pin_count,s=a.owner.id;return t({type:"BOARD_DELETE",payload:{boardId:e}}),r.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{i.a.trackEvent(h,"error"),t(C(e)),t(Object(c.a)({userId:s,increment:-o}))}).catch(e=>{throw i.a.trackEvent(h,"error"),e})}}function S(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function x(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),r.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function k(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),r.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function I(e,t){return n=>r.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([n(C(e)),n(y(t,"pin_count")),n(Object(a.a)(s.a.BOARD_SECTIONS,t))]))}function P(e,t){return n=>r.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response)return{};const i=e.resource_response.data||{},a=((i.model||{}).custom_properties||{}).campaign_id,r=void 0===a?"unknown":a,s=i.display_data||{},l={isSocialSeasonalBoard:!!i.display_data,socialHeaderBgImage:s.header_image,socialHeaderBgColor:s.header_background_color};return o.default.increment(`web.seasonal_board.${r}.${t}.land`),n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:l})})}},exzK:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("oko/"),s=n("Qo1m"),l=n("9Y9K"),c=n("NmcB"),d=n("+U6O");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},m=(e,t,n,i,a,o,r,s,l)=>{if(!l||!i){const l=i.carousel_slots,d=i.id;Object(c.a)(108,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}({},s,{objectId:e,component:r,view:o,viewParameter:a,eventData:{pinCarouselSlotEventData:{carouselSlotId:l[t]&&Number(l[t].id),carouselDataId:Number(d),carouselSlotIndex:t,toCarouselSlotIndex:n}}}))}},h=(e,t,n,i,a,o)=>{o||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,n)),void 0!==a&&a(n)};t.a=Object(l.compose)(Object(o.connect)(({pins:e},{pinId:t})=>({carousel_data:e[t]&&e[t].carousel_data}),e=>({changeCarouselSlotIndex:(t,n)=>e(Object(r.a)(t,n))})))(({carouselIndex:e,carousel_data:t,changeCarouselSlotIndex:n,handleCarouselSwipe:i,pinId:o,contextLogData:r,viewParameter:l,viewType:c,componentType:u,isEditMode:g})=>{const b=t.carousel_slots,f=t.index,y=void 0!==e?e:f,v=Math.max(0,y-1),w=Math.min(b.length-1,y+1);return a.a.createElement(d.b,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},a.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{h(e,o,v,n,i,g),m(o,y,v,t,l,c,u,r,g)},onKeyUp:e=>{h(e,o,v,n,i,g),m(o,y,v,t,l,c,u,r,g)},style:p.slider},y>0&&a.a.createElement(d.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(d.m,{color:"white",icon:"arrow-back",accessibilityLabel:s.a._("View Previous","Button to advance carousel to the previous image")}))),a.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{h(e,o,w,n,i,g),m(o,y,w,t,l,c,u,r,g)},onKeyUp:e=>{h(e,o,w,n,i,g),m(o,y,w,t,l,c,u,r,g)},style:p.slider},y<b.length-1&&a.a.createElement(d.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(d.m,{color:"white",icon:"arrow-forward",accessibilityLabel:s.a._("View Next","Button to advance carousel to the next image")}))))})},f3vW:function(e,t,n){var i=n("VSY/"),a=n("Qo1m");t.a=((e,t)=>{const n=e.link_domain,o=e.tracked_link||e.link||e.images&&e.images.orig&&e.images.orig.url,r=e.rich_metadata,s=e.domain;let l=e.pinner||e.origin_pinner;n&&(l=n.official_user||l);let c="",d="";const u=!(!(r&&r.recipe&&r.recipe.name&&r.recipe.categorized_ingredients)||r.recipe.from_aggregated_data);let p;r&&r.products&&r.products[0]&&(p=!!(r&&r.name&&r.offer_summary));const m=e.buyable_product,h=p||m,g=!(!r||!r.article),b=!(!r||!r.tutorial),f=!(!l||!l.username);let y,v,w=f?a.a._("Saved by"):a.a._("Saved from"),E=a.a._("Visit");h?(w=a.a._("Sold by"),E=a.a._("Visit"),p&&(c=r.products[0].name)):b?(w=f?a.a._("Saved by"):a.a._("Saved from"),E=a.a._("Visit")):u?(w=f?a.a._("Recipe by"):a.a._("Recipe from"),E=a.a._("Make it"),c=r.recipe.name,d=r.closeup_description):g&&(w=f?a.a._("Article by"):a.a._("Article from"),E=a.a._("Read it"),c=r.title),f?(y="/"+l.username+"/",v=l.full_name):(y="/source/"+s,v=r&&r.site_name||s);const _=l&&(l.image_medium_url||l.image_small_url)||e.board&&e.board.image_thumbnail_url,C=i.c(a.a._("More from {{ subtitle }}"),{subtitle:v});return c=t?e.closeup_unified_title:c||e.title,d=t?e.closeup_unified_description:d&&d.trim()||e.closeup_description&&e.closeup_description.trim()||e.description&&e.description.trim(),{actionButtonText:E,image:_,link:y,pinLink:o,pin:e,prefixText:w,subtitle:v,title:C,pinTitle:c,pinDescription:d,pinCategory:e.category}})},fFvW:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n("jZbe"),o=n("2m7L"),r=n("+U6O");const s={width:o.l,height:o.f},l={transition:Object(a.a)({property:"height",duration:"short",timingFunction:"easeOut"})};function c(e){const t=e.index,n=e.pinItem,a=n.description,c=n.title,d=0===t;return i.createElement(i.Fragment,null,i.createElement(r.b,{display:"flex",direction:"column",shape:"rounded",justifyContent:"center",width:o.l,height:o.f,dangerouslySetInlineStyle:{__style:{backgroundColor:"black",overflow:"hidden"}}},function(e){const t=e.description,n=e.media,a=e.title,o=n||{},l=o.height,c=o.src,d=o.width;if("localVideo"===o.type)return i.createElement(i.Fragment,null,i.createElement("video",{muted:!0,src:c,style:s},i.createElement("track",{kind:"captions"})));if(n&&"webVideo"===n.type){const e=(n||{}).customCoverImg;return i.createElement(r.o,{alt:a||t,color:"#FEFEFE",src:e&&e.src||"",naturalHeight:l,naturalWidth:d})}return i.createElement(r.o,{alt:a||t,color:"#FEFEFE",src:c,naturalHeight:l,naturalWidth:d})}(n)),i.createElement(r.b,{height:!c&&!a||d?0:o.j,color:"white",shape:"rounded",column:12,position:"absolute",bottom:!0,dangerouslySetInlineStyle:{__style:l}}))}},fxqt:function(e,t,n){n.d(t,"a",function(){return s});var i=n("GyhR"),a=n.n(i),o=n("1ZRU"),r=n("2YES");function s({activate:e,children:t,isEligible:n,name:i}){return a.a.createElement(r.a,null,r=>a.a.createElement(o.a,{activate:e,activateExperiment:e=>r.experiments.v2ActivateExperiment(e)||"",group:r.experiments.v2GetGroup(i)||"",isEligible:n,name:i},t))}},"g+ED":function(e,t){e.exports="https://s.pinimg.com/webapp/style/images/saveImage-e4cf8383.png"},g9r1:function(e,t,n){n.d(t,"a",function(){return o});var i=n("VSY/");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o({args:e,format:t}){const n=(e||[]).reduce((e,t,n)=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e})({},e,{[n]:t.text}),{});return Object(i.f)(t,n)}},gFzF:function(e,t,n){n.r(t);var i=n("FOY1"),a=n("ptua"),o=n("SMmS"),r=n("owVk"),s=n("9Y9K"),l=n("kR61"),c=n("K668");function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=e=>{switch(e.action){case"PUSH":return"click";case"REPLACE":return"swipe";case"POP":return e.key?"click":"deeplink";default:return null}},m=e=>{const t=a.a.instance;if(t){const n=t.getState()||{};if(n.pins&&e){const t=n.pins[e]||{};return Object(l.a)(t)||{}}}return{}};t.default=Object(s.compose)(Object(o.b)({name:"PinPageResource",options:({params:e})=>Object(c.b)(e.id)}),Object(r.a)({name:"Closeup",upwtActionName:101,resourceDependencies:(e,t)=>[{name:"PinPageResource",options:Object(c.b)(t.id)}],redirect:(e,t,n)=>n[0]&&n[0].response&&n[0].response.data&&n[0].response.data.redirect_url,routeContextLog:(e,t,n)=>({view_type:3,object_id_str:t.id,view_data:{pin_id:t.id},component:13283,aux_data:d({closeup_navigation_type:p(n)},m(t.id)),clientTrackingParams:Object(c.a)(t.id)})}))(i.a)},gHbN:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("aE8+"),r=n("b7z0"),s=n("+U6O");t.a=(({onClick:e,text:t})=>a.a.createElement(o.a,{accessibilityLabel:t,bgColor:"lightGray",onClick:e,borderRadius:30},a.a.createElement(s.b,{alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:36,padding:"10px 16px"}},display:"flex"},a.a.createElement(r.b,{align:"center",size:"sm",weight:"semibold"},t))))},gPYk:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("dsfX"),s=n("Mce2"),l=n("+U6O");t.a=(({accessibilityModalLabel:e,cancelButtonText:t,confirmButtonText:n,detail:i,heading:c,onConfirm:d,onDismiss:u})=>a.a.createElement(r.b,{accessibilityCloseLabel:o.a._("close","accessible label for button to close modal"),accessibilityModalLabel:e,heading:c,onDismiss:u,size:"md"},a.a.createElement(l.b,null,a.a.createElement(l.b,{padding:4},a.a.createElement(l.J,{size:"lg"},i)),a.a.createElement(l.b,{display:"flex",justifyContent:"end"},a.a.createElement(l.b,{margin:2},a.a.createElement(s.a,{id:"confirm-modal-cancel"},a.a.createElement(l.c,{onClick:u,text:t}))),a.a.createElement(l.b,{margin:2},a.a.createElement(s.a,{id:"confirm-modal-confirm"},a.a.createElement(l.c,{color:"red",onClick:()=>{d(),u()},text:n})))))))},gT2i:function(e,t,n){n.d(t,"a",function(){return o});var i=n("PhUE"),a=n("ptua");function o(e){const t=a.a.instance;if(t){const n=t.getState(),a=n.history,o=n.viewer,r=o.isAuth&&!o.isLimitedLogin,s=0===a.previous.length;if(r){const t=i.b.sessionStorage.getItem("sessionAutologinMethod");t&&(s&&e({autologinMethod:t}),i.b.sessionStorage.removeItem("sessionAutologinMethod"))}}}},hCBh:function(e,t,n){n.d(t,"a",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c});var i=n("rQW8");const a=28;function o(e){const t={},n=e.trim();n.length>0&&(t.full_name=n);const i=n.split(/ (.+)/);return""===i[0]&&i.shift(),i.length>0&&(t.first_name=i[0]||""),i.length>1&&(t.last_name=i[1]||""),t}function r({user:e,days:t=a}){if(!e||!e.createdAt)return!1;const n=new Date(e.createdAt),o=Object(i.i)(-t,n),r=new Date;return!Object(i.h)(r,o)}function s({user:e,days:t=a}){if(!e.resurrectionInfo)return!1;const n=e.resurrectionInfo.resurrectionDate,o=new Date,r=n?new Date(n):o,s=Object(i.d)(r,t);return Object(i.h)(s,o)}function l(e){return r(e)||s(e)&&!e.user.isPartner}function c(e){return e&&e[1000069]&&500417===e[1000069].experience_id}},hGZ8:function(e,t,n){var i=n("GyhR"),a=n("iz36"),o=n("KCDi"),r=n("NmcB");t.a=(e=>i.createElement(a.a,{placementId:e.placementId,type:10},({complete:t,dismiss:n,display_data:a})=>{const s=a.link||e.linkUrl;return i.createElement(o.a,{duration:a.duration,href:s,text:a.text,onClick:()=>{t(),e.onClick&&e.onClick(),e.shouldLogClicks&&e.shouldLogClicks&&Object(r.a)(101,{objectId:e.objectId,component:e.thriftComponentType,element:e.thriftElementType})},onHide:()=>{e.onHide(),e.completionOnDismissal?t():n()}})}))},hX7C:function(e,t,n){n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});const i=/[\- _,.<>:;+=*&@~\/\|!]*$/,a=(e,t=80,n="…")=>{let a;if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t])a=e.substring(0,t);else{const n=e.lastIndexOf(" ",t);a=e.substring(0,n)}return(a=a.replace(i,""))+n},o=/\s\s+/g,r=e=>e.replace(o," ")},iEzj:function(e,t,n){n.d(t,"a",function(){return u});var i=n("GyhR"),a=n.n(i),o=n("HvLx"),r=n("+7cn"),s=n("dsfX"),l=n("dMYx"),c=n("+U6O");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.Component{static makeSendShareButton(e){return t=>a.a.createElement(this,Object.assign({ref:t.shareButtonRef,Subject:e},t))}constructor(e,t){super(e,t),d(this,"handleDismiss",()=>{(0,this.props.onFlyoutDismiss)()}),d(this,"handleClick",Object(o.a)(e=>{e&&e.stopPropagation&&e.stopPropagation(),this.toggle()})),d(this,"flyoutProps",e=>{const t=this.props,n=t.gridDescription,i=t.imageSrc,o=t.pinId,s=t.userId,c=t.board,d=t.sendType,u=t.fullName,p=t.profileUrl,m=t.viewParameter,h=t.viewType,g=t.onClick,b=void 0===g?()=>{}:g,f=t.onExternalSend;let y={description:n,id:o,imageUrl:i,name:"",type:l.a.PIN,url:`/pin/${o}/`},v=l.a.PIN;switch(d){case"user":y={description:n,id:s,imageUrl:i,name:u,type:l.a.PINNER,url:p},v=l.a.USER;break;case"board":y=c&&{description:c.description,id:c.id,imageUrl:c.imageUrl,name:c.name,type:l.a.BOARD,url:c.url},v=l.a.BOARD}return{anchor:this.flyoutAnchor,idealDirection:"down",onDismiss:this.handleDismiss,size:e,children:a.a.createElement(r.a,{classNames:"SendPin",isFlyout:!0,onHide:()=>{b(),this.handleDismiss()},onExternalSend:f,sendType:v,sharedObject:y,viewParameter:m,viewType:h})}}),this.flyoutAnchor=void 0}toggle(){(0,this.props.onToggleFlyout)()}render(){const e=this.props,t=e.Subject,n=e.inModal,i=e.isFlyoutOpen,o=e.shownWithinMasonry;return a.a.createElement("div",null,a.a.createElement("div",{ref:e=>{e&&(this.flyoutAnchor=e)}},a.a.createElement(t,Object.assign({handleSendShareFlyoutButtonClick:this.handleClick},this.props))),i&&(o?a.a.createElement(c.q,null,a.a.createElement(c.b,{dangerouslySetInlineStyle:n?{__style:{zIndex:s.a,position:"absolute"}}:void 0},a.a.createElement(c.j,Object.assign({},this.flyoutProps("lg"),{positionRelativeToAnchor:!1})))):a.a.createElement(c.j,this.flyoutProps("lg"))))}}},iJ35:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("XQD6"),s=n("Uc2O"),l=n("UhjI"),c=n("XwKk"),d=n("Wo+T"),u=n("pjsG"),p=n("7Tih"),m=n("ePT2"),h=n("anwd");var g=n("hvnN"),b=n.n(g),f=n("4+0X"),y=n("DUYC"),v=n("q579"),w=n("iN5V"),E=n("9Y9K"),_=n("0BZn"),C=n("JsRk");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return k});const S=(e,t,n,i,a)=>{const o={check_only:i,client_tracking_params:Object(c.a)(e,t),pin_id:e.id,url:n,aux_data:JSON.stringify(a)};return m.a.create("OffsiteLinkResource",o)};class x extends i.Component{constructor(...e){super(...e),O(this,"state",{spamCheck:null,waitingForTranslation:!0}),O(this,"mounted",!1),O(this,"setFocusOnBody",()=>{window&&window.focus(),document.activeElement&&document.activeElement.blur()}),O(this,"handleClick",e=>{const t=this.props,n=t.auxData,i=t.external,a=t.focusOnBody,o=t.forceDenzelNavigate,s=t.forceOnClick,d=t.gaCategory,u=t.location,p=t.internalNewTab,g=t.onClick,b=t.pin,f=t.pinId,y=t.router,w=t.shouldShowAltLinks,E=t.stopPropagation,C=t.to,O=this.state.spamCheck;if(d&&l.a.trackEvent(d,"click"),E&&e.stopPropagation(),o)return void this.denzelNavigate();const S=i||v.a.isOffsiteUrl(C);(S||!e.metaKey&&!e.ctrlKey||s)&&(e.nativeEvent.preventDefault(),g&&g(e),C&&!w&&(S&&"undefined"!=typeof window&&window.Windows?function({url:e,pinId:t,pin:n,location:i,auxData:a}){const o={check_only:!0,client_tracking_params:n?Object(c.a)(n,i):void 0,pin_id:n?n.id:t,url:e,aux_data:JSON.stringify(a)};m.a.create("OffsiteLinkResource",o).callGet().then(o=>{if(o&&o.resource_response&&!o.resource_response.error){const e=o.resource_response.data,t=e.redirect_status,n=e.url;if(!["blocked","suspicious","porn"].includes(t)){const e=new window.Windows.Foundation.Uri(n);return void window.Windows.System.Launcher.launchUriAsync(e)}}if(n){const o=Object(c.a)(n,i);h.a.open(e,t,null,o,a)}else h.a.open(e,t)})}({url:C,pinId:f,pin:b,location:u,auxData:n}):S&&b?O&&O.blocked?Object(_.b)(O):h.a.open(C,f,null,Object(c.a)(b,u),n):S?h.a.open(C,f):v.a.getUrlClass(C)===v.a.UrlClass.TRUSTED_DIFFERENT_ORIGIN?Object(r.a)(C,!1):p?Object(r.a)(C,!0):y?(y.push(C),a&&this.setFocusOnBody()):this.denzelNavigate()))})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){const e=this.props,t=e.external,n=e.location,i=e.pin,a=e.to,o=this.state,r=o.spamCheck,s=o.waitingForTranslation;(t||v.a.isOffsiteUrl(a))&&i&&n.pathname.includes(i.id)&&a&&null===r&&!s&&S(i,n,a,!0).callGet({showError:!1}).then(e=>{if(!(e&&e.resource_response&&e.resource_response.error)&&this.mounted){const t=e&&e.resource_response&&e.resource_response.data,n=t.message,i=t.redirect_status,a=t.url,o=["blocked","suspicious","porn"].includes(i);this.setState({spamCheck:{blocked:o,message:n,redirectStatus:i,sanitized_url:a}})}})}denzelNavigate(){const e=this.props,t=e.useNewTab,n=e.crsId,i=e.deeplinkUrls,a=e.extraData,o=e.focusOnBody,l=e.pinId,c=e.to,m=e.forceRefresh;if(1===m)return void Object(r.a)(c,!1);const h=new RegExp("/pin/[\\w|-]+/$"),g=c.match(h);if(g&&g.index>=0&&y.a.instance.getStatus()!==y.a.NavStatus.READY)return;const b={crsId:n,forceRefresh:m,pinId:l,url:c,useNewTab:t};f.a.instance.publish("site","navigateStarted",{url:c});const v=new s.b(this.context.userAgent.raw,this.context.userAgent.platform);i&&v.shouldDeepLink(document.referrer,this.context.userAgent,this.context.isAuthenticated)&&v.navigateToDeepLink(this.context.unauthId,i);const w=new p.a;w.evt={data:b},w.extraData=a,d.a.singleton().populateNavigateData(w),u.default.navigate(c,w),o&&this.setFocusOnBody()}render(){const e=this.props,t=e.category,n=e.children,i=e.className,o=e.elementType,r=e.external,s=e.forceRefresh,l=e.noFollow,c=e.shouldCaptureClick,d=e.style,u=e.target,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){O(e,t,n[t])})}return e}({className:i,"data-category":t,"data-force-refresh":s,href:e.to,[c?"onClickCapture":"onClick"]:this.handleClick,rel:r||l?"nofollow":"",style:d,target:u?"_blank":null},null!==o?{"data-element-type":o}:{});return a.a.createElement("a",p,n)}}x.propTypes={shouldShowAltLinks:b.a.bool,category:b.a.string,children:b.a.node,className:b.a.string,crsId:b.a.string,deeplinkUrls:b.a.shape({androidDeeplink:b.a.string.isRequired,iOSDeeplink:b.a.string.isRequired,webUrl:b.a.string}),elementType:b.a.number,external:b.a.bool,extraData:b.a.shape({}),focusOnBody:b.a.bool,forceOnClick:b.a.bool,forceRefresh:b.a.number,gaCategory:b.a.string,location:b.a.shape({pathname:b.a.string,history:b.a.arrayOf(b.a.shape({}))}),internalNewTab:b.a.bool,noFollow:b.a.bool,onClick:b.a.func,pin:b.a.shape({id:b.a.string,board:b.a.shape({url:b.a.string.isRequired}),pinner:b.a.shape({username:b.a.string.isRequired}),tracking_params:b.a.string,tracking_params_map:b.a.shape({})}),pinId:b.a.string,router:b.a.shape({push:b.a.func.isRequired}),stopPropagation:b.a.bool,style:b.a.shape({}),to:b.a.string,useNewTab:b.a.bool},x.contextTypes={country:b.a.string,isAuthenticated:b.a.bool,unauthId:b.a.string,userAgent:b.a.shape({canUseNativeApp:b.a.bool.isRequired,isTablet:b.a.bool.isRequired,platform:b.a.string.isRequired,platformVersion:b.a.arrayOf(b.a.number),raw:b.a.string.isRequired})};const k={".HomeButton2":Object(E.compose)(Object(w.a)(".HomeButton2"),C.withRouter)(x)};t.b=Object(E.compose)(C.withRouter,Object(o.connect)(({location:e,pins:t},{pinId:n})=>({location:e,pin:n&&t&&t[n]})))(x)},iN5V:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Mr4W"),r=n("Ivf5"),s=n("l1Vv"),l=n.n(s),c=n("QG6s"),d=n("QG2C"),u=n("+U6O");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={overlay:{padding:0},content:{boxShadow:"none",height:"100%",margin:0,outline:"none",padding:0,width:"100%"}};class h extends i.Component{constructor(e){super(e),p(this,"state",{isPulsing:!this.props.tooltipOnly,isModalOpen:!!this.props.isModal&&!!this.props.tooltipOnly&&!this.props.pulserOnly,positionStyles:{},style:{}}),p(this,"onPulsarClick",e=>{e&&(e.stopPropagation(),e.preventDefault());const t={isPulsing:!1,style:{}},n=this.props,i=n.isModal,a=n.pulserOnly,r=n.handleComplete,s=n.anchor;if(a)r();else if(i){const e=Object(o.findDOMNode)(s);if(e instanceof HTMLElement){const n=e.getBoundingClientRect();return void this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){p(e,t,n[t])})}return e}({},t,{isModalOpen:!0,positionStyles:{top:n.top,left:n.left,position:"absolute"}}))}}this.setState(t)}),p(this,"modalPositioned",!1),e.anchor&&(this.anchorElement=Object(o.findDOMNode)(e.anchor))}UNSAFE_componentWillReceiveProps(e){e.anchor!==this.props.anchor&&(this.anchorElement=Object(o.findDOMNode)(e.anchor))}componentDidUpdate(){this.state.isModalOpen&&this.updateModalPosition()}getPulser(){return a.a.createElement(d.a,{anchor:this.props.anchor,onTouch:this.onPulsarClick})}getFlyout(){const e=this.props,t=e.overflow,n=e.tooltip,i=e.handleDismiss,o=e.handleComplete;if(n){const e=n.cancelButtonText,r=n.confirmButtonText,s=n.mainText,l=n.idealDirection,c=void 0===l?"down":l,d=e&&i&&r&&o;return a.a.createElement(u.j,{anchor:this.anchorElement,color:"darkGray",idealDirection:c,onDismiss:i,shouldFocus:!1,size:"md"},a.a.createElement(u.b,{column:12,padding:3},a.a.createElement(u.J,{bold:!0,color:"white",size:"lg",overflow:t},s),d?a.a.createElement(u.b,{display:"flex",alignItems:"center",deprecatedMargin:{top:2}},a.a.createElement(u.b,{deprecatedMargin:{right:1},xs:{column:6}},a.a.createElement(u.c,{color:"transparent",onClick:i,size:"md",text:String(e)})),a.a.createElement(u.b,{xs:{column:6}},a.a.createElement(u.c,{color:"white",size:"md",text:String(r),onClick:o}))):null))}return a.a.createElement("div",null)}updateModalPosition(){if(this.state.isModalOpen&&!this.modalPositioned){const e=Object(o.findDOMNode)(this.props.anchor);if(e instanceof HTMLElement){const t=e.getBoundingClientRect(),n=window.getComputedStyle(e),i=n.getPropertyValue("border"),a=n.getPropertyValue("margin"),o=parseInt(i.split("px")[0],10),r=parseInt(a.split("px")[0],10),s=!isNaN(o)&&!isNaN(r)&&Math.abs(r)===o?o:0;this.setState({positionStyles:{top:t.top+s,left:t.left+s,position:"absolute"}}),this.modalPositioned=!0}}}renderFlyout(){const e=this.props,t=e.handleComplete,n=e.children,i=e.pulserOnly,o=this.state,r=o.isModalOpen,s=o.positionStyles,l=!i;return r?a.a.createElement(c.a,{noButton:!0,onHide:t,style:m},a.a.createElement("div",{style:s},n,this.getFlyout())):l?this.getFlyout():null}render(){return this.props.anchor?a.a.createElement("div",{style:this.state.style},this.state.isPulsing?this.getPulser():this.renderFlyout()):null}}p(h,"defaultProps",{overflow:"breakWord",tooltipOnly:!1,pulserOnly:!1});var g=n("lglE"),b=n("OtLr"),f=n("+H5w"),y=n("XXWR");function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){var n,a;return a=n=class extends i.Component{constructor(e){super(e),v(this,"getDisplayDataProps",()=>{const e=this.props.experience.display_data;if(e.tooltip){const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){v(e,t,n[t])})}return e}({},e.tooltip.options,e.tooltip);e.tooltip=t,delete e.tooltip.options}return Object(f.a)(g.a,!0)(e)}),v(this,"handleCompleteOnHover",()=>{const e=this.props,t=e.experienceClient,n=e.experience;n.display_data&&n.display_data.complete_on_hover&&t.completeExperience(n.placement_id,n.experience_id)}),v(this,"handleCompleteNoClick",e=>{const t=this.props,n=t.experienceClient,i=t.experience,a=t.onClick;e&&e.event&&e.event.stopPropagation(),a&&a(e),n.completeExperience(i.placement_id,i.experience_id)}),v(this,"handleComplete",e=>{const t=this.props,n=t.experienceClient,i=t.experience,a=this.state.wrappedComponentRef;if(e&&e.event&&e.event.stopPropagation(),a){const e=Object(o.findDOMNode)(a);e instanceof HTMLElement&&e.click()}n.completeExperience(i.placement_id,i.experience_id)}),v(this,"handleDismiss",e=>{e&&e.event&&e.event.stopPropagation();const t=this.props,n=t.experienceClient,i=t.experience;n.dismissExperience(i.placement_id,i.experience_id)}),v(this,"handleRefUpdate",e=>{this.state.wrappedComponentRef&&!!e||this.setState({wrappedComponentRef:e})});const t=e.experience;let n=!1;t&&t.display_data&&t.display_data.delay&&(n=!0),this.state={hasModal:t&&t.display_data&&t.display_data.modal,isPresentationDelayed:n,wrappedComponentRef:void 0}}componentDidMount(){const e=this.props,t=e.experience,n=e.experienceClient,i=this.state.isPresentationDelayed;t&&(i?this.viewTimer=setTimeout(()=>{this.showExperience()},t.display_data.delay):n.viewExperience(t.placement_id,t.experience_id))}UNSAFE_componentWillReceiveProps(e){const t=this.props.experience,n=e.experience;if(!t&&n){const e={};n.display_data&&n.display_data.delay&&(e.isPresentationDelayed=!0,this.viewTimer=setTimeout(()=>{this.showExperience()},n.display_data.delay)),n.display_data&&n.display_data.modal&&(e.hasModal=!0),l()(e)||this.setState(e)}}componentWillUnmount(){this.viewTimer&&clearTimeout(this.viewTimer)}showExperience(){const e=this.props,t=e.experience,n=e.experienceClient;t&&(n.viewExperience(t.placement_id,t.experience_id),this.setState({isPresentationDelayed:!1}))}renderComponentTooltip(e){const n=this.state.wrappedComponentRef,a=this.props,o=a.centerTooltip,r=a.overflow;return i.createElement("div",{style:{position:"relative"}},i.createElement(u.O,{onMouseEnter:this.handleCompleteOnHover},i.createElement(t,Object.assign({},this.props,{ref:this.handleRefUpdate,onClick:this.handleCompleteNoClick})),i.createElement(h,Object.assign({},this.getDisplayDataProps(),{anchor:n,handleComplete:this.handleComplete,handleDismiss:this.handleDismiss,isModal:e,centerTooltip:o,overflow:r}),i.createElement(t,Object.assign({},this.props,{ref:this.handleRefUpdate,onClick:this.handleCompleteNoClick})))))}render(){const n=this.props,a=n.experience,o=n.isPulsarDisplayed,r=this.state,s=r.hasModal,l=r.isPresentationDelayed;return a&&Object(y.c)(a)===e&&!l&&o?i.createElement(u.b,{position:"relative"},s?this.renderComponentTooltip(!0):this.renderComponentTooltip(!1)):i.createElement(t,this.props)}},v(n,"defaultProps",{isPulsarDisplayed:!0}),a}t.a=((e,t)=>n=>{const i=function(e,t){return(n,i)=>{if(t)return{experience:t};const a=n.experiences.anchorExperiences[e];return a?{experience:a}:{}}}(e,t),a=w(e,n);return Object(b.a)(Object(r.connect)(i)(a))})},iUcS:function(e,t,n){n.d(t,"a",function(){return s});var i=n("D+W/"),a=n("ePT2"),o=n("j/DJ"),r=n("7Iyi");function s(e,t){const n={name:e,privacy:i.a.BoardPrivacy.PUBLIC};return e=>a.a.create("BoardResource",n).callCreate().then(n=>{const i=n.resource_response.data;return e(t.username&&Object(r.f)("BoardsResource",Object(o.a)(t.username,!1))),i})}},iVPt:function(e,t,n){var i={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},a={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},o=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],r={CSS:{},springs:{}};function s(e,t,n){return Math.min(Math.max(e,t),n)}function l(e,t){return e.indexOf(t)>-1}function c(e,t){return e.apply(null,t)}var d={arr:function(e){return Array.isArray(e)},obj:function(e){return l(Object.prototype.toString.call(e),"Object")},pth:function(e){return d.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||d.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return d.hex(e)||d.rgb(e)||d.hsl(e)},key:function(e){return!i.hasOwnProperty(e)&&!a.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function u(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function p(e,t){var n=u(e),i=s(d.und(n[0])?1:n[0],.1,100),a=s(d.und(n[1])?100:n[1],.1,100),o=s(d.und(n[2])?10:n[2],.1,100),l=s(d.und(n[3])?0:n[3],.1,100),c=Math.sqrt(a/i),p=o/(2*Math.sqrt(a*i)),m=p<1?c*Math.sqrt(1-p*p):0,h=1,g=p<1?(p*c-l)/m:-l+c;function b(e){var n=t?t*e/1e3:e;return n=p<1?Math.exp(-n*p*c)*(h*Math.cos(m*n)+g*Math.sin(m*n)):(h+g*n)*Math.exp(-n*c),0===e||1===e?e:1-n}return t?b:function(){var t=r.springs[e];if(t)return t;for(var n=0,i=0;;)if(1===b(n+=1/6)){if(++i>=16)break}else i=0;var a=n*(1/6)*1e3;return r.springs[e]=a,a}}function m(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=s(e,1,10),i=s(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}function h(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var g=function(){var e=11,t=1/(e-1);function n(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function a(e){return 3*e}function o(e,t,o){return((n(t,o)*e+i(t,o))*e+a(t))*e}function r(e,t,o){return 3*n(t,o)*e*e+2*i(t,o)*e+a(t)}return function(n,i,a,s){if(0<=n&&n<=1&&0<=a&&a<=1){var l=new Float32Array(e);if(n!==i||a!==s)for(var c=0;c<e;++c)l[c]=o(c*t,n,a);return function(e){return n===i&&a===s?e:0===e||1===e?e:o(d(e),i,s)}}function d(i){for(var s=0,c=1,d=e-1;c!==d&&l[c]<=i;++c)s+=t;var u=s+(i-l[--c])/(l[c+1]-l[c])*t,p=r(u,n,a);return p>=.001?function(e,t,n,i){for(var a=0;a<4;++a){var s=r(t,n,i);if(0===s)return t;t-=(o(t,n,i)-e)/s}return t}(i,u,n,a):0===p?u:function(e,t,n,i,a){var r,s,l=0;do{(r=o(s=t+(n-t)/2,i,a)-e)>0?n=s:t=s}while(Math.abs(r)>1e-7&&++l<10);return s}(i,s,s+t,n,a)}}}(),b=function(){var e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],m],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,t){return function(n){return 1-m(e,t)(1-n)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,t){return function(n){return n<.5?m(e,t)(2*n)/2:1-m(e,t)(-2*n+2)/2}}]},n={linear:[.25,.25,.75,.75]},i=function(i){t[i].forEach(function(t,a){n["ease"+i+e[a]]=t})};for(var a in t)i(a);return n}();function f(e,t){if(d.fnc(e))return e;var n=e.split("(")[0],i=b[n],a=u(e);switch(n){case"spring":return p(e,t);case"cubicBezier":return c(g,a);case"steps":return c(h,a);default:return d.fnc(i)?c(i,a):c(g,i)}}function y(e){try{return document.querySelectorAll(e)}catch(t){return}}function v(e,t){for(var n=e.length,i=arguments.length>=2?arguments[1]:void 0,a=[],o=0;o<n;o++)if(o in e){var r=e[o];t.call(i,r,o,e)&&a.push(r)}return a}function w(e){return e.reduce(function(e,t){return e.concat(d.arr(t)?w(t):t)},[])}function E(e){return d.arr(e)?e:(d.str(e)&&(e=y(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function _(e,t){return e.some(function(e){return e===t})}function C(e){var t={};for(var n in e)t[n]=e[n];return t}function O(e,t){var n=C(e);for(var i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function S(e,t){var n=C(e);for(var i in t)n[i]=d.und(e[i])?t[i]:e[i];return n}function x(e){return d.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:d.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return t+t+n+n+i+i}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):d.hsl(e)?function(e){var t,n,i,a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),o=parseInt(a[1],10)/360,r=parseInt(a[2],10)/100,s=parseInt(a[3],10)/100,l=a[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==r)t=n=i=s;else{var d=s<.5?s*(1+r):s+r-s*r,u=2*s-d;t=c(u,d,o+1/3),n=c(u,d,o),i=c(u,d,o-1/3)}return"rgba("+255*t+","+255*n+","+255*i+","+l+")"}(e):void 0;var t,n}function k(e){var t=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[2]}function I(e,t){return d.fnc(e)?e(t.target,t.id,t.total):e}function P(e,t){return e.getAttribute(t)}function T(e,t,n){if(_([n,"deg","rad","turn"],k(t)))return t;var i=r.CSS[t+n];if(!d.und(i))return i;var a=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=100+n;var s=100/a.offsetWidth;o.removeChild(a);var l=s*parseFloat(t);return r.CSS[t+n]=l,l}function j(e,t,n){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return n?T(e,a,n):a}}function R(e,t){return d.dom(e)&&!d.inp(e)&&(P(e,t)||d.svg(e)&&e[t])?"attribute":d.dom(e)&&_(o,t)?"transform":d.dom(e)&&"transform"!==t&&j(e,t)?"css":null!=e[t]?"object":void 0}function D(e){if(d.dom(e)){for(var t,n=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,a=new Map;t=i.exec(n);)a.set(t[1],t[2]);return a}}function L(e,t,n,i){var a=l(t,"scale")?1:0+function(e){return l(e,"translate")||"perspective"===e?"px":l(e,"rotate")||l(e,"skew")?"deg":void 0}(t),o=D(e).get(t)||a;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),i?T(e,o,i):o}function A(e,t,n,i){switch(R(e,t)){case"transform":return L(e,t,i,n);case"css":return j(e,t,n);case"attribute":return P(e,t);default:return e[t]||0}}function M(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=k(e)||0,a=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return a+o+i;case"-":return a-o+i;case"*":return a*o+i}}function B(e,t){if(d.col(e))return x(e);var n=k(e),i=n?e.substr(0,e.length-n.length):e;return t&&!/\s/g.test(e)?i+t:i}function F(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function N(e){for(var t,n=e.points,i=0,a=0;a<n.numberOfItems;a++){var o=n.getItem(a);a>0&&(i+=F(t,o)),t=o}return i}function U(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*P(e,"r")}(e);case"rect":return function(e){return 2*P(e,"width")+2*P(e,"height")}(e);case"line":return function(e){return F({x:P(e,"x1"),y:P(e,"y1")},{x:P(e,"x2"),y:P(e,"y2")})}(e);case"polyline":return N(e);case"polygon":return function(e){var t=e.points;return N(e)+F(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function z(e,t){var n=t||{},i=n.el||function(e){for(var t=e.parentNode;d.svg(t)&&(t=t.parentNode,d.svg(t.parentNode)););return t}(e),a=i.getBoundingClientRect(),o=P(i,"viewBox"),r=a.width,s=a.height,l=n.viewBox||(o?o.split(" "):[0,0,r,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:r/l[2],h:s/l[3]}}function H(e,t){function n(n){void 0===n&&(n=0);var i=t+n>=1?t+n:0;return e.el.getPointAtLength(i)}var i=z(e.el,e.svg),a=n(),o=n(-1),r=n(1);switch(e.property){case"x":return(a.x-i.x)*i.w;case"y":return(a.y-i.y)*i.h;case"angle":return 180*Math.atan2(r.y-o.y,r.x-o.x)/Math.PI}}function V(e,t){var n=/-?\d*\.?\d+/g,i=B(d.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:d.str(e)||t?i.split(n):[]}}function G(e){return v(e?w(d.arr(e)?e.map(E):E(e)):[],function(e,t,n){return n.indexOf(e)===t})}function W(e){var t=G(e);return t.map(function(e,n){return{target:e,id:n,total:t.length,transforms:{list:D(e)}}})}function Y(e,t){var n=C(t);if(/^spring/.test(n.easing)&&(n.duration=p(n.easing)),d.arr(e)){var i=e.length;2===i&&!d.obj(e[0])?e={value:e}:d.fnc(t.duration)||(n.duration=t.duration/i)}var a=d.arr(e)?e:[e];return a.map(function(e,n){var i=d.obj(e)&&!d.pth(e)?e:{value:e};return d.und(i.delay)&&(i.delay=n?0:t.delay),d.und(i.endDelay)&&(i.endDelay=n===a.length-1?t.endDelay:0),i}).map(function(e){return S(e,n)})}function q(e,t){var n=[],i=t.keyframes;for(var a in i&&(t=S(function(e){for(var t=v(w(e.map(function(e){return Object.keys(e)})),function(e){return d.key(e)}).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),n={},i=function(i){var a=t[i];n[a]=e.map(function(e){var t={};for(var n in e)d.key(n)?n==a&&(t.value=e[n]):t[n]=e[n];return t})},a=0;a<t.length;a++)i(a);return n}(i),t)),t)d.key(a)&&n.push({name:a,tweens:Y(t[a],e)});return n}function J(e,t){var n;return e.tweens.map(function(i){var a=function(e,t){var n={};for(var i in e){var a=I(e[i],t);d.arr(a)&&1===(a=a.map(function(e){return I(e,t)})).length&&(a=a[0]),n[i]=a}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,t),o=a.value,r=d.arr(o)?o[1]:o,s=k(r),l=A(t.target,e.name,s,t),c=n?n.to.original:l,u=d.arr(o)?o[0]:c,p=k(u)||k(l),m=s||p;return d.und(r)&&(r=c),a.from=V(u,m),a.to=V(M(r,u),m),a.start=n?n.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=f(a.easing,a.duration),a.isPath=d.pth(o),a.isColor=d.col(a.from.original),a.isColor&&(a.round=1),n=a,a})}var $={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,a){if(i.list.set(t,n),t===i.last||a){var o="";i.list.forEach(function(e,t){o+=t+"("+e+") "}),e.style.transform=o}}};function Q(e,t){W(e).forEach(function(e){for(var n in t){var i=I(t[n],e),a=e.target,o=k(i),r=A(a,n,o,e),s=M(B(i,o||k(r)),r),l=R(a,n);$[l](a,n,s,e.transforms,!0)}})}function K(e,t){return v(w(e.map(function(e){return t.map(function(t){return function(e,t){var n=R(e.target,t.name);if(n){var i=J(t,e),a=i[i.length-1];return{type:n,property:t.name,animatable:e,tweens:i,duration:a.end,delay:i[0].delay,endDelay:a.endDelay}}}(e,t)})})),function(e){return!d.und(e)})}function X(e,t){var n=e.length,i=function(e){return e.timelineOffset?e.timelineOffset:0},a={};return a.duration=n?Math.max.apply(Math,e.map(function(e){return i(e)+e.duration})):t.duration,a.delay=n?Math.min.apply(Math,e.map(function(e){return i(e)+e.delay})):t.delay,a.endDelay=n?a.duration-Math.max.apply(Math,e.map(function(e){return i(e)+e.duration-e.endDelay})):t.endDelay,a}var Z=0;var ee,te=[],ne=[],ie=function(){function e(){ee=requestAnimationFrame(t)}function t(t){var n=te.length;if(n){for(var i=0;i<n;){var a=te[i];if(a.paused){var o=te.indexOf(a);o>-1&&(te.splice(o,1),n=te.length)}else a.tick(t);i++}e()}else ee=cancelAnimationFrame(ee)}return e}();function ae(e){void 0===e&&(e={});var t,n=0,o=0,r=0,l=0,c=null;function d(e){var t=window.Promise&&new Promise(function(e){return c=e});return e.finished=t,t}var u=function(e){var t=O(i,e),n=O(a,e),o=q(n,e),r=W(e.targets),s=K(r,o),l=X(s,n),c=Z;return Z++,S(t,{id:c,children:[],animatables:r,animations:s,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}(e);d(u);function p(){var e=u.direction;"alternate"!==e&&(u.direction="normal"!==e?"normal":"reverse"),u.reversed=!u.reversed,t.forEach(function(e){return e.reversed=u.reversed})}function m(e){return u.reversed?u.duration-e:e}function h(){n=0,o=m(u.currentTime)*(1/ae.speed)}function g(e,t){t&&t.seek(e-t.timelineOffset)}function b(e){for(var t=0,n=u.animations,i=n.length;t<i;){var a=n[t],o=a.animatable,r=a.tweens,l=r.length-1,c=r[l];l&&(c=v(r,function(t){return e<t.end})[0]||c);for(var d=s(e-c.start-c.delay,0,c.duration)/c.duration,p=isNaN(d)?1:c.easing(d),m=c.to.strings,h=c.round,g=[],b=c.to.numbers.length,f=void 0,y=0;y<b;y++){var w=void 0,E=c.to.numbers[y],_=c.from.numbers[y]||0;w=c.isPath?H(c.value,p*E):_+p*(E-_),h&&(c.isColor&&y>2||(w=Math.round(w*h)/h)),g.push(w)}var C=m.length;if(C){f=m[0];for(var O=0;O<C;O++){m[O];var S=m[O+1],x=g[O];isNaN(x)||(f+=S?x+S:x+" ")}}else f=g[0];$[a.type](o.target,a.property,f,o.transforms),a.currentValue=f,t++}}function f(e){u[e]&&!u.passThrough&&u[e](u)}function y(e){var i=u.duration,a=u.delay,h=i-u.endDelay,y=m(e);u.progress=s(y/i*100,0,100),u.reversePlayback=y<u.currentTime,t&&function(e){if(u.reversePlayback)for(var n=l;n--;)g(e,t[n]);else for(var i=0;i<l;i++)g(e,t[i])}(y),!u.began&&u.currentTime>0&&(u.began=!0,f("begin"),f("loopBegin")),y<=a&&0!==u.currentTime&&b(0),(y>=h&&u.currentTime!==i||!i)&&b(i),y>a&&y<h?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,f("changeBegin")),f("change"),b(y)):u.changeBegan&&(u.changeCompleted=!0,u.changeBegan=!1,f("changeComplete")),u.currentTime=s(y,0,i),u.began&&f("update"),e>=i&&(o=0,u.remaining&&!0!==u.remaining&&u.remaining--,u.remaining?(n=r,f("loopComplete"),f("loopBegin"),"alternate"===u.direction&&p()):(u.paused=!0,u.completed||(u.completed=!0,f("loopComplete"),f("complete"),!u.passThrough&&"Promise"in window&&(c(),d(u)))))}return u.reset=function(){var e=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed="reverse"===e,u.remaining=u.loop,t=u.children;for(var n=l=t.length;n--;)u.children[n].reset();(u.reversed&&!0!==u.loop||"alternate"===e&&1===u.loop)&&u.remaining++,b(0)},u.set=function(e,t){return Q(e,t),u},u.tick=function(e){r=e,n||(n=r),y((r+(o-n))*ae.speed)},u.seek=function(e){y(m(e))},u.pause=function(){u.paused=!0,h()},u.play=function(){u.paused&&(u.completed&&u.reset(),u.paused=!1,te.push(u),h(),ee||ie())},u.reverse=function(){p(),h()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function oe(e,t){for(var n=t.length;n--;)_(e,t[n].animatable.target)&&t.splice(n,1)}"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){document.hidden?(te.forEach(function(e){return e.pause()}),ne=te.slice(0),te=[]):ne.forEach(function(e){return e.play()})}),ae.version="3.0.1",ae.speed=1,ae.running=te,ae.remove=function(e){for(var t=G(e),n=te.length;n--;){var i=te[n],a=i.animations,o=i.children;oe(t,a);for(var r=o.length;r--;){var s=o[r],l=s.animations;oe(t,l),l.length||s.children.length||o.splice(r,1)}a.length||o.length||i.pause()}},ae.get=A,ae.set=Q,ae.convertPx=T,ae.path=function(e,t){var n=d.str(e)?y(e)[0]:e,i=t||100;return function(e){return{property:e,el:n,svg:z(n),totalLength:U(n)*(i/100)}}},ae.setDashoffset=function(e){var t=U(e);return e.setAttribute("stroke-dasharray",t),t},ae.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",i=t.easing?f(t.easing):null,a=t.grid,o=t.axis,r=t.from||0,s="first"===r,l="center"===r,c="last"===r,u=d.arr(e),p=u?parseFloat(e[0]):parseFloat(e),m=u?parseFloat(e[1]):0,h=k(u?e[1]:e)||0,g=t.start||0+(u?p:0),b=[],y=0;return function(e,t,d){if(s&&(r=0),l&&(r=(d-1)/2),c&&(r=d-1),!b.length){for(var f=0;f<d;f++){if(a){var v=l?(a[0]-1)/2:r%a[0],w=l?(a[1]-1)/2:Math.floor(r/a[0]),E=v-f%a[0],_=w-Math.floor(f/a[0]),C=Math.sqrt(E*E+_*_);"x"===o&&(C=-E),"y"===o&&(C=-_),b.push(C)}else b.push(Math.abs(r-f));y=Math.max.apply(Math,b)}i&&(b=b.map(function(e){return i(e/y)*y})),"reverse"===n&&(b=b.map(function(e){return o?e<0?-1*e:-e:Math.abs(y-e)}))}return g+(u?(m-p)/y:p)*(Math.round(100*b[t])/100)+h}},ae.timeline=function(e){void 0===e&&(e={});var t=ae(e);return t.duration=0,t.add=function(n,i){var o=te.indexOf(t),r=t.children;function s(e){e.passThrough=!0}o>-1&&te.splice(o,1);for(var l=0;l<r.length;l++)s(r[l]);var c=S(n,O(a,e));c.targets=c.targets||e.targets;var u=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=d.und(i)?u:M(i,u),s(t),t.seek(c.timelineOffset);var p=ae(c);s(p),r.push(p);var m=X(r,e);return t.delay=m.delay,t.endDelay=m.endDelay,t.duration=m.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},ae.easing=f,ae.penner=b,ae.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.a=ae},ieLn:function(e,t,n){n.r(t),n.d(t,"SendButton",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("THGe"),r=n("ksIX"),s=n("Qo1m"),l=n("iEzj");const c=({buttonType:e,handleSendShareFlyoutButtonClick:t})=>{const n="icon"===e,i=n?o.a:r.a;return a.a.createElement(i,Object.assign({},n?{}:{buttonColor:"lightGray",buttonText:s.a._("Send","Text for button to send this pin")},{accessibilityLabel:s.a._("Send","Accessible label for button to send this pin"),handleClick:t,icon:"share"}))};t.default=l.a.makeSendShareButton(c)},io0I:function(e,t,n){function i(e,t){return{type:"SEARCH_BOARD_CREATED",payload:{boardId:e,query:t}}}function a(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function o(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function r(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return r})},ivLw:function(e,t,n){n.d(t,"a",function(){return w});var i=n("GyhR"),a=n.n(i),o=n("Yu3F"),r=n("ckdM"),s=n("AdUJ"),l=n("Qo1m"),c=n("Rs3f"),d=n("dE6y"),u=n.n(d),p=n("OLQZ"),m=n.n(p),h=n("lixz"),g=n("+U6O");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=16,y={contentWrapper:{cursor:"auto"},wrapper:{cursor:"zoom-out",display:"flex",width:"100%"}},v=e=>{e.stopPropagation()},w=({className:e,children:t})=>a.a.createElement("div",{className:e,onClick:v,role:"presentation",style:y.contentWrapper},t);class E extends a.a.PureComponent{constructor(...e){super(...e),b(this,"state",{availableSpaceForBackButtonLabel:!0,backButtonWidth:void 0}),b(this,"onResizeRegistered",!1),b(this,"onScrollRegistered",!1),b(this,"onCloseButtonClick",e=>{e.stopPropagation(),this.closeModal()}),b(this,"onWrapperClick",e=>{e.stopPropagation(),this.closeModal()}),b(this,"onCloseButtonClickDestructurered",({event:e})=>{this.onCloseButtonClick(e)}),b(this,"onLeftButtonClick",({event:e})=>{e.stopPropagation(),this.goToPrevious()}),b(this,"onRightButtonClick",({event:e})=>{e.stopPropagation(),this.goToNext()}),b(this,"getArrowButtonContainerStyle",u()(e=>({position:"fixed",top:"0",marginTop:"50vh",transform:"translate(0, -50%)",[e?"right":"left"]:f}))),b(this,"getWrapperStyle",u()((e=!1,t)=>{const n=Object.assign({},y.wrapper);return t&&(n.backgroundColor=t),e&&(n.minHeight="100vh"),n})),b(this,"saveBackButtonRef",e=>{this.backButtonRef=e,this.backButtonLabelRef&&this.backButtonRef&&this.measureBackButton()}),b(this,"saveBackButtonLabelRef",e=>{this.backButtonLabelRef=e,this.backButtonLabelRef&&this.backButtonRef&&this.measureBackButton()}),b(this,"handleWindowResize",m()(()=>{this.checkBackButtonLabelSizeConstraints()},50)),b(this,"handleWindowScroll",m()(()=>{this.checkBackButtonLabelSizeConstraints()},50)),b(this,"closeModal",()=>{const e=this.props.goBack;Object(h.a)("closefakemodal",13),e&&e()}),b(this,"goToPrevious",()=>{const e=this.props.goToPrevious;e&&e()}),b(this,"goToNext",()=>{const e=this.props.goToNext;e&&e()})}componentDidMount(){this.registerWindowHandlers(this.props)}UNSAFE_componentWillReceiveProps(e){this.registerWindowHandlers(e)}componentWillUnmount(){(this.onResizeRegistered||this.onScrollRegistered)&&(window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("scroll",this.handleWindowScroll))}measureBackButton(){const e=this.props.getAvailableSizeForBackButtonLabel;if(this.backButtonRef&&this.backButtonRef.children&&e){const e=this.backButtonRef.children[0].offsetWidth;this.setState({backButtonWidth:e},()=>{this.checkBackButtonLabelSizeConstraints()})}}checkBackButtonLabelSizeConstraints(){const e=this.state,t=e.backButtonWidth,n=e.availableSpaceForBackButtonLabel;let i=n;if(this.props.getAvailableSizeForBackButtonLabel&&t){(i=t<this.props.getAvailableSizeForBackButtonLabel(this.context))!==n&&this.setState({availableSpaceForBackButtonLabel:i})}}registerWindowHandlers(e){e.backButtonLabel&&e.getAvailableSizeForBackButtonLabel?this.onResizeRegistered&&this.onScrollRegistered||(window.addEventListener("resize",this.handleWindowResize),window.addEventListener("scroll",this.handleWindowScroll),this.onResizeRegistered=!0,this.onScrollRegistered=!0):(this.onResizeRegistered||this.onScrollRegistered)&&(window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("scroll",this.handleWindowScroll),this.onResizeRegistered=!1,this.onScrollRegistered=!1,this.setState({backButtonWidth:void 0,backButtonHeight:void 0,availableSpaceForBackButtonLabel:!0}))}render(){const e=this.props,t=e.backgroundColor,n=e.backButtonMarginTop,i=e.backButtonLabel,s=e.backButtonVisibility,d=e.children,u=e.goBack,p=e.goToPrevious,m=e.goToNext,h=e.closeButtonType,b=e.pageHeightStyle,f=e.nextAndPreviousButtonsVisibility,y=e.showBackButton,v=this.state.availableSpaceForBackButtonLabel;return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{onClose:this.closeModal,goToNext:this.goToNext,goToPrevious:this.goToPrevious}),a.a.createElement("div",{onClick:this.onWrapperClick,style:this.getWrapperStyle("extend"===b,t)},a.a.createElement(g.b,{display:"flex",flex:"grow",direction:"column",minWidth:0,maxWidth:"100%"},d),u&&y&&"button"===s&&"close"===h&&a.a.createElement(r.a,{position:"fixed"},a.a.createElement(g.b,{alignItems:"center",direction:"column",display:"flex",marginRight:4,marginTop:4,position:"fixed",right:!0},a.a.createElement(g.n,{accessibilityLabel:l.a._("Go back","Accessible icon for close button"),icon:"cancel",onClick:this.onCloseButtonClickDestructurered,size:"sm"}))),u&&y&&"button"===s&&"back"===h&&a.a.createElement(r.a,{forwardRef:this.saveBackButtonRef,position:"fixed"},a.a.createElement(g.b,{left:!0,marginLeft:4,marginTop:n||4,padding:1,position:"fixed"},a.a.createElement(o.a,{accessibilityLabel:l.a._("Go back","Accessible icon for close button"),bgColor:"transparent",hoverBgColor:"lightGray",onClick:this.onCloseButtonClick},a.a.createElement(g.b,{"data-test-id":"closeup-back-button",display:"flex",alignItems:"center",justifyContent:"center",padding:1},a.a.createElement(g.b,{padding:1},a.a.createElement(g.m,{icon:"arrow-back",color:"darkGray",inline:!0,accessibilityLabel:"",size:20})),!!i&&v&&a.a.createElement("div",{ref:this.saveBackButtonLabelRef},a.a.createElement(g.b,{padding:1},a.a.createElement(g.J,{bold:!0,color:"darkGray",size:"md"},i))))))),p&&"button"===f&&a.a.createElement("div",{style:this.getArrowButtonContainerStyle(!1)},a.a.createElement(g.n,{accessibilityLabel:l.a._("View previous item","Accessible icon for previous button"),icon:"arrow-back",onClick:this.onLeftButtonClick})),m&&"button"===f&&a.a.createElement("div",{style:this.getArrowButtonContainerStyle(!0)},a.a.createElement(g.n,{accessibilityLabel:l.a._("View next item","Accessible icon for next button"),icon:"arrow-forward",onClick:this.onRightButtonClick}))))}}b(E,"contextType",s.a),b(E,"defaultProps",{closeButtonType:"close",pageHeightStyle:"extend",backButtonVisibility:"button",backButtonMarginTop:0,nextAndPreviousButtonsVisibility:"button",showBackButton:!0}),t.b=E},ix1w:function(e,t,n){},iz36:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("TXWX"),r=n.n(o),s=n("OtLr");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=()=>null;t.a=Object(s.a)(class extends i.Component{constructor(...e){super(...e),l(this,"view",e=>{const t=e.placement_id,n=e.experience_id;this.props.experienceClient.viewExperience(t,n)}),l(this,"complete",e=>{const t=e.placement_id,n=e.experience_id,i=this.props,a=i.experienceClient,o=i.preventRemoval;o?a.completeExperience(t,n,o):a.completeExperience(t,n)}),l(this,"dismiss",e=>{const t=e.placement_id,n=e.experience_id,i=this.props,a=i.experienceClient,o=i.preventRemoval;o?a.dismissExperience(t,n,o):a.dismissExperience(t,n)})}componentDidMount(){if(this.props.disableAutoView)return;const e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}componentDidUpdate(e,t){if(this.props.disableAutoView)return;const n=this.getExperience(e),i=this.getExperience(this.props);i&&this.shouldRenderExperience(i)&&(n&&n.experience_id===i.experience_id||this.view(i))}getExperience(e){return e.experienceClient.experienceForPlacement}shouldRenderExperience(e){if(e){const t=e.type,n=e.experience_id;if(this.props.experienceIds&&this.props.experienceIds.includes(n))return!0;if(!this.props.experienceIds){if(this.props.type&&this.props.type===t)return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0}}return!1}render(){const e=this.props,t=e.children,n=e.disableAutoView,i=this.getExperience(this.props);if(i&&this.shouldRenderExperience(i)&&t){if(r()(t)){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}({},i,{complete:()=>this.complete(i),dismiss:()=>this.dismiss(i)});return n&&(e.view=(()=>this.view(i))),t(e)}return a.a.Children.only(t)}return a.a.createElement(c,null)}})},iz55:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("UHkV"),s=n("4fCo"),l=n("D+W/"),c=n("iUcS"),d=n("Qo1m"),u=n("A7Du"),p=n("Y2BC"),m=n("OUI7"),h=n("CpsV"),g=n("cSL5"),b=n("+U6O"),f=n("9Y9K");function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v({board:e,hovered:t,searchQuery:n}){const i=e.privacy===l.a.BoardPrivacy.SECRET;return a.a.createElement(b.b,{color:t?"lightGray":"white",display:"flex",padding:2,shape:"rounded"},a.a.createElement(b.b,{flex:"grow"},a.a.createElement(b.J,{bold:!0},Object(h.b)(n,e.name))),a.a.createElement(b.b,{display:"flex",flex:"none",direction:"row"},i&&a.a.createElement(r.a,{type:"secret"}),e.is_collaborative&&a.a.createElement(r.a,{type:"group"})))}t.a=Object(f.compose)(Object(o.connect)(function(e){const t=e.advertiser,n=e.viewer;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}}),Object(p.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){y(e,t,n[t])})}return e})({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username},e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{})},{allowStale:!1}))(class extends i.Component{constructor(e,t){super(e,t),y(this,"getSections",()=>{const e=this.state.searchQuery,t=this.props.boardResource.data.all_boards;return e.length>=g.a?[{items:Object(m.a)(t,e)}]:[{items:t}]}),y(this,"createBtnDisabled",()=>{const e=this.props.boardResource.data.all_boards,t=this.state.searchQuery;return e.some(e=>e.name.toLowerCase()===t.toLowerCase())}),y(this,"handleBoardCreate",e=>()=>{const t=this.state.searchQuery;if(!t)return;const n=this.props.onBoardCreate;n?n(t):(0,this.props.dispatch)(Object(c.a)(t,e)).then(e=>{(0,this.props.onBoardChosen)(e)})}),y(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),y(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),y(this,"renderRow",({item:e,hovered:t})=>{const n=this.state.searchQuery;return a.a.createElement(v,{board:e,hovered:t,searchQuery:n})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const e=this.props,t=e.boardResource,n=e.board,i=this.state,o=i.searchQuery,r=i.selectedBoard;let l=d.a._("Select a board","Label for selecting a board in Edit Pin Modal");return n?l=n.name:r&&(l=r.name),a.a.createElement(b.b,null,a.a.createElement(b.F,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!t.isLoaded}),t.data&&a.a.createElement(s.a,null,e=>a.a.createElement(u.a,{dropdownValue:l,onCreate:this.handleBoardCreate(e),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:o,sections:this.getSections(),createBtnDisabled:this.createBtnDisabled()})))}})},"j/DJ":function(e,t,n){n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var i=n("HQ9/"),a=n("wCwf"),o=n("7Iyi");const r=["alphabetical","last_pinned_to","oldest","newest","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,mixPublicSecret:t,username:n})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",username:n,page_size:25,group_by:t?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},l=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),c=e=>r.reduce((t,n)=>{const r=[Object(a.a)("profileBoards",Object(i.c)(e,n))];return[!0,!1].forEach(t=>{r.push(Object(o.f)(s.name,s.options({username:e,boardOrder:n,mixPublicSecret:t})))}),t.concat(r)},[])},jCHc:function(e,t,n){n.d(t,"a",function(){return l});var i=n("GyhR"),a=n.n(i),o=n("+U6O");function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l({children:e,additionalStyles:t={}}){return a.a.createElement(o.b,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:r({pointerEvents:"none"},t)}},e)}},jSHg:function(e,t,n){n.d(t,"a",function(){return i});const i={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},jZbe:function(e,t,n){n.d(t,"a",function(){return o});const i={instant:85,short:250,medium:420,semiLong:500,long:800},a={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",spring:"1, 100, 17, 8"};function o({property:e,duration:t,timingFunction:n,delay:o}){const r=o?` ${o}ms`:"";return`${e} ${"number"==typeof t?`${t}ms`:`${i[t]}ms`} cubic-bezier(${a[n]})${r}`}},jcaw:function(e,t,n){n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return c});var i=n("Qo1m");const a=656,o=464,r=60,s=170,l=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime();return Math.floor(n/1e3)<60?i.a._("now","timestamp for a comment or post that was created within the last minute"):i.a.getHumanizedTimesince(e,{isAbbreviated:!0})},c=e=>{const t=e.first_name||e.full_name||e.username;return t&&t.length>r?t.substring(0,r).trim().concat("..."):t}},jfHI:function(e,t,n){n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n("ePT2");function a({commentId:e,tags:t,text:n}){return a=>(i.a.create("AggregatedCommentResource",{commentId:e,tags:t,text:n}).callUpdate({showError:!1}),a(function(e){return{type:"AGGREGATED_COMMENT_UPDATED",payload:{data:e}}}({id:e,tags:JSON.parse(t),text:n})))}function o({aggregatedCommentId:e,isLikedByMe:t}){return n=>{const a=i.a.create("AggregatedCommentLikeResource",{aggregatedCommentId:e});return t?a.callDelete({showError:!1}):a.callCreate({showError:!1}),n(function(e){return{type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:e}}}({id:e,reaction_by_me:t?0:1}))}}},jnwO:function(e,t,n){n.d(t,"a",function(){return f});var i=n("GyhR"),a=n.n(i),o=n("g9r1"),r=n("Qo1m"),s=n("iJ35"),l=n("T42Z"),c=n("q579"),d=n("2YES"),u=n("k9eC"),p=n("NmcB"),m=n("+U6O");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=l.a;function b({onClick:e,color:t,query:n,display:i,sourceId:o,referringSource:r}){const l=c.a.getQueryStringFromObject(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){h(e,t,n[t])})}return e}({q:n,source_id:o},r?{rs:r}:{}));return a.a.createElement("div",{className:"relatedQueryWrapper"},a.a.createElement("div",{className:"relatedQuery",style:{backgroundColor:t}},a.a.createElement(d.a,null,t=>a.a.createElement(s.b,{className:"relatedQueryContent",internalNewTab:new u.c(t,"eg_web_search_story_new_tab").enabled(),to:`/search/pins/${l?"?"+l:""}`,onClick:e},a.a.createElement(m.J,{align:"left",bold:!0,color:"white",inline:!0,size:"lg",smSize:"sm",mdSize:"md",lgSize:"lg"},i)))))}class f extends i.Component{componentDidMount(){const e=this.props,t=e.type,n=e.viewType,i=e.viewParameter,a=e.id;Object(p.a)(170,{view:n,viewParameter:i,component:200,story_type:t,objectId:a})}render(){const e=this.props,t=e.data,n=e.title,i=e.type,s=e.viewType,l=e.viewParameter,c=e.id,d=e.referringSource;let u=[...g];return a.a.createElement("div",{className:"searchRelatedQueries"},a.a.createElement("div",{className:"relatedQueriesStoryLabel"},a.a.createElement(m.m,{accessibilityLabel:r.a._("search","Accessible label for the related query search icon"),color:"darkGray",icon:"search",inline:!0}),a.a.createElement(m.J,{align:"left",bold:!0,inline:!0,smSize:"xs",mdSize:"sm",lgSize:"md"},Object(o.a)(n))),t.map((e,t)=>{const n=parseInt(e.id.substring(0,8),16),o=(isNaN(n)?t:n)%u.length,r=u[o];u.splice(o,1),0===u.length&&(u=[...g]);return a.a.createElement(b,{color:r,onClick:()=>{Object(p.a)(101,{view:s,viewParameter:l,component:200,selected_query:e.term,story_type:i,objectId:c,result_index:t})},key:e.id,query:e.term,display:e.display,sourceId:c,referringSource:d})}))}}},"jvv/":function(e,t,n){function i(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}n.d(t,"a",function(){return i})},k3nM:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("HW6o"),s=n("Qo1m"),l=n("EQo2"),c=n("+U6O");const d={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},u={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},p={overlay:{__style:{backgroundColor:"#000",opacity:.8}}};function m({backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:i,pinTitle:o,pin:r}){return a.a.createElement(c.o,{alt:o||s.a._("pin image","image of a pin"),naturalHeight:t,naturalWidth:n,src:e},a.a.createElement(c.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:p.overlay}),a.a.createElement(c.b,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%"},a.a.createElement(c.O,{shape:"rounded"},a.a.createElement(c.b,{display:"flex",justifyContent:"center",padding:2},a.a.createElement(c.m,{accessibilityLabel:s.a._("Visit site","Button when pressed goes to pin's website"),color:"white",dangerouslySetSvgPath:u,size:25}),a.a.createElement(c.b,{margin:1}),a.a.createElement(c.J,{bold:!0,color:"white",size:"lg",truncate:!0},s.a._("Visit site","Button when pressed goes to pin's website")))),a.a.createElement(c.b,{margin:3}),a.a.createElement(c.O,{shape:"rounded",onTouch:i},a.a.createElement(c.b,{display:"flex",justifyContent:"center",padding:2},a.a.createElement(c.m,{accessibilityLabel:s.a._("Watch again","Button when pressed restarts the video"),color:"white",dangerouslySetSvgPath:d,size:25}),a.a.createElement(c.b,{margin:1}),a.a.createElement(c.J,{bold:!0,color:"white",size:"lg",truncate:!0},s.a._("Watch again","Button when pressed restarts the video"))))))}var h=n("XHfN"),g=n("zBQm"),b=n("3BJc");function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=Object(o.connect)(void 0,(e,t)=>({setCurrentVideo:t=>e(Object(b.c)(t))}))(function({inAdsDesktopVideoExperiment:e,isAutoplay:t,currentTime:n,lowResOnly:o,highResOnly:r,onLoad:d,onError:u,saved:p,onTimeChange:b,isExperimentalPinRep:y,pin:v,playing:w,setCurrentVideo:E,viewType:_,viewParameter:C}){const O=f(Object(i.useState)(!1),2),S=O[0],x=O[1],k=f(Object(i.useState)(!0),2),I=k[0],P=k[1],T=Object(g.g)(v),j=T&&!v.is_eligible_for_web_closeup,R=y&&T&&v.is_eligible_for_web_closeup,D=!T||j||!y;let L=!w;e&&(L=I,t&&w&&I&&P(!1));const A=(v.images["236x"]||{}).url,M=v.id,B=v.is_promoted,F=Object(i.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),E({pinId:M,isPromoted:B,currentTime:0}),x(!1)},[]),N=Object(i.useCallback)(()=>{x(R)},[R]);if(!v.videos||!v.videos.video_list.V_HLSV4)return null;const U=v.videos.video_list.V_HLSV4||{},z=U.height,H=U.thumbnail,V=U.width,G=U.url,W=v.videos.id,Y=[{type:"video/m3u8",src:G}];return S?a.a.createElement(c.b,null,a.a.createElement(m,{backgroundImage:A,naturalHeight:z,naturalWidth:V,pin:v,onRestartVideo:F})):L?a.a.createElement(c.b,null,a.a.createElement(l.a,{lowResOnly:o,highResOnly:r,onLoad:d,onError:u,pin:v,saved:p})):a.a.createElement(c.b,null,a.a.createElement(h.a,{contextLogData:{component:0,view:_,viewParameter:C,objectId:v.id,video_id:W},accessibilityMaximizeLabel:s.a._("Maximize","Maximize button on video"),accessibilityMinimizeLabel:s.a._("Minimize","Minimize button on video"),accessibilityMuteLabel:s.a._("Mute","Mute button on video"),accessibilityPauseLabel:s.a._("Pause","Pause button on video"),accessibilityPlayLabel:s.a._("Play","Play button on video"),accessibilityUnmuteLabel:s.a._("Unmute","Unmute button on video"),aspectRatio:V/z,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:n||-1},loop:D,onTimeChange:b,playing:w,poster:A||H,src:Y,volume:0,onEnded:N}))});function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w=Object(r.a)(y);t.a=Object(o.connect)((e,t)=>({appInFocus:e.ui.app.appInFocus,isAutoplay:e.ui.app.isAutoplay,videosAutoplaying:e.ui.app.videosAutoplaying}),(e,t)=>({pauseAutoplay:t=>e(Object(b.a)(t)),setCurrentVideo:t=>e(Object(b.c)(t))}))(class extends a.a.Component{constructor(...e){super(...e),v(this,"handleVisibilityChanged",e=>{const t=this.props,n=t.currentTimeFromPinRep,i=t.pin,a=t.setCurrentVideo,o=t.pauseAutoplay,r=t.videosAutoplaying,s=i.id,l=i.is_promoted,c=Object(g.c)(s,r),d=Object(g.j)(s,r),u=Object(g.a)(s,r);e?l?a({pinId:s,isPromoted:l,currentTime:c||n||this.currentVideoCurrentTime}):u&&a({pinId:s,isPromoted:l,currentTime:c||n||this.currentVideoCurrentTime}):!e&&d&&o({pinId:s,isPromoted:l,currentTime:n||this.currentVideoCurrentTime})}),v(this,"handleVideoTimeChange",e=>{const t=this.props,n=t.pin,i=t.onTimeChange,a=t.videosAutoplaying,o=n.id;Object(g.j)(o,a)&&(this.currentVideoCurrentTime=e.time),i&&i(e)})}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){const t=e.appInFocus,n=this.props,i=n.appInFocus,a=n.currentTimeFromPinRep,o=n.pauseAutoplay,r=n.pin,s=n.setCurrentVideo,l=n.videosAutoplaying,c=r.id,d=r.is_promoted,u=Object(g.j)(c,l),p=Object(g.c)(c,l);i!==t&&!i&&u?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:c,isPromoted:d,currentTime:a||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&i&&(this.pausedDueToBrowserOutOfFocus=!1,s({pinId:c,isPromoted:d,currentTime:p||a||this.currentVideoCurrentTime}))}componentWillUnmount(){const e=this.props,t=e.currentTimeFromPinRep,n=e.pauseAutoplay,i=e.pin,a=e.videosAutoplaying,o=i.id,r=i.is_promoted;Object(g.j)(o,a)&&n({pinId:o,isPromoted:r,currentTime:t||this.currentVideoCurrentTime})}render(){const e=this.props,t=e.isAutoplay,n=e.pin,i=e.videosAutoplaying,o=e.viewParameter,r=e.viewType,s=e.highResOnly,l=e.lowResOnly,c=e.onError,d=e.onLoad,u=e.saved,p=e.inAdsDesktopVideoExperiment,m=e.isExperimentalPinRep,h=n.id,b=Object(g.c)(h,i),f=Object(g.j)(h,i)&&t;return a.a.createElement(w,{currentTime:b,inAdsDesktopVideoExperiment:p,isAutoplay:t,viewParameter:o,viewType:r,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:n,playing:f,trackFullVisible:!1,highResOnly:s,lowResOnly:l,onError:c,onLoad:d,saved:u,isExperimentalPinRep:m})}})},"k4/I":function(e,t,n){n.d(t,"a",function(){return r});var i=n("GyhR"),a=n("Qo1m"),o=n("+U6O");function r({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:r,isManagedView:s}){return i.createElement(o.b,null,i.createElement(o.i,null),i.createElement(o.b,{md:{display:"flex"},justifyContent:"between",paddingX:s?0:4,paddingY:s?6:3},!s&&i.createElement(o.b,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(o.J,{size:"sm"},a.a._("Comment and Photo Permissions"))),i.createElement(o.b,{xs:{column:12},md:{column:s?12:8}},i.createElement(o.b,{paddingY:1,display:"flex",alignItems:"center"},i.createElement(o.H,{onChange:t,id:"CommentSwitch",switched:!e}),i.createElement(o.b,{paddingX:2},i.createElement(o.p,{htmlFor:"CommentSwitch"},i.createElement(o.J,{size:"sm"},a.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form"))))),i.createElement(o.b,{paddingY:1,alignItems:"center",display:"flex"},i.createElement(o.H,{onChange:n,id:"PhotoSwitch",switched:!r}),i.createElement(o.b,{paddingX:2},i.createElement(o.p,{htmlFor:"PhotoSwitch"},i.createElement(o.J,{size:"sm"},a.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form"))))))))}},kIql:function(e,t,n){var i=n("Ivf5");t.a=Object(i.connect)(({viewer:e})=>({viewer:e}))},kQRf:function(e,t,n){n.d(t,"a",function(){return l});var i=n("POeB"),a=n("Qo1m");const o=2171,r=2172,s=2173;function l(e){i.default.showError(function(e){switch(e.api_error_code){case o:case r:case s:return a.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}},kQjJ:function(e,t,n){t.a=function(e){return function(t){return null!=t?e(t):null}}},kR61:function(e,t,n){n.d(t,"c",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n("Evf7"),a=n.n(i);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=e=>!!e&&(e.shopping_flags||[]).includes(2),s=e=>{const t=a()(e,"link_domain.official_user.full_name");if(t)return t;const n=a()(e,"rich_summary.site_name");if(n)return n;if(e.domain){if("Uploaded by user"===e.domain){return((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name}return e.domain}const i=a()(e,"via_pinner.full_name");return e.is_repin&&i?i:void 0},l=(e,t={})=>{if(e){const n=e.shopping_flags||[],i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({},t.commerce_data);n.includes(2)&&(i.pin_is_shop_the_look=!0),n.includes(1)&&(i.is_available=!0),n.includes(5)&&(i.is_product_pin_v2=!0),n.includes(6)&&(i.is_rich_product_pin=!0);const a=JSON.stringify(i);if("{}"!==a)return{commerce_data:a}}return null}},kp2G:function(e,t,n){n.d(t,"a",function(){return h});var i=n("GyhR"),a=n.n(i),o=n("LtUt"),r=n.n(o),s=n("iJ35"),l=n("1CZf"),c=n.n(l),d=n("q579");const u=new r.a;u.tlds(c.a),u.add("#",{validate(e,t,n){const i=e.slice(t);return n.re.hashtag||(n.re.hashtag=new RegExp("^([a-zA-Z0-9_]){1,15}(?!_)(?=$|"+n.re.src_ZPCc+")")),n.re.hashtag.test(i)?!(t>=2&&"#"===i[t-2])&&i.match(n.re.hashtag)[0].length:0},normalize(e){e.url=`https://pinterest.com/search/pins/?q=${encodeURIComponent(e.text)}&rs=hashtag_pinrep`}});const p=e=>u.match(e),m=(e,t,n,i)=>a.a.createElement(s.b,{to:e,stopPropagation:!0,target:!i,key:n},t);class h extends i.PureComponent{parseString(e){if(""===e)return e;const t=p(e);if(!t)return e;const n=[];let i=0;return t.forEach((t,a)=>{t.index>i&&n.push(e.substring(i,t.index));let o=t.url;const r=d.a.isTrustedOrigin(t.url)&&!t.url.match(/help.pinterest/g);if(r){const e=d.a.parse(t.url);o=o.replace(e.origin,"")}const s=t.text,l=m(o,s,a,r);n.push(l),i=t.lastIndex}),e.length>i&&n.push(e.substring(i)),1===n.length?n[0]:n}parse(e,t=0){return"string"==typeof e?this.parseString(e):a.a.isValidElement(e)&&"a"!==e.type&&"button"!==e.type?a.a.cloneElement(e,{key:t},this.parse(e.props.children)):Array.isArray(e)?e.map((e,t)=>this.parse(e,t)):e}render(){return a.a.createElement("span",null,this.parse(this.props.children))}}},kro2:function(e,t,n){n.d(t,"b",function(){return x}),n.d(t,"a",function(){return k});var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("A5yW"),s=n("Qo1m"),l=n("OLQZ"),c=n.n(l),d=n("Y2BC"),u=n("9Y9K"),p=n("NmcB"),m=n("JsRk"),h=n("kIql"),g=n("NoZx"),b=n("eB/M"),f=n("v7Si"),y=n("+U6O");const v=200,w=100,E=2;class _ extends a.a.PureComponent{constructor(...e){var t,n,i;super(...e),t=this,n="handleScroll",i=c()(()=>{const e=this.props.feedResource,t=e.fetchMore,n=e.isFetching,i=e.isAtEnd;if(n||i)return;const a=Object(f.a)(window);Object(f.c)(window)-Object(f.e)()-v<a&&t()},w),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const e=this.props,t=e.listObjectsType,n=e.parentObject;n.type!==g.a.BOARD&&n.type!==g.a.BOARD_ACTIVITY||window.addEventListener("scroll",this.handleScroll),t===g.a.BOARD_ACTIVITY&&Object(p.a)(13,{view:5,viewParameter:3179,objectId:this.props.board&&this.props.board.id})}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll)}get isNestedReply(){const e=this.props.parentObject;return e&&e.depth===E}get shouldFlip(){const e=this.props,t=e.listObjectsType,n=e.parentObject;return t===g.a.BOARD_ACTIVITY_COMMENT&&n.type===g.a.BOARD_ACTIVITY_COMMENT}render(){const e=this.props,t=e.board,n=e.commentCount,i=void 0===n?null:n,o=e.feedItems,l=e.feedResource,c=l.isFetching,d=l.isLoaded,u=e.parentObject,p=e.showReplies,m=e.viewType,h=o,g=(null===i||i>0)&&(!d||c);return a.a.createElement(y.b,{width:"100%"},h&&h.length>0&&a.a.createElement(y.b,null,h.map((e,n)=>a.a.createElement(y.b,{key:`activityItem-${e.id}`},a.a.createElement(r.a,{activityId:e.id,activityType:e.type,board:t,isLast:n===h.length-1,key:`activityItem-${e.id}`,parentObject:u,showReplies:p,viewType:m})))),a.a.createElement(y.F,{accessibilityLabel:s.a._("Loading","Loading posts and comments"),show:g}))}}const C=[],O=e=>Object(u.compose)(h.a,m.withRouter)(e),S=e=>e.reduce((e,t)=>e.concat("boardactivity"===t.type||"boardactivitycomment"===t.type?[t]:[]),[]),x=Object(u.compose)(Object(o.connect)((e,t)=>{const n=e.feeds[b.a.BOARD_ACTIVITYITEMS],i=(void 0===n?{}:n)[t.parentObject.id];return{feedItems:S(i||C),feedItemsInvalidated:null===i}}),Object(d.b)({name:"BoardActivityFeedResource",key:"feedResource",options:e=>({board_id:e.parentObject.id,redux_normalize_feed:!0})},{allowStale:!1}),O)(_),k=Object(u.compose)(Object(o.connect)((e,t)=>{const n=e.feeds[b.a.BOARD_ACTIVITYCOMMENTS],i=(void 0===n?{}:n)[t.parentObject.id];return{feedItems:S(i||C),feedItemsInvalidated:null===i}}),Object(d.b)({name:"BoardActivityCommentFeedResource",key:"feedResource",options:e=>({activityId:e.parentObject.id,parentType:e.parentObject.type,redux_normalize_feed:!0})},{allowStale:!1}),O)(_)},ksIX:function(e,t,n){n.d(t,"a",function(){return h});var i=n("GyhR"),a=n.n(i),o=n("CtGn"),r=n("+U6O");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c="rgb(226, 226, 226)",d="rgb(218, 218, 218)",u="rgb(216,0,33)",p="rgb(207,0,31)",m={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};function h({accessibilityLabel:e,buttonColor:t,buttonText:n,handleClick:i,icon:l}){return a.a.createElement(o.a,null,({active:o,focused:h,hovered:g,onBlur:b,onFocus:f,onMouseDown:y,onMouseEnter:v,onMouseLeave:w,onMouseUp:E})=>{let _={borderRadius:8};if(g){_=s({},_,{backgroundColor:"red"===t?u:c})}if(o){_=s({},_,{backgroundColor:"red"===t?p:d})}return h&&(_=s({},_,m)),a.a.createElement("button",{"aria-label":e,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"},onBlur:b,onFocus:f,onMouseDown:y,onMouseEnter:v,onMouseLeave:w,onMouseUp:E,onClick:i},a.a.createElement(r.b,{color:t,shape:"rounded",dangerouslySetInlineStyle:{__style:_}},a.a.createElement(r.b,{display:"flex",dangerouslySetInlineStyle:{__style:{minHeight:40,padding:"10px 14px"}}},"share"===l&&a.a.createElement(r.b,null,a.a.createElement(r.m,{accessibilityLabel:"",icon:"share",color:"darkGray",size:18}),a.a.createElement(r.b,{paddingX:3})),a.a.createElement(r.J,{bold:!0,align:"center",color:"red"===t?"white":"darkGray"},n))))})}},l7ju:function(e,t,n){var i=n("kQjJ");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=Object(i.a)(e=>e.pin&&e.pin.id?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e}({},e,{id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}):null);t.a=o},lglE:function(e,t,n){function i(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}n.d(t,"a",function(){return i})},m2OL:function(e,t,n){var i=n("ptua"),a=n("rUah"),o=n("zBQm");t.a=(({pin:e,viewParameter:t,viewType:n})=>{const r=e.id,s=e.videos,l=Object(o.f)(e),c=Object(o.g)(e);let d;if(Object(o.i)(s)&&s){const e=s.video_list,t=e[Object.keys(e)[0]];d=t&&t.duration}return()=>{i.a.instance.dispatch(Object(a.b)({id:r,isProduct:l,isPromoted:c,videoDuration:d,viewParameter:t,viewType:n,type:"pin"}))}})},mBmT:function(e,t,n){t.a=[{url:"https://i.pinimg.com/236x/b3/41/6e/b3416e2688aa4d20f846aeb8127e6b3b.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/23/ad/5f/23ad5fc40270120b22bea471fe3656aa.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/83/39/1e/83391e3103e17a46e2733b09bf154a06.jpg",width:236,height:156},{url:"https://i.pinimg.com/236x/87/f7/b5/87f7b55bc3de78ef95fd36fa3a237172.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/d3/49/07/d34907c96950574c15719219e0f0dd69.jpg",width:236,height:295},{url:"https://i.pinimg.com/236x/49/ad/71/49ad71817c829e8d86ca16fa6508b0c4.jpg",width:236,height:314},{url:"https://i.pinimg.com/236x/a8/7f/53/a87f53ea636966bf24cf279ed2fdc4dc.jpg",width:236,height:314},{url:"https://i.pinimg.com/236x/36/67/b4/3667b449f3cacaaeef3f68fc9cf609be.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/9d/4f/43/9d4f43222d4fc694a61f7635f2d42892.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/48/d9/f0/48d9f0a63ac5c08b1cf2608ceb4a884f.jpg",width:236,height:419},{url:"https://i.pinimg.com/236x/3e/08/94/3e0894b99543507463864c64c6b3af49.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/4b/a4/97/4ba49798105ddfc0bfd11a980f18590f.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/b9/e9/8f/b9e98fe7ff81c026b488997900eb25fa.jpg",width:236,height:314},{url:"https://i.pinimg.com/236x/96/e0/4a/96e04ac53becd9f522988fc27343ac6e.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/5a/f5/9e/5af59e46be8a92abd880031be67ce4cc.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/71/f2/e6/71f2e6a1a13223864dd833bc128f8e2f.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/db/b2/09/dbb2099909d25dd45d3df4950429312d.jpg",width:236,height:309},{url:"https://i.pinimg.com/236x/d7/f9/b0/d7f9b0f7dc0536e923026e6af91c61d5.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/4b/6e/36/4b6e36884909d421e250050db82d013b.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/0b/85/ca/0b85ca13cbf16fa3017164b9c4b65923.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/28/d9/35/28d935a8f25905a6989709b21241e4d2.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/94/e5/fb/94e5fb084bb73b1237a73fc83eb07b45.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/ec/c7/66/ecc766782029713523ae6a5bd8544045.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/1a/c5/72/1ac572b1643cf518ef06139eca46dd1d.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/d1/8f/f9/d18ff9eaec83c75b878eebb899604b8e.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/b3/41/6e/b3416e2688aa4d20f846aeb8127e6b3b.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/23/ad/5f/23ad5fc40270120b22bea471fe3656aa.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/8f/e5/32/8fe532eea42b7c8b14947a2ced8b127d.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/29/6d/a2/296da26a335fd7079e6355225c051cf3.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/cd/53/e3/cd53e3b9ad897d5c5588094f446cbc2a.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/18/54/21/1854212e113994080084b4666b23fcc5.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/cf/0c/45/cf0c451732bb352b3c96d1951ea632dd.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/d0/e9/ee/d0e9ee92a6398e6b31b1515c2ec6ab5e.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/8d/8c/86/8d8c86e41d810497a7b60c5a0e58a95f.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/57/0c/d6/570cd6ac36a208808edabf74682cca8d.jpg",width:236,height:314},{url:"https://i.pinimg.com/236x/bd/57/32/bd5732c8291d05e8982662a1ee043411.jpg",width:236,height:188},{url:"https://i.pinimg.com/236x/1b/10/5e/1b105ea0da81722178e23c5438fb68d7.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/ee/2d/d3/ee2dd31a93246fb72490c012b16eefca.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/81/8a/ca/818aca5d5303c60bff125a5acc322fc0.jpg",width:236,height:295},{url:"https://i.pinimg.com/236x/c6/bc/64/c6bc64acbaab2cca4f9166539ff36621.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/d7/38/27/d73827a583f46fbeaf282acc001eb733.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/2a/02/05/2a0205019cb0cb1ea0baa9b95eb78ab8.jpg",width:236,height:256},{url:"https://i.pinimg.com/236x/60/81/65/60816514dcfcbcab0df772dc78ca8ed1.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/0d/2f/fb/0d2ffbcdcc414765ef441752b423a6ad.jpg",width:236,height:353},{url:"https://i.pinimg.com/236x/d0/97/0b/d0970b1c57a50afa4d6951d8b0657715.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/7d/c5/99/7dc599bce4115d38ee5b91dcd8769543.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/70/0e/56/700e56a3bccb989ab88819ade445e86e.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/ff/73/ab/ff73ab3256bbcf8abce0febb98939e4f.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/e7/1b/ba/e71bbaca118e1ae09f01bcc45b58229f.jpg",width:236,height:185},{url:"https://i.pinimg.com/236x/37/af/bf/37afbf3c16baf0f70dc083b6c6ffecec.jpg",width:236,height:298},{url:"https://i.pinimg.com/236x/64/9d/1b/649d1b77d8b28995b2902b89001f912c.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/8f/e5/32/8fe532eea42b7c8b14947a2ced8b127d.jpg",width:236,height:354},{url:"https://i.pinimg.com/236x/fc/5f/44/fc5f44cd50535f378b1e09d11433c1a8.jpg",width:236,height:330},{url:"https://i.pinimg.com/236x/21/af/78/21af78021ad083377aa3e36ae6f09fc2.jpg",width:236,height:314},{url:"https://i.pinimg.com/236x/06/41/9c/06419c4e4165596f77d721d88665e4e7.jpg",width:236,height:157},{url:"https://i.pinimg.com/236x/2a/9e/80/2a9e80b4714ac32943ddec01399b5387.jpg",width:236,height:156},{url:"https://i.pinimg.com/236x/fc/5f/44/fc5f44cd50535f378b1e09d11433c1a8.jpg",width:236,height:330}]},mbJu:function(e,t,n){n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var i=n("jvv/"),a=n("eB/M");function o(e){return{type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:e}}}function r({aggregatedCommentId:e,parentId:t}){return n=>{n(o(e)),n(Object(i.a)({feedId:t,feedType:a.a.AGGREGATED_COMMENTS,itemIds:[e],itemType:"aggregatedcomment"}))}}},mcMS:function(e,t,n){function i({m:e=0,h:t=0}){let n;return{m:e,h:t,rm:t>0?0:e,rh:n=t<=0?t:e>45?t+1:e>15?t+.5:t}}function a(e){const t=Math.floor(e/3600);return i({m:Math.floor(e%3600/60),h:t})}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},mnfC:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=(n("YvLn"),n("PNko")),r=n.n(o),s=n("Qo1m"),l=n("iJ35"),c=n("+U6O");const d={color:"white",size:"xl"},u=950;t.a=class extends a.a.Component{constructor(...e){var t,n,i;super(...e),i={showBoardName:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.timer=setTimeout(()=>{this.setState({showBoardName:!0})},u)}componentWillUnmount(){clearTimeout(this.timer)}render(){const e=this.state.showBoardName,t=this.props,n=t.isNewlySaved,i=t.name,o=t.url;let u,p;if(n&&!e)u=a.a.createElement(c.J,d,s.a._("Saved!","Indication that a pin has been saved"));else{const e=a.a.createElement(c.J,Object.assign({},d,{bold:!0,truncate:!0}),i);u=o?a.a.createElement(l.b,{to:o},e):e}return n&&(p=e?"board":"saved"),a.a.createElement("div",{"data-test-id":"savedInfo",className:r()("SavedAnimation",p)},u)}}},mwLX:function(e,t,n){n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o});const i=40,a={BOARD:"board",BOARD_ACTIVITY:"boardactivity",BOARD_ACTIVITY_COMMENT:"boardactivitycomment",DID_IT:"userdiditdata",INTEREST:"interest",PIN:"pin",SEARCH:"news_hub_search",STORY:"story",USER:"user"},o=3},mzhd:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("UmN8"),r=n("Ivf5"),s=n("XwKk");function l(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}var c=n("CwDa"),d=n("E/Qu"),u=n("iJ35"),p=n("s3m5"),m=n("jSHg"),h=n("+U6O");const g={overlay:{__style:{backgroundColor:"#000",opacity:.4}}};function b(e){const t=e.pin,n=t.id,i=t.images,o=t.title,r=t.videos,s=t.video_status_message||{},l=i&&i["236x"],c=(r&&r.video_list[m.a.V_HLSV4]||{}).duration;return a.a.createElement(a.a.Fragment,null,a.a.createElement(h.d,null,a.a.createElement(u.b,{to:`/pin/${n}`},a.a.createElement(h.b,{overflow:"hidden",position:"relative",shape:"rounded"},l&&a.a.createElement(h.o,{alt:o||"",color:"lightGray",naturalHeight:l.height,naturalWidth:l.width,src:l.url}),!!c&&a.a.createElement(h.b,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},a.a.createElement(p.a,{duration:c})),a.a.createElement(h.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:g.overlay}),a.a.createElement(h.b,{position:"absolute",top:!0,left:!0,padding:5,width:"100%"},a.a.createElement(h.J,{bold:!0,color:"white",size:"xl",overflow:"normal"},s.title),a.a.createElement(h.b,{marginTop:4},a.a.createElement(h.J,{color:"white",size:"sm",overflow:"normal"},s.subtitle)))),a.a.createElement(h.b,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1},a.a.createElement(h.b,{flex:"grow"},o&&a.a.createElement(h.b,{paddingY:1},a.a.createElement(h.J,{bold:!0,inline:!0,size:"sm"},o)))))))}var f=n("kR61"),y=n("zBQm"),v=n("6wLB");function w({inChangeTitlesExp:e,isGroupBoard:t,pin:n,surface:i}){const a=n.buyable_product,o=n.carousel_data,r=n.grid_title,s=n.rich_summary,l=n.title;if(e)return r||"";const c=s&&"mobile application"!==s.type_name&&s.display_name,d=a&&a.title;if(Object(v.a)(n).isOwnPin&&!t&&!o&&"UserProfilePinGrid"!==i)return"";if(o){const e=o.carousel_slots,t=void 0===e?[]:e,n=o.index;if(t[n]&&t[n].title)return t[n].title.trim()}return l||c||d||r||""}const E={BaseBoardPinGrid:"boardPinView",UserProfilePinGrid:"profilePinView"};var _=n("rSK6"),C=n("Qo1m"),O=n("Irlq");function S(e){return a.a.createElement("div",{style:{pointerEvents:"auto"}},e)}var x=n("fifU"),k=n("yJaP"),I=n("q579");var P=n("/mke"),T=n("b7z0"),j=n("IaXd");function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){D(e,t,n[t])})}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const A={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"18px",height:"32px",maxWidth:"132px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},containerTruncated:{maxWidth:"87px"},text:{color:"#333333"}};var M=function(e){const t=e.pin,n=e.url,o=e.sourceLinkStyle,r=L(Object(i.useState)(!1),2),s=r[0],l=r[1],c=t.id,d=function(e,t){const n=e.domain,i=e.carousel_data;let a=n||"";if(i){const e=t||i.index||0,n=i.carousel_slots,o=void 0===n?[]:n,r=o[e]&&o[e].link||"";a=r&&I.a.parse(r).hostname}return a.replace("www.","")}(t),p=Object(k.b)().slotIndex,m=Object(j.a)(12,{grid_index:p,objectId:c}),g=Object(j.a)(101,{element:162,objectId:c});return"icon-only"===o?a.a.createElement(u.b,{onClick:()=>{m(),g()},pinId:c,to:n},a.a.createElement(P.a,{accessibilityLabel:C.a._("link","Website url link"),bgColor:"white",icon:"arrow-up-right",iconColor:"darkGray",iconSize:12,size:"sm"})):a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:R({},A.container,s?A.containerHovered:{},"truncated-text"===o?A.containerTruncated:{})},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),position:"relative"},a.a.createElement(u.b,{onClick:()=>{m(),g()},pinId:c,to:n},a.a.createElement(h.b,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:A.text},display:"flex",justifyContent:"between"},a.a.createElement(h.b,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3},a.a.createElement(h.m,{accessibilityLabel:C.a._("link","Website url link"),color:"darkGray",icon:"arrow-up-right",size:9})),a.a.createElement(h.b,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden"},a.a.createElement(T.b,{color:"darkGray",size:"sm",weight:"semibold",truncate:!0},d)))))};const B=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"24KF"))),F=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"qE0g"))),N=Object(i.lazy)(()=>n.e("PinRepSendShareLinkButtonCommon").then(n.bind(null,"hm37")));var U=Object(i.memo)(function({feedbackData:e,feedbackType:t,onToggleFlyout:n,onToggleModal:i,pin:o,pinTitle:r,setForcePrimary:s,showEditButton:l,showOverflowMenu:c,showShareButton:d,sourceLinkStyle:u,useDenseGroupBoardLayout:p}){const m=Object(k.b)(),g=m.viewParameter,b=m.viewType,f=o.carousel_data,y=o.id,v=o.tracked_link,w=o.link,E=v||w||"",_=!!E&&S(a.a.createElement(M,{pin:o,url:E,sourceLinkStyle:u})),C=d&&a.a.createElement(x.a,null,S(a.a.createElement(N,{pin:o,setForcePrimary:s}))),O=l&&a.a.createElement(x.a,null,S(a.a.createElement(B,{carouselSlotCurrentIndex:f&&f.index,component:0,onToggleModal:n,pinId:y,style:{size:"sm"},view:b,viewParameter:g,useLegoStyles:!0})));return p?a.a.createElement(h.b,{display:"flex",justifyContent:"between",alignItems:"center",padding:3},a.a.createElement("div",{style:{flexBasis:32}},_),C,O):a.a.createElement(h.b,{alignItems:"center",display:"flex",padding:3},a.a.createElement(h.b,{flex:"shrink"},_),a.a.createElement(h.b,{alignItems:"center",display:"flex",flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}}},a.a.createElement(h.b,{paddingX:c||l?2:0},C),c&&a.a.createElement(x.a,null,S(a.a.createElement(F,{feedbackData:e,feedbackType:t,pin:o,pinTitle:r,setForcePrimary:s}))),O))}),z=n("oko/"),H=n("NmcB");var V=Object(r.connect)(null,function(e){return{changeCarouselSlotIndex:(t,n)=>e(Object(z.a)(t,n))}})(({pin:e,changeCarouselSlotIndex:t})=>{const n=Object(k.b)(),i=n.componentType,o=n.viewParameter,r=n.viewType,s=e.id,l=void 0===s?"":s,c=e.carousel_data;if(!c)return null;const d=c.carousel_slots,u=c.index,p=c.id,m=(e,t)=>{Object(H.a)(108,{objectId:l,component:i,view:r,viewParameter:o,eventData:{pinCarouselSlotEventData:{carouselSlotId:d[e]&&Number(d[e].id),carouselDataId:Number(p),carouselSlotIndex:e,toCarouselSlotIndex:t}}})};return a.a.createElement(h.b,{height:"100%",width:"100%",position:"relative"},u>0&&S(a.a.createElement(h.b,{position:"absolute",left:!0,bottom:!0,top:!0},a.a.createElement(h.O,{fullWidth:!0,fullHeight:!0,onTouch:()=>{t(l,u-1),m(u,u-1)}},a.a.createElement(h.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center","data-test-id":"carousel-slider-left",padding:2},a.a.createElement(h.m,{color:"white",icon:"arrow-back",accessibilityLabel:C.a._("View Previous","Button to advance carousel to the previous image")}))))),u<d.length-1&&S(a.a.createElement(h.b,{position:"absolute",right:!0,bottom:!0,top:!0},a.a.createElement(h.O,{fullWidth:!0,fullHeight:!0,onTouch:()=>{t(l,u+1),m(u,u+1)}},a.a.createElement(h.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center","data-test-id":"carousel-slider-right",padding:2},a.a.createElement(h.m,{color:"white",icon:"arrow-forward",accessibilityLabel:C.a._("View Next","Button to advance carousel to the next image")}))))))});const G=32;function W({avatarUrl:e,attributionNameLink:t,name:n=""}){const i=a.a.createElement(h.b,{height:`${G}px`,width:`${G}px`},a.a.createElement(h.a,{name:n,src:e}));return t?a.a.createElement(u.b,{className:"underlineLink",to:t},i):i}function Y({attributionNameLink:e,name:t,regularWeight:n}){const i=a.a.createElement(T.b,{size:"sm",truncate:!0,weight:n?"normal":"semibold"},t);return a.a.createElement(h.b,null,e?a.a.createElement(u.b,{className:"underlineLink",to:e},i):i)}function q({link:e,title:t}){if(!t)return null;const n=a.a.createElement(h.J,{leading:"short",size:"sm",truncate:!0},t);return a.a.createElement(h.b,null,e?a.a.createElement(u.b,{className:"underlineLink",to:e},n):n)}var J=n("xP02");function $(e){const t=e.board,n=e.pinner,i=void 0===n?{}:n,a=e.promoter;let o="",r="",s="",l="",c="";return Object(v.a)(e).isPromoted&&a?(o=a.image_medium_url||a.image_small_url,s=a.full_name,l=C.a._("Promoted by","indicating the username of the person who promoted the pin"),c=`/${a.username}/`):(o=i.image_medium_url||i.image_small_url,r=`/${i.username}/`,l=i.full_name,c=t?t.url:""),{avatarUrl:o,attributionNameLink:r,attributionTitle:s,name:l,url:c}}var Q=n("VI9K");const K=32;var X=Object(r.connect)(null,function(e){return{setMostRecentPin:t=>{e(Object(Q.b)(t))}}})(function({feedbackData:e,feedbackType:t,isDarkPromoter:n,pin:i,pinTitle:o,setForcePrimary:r,setMostRecentPin:s}){const l=i.id,c=i.pinner,d=Object(v.a)(i).isPromoted,p=c||i.promoter,m=Object(j.a)(101,{element:d?283:27,objectId:l}),g=$(i),b=g.avatarUrl,f=g.attributionNameLink,y=g.attributionTitle,w=g.name,E=g.url,_=Object(k.b)(),C=_.viewParameter,O=_.viewType,S=E&&!f,x=a.a.createElement(h.b,{alignItems:"center",display:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:"-3px",marginRight:"-3px"}}},a.a.createElement(h.b,{flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}}},a.a.createElement(J.a,{avatarSize:K,isDarkPromoter:n,pinId:l,user:p,username:p&&p.username,viewParameter:C,viewType:O},a.a.createElement(W,{attributionNameLink:f,avatarUrl:b,name:w}))),a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},flex:"grow",overflow:"hidden"},a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{marginBottom:"2px"}}},a.a.createElement(Y,{attributionNameLink:f,name:w,regularWeight:!y})),a.a.createElement(q,{title:y})));return S?a.a.createElement(u.b,{className:"underlineLink",onClick:()=>{s(l),m()},to:E},x):x}),Z=n("k9eC"),ee=n("2YES"),te=n("9Y9K");const ne=6,ie=10;var ae=Object(te.compose)(Object(r.connect)(function({pins:e},{pinId:t}){return{carouselData:e[t]&&e[t].carousel_data}},function(e){return{changeCarouselSlotIndex:(t,n)=>e(Object(z.a)(t,n))}}),ee.e)(function({carouselData:e,changeCarouselSlotIndex:t,pinId:n,requestContext:i}){const o=Object(k.b)(),r=o.componentType,s=o.viewParameter,l=o.viewType,c=e||{},d=c.carousel_slots,u=void 0===d?[]:d,p=c.id,m=c.index,g=new Z.c(i,"web_carousel_pip_improvements").enabled();i.experiments.flush();const b=g?ie:ne,f=e=>({event:i})=>{i.preventDefault(),i.stopPropagation(),void 0!==t&&(t(n,e),Object(H.a)(108,{component:r,eventData:{pinCarouselSlotEventData:{carouselDataId:Number(p),carouselSlotId:u[m]&&Number(u[m].id),carouselSlotIndex:m,toCarouselSlotIndex:e}},objectId:n,view:l,viewParameter:s}))};return a.a.createElement(h.b,{display:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:-3,marginRight:-3}}},u.map((e,t)=>a.a.createElement(h.b,{key:n+t,dangerouslySetInlineStyle:{__style:{marginLeft:3,marginRight:3}}},a.a.createElement(h.O,{fullWidth:!1,shape:"circle",onTouch:f(t)},a.a.createElement(h.b,{"data-test-id":"ellipsis-size",height:b,width:b,dangerouslySetInlineStyle:{__style:{backgroundColor:t===m?"#555":"lightGray"}},shape:"circle"})))))}),oe=n("buVl"),re=n("lixz");function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){le(e,t,n[t])})}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce({additionalStyles:e={},children:t,collageChipId:n,componentType:i,contextLogData:o,elementType:r,pin:s,viewParameter:l,viewType:c}){const d=Object(k.b)(),p=s.carousel_data,m=s.id;let h,g=`/pin/${n||m}/`;if(p){const e=p.carousel_slots,t=void 0===e?[]:e,n=p.id,i=p.index;g=`/pin/${m}/`,h={carousel_slot_id:t[i]&&t[i].id,carousel_data_id:n,carousel_slot_index:i}}return a.a.createElement(u.b,{auxData:h,deeplinkUrls:Object(oe.m)(m),forceRefresh:1,onClick:()=>{Object(re.e)(13),Object(H.a)(101,se({},o,{component:i||d.componentType,element:r,objectId:m,view:c||d.viewType,viewParameter:l||d.viewParameter}))},pinId:m,style:se({cursor:"zoom-in",display:"block"},e),to:g},t)}var de=n("vl7u");function ue({feedbackType:e,pin:t}){const n=t.pinner,i=t.source_interest,o=n||{},r=o.full_name,s=o.username,l=(i||{}).name,c="topic"===e,d=!c&&"followed"===e,p=`/${s}/`,m=Object(de.g)(l),g=`/search/pins/?q=${encodeURIComponent(m)}&rs=image_only_attribution`,b=c?g:p,f={topic:C.a._("From {topic}","attribution on pin rep"),followed:C.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:C.a._("Picked for you","attribution on pin rep"),pfy:C.a._("Picked for you","attribution on pin rep")}[e];if(!f)return null;if(d||c){const e=0===f.indexOf("{"),t=c?l:r,n=e?f.slice(f.indexOf("}")+1):f.slice(0,f.indexOf("{"));return e?a.a.createElement(h.b,null,a.a.createElement(u.b,{to:b},a.a.createElement(T.b,{weight:"bold",inline:!0,size:"sm",truncate:!0},t)),a.a.createElement(T.b,{inline:!0,size:"sm"},n)):a.a.createElement(h.b,null,a.a.createElement(T.b,{inline:!0,size:"sm"},n),a.a.createElement(u.b,{to:b},a.a.createElement(T.b,{color:"darkGray",weight:"bold",inline:!0,size:"sm",truncate:!0},t)))}return a.a.createElement(h.b,null,a.a.createElement(ce,{pin:t},a.a.createElement(T.b,{color:"darkGray",overflow:"normal",size:"sm",weight:"semibold"},f)))}var pe=n("qE0g"),me=n("Fpqi");function he(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const t=window.prefetchCompletion[e],n=t.downloadedAssets,i=t.totalAssets;return i?(n/i*100).toFixed(3).toString():"-1"}var ge=n("Mce2");function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){fe(e,t,n[t])})}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye({children:e,componentType:t,contextLogData:n,elementType:i,pin:o,viewParameter:r,viewType:s}){const l=Object(k.b)(),c=o.carousel_data,d=o.id,p=o.link,m=o.tracked_link;let h,g,b="one-tap-desktop";if(c){const e=c.carousel_slots,t=void 0===e?[]:e,n=c.id,i=c.index;t[i]&&t[i].link&&(h=t[i].link),g={carousel_slot_id:t[i]&&t[i].id,carousel_data_id:n,carousel_slot_index:i},b+="-carousel"}else h=m||p;return a.a.createElement(ge.a,{id:b},a.a.createElement(u.b,{auxData:g,deeplinkUrls:Object(oe.m)(d),external:!0,onClick:()=>{const e=me.a.getInstance(),i=e.getViewFromContext();Object(H.a)(12,be({},n,{view:s||l.viewType,viewParameter:r||l.viewParameter,component:t||l.componentType,objectId:d,grid_index:l.slotIndex,pin_id:d,prefetch_percentage_complete:he(p||"")})),Object(H.a)(13,be({closeup_navigation_type:"web_closeup",objectId:d,component:t||l.componentType,view:3},l.contextLogData,n)),e.addViewToContext(i)},pinId:d,style:{cursor:"pointer",display:"block"},to:h},e))}function ve(e){const t=e.pin,n=Object(v.a)(t).isOneTap?ye:ce;return a.a.createElement(n,e)}function we(e){return Object(v.a)(e).isProduct&&Object(f.b)(e)||""}var Ee=n("LCmp");function _e({pin:e,singleLineMaxLength:t}){const n=we(e),i=Object(Ee.a)(n,t),o=a.a.createElement(T.b,{color:"darkGray","data-test-id":"PinRep-Source",overflow:"normal",size:"sm",weight:"normal"},i);return a.a.createElement(ve,{pin:e},o)}function Ce({numberOfLines:e=2,pin:t,singleLineMaxLength:n,pinTitle:i}){const o=e*n,r=Object(Ee.a)(i,o);return a.a.createElement(ve,{pin:t},a.a.createElement(T.b,{color:"darkGray","data-test-id":"PinRep-Title",overflow:"normal",size:"sm",weight:"semibold"},r))}var Oe=n("HcgI");const Se=1.8;function xe({pin:e,showGroupBoardAvatar:t,singleLineMaxLength:n,userNote:i}){const o=e.pinner;if(!o)return null;const r=o.full_name,s=o.image_small_url,l=Se*n,c=Object(Ee.a)(i,l);return a.a.createElement(ve,{pin:e},a.a.createElement(h.b,{alignItems:"center",display:"flex"},!t&&a.a.createElement(h.b,{flex:"none",marginEnd:2},a.a.createElement(h.a,{name:r,size:"sm",src:s})),a.a.createElement(h.b,{"data-test-id":"PinRep-UserNote"},a.a.createElement(T.b,{overflow:"normal",size:"sm"},a.a.createElement(Oe.a,{text:c,options:{hashtags:{source:"hashtag_closeup"}}})))))}var ke=n("rVpF");const Ie=Object(i.lazy)(()=>n.e("BoardActivityPinRepReactionsCommon").then(n.bind(null,"sB4Q"))),Pe={container:{padding:"8px 6px 16px"},imageOnlyAttribution:{hidden:{opacity:0,transition:`opacity ${ke.a}ms ease`},visible:{opacity:1}}};var Te=Object(i.memo)(function({attributionType:e,blockClickEvents:t,feedbackData:n,feedbackType:i,hoverTransitionState:o,isDarkPromoter:r,pin:s,pinTitle:l,setForcePrimary:c,showBoardActivityReply:d,showGroupBoardAvatar:u,showOverflowMenu:p,showReactions:m,showSource:g,singleLineMaxLength:b,titleLines:f,userNote:y}){const v=s.board_activity,w=s.carousel_data,E=s.id,_=l||g,C=_||y,O=$(s),k=O.avatarUrl,I=O.attributionNameLink,P=O.name;let T=null;"default"===e?T=a.a.createElement(X,{feedbackData:n,feedbackType:i,pin:s,pinTitle:l,setForcePrimary:c,isDarkPromoter:r}):"image-only-credit"===e&&(T=a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:Pe.imageOnlyAttribution["active"===o?"visible":"hidden"]}},a.a.createElement(ue,{pin:s,feedbackType:i})));const j=a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:Pe.container}},w&&a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:_||u||"none"!==e?{marginBottom:"6px"}:{}},display:"flex",justifyContent:"center"},a.a.createElement(h.b,{flex:"none"},a.a.createElement(ae,{pinId:E}))),a.a.createElement(h.b,{display:"flex"},a.a.createElement(h.b,{flex:"grow"},C&&a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:"none"!==e||m?{marginBottom:"6px"}:{}}},a.a.createElement(Ce,{numberOfLines:f,pin:s,pinTitle:l,singleLineMaxLength:b}),g&&a.a.createElement(_e,{pin:s,singleLineMaxLength:b}),y&&a.a.createElement(h.b,{marginTop:_?1:0},a.a.createElement(xe,{pin:s,showGroupBoardAvatar:u,singleLineMaxLength:b,userNote:y}))),a.a.createElement(h.b,{alignItems:"center",display:"flex"},a.a.createElement(h.b,{flex:"grow"},T),p&&a.a.createElement(h.b,{flex:"none"},a.a.createElement(pe.default,{feedbackData:n,feedbackType:i,pin:s,pinTitle:l,setForcePrimary:c,transparentBackground:!0}))),m&&a.a.createElement(h.b,{position:"relative","data-test-id":"board-activity-reactions",minHeight:16},a.a.createElement(x.a,null,a.a.createElement(Ie,{pinId:s.id,activityId:v&&v.id||s.id,showReply:d})))),u&&a.a.createElement(h.b,{flex:"none",marginRight:1},a.a.createElement(W,{attributionNameLink:I,avatarUrl:k,name:P}))));return t?a.a.createElement("div",{style:{pointerEvents:"none"}},j):S(j)}),je=n("Alt3"),Re=n("mnfC");function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const Le=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"24KF"))),Ae=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e("PinPersistentOneClickSaveCommon")]).then(n.bind(null,"d94/"))),Me=Object(i.lazy)(()=>Promise.all([n.e(5),n.e("PinSaveButtonCommon")]).then(n.bind(null,"odTJ"))),Be=Object(i.lazy)(()=>Promise.all([n.e("CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141"),n.e(5),n.e(11),n.e("PinBetterSaveCommon")]).then(n.bind(null,"qoD0"))),Fe=Object(i.lazy)(()=>n.e("BoardActivityPinRepLikeButtonCommon").then(n.bind(null,"1pwd")));function Ne({derivedSaveButtonOptions:e,onToggleFlyout:t,onToggleModal:n,pin:r,showEditButton:s,showLikeButton:l,supportsReactionBar:c}){const d=De(Object(i.useState)(!1),2),u=d[0],p=d[1],m=r.carousel_data,g=r.id,b=r.savedInfo,f=Object(i.useRef)(!!b),y=Object(k.b)(),v=y.viewParameter,w=y.viewType,E=Object(j.a)(101,{element:0,objectId:g});let _=null;const C={onToggleModal:t,view:w,viewParameter:v,useLegoStyles:!0};if(!u)if("classic"===e.type||"controlled"===e.type){const t=e.renderPinSaveTooltip;_=a.a.createElement(h.b,{display:"flex",justifyContent:"end"},a.a.createElement(x.a,null,a.a.createElement(ge.a,{id:"pin-save-button"},S(a.a.createElement(Me,{icon:!1,onClickCallback:E,onToggleModal:n,oneTapSave:"controlled"===e.type&&e,pin:r,renderPinSaveTooltip:t,variant:"lego"})))))}else if("inline"===e.type){const i=r,o=e.initialSelection,s=e.onSave,l=e.renderPinSaveTooltip;_=a.a.createElement(x.a,null,a.a.createElement(ge.a,{id:"better-save"},S(a.a.createElement(Be,{initialSelection:o,onSave:s,onToggleFlyout:t,onToggleModal:n,pin:i,renderPinSaveTooltip:l,renderSavedStatus:({savedInfo:e})=>e&&S(a.a.createElement(Re.a,{isNewlySaved:!f.current,name:e.title,url:e.url})),useMasonryFlyout:!0,variant:"lego-pin",viewParameter:v}))))}else"persistentOneClickSave"===e.type&&(_=a.a.createElement(x.a,null,S(a.a.createElement(Ae,Object.assign({},C,{saveOptions:e,pin:r})))));let O=null;return s?O=a.a.createElement(x.a,null,S(a.a.createElement(Le,Object.assign({},C,{carouselSlotCurrentIndex:m&&m.index,component:0,pinId:g,style:{size:"sm"}})))):l&&(O=a.a.createElement(x.a,null,a.a.createElement(o.a,{name:"group_boards_reactions",activate:!1},({anyEnabled:e,customActivate:t})=>S(a.a.createElement(Fe,{pin:r,activateReactionsExperiment:t,inReactionsExperiment:e,onShowReactionsBar:()=>p(!0),onHideReactionsBar:()=>p(!1),supportsReactionBar:c,useLegoStyles:!0}))))),a.a.createElement(h.b,{display:"flex",margin:3,overflow:"hidden"},O&&a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{marginRight:"auto"}},flex:"grow"},O),_&&a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}},flex:"grow",overflow:"hidden"},_))}var Ue=n("4mdS"),ze=n("IqQH");const He={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}};function Ve({pin:e}){const t=(e.aggregated_pin_data||{}).pin_tags_chips;return a.a.createElement(h.b,{display:"flex",dangerouslySetInlineStyle:{__style:He.chipContainer}},t&&t.map(t=>{const n=t.images["750x"]||{};return a.a.createElement(h.b,{key:t.id,dangerouslySetInlineStyle:{__style:He.chip}},a.a.createElement(h.b,{position:"relative",dangerouslySetInlineStyle:{__style:He.chipInner}},a.a.createElement(h.b,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0},a.a.createElement(h.t,{width:"100%",height:"100%",wash:!0},a.a.createElement(ce,{additionalStyles:{width:"100%",height:"100%"},collageChipId:t.id,pin:e},a.a.createElement(h.o,{alt:"",naturalHeight:n.height,naturalWidth:n.width,src:n.url,fit:"cover"}))))))}))}var Ge=n("EQo2"),We=n("k3nM");const Ye=55;function qe({allowImageCropping:e,blockClickEvents:t,isHovering:n,onError:i,onLoad:o,pin:r,resolution:s="default",cropProductPin:l}){const c=Object(k.b)(),d=c.slotIndex,u=c.viewParameter,p=c.viewType,m=Object(ee.d)(),g=r.id,b=void 0===g?"":g,f=r.aggregated_pin_data,y=r.carousel_data,w=r.image_signature,E=(f||{}).pin_tags_chips,_=Object(v.a)(r),C=_.isVideo,O=_.isPromoted,x=C&&new Z.c(m,"ads_desktop_video_ads").enabled();let I=null;if(!C||!x&&O)if(y)I=a.a.createElement(ze.a,{onError:i,onLoad:o,highResOnly:"high-res"===s,lowResOnly:"low-res"===s,pinId:b,showCarouselBadge:!1});else{const t=e?function({images:e,image_crop:t}){const n=e&&e["236x"].height;if(t&&(0!==t.min_y||1!==t.max_y)){const e=t.min_y,i=t.max_y;return{marginTop:`${e>0?-1*e*n:0}px`,marginBottom:`${i<1?Math.round(-1*(1-i)*n):0}px`}}return{}}(r):{};I=a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:t},minHeight:Ye},a.a.createElement(Ge.a,{pin:r,highResOnly:"high-res"===s,lowResOnly:"low-res"===s,onLoad:o,onError:i,cropProductPin:l}))}else I=a.a.createElement(We.a,{inAdsDesktopVideoExperiment:x,pin:r,onLoad:o,viewType:p,viewParameter:u,highResOnly:"high-res"===s,lowResOnly:"low-res"===s,onError:i,isExperimentalPinRep:!0});const P=a.a.createElement(h.t,{wash:!0},I);return t?a.a.createElement(a.a.Fragment,null,P,E&&a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{marginTop:1}}},a.a.createElement(Ve,{pin:r}))):a.a.createElement(a.a.Fragment,null,a.a.createElement(ve,{pin:r,contextLogData:{grid_index:d,image_signature:w},elementType:35},P),E&&a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{marginTop:1}}},S(a.a.createElement(Ve,{pin:r}))))}var Je=n("TRIq");function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const Qe=60,Ke=40,Xe=60;function Ze(e){return e<Qe+Ke+Xe?"header-only":"none"}function et(e){const t=$e(Object(i.useState)(e.current?Ze(e.current.clientHeight||0):"none"),2),n=t[0],a=t[1];return function(e,t){const n=Object(i.useRef)();Object(i.useEffect)(()=>{const i=e.current;if(!i)return;const a=n.current;a&&a.width===i.offsetWidth&&a.height===i.offsetHeight||(n.current={width:i.offsetWidth||0,height:i.offsetHeight||0},t&&t(n.current))}),n.current}(e,({height:e})=>{const t=Ze(e);t!==n&&a(t)}),n}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const nt=4e3;function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const at={impressed:{backgroundColor:"#adebad",opacity:.5}},ot=()=>void 0!==I.a.getQueryStringParams().debug_impression_log;function rt({debugImpressionState:e="paused",slotIndex:t}){return"paused"===e?null:a.a.createElement(h.b,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:at.impressed}},a.a.createElement(h.b,{position:"absolute",top:!0,left:!0,padding:2,color:"darkGray"},a.a.createElement(h.J,{size:"xl",color:"white"},t)))}var st=n("jCHc"),lt=n("nZV1");function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){dt(e,t,n[t])})}return e}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const pt={background:{base:{transition:"all 250ms",opacity:0},blurred:{backgroundPosition:"50% 50%",backgroundSize:"cover",borderRadius:je.a,filter:"blur(20px)",opacity:1}},backdrop:{base:{transition:"all 250ms"},blurred:{backgroundColor:"rgba(0,0,0,0.4)"}},feedbackOverlayContainer:{base:{opacity:0,transition:"all 250ms"},visible:{opacity:1}},navigateLinkStyle:{color:"white",textDecorationColor:"white",cursor:"pointer"}};function mt({feedbackType:e,isContextMenuV2Exp:t,isHomefeedControlPanelExp:n,pin:o}){const r=ut(Object(i.useState)(!1),2),s=r[0],l=r[1],c=ut(Object(i.useState)(!1),2),d=c[0],p=c[1];Object(i.useEffect)(()=>l(!0),[l]);const m=()=>p(!0),g=o.feedbackText,b=o.images,f=o.showFeedbackOverlay,y=o.undoAction,v=o.undoText,w=b&&b["236x"].url,E=g.image,_=g.subTitle,O=g.title,S=g.unfollow,x=S&&d&&!t,k=n&&"followed"!==e&&"related"!==e&&"search"!==e,I="pfy"===e||"pfyBoard"===e;return a.a.createElement(h.b,{color:t?"transparent":"darkGray",dangerouslySetInlineStyle:{__style:{borderRadius:je.a}},overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0},t&&a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:{borderRadius:je.a}},margin:-4,overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0},w&&a.a.createElement(st.a,{additionalStyles:ct({},pt.background.base,s?pt.background.blurred:{},{backgroundImage:`url("${w}")`})}),w&&a.a.createElement(st.a,{additionalStyles:ct({},pt.background.base,s?pt.background.blurred:{},{backgroundImage:`url("${w}")`})}),a.a.createElement(st.a,{additionalStyles:ct({},pt.backdrop.base,s?pt.backdrop.blurred:{})})),a.a.createElement(h.b,{dangerouslySetInlineStyle:{__style:t&&ct({},pt.feedbackOverlayContainer.base,!f&&s?pt.feedbackOverlayContainer.visible:{})},height:"100%",padding:4,position:"relative",width:"100%"},a.a.createElement(h.b,{display:"flex",direction:"column",height:"100%",justifyContent:"between"},a.a.createElement(h.b,{maxWidth:216},a.a.createElement("div",{className:"ObscuredOverlay"},a.a.createElement(h.b,{marginBottom:2},a.a.createElement(h.J,{color:"white",size:"xl",bold:!0},x?S.title:O)),a.a.createElement(h.b,{display:"flex"},E&&a.a.createElement(h.b,{marginRight:3},a.a.createElement(h.t,{width:E.width,height:E.height,shape:"rounded",wash:!0},a.a.createElement(h.o,{alt:x?S.subTitle:_||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:E.url}))),a.a.createElement(h.J,{color:"white",overflow:"normal"},x?S.subTitle:_,k&&a.a.createElement(u.b,{className:"underlineLink",to:"/edit",onClick:()=>{Object(H.a)(101,{view:1,viewParameter:92,element:11347})},style:pt.navigateLinkStyle},C.a._(" Tune your home feed","Text on the button to navigate to homefeed control")))))),!y&&!d&&S&&!I&&a.a.createElement(h.c,{color:"white",onClick:()=>Object(lt.a)(S.action,S.actionOptions,m),text:C.a._("Unfollow","Text on the button to unfollow a specific board / user")}),y&&a.a.createElement(h.c,{color:"white",onClick:y,text:v||C.a._("Undo","Text on the button to unfollow hiding a pin")}))))}function ht(e){return"active"===e?"visible":"inactive"===e?"none":"hidden"}function gt(...e){return e.includes("visible")?"visible":e.includes("hidden")?"hidden":"none"}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const ft=228;var yt=Object(i.memo)(function({actionBarProps:e,blockClickEvents:t,currentlyPlayingVideo:n,disableHover:o=!1,footerProps:r,forcePrimaryContentVisibility:s,impressionsDebuggerProps:l,showSendFooter:c,onError:d,onLoad:u,obscuredPinOverlayProps:p,pin:m,pinVisualProps:g,primaryContentProps:b,selectionState:f,secondaryContentProps:y,showActionBar:v,showFooter:w,showImpressionsDebugger:E,showSignalDebugger:_,showObscuredPinOverlay:C,showPrimaryAndSecondaryContent:O,viewType:S}){const x=m.carousel_data,k=m.savedInfo,I=bt(Object(i.useState)(!1),2),P=I[0],T=I[1],j=Object(ke.b)(P);let R=function(){const e=it(Object(i.useState)(!1),2),t=e[0],n=e[1];return{isHovering:t,hoverTransitionState:Object(ke.b)(t,0,ke.a),handleMouseOver:Object(i.useCallback)(()=>n(!0),[n]),handleMouseLeave:Object(i.useCallback)(()=>n(!1),[n])}}(),D=R.isHovering,L=R.hoverTransitionState,A=R.handleMouseOver,M=R.handleMouseLeave;o&&(D=!1,L="inactive");const B=Object(ke.b)(!!k),F=ht(B),N=ht(L),z=ht(L),H=ht(j),G=ht(B),W={primaryContentVisibility:gt(z,H,G),secondaryContentVisibility:(Y=gt(z,H,G),"none"===Y?"visible":"visible"===Y?"none":"hidden"),actionBarVisibility:gt(z,H),accessoryContentVisibility:"none"};var Y;const q=e=>T(e),J=e=>{T(e),e||M()};let $=null;s&&(W.primaryContentVisibility="visible"),"none"!==W.primaryContentVisibility&&O&&($=a.a.createElement(Ne,Object.assign({pin:m,onToggleFlyout:q,onToggleModal:J},b)));let Q=null;const K=Object(i.useRef)(!0),X=K.current;K.current=!1;const Z=function(e,t){const n=e.carousel_data,a=(n||{}).index,o=tt(Object(i.useState)(!n||t),2),r=o[0],s=o[1],l=Object(i.useRef)(a),c=Object(i.useRef)(null);if(n){const e=l.current;l.current=a,(a!==e||t)&&(c.current&&clearTimeout(c.current),s(!0),c.current=setTimeout(()=>{s(!1),c.current=null},nt))}return Object(i.useEffect)(()=>()=>{c.current&&clearTimeout(c.current)},[]),r}(m,X),ee=ht(Object(ke.b)(Z));W.secondaryContentVisibility=function(...e){return e.includes("none")?"none":e.includes("hidden")?"hidden":"visible"}(W.secondaryContentVisibility,ee),"none"!==W.secondaryContentVisibility&&O&&(n||(Q=a.a.createElement(h.b,{margin:2},a.a.createElement(Ue.a,Object.assign({pin:m},y)))));let te=null;x&&(te=a.a.createElement(V,{pin:m}),W.accessoryContentVisibility=ht(L)),c&&(e.showShareButton=!1);const ne=v?a.a.createElement(U,Object.assign({onToggleFlyout:q,onToggleModal:J,pin:m,setForcePrimary:T},e)):null;let ie=null;w&&(ie=a.a.createElement(Te,Object.assign({hoverTransitionState:"image-only-credit"===r.attributionType?L:null,blockClickEvents:t,pin:m,setForcePrimary:T},r))),c&&(ie=a.a.createElement(h.b,{marginTop:2,marginBottom:3,width:"100%"},a.a.createElement(h.b,{width:ft,margin:"auto"},a.a.createElement(Je.a,{onFlyoutDismiss:()=>q(!P),onToggleFlyout:()=>q(!P),pinId:m.id,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:P,viewType:S}))));const ae=E&&a.a.createElement(rt,l),oe=_&&m.debug_info_html&&a.a.createElement(h.b,{paddingY:1},a.a.createElement("pre",null,m.debug_info_html)),re=Object(i.useRef)();"header-only"===et(re)&&(W.actionBarVisibility="none",W.accessoryContentVisibility="none");const se=C?a.a.createElement(mt,Object.assign({pin:m},p)):null;return a.a.createElement("div",{onMouseOver:A,onMouseLeave:M,"data-test-id":"pin","data-test-pin-id":m.id},a.a.createElement(je.b,{visualOverlayVisibility:N,savedOverlayVisibility:F,primaryContent:$,primaryContentVisibility:W.primaryContentVisibility,secondaryContent:Q,secondaryContentVisibility:W.secondaryContentVisibility,accessoryContent:te,accessoryContentVisibility:W.accessoryContentVisibility,actionBar:ne,actionBarVisibility:W.actionBarVisibility,footer:ie,selectionState:f,debugContent:ae,signalDebuggerContent:oe,obscuredPinOverlay:se},a.a.createElement(h.b,{ref:re},a.a.createElement(qe,Object.assign({blockClickEvents:t,isHovering:D,onError:d,onLoad:u,pin:m},g)))))}),vt=n("+H5w");var wt=n("hCBh");function Et(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _t=Object(r.connect)(function({boards:{isSocialSeasonalBoard:e=!1,content:t={}},pins:n,ui:i,viewer:a},{pin:o,pinId:r}){const s=n[r]||o,l=s.board&&s.board.id,c=(l?t[`${l}`]:void 0)||s.board,d=i.app.videosAutoplaying;return{board:c,currentlyPlayingVideo:Object(y.j)(r,d),isSocialSeasonalBoard:e,reduxPin:s,viewConfig:i.views,viewer:a}},()=>({}))(function(e){let t=e.allowImageCropping,n=e.blockClickEvents,o=e.attributionOption,r=e.board,s=e.boardActivityOptions,l=e.currentlyPlayingVideo,c=e.debugImpressionState,d=e.feedbackOptions,u=e.imageOnlyOption,p=e.reduxPin,m=e.resolution,h=e.saveButtonOptions,g=e.surface,b=e.trackingParameters,f=e.viewConfig,y=e.viewer,S=e.isSocialSeasonalBoard,x=Et(e,["allowImageCropping","blockClickEvents","attributionOption","board","boardActivityOptions","currentlyPlayingVideo","debugImpressionState","feedbackOptions","imageOnlyOption","reduxPin","resolution","saveButtonOptions","surface","trackingParameters","viewConfig","viewer","isSocialSeasonalBoard"]);const I=r||{},P=I.collaborated_by_me,T=I.collaborator_count,j=I.is_collaborative,R=p.showFeedback,D=p.pinner,L=b.slotIndex,A=b.viewParameter,M=Object(ee.d)(),B=new Z.c(M,"web_change_titles").enabled(),F=y.isAuth&&y.isEmployee,N=y.isAuth&&(Object(wt.d)({user:y})||Object(wt.e)({user:y}))&&!y.isPartner;let U=N;"default"!==u&&(U="image-only"===u);let z=o;N&&(z="image-only");const H=function({feedbackOptions:e,pin:t,viewParameter:n}){const i=t.board,a=t.pinner;return(0,Object(_.a)({i18n:C.a,interpolateNamedTemplate:O.b}).getFeedbackType)({board:i,feedback:e,pin:t,pinner:a,viewParameter:n})}({feedbackOptions:d,pin:p,viewParameter:A}),V=(d||{}).data,G=T>0||j,W=G&&"BaseBoardPinGrid"===g,Y=function(e,t){const n=e&&e.owner&&e.owner.id;return t.isAuth&&n===t.id}(r,y),q=y.isAuth&&D&&D.id===y.id,J=P||G&&Y,$=function(e,t){const n=E[t];return!!n&&"dense"===e[n]}(f,g),Q=!["EngagementDetails","BoardCreateUpsell"].includes(g),K=Object(i.useMemo)(()=>(function({isDenseView:e,isGroupBoard:t,isOwnBoard:n,isOwnPin:i,saveButtonOptions:a,surface:o,viewer:r,viewerIsCollaborator:s}){const l=r.isAuth?r.boardCount:void 0;let c=a||function({viewerBoardCount:e=0}){return e<2?{type:"classic"}:{type:"inline"}}({viewerBoardCount:l});return n&&"HomefeedMoreIdeasTabs"===o?c={type:"persistentOneClickSave"}:(s||n||"UserProfilePinGrid"===o)&&(c={type:"classic"}),{derivedSaveButtonOptions:c,showEditButton:n&&!t||i&&"UserProfilePinGrid"===o,showLikeButton:s,supportsReactionBar:!e}})({isDenseView:$,isGroupBoard:W,isOwnBoard:Y,isOwnPin:q,saveButtonOptions:h,surface:g,viewer:y,viewerIsCollaborator:J}),[W,Y,q,h,g,y]),X=Object(i.useMemo)(()=>(function({surface:e}){return{allowShoppingPriceIndicator:["CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","STLProductsFeed"].includes(e)}})({surface:g}),[g]),te=!["EngagementDetails","BoardCreateUpsell"].includes(g),ne=Object(i.useMemo)(()=>(function({feedbackData:e,feedbackType:t,inChangeTitlesExp:n,isDenseView:i,isGroupBoard:a,isOwnBoard:o,pin:r,surface:s}){const l=Object(v.a)(r),c=l.isOwnPin,d=l.isPromoted;let u="default";return i&&(u=a?"icon-only":"truncated-text"),{feedbackData:e,feedbackType:t,pinTitle:w({inChangeTitlesExp:n,isGroupBoard:a,pin:r,surface:s}),showEditButton:a&&c,showOverflowMenu:!(d||o||a||["EngagementDetails","UserProfilePinGrid"].includes(s)),showShareButton:!("CloseupRelatedProducts"===s),sourceLinkStyle:u,useDenseGroupBoardLayout:a&&i}})({feedbackData:V,feedbackType:H,inChangeTitlesExp:B,isDenseView:$,isGroupBoard:W,isOwnBoard:Y,pin:p,surface:g}),[V,H,$,W,Y,p,g]),ie=Object(i.useMemo)(()=>(function({attributionOption:e,board:t,boardActivityOptions:n,feedbackData:i,feedbackType:a,inChangeTitlesExp:o,isGroupBoard:r,pin:s,showImageOnly:l,surface:c}){const d=Object(v.a)(s).isPromoted,u=s.promoter,p=function({attributionOption:e,feedbackType:t,isGroupBoard:n,pin:i,showImageOnly:a,surface:o}){const r=i.is_downstream_promotion,s=i.promoter;if("promoted"===t||s&&!r)return"default";if(["UserProfilePinGrid","CloseupRelatedProducts"].includes(o))return"none";if(n)return"none";let l="default";return e&&("image-only"===e?l="image-only-credit":"hide"===e&&(l="none")),"followed"!==t||a?"none":l}({attributionOption:e,feedbackType:a,isGroupBoard:r,pin:s,showImageOnly:l,surface:c}),m=l?"":w({inChangeTitlesExp:o,isGroupBoard:r,pin:s,surface:c}),h=!d&&!l&&Boolean(we(s)),g=o&&"BaseBoardPinGrid"===c&&s.unified_user_note?(s.unified_user_note||"").trim():"";let b=2;d?b=3:(h||"none"!==p)&&(b=1);let f=r?25:30;return"CloseupRelatedProducts"===c&&(f=23),{attributionType:p,feedbackData:i,feedbackType:a,pinTitle:m,showBoardActivityReply:"no-reply"!==n,showGroupBoardAvatar:r,showOverflowMenu:d,showReactions:Boolean(t&&t.should_show_board_activity)||r,showSource:h,singleLineMaxLength:f,titleLines:b,userNote:g,isDarkPromoter:!d&&!!u}})({attributionOption:z,board:r,boardActivityOptions:s,feedbackData:V,feedbackType:H,inChangeTitlesExp:B,isGroupBoard:W,pin:p,showImageOnly:U,surface:g}),[z,r,s,V,H,B,W,p,U,g]);let ae=Boolean(ie.pinTitle)||ie.userNote||ie.showSource||"none"!==ie.attributionType||W;"EngagementDetails"===g?ae=!1:$?ae=!1:S&&(ae=!1);const oe=Boolean(R),re=new Z.c(M,"web_homefeed_control_contextual_menu_v2"),se=new Z.c(M,"web_homefeed_control_panel_nag").enabledWithNoActivation(),le=new Z.c(M,"web_homefeed_control_panel_pin_feedback"),ce=oe?{feedbackType:H,isContextMenuV2Exp:re.enabled(),isHomefeedControlPanelExp:se||le.enabled()}:void 0,de=Object(i.useMemo)(()=>(function({allowImageCropping:e=!0,resolution:t,surface:n}){return{allowImageCropping:e,resolution:t||"default",cropProductPin:"CloseupRelatedProducts"===n}})({allowImageCropping:t,resolution:m,surface:g}),[t,m,g]),ue=F&&ot(),pe=Object(i.useMemo)(()=>({debugImpressionState:c,slotIndex:L}),[c,L]);return a.a.createElement(k.a,{value:b},a.a.createElement(yt,Object.assign({actionBarProps:ne,blockClickEvents:n,currentlyPlayingVideo:l,footerProps:ie,forcePrimaryContentVisibility:["HomefeedMoreIdeasTabs","SearchItemPersistentOneClickSave"].includes(g),impressionsDebuggerProps:pe,obscuredPinOverlayProps:ce,pin:p,pinVisualProps:de,primaryContentProps:K,secondaryContentProps:X,showPrimaryAndSecondaryContent:Q,showActionBar:te,showFooter:ae,showSendFooter:S,showImpressionsDebugger:ue,showSignalDebugger:F,showObscuredPinOverlay:oe},Object(vt.b)(x,["pinId"]),{viewType:b.viewType})))});function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Ot(e,t,n[t])})}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xt(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kt=Object(r.connect)(function({pins:e,location:t},{pin:n,pinId:i}){return{location:t,reduxPin:e[i]||n}},()=>({}))(function(e){let t=e.blockClickEvents,n=e.location,o=e.reduxPin,r=e.trackingParameters,u=xt(e,["blockClickEvents","location","reduxPin","trackingParameters"]);const p=Object(s.a)(o,n),m=l(o),h=!!(m&&m.url&&m.height&&m.width)||void 0,g=m&&o.videos?o.videos.id:void 0,v=St(Object(i.useState)(!1),2),w=v[0],E=v[1],_=Object(i.useCallback)(()=>E(!0),[]),C=Object(i.useCallback)(()=>E(!1),[]),O=r.componentType,S=r.contextLogData,x=r.impressionAuxFields,k=r.slotIndex,I=r.viewData,P=r.viewParameter,T=r.viewType;return a.a.createElement(c.a,{componentType:O,contextLogData:Ct({},"undefined"!=typeof window?{pwa_type:Object(d.b)(window)}:{},S,Object(f.a)(o,S)),loggingId:o.id,impressionAuxFields:Ct({},x||{},{isNativeVideoAndWatchable:h,videoIdStr:g,clientTrackingParams:p||`${o.tracking_params||""}-0`,imageURL:o.images&&o.images["236x"].url,richTypes:o.shopping_flags||[]}),impressionType:"Pin",isPaused:!w,slotIndex:k,viewData:I,viewParameter:P,viewType:T},Object(y.h)(o)?a.a.createElement(b,{pin:o}):a.a.createElement(_t,Object.assign({},u,{blockClickEvents:t,debugImpressionState:w?"started":"paused",onError:C,onLoad:_,pin:o,trackingParameters:{componentType:O,contextLogData:S,slotIndex:k,viewParameter:P,viewType:T}})))}),It=n("E1Qe"),Pt=n("hvnN"),Tt=n.n(Pt),jt=n("Ww6/");function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Dt(e,t,n[t])})}return e}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lt extends i.Component{constructor(...e){super(...e),Dt(this,"state",{startImpressionTimer:!1}),Dt(this,"handleLoad",()=>{this.setState({startImpressionTimer:!0})}),Dt(this,"handleError",()=>{this.setState({startImpressionTimer:!1})})}render(){const e=this.props,t=e.componentType,n=e.contextLogData,i=e.impressionAuxFields,o=e.pin,r=e.slotIndex,u=e.location,p=e.viewData,m=e.viewType,h=e.viewParameter,g=Object(s.a)(o,u),v=l(o),w=!!(v&&v.url&&v.height&&v.width)||void 0,E=v&&o.videos?o.videos.id:void 0;return a.a.createElement(c.a,{componentType:t,contextLogData:Rt({},"undefined"!=typeof window?{pwa_type:Object(d.b)(window)}:{},n,Object(f.a)(o,n)),loggingId:o.id,impressionType:"Pin",impressionAuxFields:Rt({},i||{},{isNativeVideoAndWatchable:w,videoIdStr:E,richTypes:o.shopping_flags||[],imageURL:o.images&&o.images["236x"].url,clientTrackingParams:g||`${o.tracking_params}-0`}),isPaused:!this.state.startImpressionTimer,slotIndex:r,viewData:p,viewType:m,viewParameter:h},Object(y.h)(o)?a.a.createElement(b,{pin:o}):a.a.createElement(jt.c,Object.assign({},this.props,{onError:this.handleError,onLoad:this.handleLoad})))}}Lt.propTypes=Rt({componentType:Tt.a.number,contextLogData:Tt.a.objectOf(Tt.a.any),impressionAuxFields:Tt.a.objectOf(Tt.a.any),location:Tt.a.shape({history:Tt.a.arrayOf(Tt.a.shape({pathname:Tt.a.string.isRequired,search:Tt.a.string,previousPath:Tt.a.string,gridItems:Tt.a.arrayOf(Tt.a.any)})).isRequired,pathname:Tt.a.string.isRequired,previousPage:Tt.a.string}),pin:It.a.isRequired,slotIndex:Tt.a.number.isRequired,viewParameter:Tt.a.number.isRequired,viewType:Tt.a.number.isRequired},jt.a);var At=Object(r.connect)(({location:e})=>({location:e}))(Lt);function Mt(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bt(e){let t=e.forceOldPinRep,n=Mt(e,["forceOldPinRep"]);return t?a.a.createElement(At,n):a.a.createElement(o.a,{name:"web_grid_immersive_new"},({anyEnabled:e})=>a.a.createElement(o.a,{name:"web_grid_immersive"},({anyEnabled:t})=>t||e?a.a.createElement(kt,function(e){const t={};if(t.allowImageCropping=e.truncatePinHeight,t.disableHover=e.hideHover,t.feedbackOptions=e.feedback,t.saveButtonOptions=e.saveOptions,t.blockClickEvents=e.blockClickEvents,t.pin=e.pin,t.pinId=e.pin.id,t.imageOnlyOption="default","boolean"==typeof e.showImageOnly&&(t.imageOnlyOption=e.showImageOnly?"image-only":"not-image-only"),t.boardActivityOptions="default",!1===e.showPinReactionsReply&&(t.boardActivityOptions="no-reply"),t.onError=e.onError,t.onLoad=e.onLoad,t.trackingParameters={componentType:e.componentType,contextLogData:e.contextLogData,impressionAuxFields:e.impressionAuxFields,slotIndex:e.slotIndex,viewData:e.viewData,viewParameter:e.viewParameter,viewType:e.viewType},t.resolution="default",e.highResOnly?t.resolution="high-res":e.lowResOnly&&(t.resolution="low-res"),void 0!==e.selection){const n={NO_SELECTION:"no-selection",SELECTED:"selected",UNSELECTED:"deselected"};t.selectionState=n[e.selection]}return t.attributionOption=null,e.showCredits||!1===e.hideAttribution?t.attributionOption="show":(e.hideAttribution||!1===e.showCredits)&&(t.attributionOption="hide"),t.surface=e.surface,t}(n)):a.a.createElement(At,n)))}n.d(t,"a",function(){return Bt})},"n/kK":function(e,t,n){var i=n("ztFR"),a=n("Fpqi"),o=n("POeB"),r=n("bWet"),s=n("H++a"),l=n("UhjI"),c=n("Qo1m"),d=n("ggpB"),u=n("aqOH");const p={checkFbTimelinePermission:function(e){r.default.ensureInit(function(t){t.api("/me/permissions",t=>{const n=t.data;let i=!1;n&&(i=!!n.find(e=>"publish_actions"===e.permission&&"granted"===e.status)),i?e.success&&e.success():e.error&&e.error()})},u.default)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t){r.default.ensureInit(n=>{if(!p.fbConnectedAccountMatchesLoggedInAccount(n,t))return o.default.showError(c.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());p.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){p.fbLogin(e)}})},u.default)},fbLogin:function(e){r.default.ensureInit(t=>{t.login(t=>{t.authResponse?p.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:"publish_actions"})},u.default)},shareFb:function(e){const t=e.ga_category||"share_facebook";l.a.trackEvent(t,"click");const n=e.dialog_options||{};n.callback=function(){const t=i.a.fromEventType(1300);e.object_id&&t.setObjectIdStr(e.object_id),a.a.getInstance().addEvent(t)};const o=n.object_type;o&&Object(d.a)("facebook_share_dialog_open_"+o),s.default.open(n)},getLocaleString:function(e){let t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US";break;case"es_419":case"es_AR":t="es_LA"}return t}};t.a=p},nI4G:function(e,t,n){function i(e,t,n=3){if(window._sendFacebookPixel)"NewOrRezUsers"===e||"MAU"===e?window._sendFacebookPixel("trackCustom",e):window._sendFacebookPixel("track",e),t();else if(n>0){const a=Math.floor(3e3/n);setTimeout(()=>{i(e,t,n-1)},a)}}function a(e,t){return n=>{i(e,t),window.removeEventListener("load",a)}}function o(e,t){"complete"===document.readyState?i(e,t):window.addEventListener("load",a(e,t))}function r(){document.getElementById("facebookPixel")||("complete"===document.readyState&&function(){const e=function(e){const t=document.createElement("iframe");for(const n in e)t.setAttribute(n,e[n]);return t}({src:"https://"+location.hostname+"/fb.html",id:"facebookPixel",sandbox:"allow-scripts allow-same-origin",style:"display: none;"});if(!document.body)throw new Error("missing <body>");document.body.appendChild(e),e.contentWindow.addEventListener("load",()=>window._sendFacebookPixel=e.contentWindow.fbq)}(),window.addEventListener("load",r))}n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r})},nSqn:function(e,t,n){function i(e,t,n){return{type:"PIN_TAG_ADD_TAGGED_OBJECT",payload:{pinTagId:e,taggedObjectId:t,taggedObject:n}}}n.d(t,"a",function(){return i})},nZV1:function(e,t,n){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});var i=n("ePT2");const a=()=>{};const o={complaint:function(e,t){i.a.create("PinFeedbackResource",e).callUpdate().then(()=>t())},enablePFY:function(e,t){i.a.create("PFYPreferenceResource",e).callCreate().then(()=>t())},followBoard:function(e,t){i.a.create("BoardFollowResource",e).callCreate().then(()=>t())},followPinner:function(e,t){i.a.create("UserFollowResource",e).callCreate().then(()=>t())},followTopic:function(e,t){i.a.create("InterestFollowResource",e).callCreate().then(()=>t())},newsHubPinHide:function(e,t){i.a.create("NewsHubPinFeedbackResource",e).callUpdate().then(()=>t())},promotedComplaint:function(e,t){i.a.create("PinFeedbackResource",e).callUpdate().then(()=>t())},relatedPinHide:function(e,t){i.a.create("RelatedPinFeedbackResource",e).callUpdate().then(()=>t())},reportPin:function(e,t){t()},unfollowBoard:function(e,t){i.a.create("BoardFollowResource",e).callDelete().then(()=>t())},unfollowPinner:function(e,t){i.a.create("UserFollowResource",e).callDelete().then(()=>t())},unfollowTopic:function(e,t){i.a.create("InterestFollowResource",e).callDelete().then(()=>t())},unrelatedSearchPin:function(e,t){i.a.create("SearchPinFeedbackResource",e).callUpdate().then(()=>t())}},r=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function s(e,t,n=a){const i=o[e];return i?i(t,n):n()}},nskd:function(e,t,n){var i=n("AHpX"),a=n("sH1f"),o=n.n(a);t.a=Object(i.DragDropContext)(o.a)},nufh:function(e,t,n){var i=n("GyhR"),a=n.n(i);t.a=(e=>{const t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return a.a.createElement("div",t,e.children||null)})},o9D8:function(e,t,n){n.d(t,"a",function(){return g});var i=n("GyhR"),a=n("hvnN"),o=n.n(a),r=n("q579"),s=n("kIql"),l=n("HW6o"),c=n("NmcB");function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=r.a.getQueryStringParams()&&r.a.getQueryStringParams().debug_impression_log,m={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573}},h=1e6;function g(e){const t=Object(l.a)(e);class n extends i.Component{constructor(...e){super(...e),u(this,"state",{impressionStarted:!1,impressionLogged:!1}),u(this,"currentNs",()=>Date.now()*h),u(this,"startTime",0),u(this,"debugPinImpressions",p&&"Pin"===this.props.impressionType&&this.props.viewer.isEmployee),u(this,"handleVisibilityChanged",e=>{const t=this.props,n=t.componentType,i=t.contextLogData,a=t.impressionAuxFields,o=t.impressionType,r=t.loggingId,s=t.slotIndex,l=t.viewParameter,u=t.viewType,p=t.viewData;if(e)this.startTime=this.currentNs(),this.debugPinImpressions&&(console.log(s+" started timer"),this.setState({impressionStarted:!0}));else{const e=m[o],t=e.idType,h=this.currentNs(),g=d({endTime:h,[t]:r,slotIndex:s,time:this.startTime,renderDuration:h-this.startTime},a);Object(c.a)(e.eventType,d({component:n,eventData:{[e.impressionType]:[g]},view:u,viewParameter:l,viewData:p},i)),this.debugPinImpressions&&(console.log(s+" logged for "+(h-this.startTime)/1e9+"s"),this.setState({impressionStarted:!1,impressionLogged:!0}))}})}render(){return i.createElement(t,Object.assign({onVisibilityChanged:this.handleVisibilityChanged,debugImpressionStarted:this.debugPinImpressions?this.state.impressionStarted:void 0,debugImpressionLogged:this.debugPinImpressions?this.state.impressionLogged:void 0},this.props))}}return n.propTypes={componentType:o.a.number,contextLog:o.a.func.isRequired,contextLogData:o.a.shape({}),impressionAuxFields:o.a.shape({}),impressionType:o.a.oneOf(["Article","Pin","Board","Interest","Search","User","News","Story","Guide"]),loggingId:o.a.string.isRequired,slotIndex:o.a.number,viewParameter:o.a.number.isRequired,viewType:o.a.number.isRequired,viewData:o.a.shape({interest:o.a.string}),viewer:o.a.shape({isEmployee:o.a.bool}).isRequired},Object(s.a)(n)}},"ogC+":function(e,t,n){n.d(t,"a",function(){return s});var i=n("GyhR"),a=n.n(i),o=n("hvnN"),r=n.n(o);function s({mask:e,loading:t,size:n}){return a.a.createElement("div",null,e&&a.a.createElement("div",{className:"moduleMask",style:{bottom:0,left:0,right:0,top:0}}),t&&a.a.createElement("div",{className:"Spinner"},a.a.createElement("div",{className:"small"===n?"spinnerSmall":"spinnerMedium"})))}s.propTypes={loading:r.a.bool,mask:r.a.bool,size:r.a.string},s.defaultProps={loading:!0,mask:!0,size:"medium"}},"oko/":function(e,t,n){function i(e,t){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{pinId:e,index:t}}}n.d(t,"a",function(){return i})},osqL:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("IqQH"),s=n("4gpq"),l=n("exzK"),c=n("z4tw"),d=n.n(c),u=n("k4/I"),p=n("4fCo"),m=n("D+W/"),h=n("iUcS"),g=n("vI2X"),b=n("Q6EP"),f=n.n(b),y=n("Qo1m"),v=n("dsfX"),w=n("Reqc"),E=n("Mce2"),_=n("KCDi"),C=n("KsVg"),O=n("+U6O");function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x=Object(C.a)(class extends a.a.PureComponent{constructor(...e){super(...e),S(this,"state",{deleting:!1}),S(this,"unmounted",!1),S(this,"handleConfirm",()=>{if(this.state.deleting)return;const e=this.props.onDeletePin;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),S(this,"handleDeleteDidComplete",e=>{this.unmounted||this.setState({deleting:!1}),e||this.props.showToast(({onHide:e})=>a.a.createElement(_.a,{onHide:e,text:y.a._("Pin deleted!","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const e=this.props.onDismiss,t=this.state.deleting;return a.a.createElement(v.b,{accessibilityCloseLabel:y.a._("Close","Accessible label for button to close confirm delete pin modal"),heading:y.a._("Are you sure?","Confirm the user wants to delete the pin"),accessibilityModalLabel:y.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:a.a.createElement(O.b,{display:"flex",justifyContent:"end",marginLeft:-1,marginRight:-1},a.a.createElement(O.b,{paddingX:1},a.a.createElement(O.c,{onClick:e,text:y.a._("Cancel")})),a.a.createElement(O.b,{paddingX:1},a.a.createElement(E.a,{id:"confirm-delete-pin"},a.a.createElement(w.b,{color:"red",onClick:this.handleConfirm,text:y.a._("Delete Pin"),submitting:t}))))},a.a.createElement(O.b,{padding:4},a.a.createElement(O.J,null,y.a._("Once you delete a Pin, you can't undo it!"))))}});x.displayName="DeletePinConfirmation";var k=x,I=n("iz55");function P({board:e,canEdit:t,onBoardChange:n,onBoardCreate:a}){return i.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(O.p,{htmlFor:"BoardPicker"},i.createElement(O.J,{size:"sm"},y.a._("Board")))),t?i.createElement(O.b,{xs:{column:12},md:{column:8}},i.createElement(I.a,{id:"BoardPicker",board:e,onBoardChosen:n,onBoardCreate:a})):i.createElement(O.b,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(O.J,{bold:!0,size:"sm"},e.name)))}var T=n("eRYL");function j({canEdit:e,description:t,errorMessage:n,label:a,placeholder:o,onDescriptionChange:r}){return i.createElement(i.Fragment,null,i.createElement(O.i,null),i.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(O.p,{htmlFor:"DescriptionField"},i.createElement(O.J,{size:"sm"},a))),e?i.createElement(O.b,{xs:{column:12},md:{column:8}},i.createElement(O.b,null,i.createElement(O.K,{id:"DescriptionField",placeholder:o,value:t,onChange:r,hasError:(n||"").length>0})),!!n&&i.createElement(O.b,{justifyContent:"center"},i.createElement(T.a,{errorMessage:n,htmlFor:"pin-edit-description"}))):i.createElement(O.b,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(O.J,{bold:!0,size:"sm"},t))))}var R=n("q+IY");function D({board:e,canEdit:t,currentSection:n,onSectionChange:a,onSectionCreate:o,sectionId:r,sectionName:s}){const l=e.id?R.b:R.a;return i.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:3},i.createElement(O.p,{htmlFor:"SectionPicker"},i.createElement(O.J,{size:"sm"},y.a._("Section","label for editing a Pin's board section")))),t?i.createElement(O.b,{xs:{column:12},md:{column:8}},i.createElement(l,{id:"SectionPicker",board:e,onSectionChange:a,selectedSectionId:r,selectedSectionName:s,onSectionCreate:o})):i.createElement(O.b,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(O.J,{bold:!0,size:"sm"},n&&!(e||{}).is_collaborative?n.title:y.a._("No section","default dropdown option for selecting a board section on pin edit"))))}var L=n("fFvW"),A=n("US6J"),M=n("VSY/");function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const F=6;function N(e,t){const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){B(e,t,n[t])})}return e}({},Object(A.b)(e),{id:String(t)});return i.createElement(L.a,{pinItem:n,index:t})}function U({storyPinData:e,canEdit:t,onClick:n}){const a=e.pages,o=a.length,r=o-F>1;return i.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(O.J,{size:"sm"},y.a._("Pages"))),i.createElement(O.b,{xs:{column:12},md:{column:8},display:"flex"},i.createElement(O.O,{onTouch:n,fullWidth:!1,shape:"rounded"},i.createElement(O.b,{display:"flex"},a.slice(0,F).map((e,t)=>i.createElement(O.b,{marginRight:2,key:`story-pin-page-${e.id}`},N(e,t))),o>F&&i.createElement(O.b,{position:"relative"},N(a[F],F),r&&i.createElement(O.b,{position:"absolute",color:"transparentDarkGray",top:!0,column:12,height:"100%",shape:"rounded",display:"flex",alignItems:"center",justifyContent:"center"},i.createElement(O.J,{color:"white",bold:!0},Object(M.i)(y.a._("+{{ pageCount }}","+N count, indeicating there are N more pages in Story Pin"),{pageCount:o-F}))))))))}function z({canEdit:e,onTitleChange:t,title:n,errorMessage:a}){return i.createElement(i.Fragment,null,i.createElement(O.i,null),i.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(O.p,{htmlFor:"TitleField"},i.createElement(O.J,{size:"sm"},y.a._("Title","Label for editing title of pin")))),i.createElement(O.b,{xs:{column:12},md:{column:8}},e?i.createElement(i.Fragment,null,i.createElement(O.b,null,i.createElement(O.L,{id:"TitleField",value:n,onChange:t,hasError:(a||"").length>0})),!!a&&i.createElement(O.b,{justifyContent:"center"},i.createElement(T.a,{errorMessage:a,htmlFor:"pin-edit-title"}))):i.createElement(O.b,{xs:{column:12},md:{column:8},paddingY:2},i.createElement(O.J,{bold:!0,size:"sm"},n)))))}function H({onChangeWebsite:e,link:t,errorMessage:n}){return i.createElement(i.Fragment,null,i.createElement(O.i,null),i.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},i.createElement(O.p,{htmlFor:"WebsiteField"},i.createElement(O.J,{size:"sm"},y.a._("Website")))),i.createElement(O.b,{xs:{column:12},md:{column:8}},i.createElement(O.b,null,i.createElement(O.L,{id:"WebsiteField",value:t,onChange:e,hasError:(n||"").length>0})),!!n&&i.createElement(O.b,{justifyContent:"center"},i.createElement(T.a,{errorMessage:n,htmlFor:"pin-edit-website"})))))}var V=n("4+0X"),G=n("ePT2"),W=n("SMmS"),Y=n("CAUj"),q=n("UmN8"),J=n("NmcB"),$=n("3Wjl"),Q=n("JsRk"),K=n("9Y9K"),X=n("J+kV"),Z=n("t3w/"),ee=n("7Iyi");function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){ne(e,t,n[t])})}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){return Boolean(e&&e.trim().length)}function ae(e,t){const n=ie(e),i=ie(t);return(n||i)&&e!==t}const oe=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object(K.compose)(Q.withRouter,Object(W.b)({name:"PinResource",options:e=>oe(e.pinId,!0)}),Object(o.connect)(function(e,t){const n=e.advertiser,i=e.viewer;return i.isAuth&&n&&n.owner_user_id!==i.id?{advertiser_id:n.id}:{}},e=>({invalidatePinResource:t=>e(Object(ee.f)("PinResource",oe(t,!0))),changeBoardPinCount:t=>e(Object(Y.d)(t)),changeUserPinCount:t=>e(Object($.a)(t)),completeResourceFetch:t=>e(Object(ee.b)("PinResource",oe(t.id,!1),t)),pinMoved:Object(K.bindActionCreators)(Z.b,e)})))(class extends i.Component{constructor(...e){super(...e),ne(this,"state",{board:this.props.data&&this.props.data.board||null,commentsDisabled:this.props.data&&this.props.data.comments_disabled||!1,description:this.props.data&&this.props.data.description.trim()||"",apiErrorMessage:null,link:this.props.data&&this.props.data.link||"",photosDisabled:this.props.data&&this.props.data.did_it_disabled||!1,sectionId:this.props.data&&this.props.data.section&&this.props.data.section.id||null,sectionName:this.props.data&&this.props.data.section&&this.props.data.section.title||null,showDeleteConfirmation:!1,carousel_data:this.props.data&&this.props.data.carousel_data||null,title:this.props.data&&this.props.data.title||"",userNote:this.props.data&&this.props.data.unified_user_note&&this.props.data.unified_user_note.trim()||"",isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:this.props.data&&this.props.data.carousel_data&&this.props.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1}),ne(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),ne(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),ne(this,"updateCarouselSlotIndex",()=>{const e=this.props.carouselSlotCurrentIndex;this.setState({currentIndex:void 0!==e?e:this.props.data&&this.props.data.carousel_data&&this.props.data.carousel_data.index||0})}),ne(this,"handleBoardChange",e=>{const t=this.state.board.id;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),ne(this,"createBoard",e=>{const t=this.state.board;!t.id&&t.name&&e&&(0,this.props.dispatch)(Object(h.a)(t.name,e)).then(e=>{if(this._isMounted){const t=this.state,n=t.sectionId,i=t.sectionName;!n&&i?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}),ne(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:m.a.BoardPrivacy.PUBLIC};this.setState({board:t,sectionId:null,sectionName:null})}),ne(this,"createSection",()=>{const e=this.state,t=e.board,n=e.sectionName;if(!n)return;if(!t.id)return void this.createBoard();const i={boardId:t.id,name:n};(0,this.props.dispatch)(Object(g.a)(i)).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(e=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:e.message})})}),ne(this,"handleSectionCreateClick",e=>{0!==e.length&&this.state.board&&this.setState({sectionId:null,sectionName:e})}),ne(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),ne(this,"handleDeletePin",()=>{const e=this.props,t=e.data,n=e.pinId,i=e.onDelete,a=e.onHide,o=e.changeBoardPinCount,r=e.changeUserPinCount,s=e.advertiser_id,l=te({},s?{advertiser_id:s}:{},{id:n});return G.a.create("PinResource",l).callDelete().then(()=>{if(this._isMounted){const e=t.board.id,s=t.pinner.id,l=t.section;o({boardId:e,sectionId:l&&l.id||void 0,increment:-1}),r({userId:s,increment:-1}),V.a.instance.publish(e,"pinDeleted",n),V.a.instance.publish(s,"pinDeleted"),V.a.instance.publish(n,"pinDeleted"),a(),i&&i()}})}),ne(this,"sanitizeCarouselData",e=>{let t=this.state.carousel_data;if(e&&(t=e),t){const e=t.carousel_slots;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)}),t}}return null}),ne(this,"triggerBoardAndSectionCreate",e=>()=>{const t=this.state,n=t.board,i=t.sectionId,a=t.sectionName;!n.id&&n.name?this.createBoard(e):!i&&a?this.createSection():this.handleSave()}),ne(this,"handleSave",()=>{this.setState({isProcessing:!0});const e=this.props,t=e.advertiser_id,n=e.pinId,i=this.state,a=i.carousel_data,o=i.shouldShowValidationLinkFormatError;let r;if(a){const e=this.sanitizeCarouselData();e&&(r=JSON.stringify(e))}const s=this.props,l=s.data,c=l.board,d=l.comments_disabled,u=l.did_it_disabled,p=l.title,m=l.description,h=l.link,g=l.section,b=l.carousel_data,y=s.invalidatePinResource,v=s.completeResourceFetch,w=s.onHide,E=this.state,_=E.board,C=void 0===_?c:_,O=E.commentsDisabled,S=E.currentIndex,x=E.photosDisabled,k=E.title,I=E.description,P=E.sectionId,T=E.carousel_data,j=o?h:this.state.link,R=te({board_id:C.id,board_section_id:P,carousel_data_json:r,description:I,disable_comments:O,disable_did_it:x,id:n,link:j,title:k},t?{advertiser_id:t}:{}),D=g&&g.id||null,L=C.id,A=c.id,M=A!==L,B=(Boolean(D)||Boolean(P))&&D!==P,F=ae(p,k),N=ae(m,I),U=ae(h,j),z=Boolean(T)&&Boolean(b)&&!f()(T,b);M||B||F||N||U||z||d!==O||u!==x?G.a.create("PinResource",R).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const t=this.props,n=t.changeBoardPinCount,i=t.onSubmit,a=t.pinId,o=t.pinMoved,r=t.view,s=t.viewParameter;(M||B)&&L&&A&&(o({selectedPinIds:[a],source:{boardId:A,sectionId:D},target:{boardId:L,sectionId:P}}),n({boardId:L,sectionId:P||void 0,increment:1}),n({boardId:A,sectionId:D||void 0,increment:-1})),i&&L&&C.url&&i({boardId:L,title:C.name,sectionId:P,url:C.url}),w(),y(a);const l=e.data;l.carousel_data&&(l.carousel_data.index=S),v(l);const c={};c.objectId=a,M&&(c.board_was_modified=!0),!M&&B&&(c.board_section_was_modified=!0),N&&(c.original_pin_description=m,c.edited_pin_description=I),z&&(c.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(b)),c.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(T))),Object(J.a)(2,te({component:208,view:r,viewParameter:s},c))}}).catch(()=>{const e=this.state,t=e.shouldShowValidationTitleError,n=e.shouldShowValidationDescriptionError,i=e.shouldShowValidationLinkFormatError;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!t&&!n&&!i})}):(w(),y(n)),this.setState({isProcessing:!1})}),ne(this,"handleTextChanges",(e,t)=>{const n=this.state.carousel_data;if(!n)return;const i=d()(n),a=i.carousel_slots,o=void 0===a?[]:a,r=this.state,s=r.currentIndex,l=r.shouldApplyTextToAll,c=r.description,u=r.link,p=r.title,m=this.valueIsValidForType(e,t);switch(l?o.forEach(n=>n[t]=e):o[s]&&(o[s][t]=e),t){case"details":const n=0===s?e:c;this.setState({description:n,carousel_data:i||null,shouldShowValidationDescriptionError:!m,shouldShowGenericUpdateError:!1});break;case"link":const a=0===s?e:u;this.setState({link:a,carousel_data:i||null,shouldShowValidationLinkFormatError:!m,shouldShowGenericUpdateError:!1});break;case"title":const r=0===s?e:p;this.setState({title:r,carousel_data:i||null,shouldShowValidationTitleError:!m,shouldShowGenericUpdateError:!1})}}),ne(this,"handleDescriptionChange",({value:e})=>{const t=this.valueIsValidForType(e,"description");this.setState({description:e,userNote:e,shouldShowValidationDescriptionError:!t,shouldShowGenericUpdateError:!1})}),ne(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),ne(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),ne(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),ne(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(X.f)([Object(X.e)({message:y.a._("Not a valid url.","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;default:return!0}}),ne(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),ne(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),ne(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),ne(this,"handlePhotoChange",e=>this.setState({photosDisabled:!e.value})),ne(this,"handleShouldApplyToAll",e=>{if(e){const t=this.state,n=t.currentIndex,i=t.carousel_data;if(!i)return;const a=d()(i),o=a.carousel_slots,r=o[n],s=r.details,l=r.link,c=r.title;o.forEach(e=>{e.details=s,e.title=c,e.link=l}),this.setState({carousel_data:a,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),ne(this,"handleCarouselSlider",e=>{const t=this.state.carousel_data,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})}),ne(this,"handleClickStoryPinPages",()=>{const e=this.props,t=e.data;e.router.push(`/story-pin-builder/${t.id}/edit`)}),ne(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),ne(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}UNSAFE_componentWillReceiveProps(e){const t=e.data,n=e.carouselSlotCurrentIndex;t&&this.setState({board:t.board,commentsDisabled:t.comments_disabled,description:t.description&&t.description.trim(),link:t.link,photosDisabled:t.did_it_disabled,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,userNote:t.unified_user_note,carousel_data:t.carousel_data,currentIndex:void 0!==n?n:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1})}componentWillUnmount(){this._isMounted=!1}generateIndexIndicator(){const e=this.state,t=e.currentIndex,n=e.carousel_data,i=n&&n.carousel_slots&&n.carousel_slots.length||1;return i<2?"":a.a.createElement(O.b,{direction:"row",padding:2},a.a.createElement(O.p,{htmlFor:"CardsIndex"},a.a.createElement(O.J,{size:"sm"},t+1,"/",i)))}render(){const e=this.props,t=e.data,n=e.disableDelete,i=e.onHide,o=e.resourceLoaded,c=e.pinId,d=e.inUserNoteExp,m=this.state,h=m.apiErrorMessage,g=m.board,b=m.commentsDisabled,f=m.description,w=m.link,_=m.photosDisabled,C=m.sectionId,S=m.sectionName,x=m.showDeleteConfirmation,I=m.title,R=m.userNote,L=m.isProcessing,A=m.carousel_data,M=m.shouldApplyTextToAll,B=m.currentIndex,F=m.shouldDisableSave,N=m.shouldShowCarouselSliders,V=m.shouldShowValidationTitleError,G=m.shouldShowValidationDescriptionError,W=m.shouldShowValidationLinkFormatError,Y=m.shouldShowGenericUpdateError,J=A&&A.carousel_slots&&A.carousel_slots.length>0&&A.carousel_slots[B]||{},$=J.details,Q=void 0===$?"":$,K=J.link,X=void 0===K?"":K,Z=J.title,ee=void 0===Z?"":Z;if(x)return a.a.createElement(k,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const te=!(!t||!t.story_pin_data_id),ne=A&&A.carousel_slots&&A.carousel_slots.length>1,ie=ne?y.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins"):y.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin"),ae=ne?y.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins"):y.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin"),oe=ne?y.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins"):y.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin"),re=ne?y.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):y.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin"),se=t&&(t.access||[]).includes("write")||this.props.canEdit,le=e=>se&&!t.is_repin&&!(t.aggregated_pin_data&&t.aggregated_pin_data.is_shop_the_look)&&!te&&(ne||!A)&&(t.native_creator&&t.native_creator.id===e.id||ne&&t.pinner.id===e.id||t.link_domain&&t.link_domain.official_user&&t.link_domain.official_user.id===e.id||!!t.domain&&t.pinner&&t.pinner.domain_url&&t.pinner.domain_url.includes(t.domain)),ce=e=>d&&!le(e),de=e=>ce(e)?oe:ae,ue=e=>ne?Q:ce(e)?R:f;return a.a.createElement(v.b,{accessibilityCloseLabel:y.a._("Close","Accessible label for button to close edit pin modal"),heading:y.a._("Edit this Pin","Edit a previously saved pin"),accessibilityModalLabel:y.a._("Edit your previously saved pin","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:i,footer:a.a.createElement(O.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},a.a.createElement(O.b,null,a.a.createElement(E.a,{id:"delete-pin-button"},a.a.createElement(O.c,{text:y.a._("Delete"),onClick:this.onClickDeleteButton,disabled:n}))),Y&&a.a.createElement(O.b,{display:"flex",marginLeft:2,marginTop:2,justifyContent:"center"},a.a.createElement(T.a,{errorMessage:h||y.a._("Sorry! There was an error editing your Pin.","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),a.a.createElement(p.a,null,e=>a.a.createElement(O.b,{display:"flex",justifyContent:"between",marginLeft:-2,marginRight:-2},a.a.createElement(O.b,{paddingX:2},a.a.createElement(O.c,{text:y.a._("Cancel"),onClick:i})),a.a.createElement(O.b,{paddingX:2,"data-test-id":"edit-pin-save"},a.a.createElement(O.c,{text:y.a._("Save"),color:"red",onClick:this.triggerBoardAndSectionCreate(e),disabled:F})))))},!o||L?a.a.createElement(O.b,{paddingX:12,paddingY:9},a.a.createElement(O.F,{accessibilityLabel:y.a._("loading","Accessible label for the edit pin loading icon"),show:!0})):a.a.createElement(p.a,null,e=>a.a.createElement(O.b,{md:{display:"flex"},justifyContent:"between",minHeight:350},a.a.createElement(O.b,{xs:{column:12},md:{column:9}},a.a.createElement(P,{board:g||t.board,canEdit:se,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),a.a.createElement(D,{board:g||t.board,canEdit:se,currentSection:t.section,onSectionChange:this.handleSectionChange,sectionId:C,sectionName:S,onSectionCreate:this.handleSectionCreateClick}),ce(e)?null:a.a.createElement(z,{canEdit:se,onTitleChange:ne?this.handleCarouselTitleChange:this.handleTitleChange,title:ne?ee:I,errorMessage:V?ie:""}),d&&t.pinner.id!==e.id?null:a.a.createElement(j,{canEdit:se,description:ue(e)||"",errorMessage:G?de(e):"",label:ce(e)?y.a._("Note","Label for editing user note"):y.a._("Description","Label for editing description"),placeholder:ce(e)?y.a._("Write a note about this Pin...","Placeholder for editing user note"):y.a._("Tell us about this Pin...","Placeholder for editing description"),onDescriptionChange:ne?this.handleCarouselDetailsChange:this.handleDescriptionChange}),le(e)&&a.a.createElement(H,{link:ne?X:w,onChangeWebsite:ne?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:W?re:""}),ne&&a.a.createElement(O.b,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},a.a.createElement(O.b,{paddingY:2},a.a.createElement(O.p,{htmlFor:"applyTextToAll"},a.a.createElement(O.J,null,y.a._("Apply text to all","Apply title, description, link to all cards")))),a.a.createElement(O.b,{paddingX:2,paddingY:2},a.a.createElement(O.H,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:M}))),a.a.createElement(q.a,{name:"web_pin_builder_story_pin",activate:!0},({anyEnabled:n})=>{const i=t.native_creator,o=i&&i.id===e.id;return te&&n&&o&&a.a.createElement(O.b,null,a.a.createElement(U,{storyPinData:t.story_pin_data,canEdit:se,onClick:this.handleClickStoryPinPages}))}),t.can_delete_did_it_and_comments&&a.a.createElement(u.a,{commentsDisabled:b,onCommentChange:this.handleCommentChange,onPhotoChange:this.handlePhotoChange,photosDisabled:_})),a.a.createElement(O.b,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},ne?this.generateIndexIndicator():"",a.a.createElement(O.t,{width:236},a.a.createElement(O.b,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},a.a.createElement(O.t,{shape:"rounded",wash:!0},ne&&N&&a.a.createElement(O.b,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},a.a.createElement(l.a,{handleCarouselSwipe:this.handleCarouselSlider,carouselIndex:B,carousel_data:A,pinId:c,isEditMode:!0})),ne?a.a.createElement(r.a,{carouselIndex:B,isCloseup:!1,carousel_data:A,pinId:c,isEditMode:!0}):a.a.createElement(O.o,{alt:f,color:"#efefef",naturalHeight:t.images["474x"].height,src:t.images["474x"].url,naturalWidth:t.images["474x"].width})),ne&&a.a.createElement(s.a,{carouselIndex:B,carousel_data:A,pinId:c,handleCarouselSwipe:this.handleCarouselSlider,isEditMode:!0,variant:"legacy"})))))))}})},owVk:function(e,t,n){var i=n("GyhR"),a=n("oFGA"),o=n("ztFR"),r=n("Fpqi");function s(e){const t=e.children,n=e.log;return Object(i.useEffect)(()=>{if(n){const e=o.a.fromPlainObject(n);e.setEventType(13),e.setRequestIdentifier(a.a.initialPageContext.PAGE_LOAD_REQUEST_IDENTIFIER),r.a.getInstance().addEvent(e)}},[]),t||null}n("YSek");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){const t=e.name,n=e.upwtActionName,a=e.resourceDependencies,o=void 0===a?()=>[]:a,r=e.routeContextLog,c=void 0===r?(e,t,n)=>null:r,d=e.metatagResource,u=void 0===d?()=>null:d,p=e.placementId,m=void 0===p?null:p,h=e.redirect,g=void 0===h?()=>null:h,b=e.getRenderError,f=void 0===b?()=>null:b;return function(e){var a,r;return r=a=class extends i.Component{render(){const t=this.props,n=t.params,a=t.location,o=void 0===a?{}:a,r=(this.props.route||{}).legacy_server_context;return i.createElement(s,{log:c(r||{},n||{},o||{})},i.createElement(e,this.props))}},l(a,"WrappedComponent",e),l(a,"routeName",t),l(a,"upwtActionName",n),l(a,"placementId",m),l(a,"displayName","StaticRouteData"),l(a,"getMetatagResource",u),l(a,"getContextLog",c),l(a,"getResourceDependencies",o),l(a,"getRedirect",g),l(a,"getRenderError",f),r}}n.d(t,"a",function(){return c})},p968:function(e,t,n){n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return m});var i=n("Qo1m");const a=function(e){return i.a.getPluralFunction(e)},o=function(e,t,n,i,a="symbol"){const o={maximumFractionDigits:e,minimumFractionDigits:t};return n&&(o.style=n,"currency"===n&&(o.currency=i,o.currencyDisplay=a)),o},r=function(e,t){const n=t||0,i=Math.pow(10,n),a=+(n?e*i:e).toFixed(8),o=Math.floor(a),r=a-o,s=r>.5-1e-8&&r<.5+1e-8?o%2==0?o:o+1:Math.round(a);return n?s/i:s},s={USD:"$",GBP:"£",CAD:"$",EUR:"€",AUD:"A$",NZD:"NZ$",SEK:"kr",NOK:"kr",DKK:"kr"};function l(e,t,n,i,a,r,s){const l=o(n,i,a,r,s);return t.toLocaleString([e],l)}function c(e,t,n){let a,o;const s=n&&n.style||void 0,c=n&&n.shortform||!1,d=n&&n.uplimit||void 0,u=n&&n.currency||void 0;if(d&&t>d)return`${d}+`;if("currency"===s?(a=void 0===n||void 0===n.maximum_fraction_digits?2:n.maximum_fraction_digits,o=void 0===n||void 0===n.minimum_fraction_digits?2:n.minimum_fraction_digits):(a=void 0===n||void 0===n.maximum_fraction_digits?0:n.maximum_fraction_digits,o=void 0===n||void 0===n.minimum_fraction_digits?0:n.minimum_fraction_digits),c&&t>999&&(a=void 0===n||void 0===n.shortform_maximum_fraction_digits?2:n.shortform_maximum_fraction_digits,o=0),a<o)return String(t);let p=t,m="";const h=[{"100M":{value:1e8,localeKey:i.a._("億","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.")}},{"10k":{value:1e4,localeKey:i.a._("万","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.")}}],g=[{b:{value:1e9,localeKey:i.a._("b","Abbreviation for one billion.")}},{m:{value:1e6,localeKey:i.a._("m","Abbreviation for one million.")}},{k:{value:1e3,localeKey:i.a._("k","Abbreviation for one thousand.")}}],b=/^zh|ja|ko/.test(e);if(c&&t>999){const e=b?h:g;for(let n=0;n<e.length;n+=1){const i=Object.keys(e[n])[0],o=e[n][i].value;if(t>=o){p=r(t/o*Math.pow(10,a))/Math.pow(10,a),m=e[n][i].localeKey;break}}}return l(e,p,a,o,s,u||void 0)+m}const d={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH_DAY:"short_month_day"},u=function(e){return 1.1.toLocaleString(e).substring(1,2)},p=function(e,t){return","===u(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},m=function(e,t){return","===u(t)&&e?e.replace(",","."):e},h={DateFormatType:d,formatDate:function(e,t,n,i=!0){if(n===d.YEAR)return(t.getYear()+1900).toString();{let a;switch(n){case d.LONG:a={year:"numeric",month:"long",day:"numeric"};break;case d.NUMERIC:a={year:"numeric",month:"numeric",day:"numeric"};break;case d.WEEKDAY_DATE:a={weekday:"long",month:"long",day:"numeric",year:"numeric"};break;case d.SHORT_WEEKDAY_DATE:a={weekday:"short",month:"numeric",day:"numeric"};break;case d.MONTH_DAY:a={month:"long",day:"numeric"};break;case d.SHORT_MONTH_DAY:a={month:"short",day:"numeric"};break;case d.LONG_MONTH_YEAR:a={month:"long",year:"numeric"};break;default:throw new Error('invalid dateFormatType "'+n+'"')}return i&&(a.timeZone="UTC"),IntlPolyfill.__disableRegExpRestore(),new IntlPolyfill.DateTimeFormat(e,a).format(t)}},ngettext:function(e,t,n,o){const r=+a(e)(o);let s;return s="en-US"===e&&1===r?n:t,i.a._(s,"",r)},prettyNumberFormat:c,numberFormat:l,currencySymbols:s,localizeCurrencyValue:p,unlocalizeCurrencyValue:m};t.b=h},pMx3:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=(n("ix1w"),n("ckdM")),r=n("Qo1m"),s=n("d9lF"),l=n("I3yW"),c=n("+U6O");const d=5;t.a=class extends a.a.Component{componentDidMount(){const e=this.props.handleScroll;window.addEventListener("scroll",e)}componentWillUnmount(){const e=this.props.handleScroll;window.removeEventListener("scroll",e)}render(){const e=this.props,t=e.onClick,n=e.showShadow?"BackButtonShowShadow":"BackButtonHideShadow";return a.a.createElement(o.a,{position:"fixed",style:{zIndex:l.a,width:60}},a.a.createElement(c.b,{"data-test-id":"back-button",left:!0,marginLeft:6,marginTop:d,padding:1,position:"fixed"},a.a.createElement(s.a,{accessibilityLabel:r.a._("Back button","Button to navigate back to the previous page"),icon:"M24 12a2 2 0 0 1-2 2H7.676l4.631 4.586a2 2 0 1 1-2.829 2.828L0 12l9.478-9.414a2 2 0 0 1 2.829 2.828L7.676 10H22a2 2 0 0 1 2 2",isSVG:!0,onClick:t,shadowType:n})))}}},phkz:function(e,t,n){},pjsG:function(e,t,n){n.r(t);var i=n("DUYC");const a={navigate(e,t){i.a.instance.navigate(e,t)}};t.default=a},plGG:function(e,t,n){var i=n("GyhR");class a{static factory(e){return e instanceof a?e:new a(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}n("Y6Z1");var o=n("hvnN"),r=n.n(o);function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function l(e){const t=e.css,n=e.unsafeCSS,o=s(e,["css","unsafeCSS"]),r=String(t||"")||n||"";return!!r?i.createElement("style",Object.assign({},o,{dangerouslySetInnerHTML:{__html:String(a.factory(r))}})):null}n.d(t,"a",function(){return l}),l.propTypes={"amp-boilerplate":r.a.string,"amp-custom":r.a.string,css:r.a.instanceOf(a),unsafeCSS:r.a.string}},"q+IY":function(e,t,n){n.d(t,"a",function(){return y});var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("vI2X"),s=n("Qo1m"),l=n("A7Du"),c=n("Y2BC"),d=n("9Y9K"),u=n("OUI7"),p=n("CpsV"),m=n("cSL5"),h=n("+U6O");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b="NO_SECTION_VALUE";function f({section:e,hovered:t,searchQuery:n}){return a.a.createElement(h.b,null,a.a.createElement(h.b,{color:t?"lightGray":"white",display:"flex",padding:2,shape:"rounded"},a.a.createElement(h.b,{flex:"grow"},a.a.createElement(h.J,{bold:!0},Object(p.b)(n,e.title)))),e.id===b&&a.a.createElement(h.i,null))}const y=class extends i.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:""}),g(this,"getPickerSections",()=>{const e=this.state.searchQuery,t=this.props,n=t.sectionsResource,i=t.mergingFromSectionId;let a=n&&n.data||[];return a=i?a.filter(e=>e.id!==i):[{id:b,title:s.a._("No section","default dropdown option for selecting a board section on pin edit")},...a],e.length>=m.a&&(a=Object(u.a)(a,e,"title")),[{items:a}]}),g(this,"createBtnDisabled",()=>{const e=this.props.sectionsResource,t=this.state.searchQuery;return!(!e||!e.data)&&e.data.some(e=>e.title.toLowerCase()===t.toLocaleLowerCase())}),g(this,"handleSectionCreate",()=>{const e=this.props,t=e.board,n=e.onSectionChange,i=e.sectionsResource,a=e.dispatch,o=e.onSectionCreate,s=this.state.searchQuery;o?o(s):a&&t.id&&a(Object(r.a)({boardId:t.id,name:s})).then(e=>{i&&i.refreshData(),this.setState({searchQuery:""}),n(e)})}),g(this,"handleSectionSelected",e=>{const t=this.props.onSectionChange;e.id===b?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),g(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),g(this,"renderRow",({item:e,hovered:t})=>{const n=this.state.searchQuery;return a.a.createElement(f,{section:e,hovered:t,searchQuery:n})})}componentDidUpdate(e){const t=e.selectedSectionId;if(this.props.selectedSectionId!==t){const e=this.props.sectionsResource;e&&e.refreshData()}}render(){const e=this.props,t=e.sectionsResource,n=e.selectedSectionId,i=e.mergingFromSectionId,o=e.selectedSectionName,r=this.state.searchQuery;let c=i?s.a._("Pick a section","default dropdown option for selecting a board section to merge to"):s.a._("No section","default dropdown option for selecting a board section on pin edit");if(n){let e;t&&t.data&&(e=t.data.find(e=>e.id===n)),c=e&&e.title||c}else o&&(c=o);return a.a.createElement(h.b,null,a.a.createElement(h.F,{accessibilityLabel:s.a._("loading section picker","accessibility text for loading spinner"),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&a.a.createElement(l.a,{dropdownValue:c,onCreate:i?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getPickerSections(),createBtnDisabled:this.createBtnDisabled()}))}};t.b=Object(d.compose)(Object(o.connect)(),Object(c.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})},{allowStale:!1}))(y)},qE0g:function(e,t,n){n.r(t);var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("m2OL"),s=n("2LZR"),l=n("Qo1m"),c=n("/mke"),d=n("wSOZ"),u=n("LCmp"),p=n("IaXd"),m=n("UmN8"),h=n("wHKh"),g=n("aaO7"),b=n("zBQm"),f=n("yJaP"),y=n("+U6O");function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const w=50,E=60;t.default=Object(o.connect)(function({experiences:e}){return{isHomefeedContextualMenuTooltipExperience:e&&e.eligibleExperiences&&e.eligibleExperiences[1000116]&&501093===e.eligibleExperiences[1000116].experience_id}},function(e,{pin:t}){return{hidePinFeedbackOverlay:()=>{e(Object(g.c)(t.id))}}})(function({feedbackData:e,feedbackType:t,hidePinFeedbackOverlay:n,isHomefeedContextualMenuTooltipExperience:o,pin:g,pinTitle:_,setForcePrimary:C,transparentBackground:O}){const S=Object(f.b)(),x=S.slotIndex,k=S.viewParameter,I=S.viewType,P=v(Object(i.useState)(!1),2),T=P[0],j=P[1],R=v(Object(i.useState)(),2),D=R[0],L=R[1],A=g.ad_match_reason,M=g.board,B=g.category,F=g.description,N=g.id,U=void 0===N?"":N,z=g.images,H=g.is_promoted,V=g.pinner,G=g.promoter,W=g.recommendation_reason,Y=g.source_interest,q=g.videos;var J;const $=(J=H?E:w,function(e=""){return Object(u.a)(e.trim(),J)})(F),Q=Object(s.a)(z,"236x"),K=Object(b.i)(q),X=Object(p.a)(101,{component:0,element:981,feedback_type:t,objectId:U}),Z=()=>{C(!1),n(),j(!1)},ee=()=>{T&&Z()},te=1===x&&o;return a.a.createElement(a.a.Fragment,null,a.a.createElement(y.b,{ref:L},a.a.createElement(c.a,{accessibilityLabel:l.a._("More information","accessibility label for overflow menu button"),bgColor:O?"transparent":"white",icon:"ellipsis",iconColor:"darkGray",iconSize:12,onClick:({event:e})=>{T?Z():(C(!0),j(!0)),X()},size:"sm"})),T&&a.a.createElement(y.q,null,a.a.createElement(y.j,{anchor:D,idealDirection:"right",onDismiss:Z,positionRelativeToAnchor:!1,size:"md"},a.a.createElement(m.a,{name:"web_homefeed_control_contextual_menu_v2"},({anyEnabled:n})=>a.a.createElement(d.a,{ad_match_reason:A,bestPinImgSrc:Object(h.j)(g),board:M,feedbackData:e,feedbackType:t,hideDownload:K,isContextMenuV2Exp:n,isHomefeedContextualMenuTooltip:te,onLinkClick:ee,onHide:Z,pinCategory:B,pinDescription:$,pinId:U,pinImgSrc:Q,pinner:V,pinTitle:_,promoter:G,recommendationReason:W,reportPin:Object(r.a)({pin:g,viewParameter:k,viewType:I}),sourceInterest:Y,viewParameter:k,viewType:I})))))})},qFs9:function(e,t,n){var i=n("GyhR");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t,n;return n=t=class extends i.Component{constructor(...e){super(...e),a(this,"makeCancelablePromise",(e,t)=>{if(t){const e=this.cancelCallbackMap[t];e&&(e(),delete this.cancelCallbackMap[t])}const n=function(e){let t=!1;return{promise:new Promise((n,i)=>{e.then(e=>t?i({isCanceled:!0}):n(e),e=>i(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}(e),i=n.cancel,a=n.promise;return t?this.cancelCallbackMap[t]=i:this.cancelCallbacks.push(i),a}),a(this,"cancelCallbacks",[]),a(this,"cancelCallbackMap",{})}componentWillUnmount(){[...Object.keys(this.cancelCallbackMap).map(e=>this.cancelCallbackMap[e]),...this.cancelCallbacks].forEach(e=>e()),this.cancelCallbacks=[],this.cancelCallbackMap={}}render(){return i.createElement(e,Object.assign({},this.props,{makeCancelablePromise:this.makeCancelablePromise}))}},a(t,"displayName",`WithPromiseCancellation(${e.displayName||e.name})`),n}n.d(t,"a",function(){return o})},qQ1r:function(e,t,n){t.a={green:"#0fa573",pine:"#0a6955",olive:"#364a4c",blue:"#4a90e2",navy:"#004b91",midnight:"#133a5e",purple:"#b469eb",orchid:"#8046a5",eggplant:"#5b2677",maroon:"#6e0f3c",watermelon:"#f13535",orange:"#e3780c",darkGray:"#333",gray:"#8e8e8e",lightGray:"#efefef",red:"#e60023",white:"#fff"}},qhkc:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Qo1m");t.a=function(e){return a.a.createElement("div",{className:"errorMessage"},a.a.createElement("div",{className:"standaloneErrorPage"},a.a.createElement("div",null,o.a._("Whoops! We couldn’t find that page."))))}},rQW8:function(e,t,n){n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"j",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"i",function(){return u}),n.d(t,"h",function(){return p}),n.d(t,"e",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"c",function(){return f}),n.d(t,"f",function(){return y});var i=n("nCsZ");const a=6e4,o=60*a,r=24*o,s=30*r,l=365*r,c=e=>{const t=new Date(e)-new Date,n=Math.abs(t);return{year:Math.floor(n/l),month:Math.floor(n%l/s),day:Math.floor(n%s/r),hour:Math.floor(n%r/o),minute:Math.floor(n%o/a),milli:t,ms:n}},d=(e,t)=>{const n=new Date(e);return n.setDate(e.getDate()+t),n},u=(e,t)=>{const n=t.getUTCDate()-e,i=new Date(t);return i.setUTCDate(n),i},p=(e,t)=>{return e.getTime()>t.getTime()},m=e=>/^\d{4}$/.test(e),h=e=>/^\d{2}\/\d{2}\/\d{4}$/.test(e),g=e=>{if(!m(e)&&!h(e))return-1;const t=new Date(e);if(!Object(i.a)(t))return-1;const n=t.toISOString().substr(0,10);return new Date(n).getTime()/1e3},b=(e,t)=>{if(!m(e)&&!h(e))return!1;const n=new Date;if(!Object(i.a)(n))return!1;if(!m(e)){const i=new Date(n.getFullYear()-t,n.getMonth(),n.getDate());return new Date(e)<=i}const a=n.getFullYear()-t-1;return new Date(e).getFullYear()<=a},f=e=>{const t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},y=e=>e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},rSK6:function(e,t,n){var i=n("QJ2d"),a=n("JU/q");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=e=>e.length>32?`${e.substring(0,32).trim()}...`:e;t.a=(({i18n:e,interpolateNamedTemplate:t,isContextMenuV2Exp:n})=>({getLearnMoreUrl:e=>{switch(e){case 1:return i.a.settings.HELP_PROMOTED_PINS_RETARGETED_PIN_URL;case 2:case 3:return i.a.settings.HELP_PROMOTED_PINS_LOOKALIKE_TARGETING_URL;default:return i.a.settings.HELP_PROMOTED_PINS_URL}},getRecommendationDescription:({ad_match_reason:i,board:a,feedbackType:o,makeNavigateLink:s,pinner:l,promoter:c,recommendationReason:d,sourceInterest:u})=>{switch(o){case"pfy":return n?e._("This Pin was inspired by your recent activity","Pin feedback reason"):e._("This Pin is inspired by your recent activity.","Pin feedback reason");case"pfyBoard":const p=d.board,m=p.name,h=s("navigation",p.url,m);return t(n?e._("This Pin was inspired by your board {{ boardLink }}","Pin feedback - inspired by your board"):e._("This Pin is inspired by your board {{ boardLink }}.","Pin feedback - inspired by your board"),{boardLink:h});case"topic":const g=u.name,b=s("topicUrl",`/topics/${u.url_name}`,g);return t(n?e._("This Pin was inspired by {{ formattedTopic }}","Pin feedback"):e._("You’re seeing this Pin because you follow the Topic {{ formattedTopic }}.","Pin feedback"),{formattedTopic:b});case"followed":const f=`/${l.username}`,y=s("boardUrl",a.url,r(a.name)),v=s("pinnerUrl",f,r(l.full_name));let w;return w=n?l.explicitly_followed_by_me?t(e._("This Pin is from {{ formattedPinner }}, a profile you follow","Pin feedback"),{formattedPinner:v}):t(e._("This Pin is from {{ formattedBoard }}, a board you follow","Pin feedback"),{formattedBoard:y}):l.explicitly_followed_by_me?t(e._("You’re seeing this Pin because you follow {{ formattedPinner }}’s Board {{ formattedBoard }}.","Pin feedback"),{formattedPinner:v,formattedBoard:y}):t(e._("You’re seeing this Pin because you follow the Board {{ formattedBoard }}.","Pin feedback"),{formattedBoard:y});case"promoted":switch(i){case 1:case 2:case 3:return n?e._("This ad was personalized for you using info from one of our partners","Pin feedback"):e._("This ad was personalized for you using info from one of our partners.","Pin feedback");default:const a=c.full_name,o=c.username,r=s("promotedLink",o?"/"+o+"/":"/",a);return t(n?e._("{{ promoterLink }} paid to have this Pin show up where\n                you’d be more likely to notice it","Pin feedback"):e._("{{ promoterLink }} paid to have this Pin show up where\n                you’d be more likely to notice it.","Pin feedback"),{promoterLink:r})}default:return null}},getFeedbackType({board:e,feedback:t,viewParameter:n,pin:{promoter:i,is_downstream_promotion:a,recommendation_reason:o},pinner:r}){const s=t&&t.type;return i&&!a?"promoted":s||(o?"FOLLOWED_INTEREST"===o.reason?"topic":o.board?"pfyBoard":"pfy":e&&e.followed_by_me||r&&r.explicitly_followed_by_me?"followed":140===n||144===n||141===n||145===n||139===n||3173===n?"related":92===n?"default":3082===n?"newsHub":null)},getHidePinAction:({feedbackData:e,feedbackType:t,pinId:n,recommendationReasonId:i,pinFeedbackType:a,complaintReason:r,throughId:s})=>{const l="promoted"===t;let c,d;switch(t){case"promoted":c="promotedComplaint";break;case"search":c="unrelatedSearchPin";break;case"related":c="relatedPinHide";break;case"newsHub":c="newsHubPinHide";break;default:c="complaint"}switch(t){case"search":d={query:e.query,pin_id:n};break;case"related":d={pin:n};break;case"newsHub":d={pinId:n,newsId:e.newsId};break;default:d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({complaint_reason:r||0,pin_id:n},i?{recommendation_reason_id:i}:{},{feedback_type:a||1,promoted:l},s?{through_id:s}:{})}return{action:c,actionOptions:d}},getUnfollowAction:({board:i,feedbackType:o,makeNavigateLink:r,pinner:s,sourceInterest:l})=>{if("topic"===o){if(l){const i=l.id,o=l.name,s=r("topicUrl",`/topics/${l.url_name}`,o,!0);return{action:"unfollowTopic",actionOptions:{interest_id:i,interest_list:a.a},title:n?"":e._("Unfollowed","Title shown when unfollowing a certain topic / pin / board"),subTitle:t(n?e._("We'll show you less Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"):e._("You’ve unfollowed {{ formattedTopic }}. You can follow it again by searching for it.","Confirmation text after unfollowing a topic"),{formattedTopic:s})}}}else if("followed"===o){const a=i||{},o=a.id,l=a.name,c=a.url,d=s.explicitly_followed_by_me,u=s.full_name,p=`/${s.username}`;if(i&&s){const i=r("boardUrl",c,l,!0),a=r("pinnerUrl",p,u,!0);let s=d?t(e._("You’ve unfollowed {{ formattedPinner }}’s Board {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedPinner:a,formattedBoard:i}):t(e._("You’ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedBoard:i});return n&&(s=d?t(e._("You unfollowed {{ formattedPinner }} and won’t see Pins they save anymore.","Confirmation text after unfollowing a user"),{formattedPinner:a}):t(e._("You unfollowed the board {{ formattedBoard }} and won’t see Pins saved to it anymore.","Confirmation text after unfollowing a board"),{formattedBoard:i})),{action:"unfollowBoard",actionOptions:{board_id:o},title:n?"":e._("Unfollowed","Title shown when unfollowing a certain topic / pin / board"),subTitle:s}}}return null}}))},rUah:function(e,t,n){function i({id:e,isProduct:t,isPromoted:n,videoDuration:i,viewParameter:a,viewType:o,type:r}){return{type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:t,isPromoted:n,videoDuration:i,viewParameter:a,viewType:o,type:r}}}function a(){return{type:"REPORT_CONTENT_DISMISS"}}n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a})},rVpF:function(e,t,n){n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var i=n("GyhR");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const o=120;function r(e,t,n){e.current&&clearTimeout(e.current),e.current=null,n&&(t?e.current=setTimeout(n,t):n())}function s(e,t=0,n=o){const s=Object(i.useRef)(),l=Object(i.useRef)(e),c=a(Object(i.useState)(e?"active":"inactive"),2),d=c[0],u=c[1];return e!==l.current&&(e?"inactive"===d?(u("starting"),r(s,t,()=>{u("active")})):"ending"===d&&(u("active"),r(s)):"active"===d?(u("ending"),r(s,n,()=>{u("inactive")})):"starting"===d&&(u("inactive"),r(s))),Object(i.useEffect)(()=>()=>r(s),[]),l.current=e,d}},s199:function(e,t){e.exports="https://s.pinimg.com/webapp/style/images/clickthroughImage-803cd6e0.png"},s3m5:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("yXM0"),s=n("+U6O");const l=24;function c({duration:e}){return a.a.createElement(s.b,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:l,justifyContent:"center",paddingX:2,shape:"pill"},a.a.createElement(s.m,{accessibilityLabel:o.a._("Video camera icon","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),a.a.createElement(s.b,{marginLeft:1},a.a.createElement(s.J,{color:"white",size:"xs",truncate:!0},Object(r.a)(e))))}},sliO:function(e,t,n){n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var i=n("hvnN"),a=n.n(i),o=n("WwhT");function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a.a.object.isRequired;const l={};function c(e=l,t){if("SET_ROUTE_PINS"===t.type){const n=t.payload,i=n.location,a=n.routePins;if(a)return r({},e,{[Object(o.b)(i)]:a});const s=r({},e);return delete s[Object(o.b)(i)],s}if("ROUTE_CHANGE"===t.type||"ROUTE_ENTER"===t.type){const n=t.payload,i=n.action,a=n.location;if("POP"===i||"REPLACE"===i){const t=r({},e);return delete t[Object(o.b)(a)],t}}return e}function d(e,t){return e[Object(o.b)(t)]||null}},spTd:function(e,t,n){n.d(t,"e",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"g",function(){return d}),n.d(t,"f",function(){return p});var i=n("ePT2");function a(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function o(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function r(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function s(e){return{type:"CONVERSATION_CREATE",payload:e}}function l(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function c(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function d(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}const u=(()=>{let e=0;return()=>e++})();function p(e,t,n){let a;const o=new Promise(r=>{(a=((a,o)=>{const l=t.text,p=t.pinId,m=t.boardId,h=t.userId,g=t.didItId,b=o();function f(){const t=i.a.create("ConversationMessagesResource",{conversation_id:e,text:l,pin:p,board:m,user:h,user_did_it_data:g,source:n}),o=`${u()}`;t.callCreate().then(t=>{a(d(e,o,t.resource_response.data.id))}),a(c(e,{text:l,sender:b.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:o,board:null,event_type:null,pin:p?b.pins[p]:null,type:"message",user_did_it_data:null,user:null})),r()}b.conversations.data[e]?f():i.a.create("ConversationResource",{conversation_id:e}).callGet().then(e=>{const t=e&&e.resource_response&&e.resource_response.data;a(s(t)),f()})})).getPromise=(()=>o)});return a}},"t2/K":function(e,t,n){var i=n("IBHH")(n("PhFt"));e.exports=i},"t3w/":function(e,t,n){n.d(t,"b",function(){return m}),n.d(t,"a",function(){return h});var i=n("A6bX"),a=n("wCwf"),o=n("cjc9"),r=n("jvv/"),s=n("ePT2"),l=n("evwu"),c=n("eB/M"),d=n("kQRf");const u=e=>Object(a.a)(e.sectionId?c.a.SECTION_PINS:c.a.BOARD_PINS,e.sectionId||e.boardId);function p(e,t){const n=e.source,a=e.target;a.boardId!==n.boardId?(t(Object(l.b)(n.boardId,"pin_count")),t(Object(l.b)(a.boardId,"pin_count"))):n.sectionId&&a.sectionId||t(Object(l.b)(a.boardId,"pin_count")),n.sectionId&&t(Object(i.a)(n.sectionId)),a.sectionId&&t(Object(i.a)(a.sectionId))}function m(e){return t=>{const n=e.selectedPinIds,i=e.source,a=e.target;t(Object(r.a)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?c.a.SECTION_PINS:c.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(o.a)({feedId:a.sectionId||a.boardId,feedType:a.sectionId?c.a.SECTION_PINS:c.a.BOARD_PINS,itemIds:n,itemType:"pin"})),p(e,t)}}function h(e){return t=>(function(e,t){const n=e.inverseSelection,i=e.selectedPinIds,a=e.source,l=e.target;if(a.boardId===l.boardId&&(a.sectionId||null)===(l.sectionId||null))return Promise.reject();if(n){const e={board_id:a.boardId,new_board_id:l.boardId,old_section_id:a.sectionId||void 0,new_section_id:l.sectionId||void 0,pin_ids:i};return s.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(u(a)),t(u(l))])).catch(d.a)}{const e=(e,n)=>{t(Object(r.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?c.a.SECTION_PINS:c.a.BOARD_PINS,itemIds:i,itemType:"pin"})),t(Object(o.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?c.a.SECTION_PINS:c.a.BOARD_PINS,itemIds:i,itemType:"pin"}))};e(a,l);const n=()=>e(l,a);if(l.boardId===a.boardId){if(l.sectionId){const e={section_id:l.sectionId,pins:i};return s.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}{const e={section_id:a.sectionId,pins:i};return s.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}{const e={board_id:l.boardId,section_id:l.sectionId||void 0,pin_ids:i};return s.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}})(e,t).then(()=>p(e,t))}},tI50:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("THGe"),s=n("ksIX"),l=n("Qo1m"),c=n("9Y9K"),d=n("U1Om"),u=n("HoR0"),p=n("NmcB"),m=n("JsRk"),h=n("2YES");t.a=Object(c.compose)(Object(o.connect)(),h.e,m.withRouter)(({buttonType:e,dispatch:t,pin:n,pinId:i,requestContext:o,router:c})=>{const m="icon"===e,h=m?r.a:s.a;return a.a.createElement(h,Object.assign({},m?{}:{buttonColor:"lightGray",buttonText:l.a._("Promote","Text for button to promote this pin")},{accessibilityLabel:l.a._("Promote","Accessible label for button to promote this pin"),handleClick:()=>{Object(p.a)(101,{component:4,element:10639}),i?Object(d.d)({requestContext:o,router:c,pinId:i}):t(Object(u.i)(n))},icon:"flash"}))})},tsSC:function(e,t,n){n.d(t,"a",function(){return m});var i=n("GyhR");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=32,r=100;let s=null,l=!1;const c=[],d=()=>{s&&clearTimeout(s),l=!0,s=setTimeout(()=>{l=!1},r)},u=e=>{0===c.length&&window.addEventListener("scroll",d),c.push(e)},p=e=>{const t=c.indexOf(e);c.splice(t,1),0===c.length&&window.removeEventListener("scroll",d)};function m(e){return class extends i.Component{constructor(...e){super(...e),a(this,"state",{isHovering:!1}),a(this,"handlers",{onMouseOver:()=>this._setHover(!0),onMouseLeave:()=>this._setHover(!1)})}componentDidMount(){u(this)}componentWillUnmount(){this.hoverTimer&&clearTimeout(this.hoverTimer),p(this)}_setHover(e){this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=e&&l?setTimeout(()=>this._setHover(e),r):setTimeout(()=>{e!==this.state.isHovering&&this.setState({isHovering:e})},o)}render(){return i.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}}},un30:function(e,t,n){n.d(t,"a",function(){return f});var i=n("GyhR"),a=n("g9r1"),o=n("tcFq"),r=n("iJ35"),s=n("ePT2"),l=n("hX7C"),c=n("+U6O");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={__style:{borderRadius:12,willChange:"transform"}},m=300,h=236,g=33,b={__style:{background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2), rgba(181, 181, 181, 0.1)"}};class f extends i.Component{constructor(...e){super(...e),u(this,"state",{viewed:!1}),u(this,"getCardDetail",(e,t)=>{const n=t?b:{__style:{}};return i.createElement(c.b,{padding:3,dangerouslySetInlineStyle:n,direction:"column",display:"flex",height:"100%",justifyContent:"between",width:"100%"},i.createElement(c.b,{padding:1},i.createElement(c.J,{color:"white",size:"xl",leading:"tall"},Object(a.a)(e.title)),i.createElement(c.l,{color:"white",size:"xs"},Object(l.b)(Object(a.a)(e.subtitle),g))),i.createElement(c.b,{display:"flex",direction:"column",justifyContent:"end"},i.createElement(c.c,{color:"white",size:"lg",text:e.action.text})))}),u(this,"handleUpsellStoryClicked",()=>{const e=this.props.story;return s.a.create("UserExperienceCompletedResource",{placed_experience_id:e.experience.id}).callUpdate({showError:!1})}),u(this,"handleVisibilityChanged",e=>{const t=this.props.story.experience.id;this.state.viewed||e[0].intersectionRatio>0&&(this.setState({viewed:!0}),s.a.create("UserExperienceViewedResource",{placed_experience_id:t}).callUpdate({showError:!1}))})}render(){const e=this.props.story,t=d(e.objects,1)[0];return i.createElement(o.a,{options:{threshold:0},onVisibilityChange:this.handleVisibilityChanged},i.createElement(r.b,{onClick:this.handleUpsellStoryClicked,to:e.action.url},i.createElement(c.b,{color:"blue",dangerouslySetInlineStyle:p,height:m},t?i.createElement(c.t,{shape:"rounded",height:m},i.createElement(c.o,{alt:"Board Cover Image",fit:"cover",naturalHeight:m,naturalWidth:h,src:t.image_cover_hd_url||t.cover_pin&&t.cover_pin.image_url||""},this.getCardDetail(e,!!t))):this.getCardDetail(e,!!t))))}}},v7Si:function(e,t,n){n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"f",function(){return m});var i=n("2hPZ");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},r={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:(4-2*e)*e-1},s=({scrollPosition:e,containerSize:t,contentSize:n,intendedDistance:i,extendToEdgeDistance:a=0})=>{const o=n-t,r=o-e,s=-e;let l=i;return l=Math.min(l,r),l=Math.max(l,s),i>0&&o-(e+l)<=a?l=o-e:i<0&&e+l<=a&&(l=-e),l},l=(e,t,n,l={})=>{const c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e}({},o,l),d=e.scrollLeft,u=e.scrollTop,p=e.scrollWidth,m=e.scrollHeight,h=e.clientWidth,g=e.clientHeight,b=s({scrollPosition:d,containerSize:h,contentSize:p,intendedDistance:t,extendToEdgeDistance:c.extendToEdgeDistanceX}),f=s({scrollPosition:u,containerSize:g,contentSize:m,intendedDistance:n,extendToEdgeDistance:c.extendToEdgeDistanceY}),y=Math.abs(Math.floor(b/c.scrollSpeedPxPerMs)),v=Math.abs(Math.floor(f/c.scrollSpeedPxPerMs));let w=Math.max(y,v);c.minScrollDuration&&(w=Math.max(w,c.minScrollDuration));const E=r[c.easingFunction]||r["ease-in-out"];return Object(i.a)({window,duration:w,run:t=>{e.scrollLeft=d+b*E(t),e.scrollTop=u+f*E(t),1===t&&c.onAnimationComplete&&setTimeout(c.onAnimationComplete(),0)}})};function c(e){return e===window?window.innerHeight:e.clientHeight}function d(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function u(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function p(e){return e===window?d():e.scrollTop}function m(){window&&window.scroll(0,0)}},vI2X:function(e,t,n){n.d(t,"b",function(){return d}),n.d(t,"a",function(){return u});var i=n("wCwf"),a=n("cjc9"),o=n("t3w/"),r=n("ePT2"),s=n("evwu"),l=n("eB/M"),c=n("7Iyi");function d(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u}){let p=0;"RECOMMENDATION"===n?p=1:"EDITED_RECOMMENDATION"===n&&(p=2);const m={board_id:e,initial_pins:u&&!u.all?u.pinIds:[],name:t,name_source:p};return t=>r.a.create("BoardSectionResource",m).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(d(e,n)),t(Object(a.a)({feedId:e,feedType:l.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(s.b)(e,"pin_count")),t(Object(c.f)("BoardSectionsRepinResource",{board_id:e}));const r=u||{all:!1,pinIds:[]},p=r.all,m=r.pinIds;return p?new Promise((i,a)=>t(Object(o.a)({inverseSelection:!0,selectedPinIds:m,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>i(n)).catch(a)):(m.length>0&&t(Object(i.a)(l.a.BOARD_PINS,e)),n)})}},vl7u:function(e,t,n){n.d(t,"a",function(){return o}),n.d(t,"g",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return p});var i=n("D+W/"),a=n("q579");const o={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function r(e){return(e||"").trim().replace(/\s+/g," ")}function s({type:e,term:t="",index:n}){switch(e){case o.USER_INPUT:case o.AUTO_COMPLETE_HASHTAG:case o.TYPO_AUTO_CORRECT_ORIGINAL:return`${t}|${e}`;case o.AUTO_COMPLETE_DEFAULT:return`${t}|autocomplete|${n}`;case o.AUTO_COMPLETE_RECENT_SEARCH:return`${t}|recentsearch|${n}`;case o.AUTO_COMPLETE_TRENDING:return`${t}|trending|${n}`;case o.AUTO_COMPLETE_RECOMMENDED_SEARCH:return`${t}|recommended|${n}`;case o.SEARCH_GUIDE:return`${t}|guide|word|${n}`;default:return""}}function l({queryStates:e}){return 0===e.length?"":"&"+a.a.getQueryStringFromObject({term_meta:e.map(e=>s(e))})}function c(e){if(e){const t=e.trim().split(/\s+/);return t.find(e=>i.a.SEARCH_FILTER_CONJUNCTIONS.includes(e.toLowerCase()))?[e]:t}return[]}function d({type:e,query:t="",index:n}){switch(e){case o.USER_INPUT:case o.AUTO_COMPLETE_HASHTAG:case o.TYPO_AUTO_CORRECT_ORIGINAL:return c(t).map(t=>({index:n,term:t,type:e}));case o.AUTO_COMPLETE_RECENT_SEARCH:case o.AUTO_COMPLETE_RECOMMENDED_SEARCH:case o.AUTO_COMPLETE_TRENDING:case o.AUTO_COMPLETE_DEFAULT:return c(t).map(t=>({term:t,type:e,index:n}));default:return[]}}function u(e){const t=e.query,n=e.rs,i=e.scope,o=e.guideAdded,r=e.filters,s=e.termMeta,l=e.user;if(!t)return"/";const c={q:t,rs:n,term_meta:s};if(r&&(c.filters=r),l&&(c.user=l),o&&o.term&&(c.add_refine=`${o.term}|guide|word|${o.index}`),window.location.pathname.startsWith("/explore"))return`/search/pins/?${a.a.getQueryStringFromObject(c)}`;let d=i;return["pins","buyable_pins","my_pins","boards","users"].includes(d)||(d="pins"),d?`/search/${d}/?${a.a.getQueryStringFromObject(c)}`:`${window.location.pathname}?${a.a.getQueryStringFromObject(c)}`}function p(e,t,n,i){const o=a.a.getQueryStringParams();o.add_refine&&(o["term_meta[]"]?o["term_meta[]"].push(o.add_refine):o["term_meta[]"]=[o.add_refine]);const r=o["term_meta[]"];return u({query:e,rs:i,termMeta:"string"==typeof r?[r]:r,guideAdded:{term:t,index:n}})}},wCwf:function(e,t,n){function i(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",function(){return i})},wHKh:function(e,t,n){n.d(t,"n",function(){return o}),n.d(t,"l",function(){return r}),n.d(t,"m",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"g",function(){return d}),n.d(t,"o",function(){return m}),n.d(t,"h",function(){return b}),n.d(t,"q",function(){return f}),n.d(t,"a",function(){return y}),n.d(t,"i",function(){return v}),n.d(t,"p",function(){return w}),n.d(t,"d",function(){return _}),n.d(t,"k",function(){return C}),n.d(t,"j",function(){return O}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return x}),n.d(t,"f",function(){return k});n("Qo1m"),n("VSY/");var i=n("3KWM"),a=n("hX7C");const o=(e,t)=>{let n=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(n=t.full_name),n},r=(e=null)=>{return{seeMoreButtonHeight:15,seeMoreButtonBottomMargin:3,vaseCarouselHeight:30,descriptionLineHeight:17,descriptionVerticalMargin:10,maxNumTitleLines:1,maxNumDescriptionLines:2}},s=e=>"ja"===e?23:19,l=(e,t)=>{return s(e)*r(t).maxNumTitleLines},c=(e,t,n)=>{let i=0;if(e){let a=27;"ja"===t&&(a=14);const o=r(n).maxNumTitleLines;(i=Math.floor(e.length/a)+1)>o&&(i=o)}return i},d=e=>{const t=(e=>{const t=e.place_summary,n=e.rich_summary,i=n&&"mobile application"!==n.type_name;return{hasRichSummary:i,hasRichAttributionTitle:i&&n.display_name,hasPlaceInfo:!!t}})(e),n=t.hasRichAttributionTitle,i=t.hasPlaceInfo;return n?(e=>{const t=e.rich_summary;let n=t.apple_touch_icon_images,i=t.favicon_images;return i=i||{},{faviconLink:(n=n||{})["50x"]||i["50x"]||n.orig||i.orig,siteName:t.site_name||e.domain,title:t.display_name}})(e).title:i?(e=>{const t=e.place_summary;return{faviconLink:t.source_icon,siteName:t.source_name||e.domain,title:t.name}})(e).title:e.rich_metadata&&e.rich_metadata.title?e.rich_metadata.title:null},u=(e,t,n)=>{return((e,t,n)=>{if(e){const i=c(e,t,n);return s(t)*i}return 0})(d(e),t,n)+8},p=e=>e.visual_descriptions&&e.visual_descriptions.length>0?e.visual_descriptions:e.i18n_visual_descriptions&&e.i18n_visual_descriptions.length>0?e.i18n_visual_descriptions:void 0,m=e=>{const t=(e=>{const t=e.rich_summary,n=t&&"mobile application"!==t.type_name;return{hasRichSummary:n,hasRichAttributionTitle:n&&t.display_name,hasPlaceInfo:!!e.place_summary}})(e),n=t.hasRichAttributionTitle,i=t.hasPlaceInfo;return!(!n&&!i)||!(!e.rich_metadata||!e.rich_metadata.title)},h=e=>e.rich_summary&&e.rich_summary.display_name||e.place_summary&&e.place_summary.name||"",g=e=>{const t=e.pin_join||{};let n=t.visual_annotation||[],i=p(t)||[],o=e.description||"";const r=(e.rich_metadata||{}).description||"",s=n.map(e=>{return(t.annotations_with_links||{})[e]||{name:e,url:""}}),l=h(e).toLocaleLowerCase().trim(),c=o.toLocaleLowerCase().trim(),d=r.toLocaleLowerCase().trim(),u=i.length>0?i[0].toLocaleLowerCase().trim():"";return r&&r.length>3&&d!==l?(c!==d&&c!==u&&(i=[...i,o]),o=r):i.length>0&&i[0].length>=3&&u!==l?(o&&o.length>3&&c!==l&&c!==u&&(i=[...i,o]),o=i[0],i=i.slice(1)):(!o||o.length<3||c===l)&&(n.length?(o=n.join(", "),n=[]):o=""),o&&(o=Object(a.a)(Object(a.b)(o,496)).trim()),{description:o,vaseAnnotations:n,vaseDescriptions:i,annotationsWithLinks:s}},b=(e,t,n)=>{if("pin"===n)return g(e);if("board"===n){if((t&&t.v2ActivateExperiment("meta_pin_title_description_board")||"").startsWith("enabled"))return g(e)}return(e=>{const t=e.pin_join||{};let n=t.visual_annotation||[],i=p(t)||[],o=e.description||"";const r=n.map(e=>(t.annotations_with_links||{})[e]||{name:e,url:""}),s=h(e).toLocaleLowerCase().trim(),l=o.toLocaleLowerCase().trim(),c=i.length>0&&i[0].toLocaleLowerCase().trim()===s,d=l===s;return i.length>0&&i[0].length>=3&&!c?!o||o.length<3||d?(o=i[0],i=i.slice(1)):o=(i=[...i,o])[0]:(!o||o.length<3||d)&&(n.length?(o=n.join(", "),n=[]):o=""),o&&(o=Object(a.a)(Object(a.b)(o,496)).trim()),{description:o,vaseAnnotations:n,vaseDescriptions:i,annotationsWithLinks:r}})(e)},f=(e,t,n=!1)=>e&&e.length>0&&!n,y=(e,t)=>{let n=0;if(e){e=Object(a.a)(e);const i=35,o=r(t).maxNumDescriptionLines;(n=Math.floor(e.length/i)+1)>o&&(n=o)}return n},v=(e,t)=>{const n=r(t);return n.descriptionLineHeight*n.maxNumDescriptionLines},w=(e,t,n,i,a,o=!0,r=!1)=>{if(!i)return null;if(o){const t=f(n,a);return e&&e.length>0||!t&&n&&n.length>0}return!1},E=(e,t,n,i)=>{let a=0;const o=b(e,n,t),s=o.description,l=o.vaseAnnotations,c=o.vaseDescriptions,d=r(n);if(w(c,s,l,e,n)&&(a+=d.seeMoreButtonHeight,a+=d.seeMoreButtonBottomMargin),f(l,n,i)&&(a+=d.vaseCarouselHeight),!i){const e=y(s,n);a+=d.descriptionVerticalMargin+d.descriptionLineHeight*e}if(e.pinner&&e.board&&(a+=28),e.expandedVASE&&c&&c.length>0){a+=((e,t,n)=>{const i=b(e,t,n).vaseDescriptions;let a=0;return i&&i.length>0&&i.forEach((e,t)=>{a+=Math.ceil(e.length/49)}),11*a+5*i.length})(e,n,t)}return a},_=(e,t,n,i=!1,a,o)=>{const r=m(e)?u(e,t,n):0,s=i?0:E(e,o,n,a);return r||s?s+r+10:0},C=(e,t="orig")=>{const n=["orig","736x","564x","474x","236x","170x"];let i=e.images[t];if(i)return i;{const a=n.indexOf(t);if(a>=0)for(let t=a+1;t<n.length;t+=1){const a=n[t];if(i=e.images[a])return i}}return e.images["236x"]};function O(e){const t=!!e.carousel_data,n=t&&0===e.carousel_data.index;let i=e.images;if(t){const t=e.carousel_data,n=t.carousel_slots,a=t.index,o=void 0===a?0:a;i=n&&n[o]&&n[o].images||i}if(e.embed&&"gif"===e.embed.type&&(!t||n))return e.embed.src;if(!!i){const e=i,t=Object.keys(e).map(t=>{const n=t.split("x")[0];return Number.isNaN(Number(n))?t:(e[n]=e[t],n)});t.sort();const n=t.pop();return e[n].url}return e.image_large_url||""}const S=(e,t)=>{if(!e||!e.images||!e.images["236x"])return 0;const n=e.images["236x"].height;let a=n<t?n:t,o=600;n>600&&!e.fullImage&&(o=500);const r=C(e,"orig");if(r){const e=Math.floor(r.height*i.e/r.width);a=e>o?o:e}return a},x=e=>{const t={relatedKlpPillHeight:38,pillMargin:12,storyTitleHeight:17,storyTitleBottomMargin:18,maxRelatedInterests:6},n=Math.min(e,t.maxRelatedInterests);return n*t.relatedKlpPillHeight+(n-1)*t.pillMargin+t.storyTitleHeight+t.storyTitleBottomMargin},k=(e,t=6)=>{const n=[];if(e.length>0){const i=new Set;let a=0;for(;n.length<t&&a<e.length;){const t=e[a];t.images&&(!t.link||t.link&&!i.has(t.link))&&(n.push(t),i.add(t.link)),a+=1}}return n}},wQ8Q:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("iJ35"),r=n("+U6O");const s={sm:24,md:40};t.a=function({user:e,size:t="md",hasOutline:n}){const i=e.first_name,l=e.image_medium_url,c=e.username;return a.a.createElement(o.b,{stopPropagation:!0,to:`/${c}/`},a.a.createElement(r.b,{position:"relative",width:s[t],height:s[t]},a.a.createElement(r.a,{size:t,src:l,name:i||c||"",outline:n})))}},wSOZ:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("wxfF"),s=n("Kb0Y"),l=n("rSK6"),c=n("Qo1m"),d=n("iJ35"),u=n("E/Qu"),p=n("9Y9K"),m=n("JU/q"),h=n("Irlq"),g=n("dsNV"),b=n("NmcB"),f=n("JsRk"),y=n("aaO7"),v=n("2YES"),w=n("+U6O"),E=n("nZV1");function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){C(e,t,n[t])})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O={color:"white",textDecorationColor:"white"};t.a=Object(p.compose)(Object(o.connect)(),v.e,f.withRouter)(class extends a.a.Component{constructor(e){super(e),C(this,"getRecommendationDescription",()=>{const e=this.props,t=e.ad_match_reason,n=e.board,i=e.feedbackType,a=e.pinner,o=e.promoter,r=e.recommendationReason,s=e.sourceInterest;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:t,board:n,feedbackType:i,makeNavigateLink:this.makeNavigateLink,pinner:a,promoter:o,recommendationReason:r,sourceInterest:s})}),C(this,"getRecommendationDescriptionImage",()=>{const e=this.props,t=e.board,n=e.feedbackType,i=e.pinner,o=e.recommendationReason;if("followed"!==n&&"pfyBoard"!==n)return null;let r,s,l;return i&&i.explicitly_followed_by_me?(r=i.image_small_url,s="50%",l=`/${i.username}`):t&&t.image_thumbnail_url&&(r=t.image_thumbnail_url,s="4px",l=o&&o.board&&o.board.url||t.url),r?a.a.createElement(w.b,{marginStart:3,flex:"none",dangerouslySetInlineStyle:{__style:{borderRadius:s}},overflow:"hidden"},a.a.createElement(w.O,{onTouch:()=>this.props.router.push(l)},a.a.createElement(w.t,{width:40,height:40,wash:!0},a.a.createElement(w.o,{src:r,naturalHeight:1,naturalWidth:1,alt:"",fit:"cover"})))):null}),C(this,"getUnfollowAction",()=>{const e=this.props,t=e.board,n=e.feedbackType,i=e.pinner,a=e.sourceInterest;return this.feedbackHelpers.getUnfollowAction({board:t,feedbackType:n,makeNavigateLink:this.makeNavigateLink,pinner:i,sourceInterest:a})}),C(this,"getUndoText",e=>"unfollowPinner"===e||"unfollowBoard"===e?c.a._("Follow again","Caption for button to undo a unfollowing of a topic"):""),C(this,"generateUndoHideCallback",(e,t)=>()=>{const n=this.props,i=n.dispatch,a=n.pinId,o=n.viewType,r=n.viewParameter,s=_({},e,{undo:!0});let l=t;"unfollowPinner"===t?l="followPinner":"unfollowBoard"===t?l="followBoard":"unfollowTopic"===t&&(l="followTopic"),Object(E.a)(l,s),i(Object(y.b)(a)),Object(b.a)(101,{component:0,element:11181,view:o,viewParameter:r})}),C(this,"feedbackHelpers",Object(l.a)({i18n:c.a,interpolateNamedTemplate:h.b,isContextMenuV2Exp:this.props.isContextMenuV2Exp})),C(this,"makeNavigateLink",(e,t,n,i)=>{const o=_({display:"inline"},i?O:{});return a.a.createElement(d.b,{className:"underlineLink",key:e,to:t,onClick:this.props.onLinkClick},a.a.createElement(w.b,{dangerouslySetInlineStyle:{__style:o}},n))}),C(this,"reportPinOption",()=>({action:"reportPin",elementType:974,icon:"report",text:this.props.isContextMenuV2Exp?c.a._("Report Pin","Report a pin in the dropdown"):c.a._("Report","Report a pin in the dropdown"),description:c.a._("This goes against Pinterest's community guidelines","Description for the report pin option"),callback:this.props.reportPin})),C(this,"hidePinOption",e=>{const t=this.props,n=t.feedbackData,i=t.feedbackType,a=t.pinId,o=t.isContextMenuV2Exp,r=t.recommendationReason,s="search"===i?973:982,l=this.feedbackHelpers.getHidePinAction({feedbackData:n,feedbackType:i,pinId:a,recommendationReasonId:o&&r&&r.reason&&g.ReasonToChoose[r.reason],pinFeedbackType:o&&("pfy"===i?4:10),throughId:r&&this.getThroughId()}),d=l.action,u=l.actionOptions,p=c.a._("Hide","message displayed in pin feedback list");return{action:d,actionOptions:u,feedbackText:this.pinHiddenFeedbackText(e),icon:"cancel",text:p,description:c.a._("See fewer Pins like this","Description for the hide pin option"),elementType:s}}),C(this,"stopRecommendationOption",()=>{const e=this.props,t=e.feedbackData,n=e.feedbackType,i=e.pinId,a=e.recommendationReason,o=a.board,r=a.reason,s=r&&g.ReasonToChoose[r],l=a&&this.getThroughId(),d="pfyBoard"===n,u=this.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:n,pinId:i,recommendationReasonId:s,pinFeedbackType:d?2:4,throughId:l}),p=u.action,m=u.actionOptions,b=!!o&&this.makeNavigateLink("boardUrl",o.url,o.name,!0);return{action:p,actionOptions:m,feedbackText:{subTitle:d&&o?Object(h.b)(c.a._("We won't show you Pins inspired by your board {{ formattedBoard }} anymore.","Primary caption displayed in pin feedback list to unfollow a board"),{formattedBoard:b}):c.a._("Got it! We won't show you Pins like this in the future.","message displayed after stopping recommendations from a pin")},text:d&&o?Object(h.b)(c.a._("Stop seeing Pins inspired by {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:o.name}):c.a._("See fewer Pins like this","Feedback option to stop recommendations inspired by this Pin"),elementType:284}}),C(this,"unfollowBoardOption",()=>{const e=this.props,t=e.board,n=e.isContextMenuV2Exp,i=this.makeNavigateLink("boardUrl",t.url,t.name,!0),a=n?Object(h.b)(c.a._("Unfollow {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:t.name}):c.a._("Unfollow board","Primary caption displayed in pin feedback list to unfollow a board"),o=n?Object(h.b)(c.a._("Got it! You unfollowed {{ formattedBoard }} and won't see Pins saved to it in the future.","Confirmation text after unfollowing a board"),{formattedBoard:i}):Object(h.b)(c.a._("You’ve unfollowed the board {{ formattedBoard }}.\n         You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedBoard:i});return{action:"unfollowBoard",actionOptions:{board_id:t.id},feedbackText:{title:n?"":c.a._("Unfollowed","Title shown when unfollowing a certain board"),subTitle:o},icon:"unfollow",text:a,description:Object(h.b)(c.a._('Stop seeing Pins from the board "{{ boardName }}"',"Secondary caption displayed in pin feedback list to unfollow a board"),{boardName:t.name}),elementType:10614}}),C(this,"unfollowTopicOption",()=>{const e=this.props,t=e.sourceInterest,n=e.isContextMenuV2Exp;if(t){const e=t.id,i=t.name,a=`/topics/${t.url_name}`,o=this.makeNavigateLink("topicUrl",a,i,!0),r=n?Object(h.b)(c.a._("See fewer Pins from {{ topicName }}","Primary caption displayed in pin feedback list to unfollow a topic"),{topicName:i}):c.a._("Unfollow topic","Primary caption displayed in pin feedback list to unfollow a topic"),s=n?Object(h.b)(c.a._("We'll show you fewer Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:o}):Object(h.b)(c.a._("Got it! We won’t show you Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:o});return{action:"unfollowTopic",actionOptions:{interest_id:e,interest_list:m.a},feedbackText:{title:n?"":c.a._("Unfollowed","Title shown when unfollowing a certain topic"),subTitle:s},icon:"unfollow",text:r,description:Object(h.b)(c.a._('Stop seeing Pins from the topic "{{ topicName }}"',"Secondary caption displayed in pin feedback list to unfollow a topic"),{topicName:t.name}),elementType:976}}return null}),C(this,"unfollowUserOption",()=>{const e=this.props,t=e.pinner,n=e.isContextMenuV2Exp,i=t.id,a=t.username,o=t.full_name,r=`/${a}`,s=this.makeNavigateLink("pinnerUrl",r,o,!0),l=n?Object(h.b)(c.a._("Got it! You unfollowed {{ formattedUser }} and won't see Pins they save in the future.","Confirmation text after unfollowing a user"),{formattedUser:s}):Object(h.b)(c.a._("You’ve unfollowed {{ formattedUser }}. You can follow again by searching for them.","Confirmation text after unfollowing a user"),{formattedUser:s});return{action:"unfollowPinner",actionOptions:{user_id:i},feedbackText:{title:n?"":c.a._("Unfollowed","Title shown when unfollowing a certain user"),subTitle:l},icon:"person",text:Object(h.b)(c.a._("Unfollow {{ fullName }}","Primary caption displayed in pin feedback list to unfollow a user"),{fullName:o}),description:c.a._("Stop seeing all their Pins","Secondary caption displayed in pin feedback list to unfollow a user"),elementType:10640}}),C(this,"downloadPinOption",()=>({action:"downloadPin",icon:"download",text:c.a._("Download image","Button to download Pin image"),elementType:10836})),C(this,"_pinFeedbackText",()=>{const e=this.props,t=e.location,n=e.feedbackType,i=e.hideDownload,a=e.isContextMenuV2Exp,o=e.pinner,r="followed"===this.props.feedbackType,s=t.pathname.includes("following"),l=(r||"topic"===n)&&!s,d=this.hidePinOption(l),u=this.reportPinOption(),p="promoted"!==n&&!i;switch(n){case"followed":const e=s,t=!e&&this.getRecommendationDescription(),i=o.explicitly_followed_by_me?this.unfollowUserOption():this.unfollowBoardOption();return _({},t?{description:t}:{},{options:a?[d,...l||e?[i]:[],..."promoted"!==n?[this.downloadPinOption()]:[],u]:[...l?[this.unfollowBoardOption()]:[],..."promoted"!==n?[this.downloadPinOption()]:[],d,u,...e?[this.unfollowBoardOption(),this.unfollowUserOption()]:[]]});case"promoted":const r=this.props.ad_match_reason,m=[d,{icon:"question-mark",link:this.feedbackHelpers.getLearnMoreUrl(r),text:c.a._("Why am I seeing this ad?","Link to promoted pins explanation page")},u];return{description:this.getRecommendationDescription(),options:m};case"topic":const h=this.unfollowTopicOption(),g=a?[d,...l&&h?[h]:[],...p?[this.downloadPinOption()]:[],u]:[...l&&h?[h]:[],...p?[this.downloadPinOption()]:[],d,u];return{description:this.getRecommendationDescription(),options:g};case"pfy":case"pfyBoard":const b=a?[d,..."pfyBoard"===n?[this.stopRecommendationOption()]:[],...p?[this.downloadPinOption()]:[],u]:[...p?[this.downloadPinOption()]:[],d,u];return{description:this.getRecommendationDescription(),options:b};default:const f=a?[d,...p?[this.downloadPinOption()]:[],u]:[...p?[this.downloadPinOption()]:[],d,u];return{description:this.getRecommendationDescription(),options:f}}}),C(this,"handleSecondaryFeedbackItemClick",(e,t)=>{const n=this.props,i=n.feedbackData,a=n.feedbackType,o=n.pinId,r=n.onHide,s=n.recommendationReason,l=s&&s.reason&&g.ReasonToChoose[s.reason],c=s&&this.getThroughId(),d=this.feedbackHelpers.getHidePinAction({feedbackData:i,feedbackType:a,pinId:o,recommendationReasonId:l,throughId:c,complaintReason:e}),u=d.action,p=d.actionOptions;this.handleClickLogging(t),Object(E.a)(u,p),r()}),C(this,"pinHiddenFeedbackText",e=>{const t=this.props.isContextMenuV2Exp,n=e?null:this.getUnfollowAction();return n?{title:t?"":c.a._("Pin hidden","Pin feedback"),subTitle:this.getRecommendationDescription(),unfollow:n}:{title:t?"":c.a._("Pin hidden","message displayed after hiding a pin"),subTitle:t?c.a._("Got it! We won't show you this Pin in the future.","message displayed after hiding a pin"):c.a._("Got it! We'll try to show you more relevant Pins in the future.","message displayed after hiding a pin")}}),C(this,"renderSecondaryFeedbackItem",({text:e,reason:t,elementType:n})=>{const i=this.props.isContextMenuV2Exp;return a.a.createElement(w.O,{onTouch:()=>this.handleSecondaryFeedbackItemClick(t,n),fullWidth:!1,key:e},a.a.createElement(s.a,{text:e,isContextMenuV2Exp:i}))}),C(this,"renderSecondaryFeedback",()=>{const e="promoted"===this.props.feedbackType?[{text:c.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:c.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898},{text:c.a._("Seen Pin too many times",""),reason:3,elementType:11172}]:[{text:c.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:c.a._("Not in a language I understand",""),reason:15,elementType:11178},{text:c.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898},{text:c.a._("Seen Pin too many times",""),reason:3,elementType:295},{text:c.a._("Other",""),reason:8,elementType:11179}];return a.a.createElement(w.b,{overflow:"hidden",width:"100%",shape:"rounded"},a.a.createElement(w.b,{paddingX:4,paddingY:4},a.a.createElement(w.J,{color:"darkGray",size:"sm"},c.a._("Got a moment? Tell us why.","Title of follow up question after negative Pin feedback"))),a.a.createElement(w.i,null),a.a.createElement(w.b,{paddingY:2},e.map(this.renderSecondaryFeedbackItem)))});const t=this._pinFeedbackText();this.state={pinFeedbackConfig:t,showSecondary:!1}}onPinFeedbackActionButtonClick(e,t,n){e.stopPropagation(),t.auxData?this.handleClickLogging(t.elementType,t.auxData):this.handleClickLogging(t.elementType),Object(E.a)(t.action,t.actionOptions,n)}onPinHide(e,t,n,i){const a=this.props,o=a.dispatch,r=a.onHide,s=a.pinId,l=a.isContextMenuV2Exp;o(t&&n&&i?Object(y.e)(s,e,this.generateUndoHideCallback(n,i),this.getUndoText(i)):Object(y.a)(s,e)),!l||!n||n.promoted||10!==n.feedback_type&&4!==n.feedback_type?r():(this.setState({showSecondary:!0}),o(Object(y.d)(s)))}getThroughId(){const e=this.props.recommendationReason;return e.reason_id?e.reason_id:e.board?e.board.id:e.pin?e.pin.id:e.interest?e.interest.id:""}getComponentType(){switch(this.props.feedbackType){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}makeStrongText(e,t){return a.a.createElement("strong",{key:e},t)}handleClickLogging(e,t={}){const n=this.props,i=n.viewParameter,a=n.viewType;Object(b.a)(101,_({},t,{view:a,viewParameter:i,element:e,component:this.getComponentType()}))}renderDownloadButton(){const e=this.props,t=e.bestPinImgSrc,n=e.pinTitle,i=e.pinDescription,o=e.pinCategory,l=e.isContextMenuV2Exp;return a.a.createElement(r.a,{imgSrc:t,filename:n||i,category:o},e=>a.a.createElement(w.O,{onTouch:e,fullWidth:!1},a.a.createElement(s.a,{text:c.a._("Download image","Button to download Pin image"),icon:"download",isContextMenuV2Exp:l})))}renderButtons(){const e=this.props.isContextMenuV2Exp,t=this.state.pinFeedbackConfig.options,n=[],i=t.length;for(let o=0;o<i;o+=1){const r=t[o],l=!e&&o<i-1,c=E.b.includes(r.action),p=r.callback?r.callback:()=>this.onPinHide(r.feedbackText,c,r.actionOptions,r.action);"downloadPin"!==r.action?n.push(a.a.createElement(w.b,{key:o},r.link?a.a.createElement(d.b,{external:!0,to:r.link},a.a.createElement(s.a,{text:r.text,icon:r.icon,description:r.description,isContextMenuV2Exp:e})):a.a.createElement(w.O,{onTouch:({event:e})=>this.onPinFeedbackActionButtonClick(e,r,p),fullWidth:!1},a.a.createElement(s.a,{text:r.text,icon:r.icon,description:r.description,isContextMenuV2Exp:e})),l&&a.a.createElement(w.i,null))):"undefined"!=typeof window&&"windows"!==Object(u.b)(window)&&n.push(a.a.createElement(w.b,{key:o},this.renderDownloadButton(),l&&a.a.createElement(w.i,null)))}return n}render(){const e=this.props.isContextMenuV2Exp,t=this.state,n=t.pinFeedbackConfig,i=t.showSecondary,o=n.description,r=this.getRecommendationDescriptionImage();return e?a.a.createElement(w.b,{overflow:"hidden",width:"100%"},i?this.renderSecondaryFeedback():a.a.createElement(w.b,null,o&&a.a.createElement(w.b,null,a.a.createElement(w.b,{padding:4,display:"flex",alignItems:"center"},a.a.createElement(w.b,{maxHeight:56,overflow:"hidden"},a.a.createElement(w.J,{color:"darkGray",size:"sm",overflow:"normal"},o)),r),a.a.createElement(w.i,null)),a.a.createElement(w.b,{marginTop:2,marginBottom:3},this.renderButtons()))):a.a.createElement(w.b,{overflow:"hidden",width:"100%"},this.renderButtons(),o&&a.a.createElement(w.b,null,a.a.createElement(w.i,null),a.a.createElement(w.b,{paddingX:4,paddingY:3},a.a.createElement(w.J,{color:"darkGray"},o))))}})},wxfF:function(e,t,n){n.d(t,"a",function(){return s});var i=n("GyhR"),a=n("ggpB"),o=n("+U6O");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),r(this,"state",{href:void 0}),r(this,"onEvent",()=>{if("undefined"==typeof window)return;const e=this.props,t=e.imgSrc,n=e.isUnauth,i=e.category;null==this.state.href&&fetch(t,{headers:new Headers({Origin:location.origin}),mode:"cors"}).then(e=>e.blob()).then(e=>{this.setState({href:window.URL.createObjectURL(e)},()=>{this.imageDownload&&this.imageDownload.click()})}).catch(()=>this.setState({href:this.DOWNLOAD_ERROR})),Object(a.a)(`web.${n?"unauth":"auth"}.download.click.${i||"no_category"}`)}),r(this,"DOWNLOAD_ERROR","error")}render(){const e=this.props.children,t=this.props.filename,n=this.state.href,a=null!=n&&n!==this.DOWNLOAD_ERROR;return i.createElement(i.Fragment,null,e(this.onEvent),a&&i.createElement(o.b,{display:"none"},i.createElement("a",{ref:e=>this.imageDownload=e,tabIndex:-1,download:t&&t.replace(".","_"),href:n})))}}},x3u9:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("iz36"),r=n("QG2C"),s=n("+U6O");function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=60,d=50,u=60;class p extends a.a.PureComponent{constructor(...e){super(...e),l(this,"onScroll",()=>{const e=this.props.dismiss;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),l(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const e=this.props,t=e.anchor,n=e.text,i=e.thumbnails,o=e.idealDirection,r=i.slice(-3);return a.a.createElement(s.j,{anchor:t,color:"white",idealDirection:o,onDismiss:this.onScroll,shouldFocus:!1,size:"md"},a.a.createElement(s.b,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%"},a.a.createElement(s.b,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3},a.a.createElement(s.J,{bold:!0,color:"darkGray",size:"md"},n)),a.a.createElement(s.b,{display:"flex",marginEnd:-2,paddingX:2},r.map(e=>a.a.createElement(s.b,{key:e,height:c,width:d,paddingX:1},a.a.createElement(s.t,{shape:"rounded",height:c},a.a.createElement(s.o,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:u,naturalWidth:u,src:e})))))))}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return h});class h extends i.Component{constructor(...e){super(...e),m(this,"state",{paused:!1}),m(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){clearTimeout(this.timer)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}render(){const e=this.props,t=e.anchor,n=e.textOverride,i=e.experienceIds,l=e.flyoutSize,c=e.fontSize,d=e.idealDirection,u=e.useMasonryFlyout,m=e.noClickToDismiss,h=e.onClickComplete,g=e.onClickDismiss,b=e.placementId,f=e.shouldTimeoutDismiss,y=e.textOverflow,v=e.customizedComplete,w=({children:e})=>u?a.a.createElement(s.q,null,e):e;return a.a.createElement(o.a,{experienceIds:i,placementId:b,type:8},({complete:e,dismiss:i,display_data:o})=>(this.setDefaultPulsarTooltip(o),o.has_pulsar||o.has_tooltip?(f&&o.disappearTime&&o.disappearTime>0&&(this.timer=setTimeout(()=>(i(),null),o.disappearTime)),a.a.createElement(a.a.Fragment,null,o.has_pulsar&&a.a.createElement(r.a,{anchor:t,onTouch:()=>this.handlePulsarClick(o.has_tooltip,e),paused:this.state.paused}),o.has_tooltip&&(!o.has_pulsar||this.state.paused)&&(o.thumbnail_urls?a.a.createElement(p,{anchor:t,dismiss:i,idealDirection:d||"down",text:o.text,thumbnails:o.thumbnail_urls}):a.a.createElement(w,null,a.a.createElement(s.j,{anchor:t,color:"blue",idealDirection:d||"down",onDismiss:m?()=>{}:i,positionRelativeToAnchor:!u,shouldFocus:!1,size:l},a.a.createElement(s.b,{column:12,padding:3},a.a.createElement(s.J,{bold:!0,color:"white",size:c,overflow:y},n?o.text.replace("{boardName}",n):o.text),(o.dismiss_button_text||o.complete_button_text)&&a.a.createElement(s.b,{display:"flex",alignItems:"center",marginTop:2},o.dismiss_button_text&&a.a.createElement(s.b,{marginRight:1,column:6},a.a.createElement(s.c,{color:"transparent",onClick:()=>{g&&g(),i()},size:"md",text:o.dismiss_button_text})),o.complete_button_text&&a.a.createElement(s.b,{column:o.dismiss_button_text?6:12},v?a.a.createElement(s.O,{onTouch:()=>{e(),h&&h()},shape:"rounded",fullHeight:!0},a.a.createElement(s.b,{display:"flex",color:"white",padding:2,shape:"rounded",justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}}},a.a.createElement(s.J,{color:"blue",bold:!0},o.complete_button_text))):a.a.createElement(s.c,{color:"white",size:"md",text:o.complete_button_text,onClick:()=>{e(),h&&h()}}))))))))):(e(),null)))}}m(h,"defaultProps",{fontSize:"lg"})},xP02:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("+U6O");const r=136,s={__style:{opacity:.5}};function l({isHorizontalDesign:e}){return e?a.a.createElement(o.b,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},a.a.createElement(o.b,{dangerouslySetInlineStyle:s,color:"midnight",height:"100%",width:"100%",flex:"grow"}),a.a.createElement(o.b,{color:"white",width:"2px",flex:"none"}),a.a.createElement(o.b,{dangerouslySetInlineStyle:s,color:"olive",width:"100%",flex:"grow"}),a.a.createElement(o.b,{color:"white",width:"2px",flex:"none"}),a.a.createElement(o.b,{dangerouslySetInlineStyle:s,color:"maroon",width:"100%",flex:"grow"})):a.a.createElement(o.b,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0},a.a.createElement(o.b,{dangerouslySetInlineStyle:s,color:"midnight",height:"100%",flex:"grow"}),a.a.createElement(o.b,{color:"white",width:"2px",flex:"none"}),a.a.createElement(o.b,{display:"flex",height:r,direction:"column",flex:"grow"},a.a.createElement(o.b,{dangerouslySetInlineStyle:s,color:"olive",width:"100%",flex:"grow"}),a.a.createElement(o.b,{color:"white",height:"2px",flex:"none"}),a.a.createElement(o.b,{dangerouslySetInlineStyle:s,color:"maroon",width:"100%",flex:"grow"})))}var c=n("Qo1m");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=136,p={__style:{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.43) 0%, rgba(0,0,0,0) 60%)"}};class m extends i.PureComponent{constructor(...e){super(...e),d(this,"state",{isLoaded:[!1,!1,!1],isMounted:!1}),d(this,"getImageArray",()=>{const e=this.props,t=e.userPins,n=e.showcase;let i=[];return t&&0!==t.length?(n&&0!==n.length?n&&1===n.length?i=n.filter(e=>"board"===e.type)[0].images["550x"].map(e=>e.url):n&&(i=n.filter(e=>"board"===e.type).map(e=>e.image_cover_url)):i=t.map(e=>(e.images["136x136"]||e.images["236x"]||e.images["736x"]).url),i):i}),d(this,"getImage",(e,t)=>{const n={transition:"opacity 500ms",opacity:this.state.isLoaded[t]?1:0};return a.a.createElement(o.b,{dangerouslySetInlineStyle:{__style:n},color:"white",height:"100%",width:"100%"},!!e&&a.a.createElement(o.o,{naturalHeight:1,src:e,fit:"cover",alt:c.a._("user's pin","image of one of a user's pins"),naturalWidth:1,color:"lightGray",onLoad:()=>this.handleLoad(t)}))}),d(this,"handleLoad",e=>{const t=this.state,n=t.isLoaded,i=t.isMounted,a=[...n];a[e]=!0,i&&this.setState({isLoaded:a})})}componentDidMount(){this.setState({isMounted:!0}),this.getImageArray()}render(){const e=this.props.isHorizontalDesign,t=this.getImageArray();let n=null;return n=1===t.length?a.a.createElement(o.b,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0)):2===t.length?a.a.createElement(o.b,{height:"100%",display:"flex",direction:"row"},this.getImage(t[0],0),a.a.createElement(o.b,{color:"white",width:"1px",flex:"none"}),this.getImage(t[1],1)):e?a.a.createElement(o.b,{height:"100%",width:"100%",display:"flex",direction:"row"},a.a.createElement(o.b,{height:"100%",width:"100%"},this.getImage(t[0],0)),a.a.createElement(o.b,{color:"white",width:"2px",flex:"none"}),a.a.createElement(o.b,{height:"100%",width:"100%"},this.getImage(t[1],1)),a.a.createElement(o.b,{color:"white",width:"2px",flex:"none"}),a.a.createElement(o.b,{height:"100%",width:"100%"},this.getImage(t[2],2))):a.a.createElement(o.b,{height:"100%",width:"100%",display:"flex",direction:"row"},a.a.createElement(o.b,{height:"100%",flex:"grow"},this.getImage(t[0],0)),a.a.createElement(o.b,{color:"white",width:"2px",flex:"none"}),a.a.createElement(o.b,{display:"flex",height:u,direction:"column",flex:"grow"},a.a.createElement(o.b,{width:"100%",flex:"grow"},this.getImage(t[1],1)),a.a.createElement(o.b,{color:"white",height:"2px",flex:"none"}),a.a.createElement(o.b,{width:"100%",flex:"grow"},this.getImage(t[2],2)))),a.a.createElement(o.b,{height:u,display:"flex",direction:"column"},a.a.createElement(o.b,{width:"100%",position:"relative",flex:"grow"},a.a.createElement(l,{isHorizontalDesign:e}),n,a.a.createElement(o.b,{dangerouslySetInlineStyle:p,height:"100%",width:"100%",position:"absolute",top:!0,left:!0})))}}var h=n("iJ35"),g=n("NmcB");function b(e,t){Object(g.a)(101,{view:e,viewParameter:t,component:13406,element:11373})}var f=e=>{const t=e.avatarUrl,n=e.isVerified,i=e.isHorizontalDesign,r=e.url,s=e.userFullName,l=e.viewParameter,c=e.viewType,d=i?80:86;return a.a.createElement(o.b,{dangerouslySetInlineStyle:{__style:{border:"2px white solid",marginTop:i?-58:-64,marginLeft:i?-6:0,zIndex:1}},display:"flex",flex:"none",shape:"circle"},a.a.createElement(o.b,{flex:"none",height:d,width:d},a.a.createElement(h.b,{onClick:b(c,l),to:r,stopPropagation:!0},a.a.createElement(o.a,{name:s,src:t,verified:n}))))},y=n("LCmp"),v=n("b7z0");function w({text:e,singleLineMaxCharacters:t,isBold:n,isHorizontalDesign:i,numLines:o}){const r=o*t,s=Object(y.a)(e,r);return n?a.a.createElement(v.b,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"semibold"},s):a.a.createElement(v.b,{align:i?"left":"center",overflow:"normal",size:"sm",weight:"normal",color:i?"darkGray":"gray"},s)}const E=18;function _({description:e,domainUrl:t,isHorizontalDesign:n,userFullName:i}){const r=e||t,s={placeholder:{__style:{transition:"opacity 200ms",opacity:r?0:1}},subtitle:{__style:{transition:"opacity 200ms",opacity:r?1:0}}};return a.a.createElement(o.b,{position:"relative",width:"100%",marginTop:n?4:3,marginBottom:3,alignItems:n?"start":"center",display:"flex",direction:"column"},a.a.createElement(o.b,{height:E,width:"100%"},a.a.createElement(v.b,{align:n?"left":"center",truncate:!0,size:n?"lg":"md",weight:n?"bold":"semibold"},i)),a.a.createElement(o.b,{marginTop:2,overflow:"hidden",position:"relative",width:"100%"},a.a.createElement(o.b,{alignItems:"center",dangerouslySetInlineStyle:s.placeholder,direction:"column",display:"flex",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"},a.a.createElement(o.b,{color:"lightGray",shape:"pill",width:180,flex:"grow"}),a.a.createElement(o.b,{height:6,flex:"none"}),a.a.createElement(o.b,{color:"lightGray",shape:"pill",width:140,flex:"grow"})),n&&!!t&&a.a.createElement(o.b,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:-1},a.a.createElement(w,{numLines:2,isBold:!0,isHorizontalDesign:n,singleLineMaxCharacters:36,text:t})),n&&!!e&&a.a.createElement(o.b,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:2},a.a.createElement(w,{isHorizontalDesign:n,numLines:2,singleLineMaxCharacters:36,text:e})),!n&&!!r&&a.a.createElement(o.b,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%"},a.a.createElement(w,{isHorizontalDesign:n,numLines:2,singleLineMaxCharacters:27,text:r}))))}var C=n("Ivf5"),O=n("z/1d"),S=n("Irlq");function x({followText:e,followerCount:t,isHorizontalDesign:n,showFollowers:i,userFollowed:r}){return i?Object(S.b)(c.a._("{{ followCount }} {{ followText }}"),{followCount:a.a.createElement(o.b,{dangerouslySetInlineStyle:{__style:r?null:{opacity:.75}},"data-test-id":"followCount",display:"inlineBlock",key:"followCount",marginRight:1},a.a.createElement(v.b,{color:r?"gray":"white",size:n?"sm":"md",align:"center",weight:"semibold"},a.a.createElement(O.a,{value:t||0,shortform:!0,shortformMaximumFractionDigits:0}))),followText:a.a.createElement(o.b,{"data-test-id":"followText",display:"inlineBlock",key:"followText"},a.a.createElement(v.b,{weight:"bold",color:r?"darkGray":"white",size:n?"sm":"md",overflow:"normal",align:"center"},e))}):a.a.createElement(o.b,{"data-test-id":"followText",key:"followText"},a.a.createElement(v.b,{weight:"semibold",color:r?"darkGray":"white",size:n?"sm":"md",overflow:"normal",align:"center"},e))}var k=n("KCDi"),I=n("KsVg"),P=n("9Y9K"),T=n("Ii6Q");function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=Object(P.compose)(I.a,Object(C.connect)((e,{id:t})=>{const n=(e.users||{})[t];return{userFollowed:!!n&&n.explicitly_followed_by_me}},e=>({follow:t=>e(Object(T.a)(t)),unfollow:t=>e(Object(T.b)(t))})))(class extends i.PureComponent{constructor(...e){super(...e),j(this,"handleClick",()=>{const e=this.props,t=e.userFollowed,n=e.viewParameter,i=e.viewType;t?(this.unfollow(),Object(g.a)(46,{view:i,viewParameter:n,component:13406,element:11372})):(this.follow(),Object(g.a)(45,{view:i,viewParameter:n,component:13406,element:11372}))}),j(this,"follow",()=>{const e=this.props;(0,e.follow)(e.id),this.showConfirmation()}),j(this,"showConfirmation",()=>{const e=this.props,t=e.fullName,n=e.hideAllToasts,i=e.imageUrl,o=e.profileUrl,r=e.showToast;n(),r(({onHide:e})=>a.a.createElement(k.a,{onHide:e,text:[c.a._("Now following","text that comes before a board/user name in toast"),t],href:o,imageUrl:i}))}),j(this,"unfollow",()=>{const e=this.props,t=e.id;(0,e.unfollow)(t)})}render(){const e=this.props,t=e.followerCount,n=e.isHorizontalDesign,i=e.showFollowerCount,r=e.userFollowed,s=i&&0!==t,l=this.props.userFollowed?c.a._("Following","User follow button"):c.a._("Follow","User follow button");return a.a.createElement(o.b,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:n?"-22px":0}},display:"flex",justifyContent:"center",position:"relative"},a.a.createElement(o.O,{onTouch:this.handleClick,shape:"pill"},a.a.createElement(o.b,{alignItems:"center",color:r?"lightGray":"red",direction:"row",display:"flex",justifyContent:"center",paddingX:n?5:6,paddingY:n?3:4,shape:"pill"},a.a.createElement(x,{followerCount:t,followText:l,isHorizontalDesign:n,showFollowers:s,userFollowed:r}))))}});function D({avatarUrl:e,description:t,domainUrl:n,followerCount:i,id:r,isCreator:s,isHorizontalDesign:l,isVerified:c,userFullName:d,username:u,viewParameter:p,viewType:m}){const h=function(e){return`/${e}`}(u);return a.a.createElement(o.b,{alignItems:l?"start":"center",display:"flex",direction:"column",paddingX:l?5:6,paddingY:l?3:4,marginTop:2,width:"100%"},a.a.createElement(f,{avatarUrl:e,isHorizontalDesign:l,isVerified:c,url:h,userFullName:d,viewType:m,viewParameter:p}),l&&a.a.createElement(o.b,{position:"relative",width:"100%"},a.a.createElement(o.b,{display:"flex",marginTop:-2,marginRight:-2,position:"absolute",right:!0,top:!0},a.a.createElement(R,{fullName:d,followerCount:i,id:r,imageUrl:e,isHorizontalDesign:l,profileUrl:h,showFollowerCount:s})),a.a.createElement(o.b,{width:"100%",display:"flex",left:!0,marginTop:1},a.a.createElement(_,{description:t,domainUrl:n,isHorizontalDesign:l,userFullName:d}))),!l&&a.a.createElement(o.b,{width:"100%"},a.a.createElement(_,{userFullName:d,domainUrl:n,description:t,isHorizontalDesign:l}),a.a.createElement(o.b,{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},a.a.createElement(R,{followerCount:i,fullName:d,id:r,imageUrl:e,isHorizontalDesign:l,profileUrl:h,showFollowerCount:s}))))}var L=n("dsfX");const A=24;function M({anchor:e,children:t,isHorizontalDesign:n}){if(!e)return null;const i=n?320:236,r=e.getBoundingClientRect(),s=r.left,l=r.top,c=r.width,d=r.height,u=s+window.pageXOffset,p=l+window.pageYOffset,m=u+c+i+A/2>window.innerWidth,h={left:m?u:u+c,top:p+d/2,zIndex:L.a},g={borderRadius:21,boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)",left:m?-A/2-i:A/2,top:-i/2-44},b={top:-A/2,left:-A/2,fill:"white"},f=m?"M0 0 L12 12 L0 24":"M24 0 L12 12 L24 24";return a.a.createElement(o.b,{position:"absolute",dangerouslySetInlineStyle:{__style:h}},a.a.createElement(o.b,{position:"absolute",color:"white",dangerouslySetInlineStyle:{__style:g},width:i,overflow:"hidden"},t),a.a.createElement(o.b,{position:"absolute",dangerouslySetInlineStyle:{__style:b}},a.a.createElement("svg",{width:A,height:A},a.a.createElement("path",{d:f}))))}var B=n("ePT2"),F=n("IGno"),N=n("kIql"),U=n("k9eC"),z=n("2YES");function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){V(e,t,n[t])})}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const G=300,W=150;t.a=Object(P.compose)(z.e,N.a)(class extends i.PureComponent{constructor(e){super(e),V(this,"anchorRef",a.a.createRef()),V(this,"loadUser",()=>{const e=this.props.username,t=this.state.isMounted;e&&(B.a.create("UserResource",{username:e,field_set_key:"profile"}).callGet().then(e=>{t&&this.setState({detailedUser:e.resource_response.data})}),B.a.create("UserPinsResource",{username:e,page_size:3,field_set_key:"grid_item",isPrefetch:!1}).callGet().then(e=>{t&&this.setState({userPins:e.resource_response.data})}),B.a.create("ShowcaseResource",{username:e,page_size:2,isPrefetch:!1}).callGet().then(e=>{t&&this.setState({showcase:e.resource_response.data})}),t&&this.setState({isLoaded:!0}))}),V(this,"handleScroll",()=>{clearTimeout(this.openTimeout),this.state.isMounted&&(this.setState({isVisible:!1}),this.forceUpdate())}),V(this,"timeoutDismiss",()=>{this.dismissTimeout=setTimeout(()=>{this.state.isMounted&&(this.setState({isHovering:!1,isVisible:!1}),clearTimeout(this.openTimeout))},W)}),V(this,"handleDisplayCard",()=>{const e=this.props,t=e.isDarkPromoter,n=e.pinId,i=e.requestContext,a=e.viewParameter,o=this.state,r=o.currentPinId,s=o.isLoaded,l=o.isMounted;clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),n&&r!==n&&this.forceUpdate(),n&&this.setState({isHovering:!0,currentPinId:n});const c=new U.b(i,"web_avatar_hover_cards_v2");156!==a&&0!==a||t||!(c.check("enabled")||c.check("enabled2_vertical")||c.check("enabled2_horizontal"))?l&&this.setState({isVisible:!1}):(s||this.loadUser(),this.openTimeout=setTimeout(()=>{l&&this.setState({isVisible:!0})},G))}),V(this,"handleHideCard",()=>{this.timeoutDismiss()}),this.state={currentPinId:e.pinId,detailedUser:null,isHovering:!1,isMounted:!1,isLoaded:!1,isVisible:!1,showcase:null,user:null,userPins:null}}componentDidMount(){this.setState({isMounted:!0}),window.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){this.setState({isMounted:!1}),clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),window.removeEventListener("scroll",this.handleScroll)}static getDerivedStateFromProps(e,t){const n=e.user,i=t.detailedUser;return{user:H({},Boolean(n)?n:{},Boolean(i)?i:{})}}render(){const e=this.props,t=e.avatarSize,n=e.children,i=e.requestContext,r=e.username,s=e.viewer,l=e.viewParameter,c=e.viewType,d=this.state,u=d.isVisible,p=d.showcase,h=d.user,g=d.userPins,b=h||{},f=b.about,y=b.domain_url,v=b.follower_count,w=b.full_name,E=b.id,_=b.image_medium_url,C=b.show_creator_profile,O=b.verified_identity,S=s.id===E,x=!!O&&O.verified,k=new U.b(i,"web_avatar_hover_cards_v2").checkWithNoActivation("enabled2_horizontal");return a.a.createElement(o.b,{onMouseOver:this.handleDisplayCard,onFocus:this.handleDisplayCard,onMouseLeave:this.handleHideCard},a.a.createElement(o.b,{marginLeft:-2,marginRight:-2,paddingX:2,position:"relative"},a.a.createElement(o.b,{height:t,left:!0,marginLeft:2,position:"absolute",ref:this.anchorRef,top:!0,width:t}),n),!S&&!!h&&!!r&&u&&a.a.createElement(o.b,null,a.a.createElement(F.a,null,a.a.createElement(o.q,null,a.a.createElement(M,{anchor:this.anchorRef.current,isHorizontalDesign:k},a.a.createElement(o.b,{color:"white",dangerouslySetInlineStyle:{__style:{zIndex:L.a}},onFocus:this.handleDisplayCard,onMouseOver:this.handleDisplayCard,onMouseLeave:this.handleHideCard,position:"relative",width:"100%"},a.a.createElement(o.b,{width:"100%"},a.a.createElement(m,{isHorizontalDesign:k,userPins:g,showcase:p}),a.a.createElement(D,{avatarUrl:_,description:f,domainUrl:y,followerCount:v,id:E,isCreator:C,isHorizontalDesign:k,isVerified:x,userFullName:w,username:r,viewParameter:l,viewType:c}))))))))}})},xiPO:function(e,t,n){n.r(t);var i=n("GyhR"),a=n.n(i),o=n("Mr4W"),r=n.n(o),s=n("Ivf5"),l=n("sl5z");class c{constructor(e=[],t=(()=>null)){var n,i,a;a=[],(i="items")in(n=this)?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,this.items=e,this.getItemLayoutInfo=t}}var d=n("pvzZ"),u=n.n(d),p=n("PNko"),m=n.n(p),h=n("pp6x"),g=n.n(h),b=n("Q6EP"),f=n.n(b);const y=200;var v=function({layout:e,overscan:t=y,scrollContainerSize:n,scrollPosition:i,children:a}){const o=Math.max(0,i.top),r=Math.max(0,i.left),s=Math.min(Math.max(0,n.width+i.left),n.width),l=Math.min(Math.max(0,n.height+i.top),n.height),d=o-t,u=o+l+t,p=r-t,m=r+s+t,h=e.items.filter(t=>{const n=e.getItemLayoutInfo(t);if(!n)return!1;const i=n.size,a=n.position;return!i||!a||a.top+i.height>=d&&a.top<=u&&a.left+i.width>=p&&a.left<=m}),g=new c(h,e.getItemLayoutInfo);return g.size=e.size,g.contentFilledSize=e.contentFilledSize,g.isMeasuring=e.isMeasuring,a(g,e.size?e.size:void 0)};function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){E(e,t,n[t])})}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _ extends i.Component{constructor(...e){super(...e),E(this,"itemSizeCache",new WeakMap)}componentDidMount(){this.componentDidRender()}shouldComponentUpdate(e){const t=e.customSize,n=e.layout,i=this.props,a=i.customSize,o=i.layout;if(!f()(a,t))return!0;if(n.items.length!==o.items.length)return!0;if(n.items.some((e,t)=>e!==o.items[t]))return!0;const r=n.items.map(n.getItemLayoutInfo),s=o.items.map(o.getItemLayoutInfo);return!(!r.some((e,t)=>e!==s[t])||!r.some((e,t)=>!f()(e,s[t])))}componentDidUpdate(){this.componentDidRender()}componentDidRender(){const e=this.props.onRenderedItems;e&&e(this.itemSizeCache),this.itemSizeCache=new WeakMap}measureItem(e,t){t&&this.itemSizeCache.set(e,{width:t.clientWidth||0,height:t.clientHeight||0})}render(){const e=this.props,t=e.renderItem,n=e.layout,a=e.customSize,o=e.itemsToMeasureLimit,r=[],s=[];n.items.forEach((e,a)=>{const l=n.getItemLayoutInfo(e);if(!l)return;const c="number"==typeof l.customIndex?l.customIndex:a,d=`item-${c}`;if(!l.size&&r.length<(o||1/0)){const n=t({item:e,index:c,isMeasuring:!0,constraints:l.constraints});r.push(i.createElement("div",{className:"Collection-Item Collection-Item-Measuring",style:w({pointerEvents:"none",position:"absolute",visibility:"hidden",top:-9999,left:-9999},l.constraints),key:d,ref:t=>this.measureItem(e,t)},n))}if(l.position){const n=t({item:e,index:c,isMeasuring:!1,constraints:l.constraints});if(!l.position)return;s.push(i.createElement("div",{className:"Collection-Item",style:w({position:"absolute",top:0,left:0,transform:`translate(${l.position.left}px, ${l.position.top}px)`},l.size),key:d},n))}});const l=a||n.size;return i.createElement("div",{style:w({position:"relative"},l),className:"Collection"},r,s)}}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){O(e,t,n[t])})}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S=e=>e.filter(e=>!!e),x=(e,t)=>e!==t&&(e.length!==t.length||!e.every((e,n)=>e===t[n])),k=(e,t)=>{const n=new WeakMap;let i=!1;return e.items.forEach(a=>{const o=e.getItemLayoutInfo(a),r=t.get(a);o&&r&&!f()(o.size,r)&&(n.set(a,C({},o,{size:r})),i=!0)}),i?new c(e.items,t=>n.get(t)||e.getItemLayoutInfo(t)):e};class I extends i.Component{constructor(...e){super(...e),O(this,"state",{items:[],scrollContainerSize:this.props.scrollContainerSize,scrollPosition:this.props.scrollPosition,contentContainerSize:this.props.contentContainerSize,layout:this.props.initialLayout||new c}),O(this,"contentContainerRef",i.createRef()),O(this,"handleItemsRendered",e=>{this.handleItemsRenderedAnimationFrame||(this.handleItemsRenderedAnimationFrame=requestAnimationFrame(()=>{this.handleItemsRenderedAnimationFrame=null;const t=this.props,n=t.getItemLayoutOptions,i=t.layoutEngine,a=t.onLayoutUpdated,o=this.state,r=o.layout,s=o.items,l=o.contentContainerSize,c=k(r,e);if(r===c)a&&a(r);else{const e=i.buildLayout({containerSize:l,items:S(s),getItemLayoutOptions:n,previousLayout:c});this.setState({layout:e})}}))}),O(this,"renderCollection",(e,t)=>{const n=this.props,a=n.renderItem,o=n.itemsToMeasureLimit,r=n.scrollContainerSize,s=n.contentContainerSize,l="function"==typeof o?o({layout:e,scrollContainerSize:r,contentContainerSize:s}):o||1/0;return i.createElement(_,{renderItem:a,layout:e,onRenderedItems:this.handleItemsRendered,customSize:t,itemsToMeasureLimit:l})})}shouldComponentUpdate(e,t){const n=e.virtualize,i=this.state,a=i.layout,o=i.scrollPosition,r=i.scrollContainerSize,s=i.contentContainerSize,l=t.layout,c=t.scrollPosition,d=t.scrollContainerSize,u=t.contentContainerSize;return l!==a||(!f()(u,s)||(!f()(d,r)||!(!n||f()(c,o))))}static getDerivedStateFromProps(e,t){const n=e.items,i=e.getItemLayoutOptions,a=e.layoutEngine,o=e.scrollContainerSize,r=e.scrollPosition,s=e.contentContainerSize,l=t.items,c=t.contentContainerSize,d=t.layout,u={scrollContainerSize:o,scrollPosition:r,items:n};if(x(l,n)||!f()(s,c)){return C({layout:a.buildLayout({containerSize:s,items:S(n),getItemLayoutOptions:i,previousLayout:d}),contentContainerSize:s},u)}return u}componentWillUnmount(){this.handleItemsRenderedAnimationFrame&&cancelAnimationFrame(this.handleItemsRenderedAnimationFrame)}getLayout(){return this.state.layout}render(){const e=this.props,t=e.virtualize,n=e.virtualOverscan,a=this.state,o=a.layout,r=a.scrollPosition,s=a.scrollContainerSize,l=a.contentContainerSize;let c=null;if(t&&s&&r){const e="function"==typeof n?n({layout:o,scrollContainerSize:s,contentContainerSize:l}):n||0;c=i.createElement(v,{layout:o,scrollContainerSize:s,scrollPosition:r,overscan:e},this.renderCollection)}else c=this.renderCollection(o);return i.createElement("div",{className:"LayoutRenderer"},c)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}O(I,"defaultProps",{virtualOverscan:({scrollContainerSize:e})=>2*Math.max(e.width,e.height)});const T={Masonry:{overflowAnchor:"none"}};class j extends i.Component{constructor(...e){super(...e),P(this,"layoutRendererRef",i.createRef()),P(this,"handleLayoutUpdated",e=>{const t=this.props,n=t.onLayoutUpdated,i=t.scrollTracker;n&&n(e),i&&i.handleLayoutUpdated(e)})}componentDidMount(){const e=this.props,t=e.scrollTracker,n=e.scrollContainerSize,i=e.scrollPosition;if(t){n&&t.handleContainerResized(n),i&&t.handleContainerScrolled(i);const e=this.layoutRendererRef.current?this.layoutRendererRef.current.getLayout():null;e&&t.handleLayoutUpdated(e)}}render(){const e=this.props,t=e.items,n=e.renderItem,a=e.getItemLayoutOptions,o=e.layoutEngine,r=e.initialLayout,s=e.virtualize,l=e.scrollContainerSize,c=e.scrollPosition,d=e.virtualOverscan,p=e.itemsToMeasureLimit;return i.createElement(u.a,{disableHeight:!0,className:"AutoSizer"},e=>{const u={width:e.width||0,height:e.height||0};return i.createElement(I,{ref:this.layoutRendererRef,items:t,renderItem:n,getItemLayoutOptions:a,layoutEngine:o,onLayoutUpdated:this.handleLayoutUpdated,initialLayout:r,scrollContainerSize:l,scrollPosition:c,contentContainerSize:u,virtualize:s,virtualOverscan:d,itemsToMeasureLimit:p})})}}class R extends i.Component{constructor(...e){super(...e),P(this,"windowScrollerRef",i.createRef()),P(this,"handleWindowScrollerResized",e=>{const t=this.props.scrollTracker;t&&t.handleContainerResized(e)}),P(this,"handleWindowScrollerScrolled",({scrollTop:e,scrollLeft:t})=>{const n=this.props.scrollTracker;n&&n.handleContainerScrolled({left:t,top:e})})}updatePosition(){this.windowScrollerRef.current&&this.windowScrollerRef.current.updatePosition()}render(){const e=this.props.scrollContainer;return i.createElement(g.a,{scrollElement:e,ref:this.windowScrollerRef,onResize:this.handleWindowScrollerResized,onScroll:this.handleWindowScrollerScrolled},({height:e,width:t,scrollTop:n,scrollLeft:a})=>{const o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){P(e,t,n[t])})}return e}({},this.props,{scrollContainerSize:{height:e,width:t},scrollPosition:{left:a,top:n}});return i.createElement(j,o)})}}class D extends i.PureComponent{constructor(...e){super(...e),P(this,"state",{mounted:!1}),P(this,"masonryWindowScrollerRef",i.createRef())}componentDidMount(){this.setState({mounted:!0})}updatePosition(){this.masonryWindowScrollerRef.current&&this.masonryWindowScrollerRef.current.updatePosition()}render(){const e=this.props.scrollContainer,t=this.state.mounted;return i.createElement("div",{className:m()("Masonry",{"Masonry-Premount":!t}),style:T.Masonry},e?i.createElement(R,Object.assign({ref:this.masonryWindowScrollerRef},this.props)):i.createElement(j,this.props))}}P(D,"defaultProps",{virtualize:!1});const L=2,A=250,M=20,B=!1;class F{constructor(e){this.minCols=e&&"number"==typeof e.minCols?e.minCols:L,this.colWidth=e&&"number"==typeof e.colWidth?e.colWidth:A,this.gutter=e&&"number"==typeof e.gutter?e.gutter:M,this.flexible=e&&"boolean"==typeof e.flexible?e.flexible:B}static getColumnIndex(e){let t=0;for(let n=0;n<e.length;n+=1)e[n]<e[t]&&(t=n);return t}getColumnInfo(e){const t=this.gutter,n=this.minCols;let i,a=this.colWidth;if(!e||0===a)return{width:0,count:0};if(this.flexible){const o=Math.floor(e.width/a);i=Math.max(Math.floor((e.width-o*t)/a),n),e.width&&(a=Math.floor((e.width-(i+1)*t)/i))}else{const o=Math.floor((e.width+t)/(a+t));i=Math.max(o,n)}return{width:a,count:i}}buildLayout(e){throw new Error("Subclasses must implement")}}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){U(e,t,n[t])})}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class z extends F{buildLayout({containerSize:e,items:t,previousLayout:n}){const i=this.getColumnInfo(e),a=i.width,o=i.count,r=new Array(o).fill(0),s=new WeakMap;let l=!1;const d={width:0,height:0};t.forEach((e,t)=>{const i=n?n.getItemLayoutInfo(e):void 0;if(o>0&&i&&i.size){const n=i.size;if(!n.width||!n.height)throw new Error("Items that have been measured should always have a width and height.");const o=z.getColumnIndex(r),l=r[o],c=l+(0===l?0:this.gutter),u=o*(a+this.gutter);s.set(e,N({},i,{size:N({},i.size,{width:a}),position:{left:u,top:c},customIndex:t})),r[o]=c+n.height,d.width<u+n.width&&(d.width=u+n.width),d.height<c+n.height&&(d.height=c+n.height)}else s.set(e,{constraints:{width:a}}),l=!0});const u=new c(t,e=>s.get(e));return u.size=d,u.contentFilledSize={width:d.width,height:Math.min(...r)},u.isMeasuring=l,u}}class H extends F{buildLayout({containerSize:e,items:t,previousLayout:n}){const i=this.getColumnInfo(e),a=i.width,o=i.count,r=new WeakMap;let s=0,l=[],d=0,u=0,p=!1;const m={width:0,height:0};let h=0;for(let c=0;c<t.length;c+=1){const e=t[c],i=n?n.getItemLayoutInfo(e):void 0;if(o>0&&i&&i.size){const n=i.size;if(!n.width||!n.height)throw new Error("Items that have been measured should always have a width and height.");if(l[d%o]={item:e,itemLayoutInfo:i},n.height>u&&(u=n.height),l.length===o||c===t.length-1){for(let e=0;e<l.length;e+=1){const t=l[e],n=t.itemLayoutInfo,i=n.size,o=n.constraints;if(!i||!o)throw new Error("Row entries must already have sizes and constraints.");r.set(t.item,{size:{width:a,height:i.height},position:{left:e*(a+this.gutter),top:s},constraints:o,customIndex:c})}l.length===o&&(h=s+u),s+=u+this.gutter,l=[],u=0}d+=1}else r.set(e,{constraints:{width:a}}),p=!0}const g=new c(t,e=>r.get(e));return g.size=m,g.contentFilledSize={width:m.width,height:h},g.isMeasuring=p,g}}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const G=({containerSize:e})=>2*e.height;class W{constructor(e,t=G){V(this,"isMeasuring",!1),V(this,"isFetching",!1),V(this,"fetchMoreIfReady",()=>{if(this.isMeasuring||this.isFetching)return;if(!this.scrollPosition||!this.containerSize||!this.layoutSize)return;this.scrollPosition.top+this.containerSize.height+("function"==typeof this.fetchOverscan?this.fetchOverscan({layoutSize:this.layoutSize,scrollPosition:this.scrollPosition,containerSize:this.containerSize}):this.fetchOverscan)<this.layoutSize.height||(this.isFetching=!0,this.fetchMore())}),this.fetchMore=e,this.fetchOverscan=t}handleLayoutUpdated(e){(!this.items||this.items&&this.items.length!==e.items.length)&&(this.isFetching=!1),this.layoutSize=e.size,this.isMeasuring=!!e.isMeasuring,this.items=e.items,this.fetchMoreIfReady()}handleContainerResized(e){this.containerSize=e,this.fetchMoreIfReady()}handleContainerScrolled(e){this.scrollPosition=e,this.fetchMoreIfReady()}}var Y=n("Wiy7");function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const J=Object(Y.a)(e=>({containerSize:t})=>Math.max(0,2*t.height+e)),$=({scrollContainerSize:e})=>.7*e.height,Q=e=>e?"function"==typeof e?e():e:"undefined"!=typeof window?window:null;class K extends i.PureComponent{constructor(e){super(e),q(this,"getScrollTracker",Object(Y.b)((e,t)=>{const n=J(t);return"function"==typeof e?new W(this.fetchMore,n):void 0})),q(this,"getItemsToMeasureLimit",({contentContainerSize:e})=>{const t=this.props.items,n=this.state,i=n.layoutEngine,a=n.initialItemCount;return t.length===a?1/0:i.getColumnInfo(e).count}),q(this,"masonryRef",i.createRef()),q(this,"fetchMore",()=>{return new Promise(e=>{const t=this.props,n=t.items,i=t.loadItems;"function"==typeof i?setTimeout(()=>{i({from:n.length}),e(!0)}):e(!1)})}),q(this,"handleLayoutUpdated",e=>{this.props.measurementStore.layout=e}),q(this,"renderItem",({item:e,index:t,isMeasuring:n,constraints:a})=>{const o=this.props.comp;return i.createElement(o,{data:e,itemIdx:t,isMeasuring:n,constraints:a})});const t=e.minCols,n=e.columnWidth,a=e.gutterWidth,o=e.flexible,r=e.layout,s=e.measurementStore,l=e.items;let d;switch(r){case"uniformRow":d=new H({minCols:t,colWidth:n,gutter:a,flexible:o});break;case"standard":case"default":default:d=new z({minCols:t,colWidth:n,gutter:a,flexible:o})}s.layout=new c(l,s.layout.getItemLayoutInfo),this.state={nonce:0,layoutEngine:d,initialItemCount:l.length}}updatePosition(){this.masonryRef.current&&this.masonryRef.current.updatePosition()}reflow(){const e=this.props.measurementStore;e&&(e.layout=new c),this.setState(({nonce:e})=>({nonce:e+1}))}render(){const e=this.props,t=e.fetchBoundsOffset,n=e.getItemLayoutOptions,a=e.items,o=e.loadItems,r=e.measurementStore,s=e.scrollContainer,l=e.virtualize,c=this.state,d=c.layoutEngine,u=c.nonce,p=this.getScrollTracker(o,t);return i.createElement(D,{key:`Masonry-${u}`,ref:this.masonryRef,items:a,renderItem:this.renderItem,getItemLayoutOptions:n,layoutEngine:d,scrollContainer:Q(s),scrollTracker:p,onLayoutUpdated:this.handleLayoutUpdated,initialLayout:r.layout,virtualize:l,virtualOverscan:$,itemsToMeasureLimit:this.getItemsToMeasureLimit})}}q(K,"createMeasurementStore",()=>({layout:new c})),q(K,"defaultProps",{columnWidth:236,fetchBoundsOffset:0,measurementStore:K.createMeasurementStore(),layout:"default",minCols:3,virtualize:!1});var X=n("UmN8"),Z=n("+U6O"),ee=n("k9eC"),te=n("2YES"),ne=n("plGG"),ie=n("3KWM");function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const oe=(e,t)=>{const n=ie.g,i=Object(ie.k)(t),a=ie.e+e;let o="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute;\n  visibility: hidden;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n";for(let r=n;r<i+1;r+=1){o+=`\n@media (min-width: ${r===n?0:r*a}px) and (max-width: ${(r+1)*a-1}px) {\n  .gridCentered {\n    width: ${r*a}px;\n  }\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${r}),\n  .gridCentered .static:nth-child(-n+${r}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n}\n`}return o};class re extends i.Component{constructor(...e){super(...e),ae(this,"masonryRef",a.a.createRef()),ae(this,"renderItem",e=>{const t=this.props.comp,n=this.getGutters(),i=n.gutterWidth,o=n.paddingBottom;return a.a.createElement("div",{style:{paddingBottom:o,paddingLeft:i/2,paddingRight:i/2}},a.a.createElement(t,e))})}componentDidUpdate(e){const t=this.masonryRef;this.props.widthOffset!==e.widthOffset&&!this.props.useMasonry9&&t.current&&t.current.handleResize&&t.current.handleResize()}getGutters(){const e=this.props,t=e.gutterWidth,n=e.paddingStyle;let i,a;return{gutterWidth:i="simplified"===n?24:"lego"===n?16:t,paddingBottom:a="image-only"===n?20:"dense"===n?6:"match-gutter"===n?i:"lego"===n?16:28}}render(){const e=this.props,t=e.columnWidth,n=e.fetchBoundsOffset,i=e.flexible,o=e.items,r=e.loadItems,s=e.masonryRef,l=e.measurementStore,c=e.scrollContainer,d=e.serverRender,u=e.useMasonry9,p=e.virtualize,m=e.isGridCentered,h=this.getGutters().gutterWidth;let g,b=null;return b=u?a.a.createElement(K,{columnWidth:t+h,gutterWidth:0,comp:this.renderItem,minCols:ie.g,ref:e=>{this.masonryRef.current=e,s&&(s.current=e)},items:o,flexible:i,loadItems:r,measurementStore:l,scrollContainer:c,virtualize:p,fetchBoundsOffset:n}):a.a.createElement(Z.u,{columnWidth:t+h,gutterWidth:0,comp:this.renderItem,minCols:ie.g,ref:e=>{this.masonryRef.current=e,s&&(s.current=e)},items:o,flexible:i,loadItems:r,measurementStore:l,scrollContainer:c,virtualize:p}),m&&(g="gridCentered"),a.a.createElement("div",{className:g},d&&a.a.createElement(ne.a,{unsafeCSS:oe(h,o.length)}),a.a.createElement("div",null,b))}}ae(re,"defaultProps",{gutterWidth:14,useMasonry9:!1,paddingStyle:"default",isGridCentered:!0});const se=e=>e&&"pin"===e.type,le=e=>e.filter(se).map(e=>e.id);var ce=n("lixz");function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ue={},pe=(e,t)=>{if(null!=e)return ue[e]&&ue[e].screenWidth===window.innerWidth||(ue[e]={screenWidth:window.innerWidth,cache:t?K.createMeasurementStore():Z.u.createMeasurementStore()}),ue[e].cache},me="undefined"!=typeof window?()=>window:void 0;class he extends i.Component{constructor(e){super(e),de(this,"isRecordingLoadItemMetrics",!1),de(this,"loadItems",()=>{this.props.isFetching||(Object(ce.e)(12),Object(ce.c)({name:"GridBottomSpinnerStartedTraceEvent"}),this.isRecordingLoadItemMetrics=!0,this.props.loadItems())}),de(this,"renderItem",e=>{const t=this.props.comp;return a.a.createElement(l.a,{name:"MasonryPerfTimingItem"},a.a.createElement(t,e))}),Object(ce.c)({name:"MasonryConstructor"})}componentDidMount(){const e=this.props,t=e.isFetching,n=e.saveRoutePins,i=window.innerHeight,a=document.querySelector("img[srcset]");if(a){const e=a.getBoundingClientRect()&&a.getBoundingClientRect().top;this.gridVisibleHeight=i&&i-e}Object(ce.c)({name:"MasonryDidMount"}),Object(ce.c)({name:"PageLoadRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)}),t||(Object(ce.c)({name:"UserNavRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)}),Object(ce.c)({name:"UserNavRegisterGridItemsPositionedTraceEvent"}),Object(ce.f)(3),Object(ce.f)(2),Object(ce.f)(102)),n&&this.updateRoutePins()}componentDidUpdate(e){const t=this.props,n=t.saveRoutePins,i=t.items,a=t.viewParameterType;this.isRecordingLoadItemMetrics&&!this.props.isFetching&&(this.isRecordingLoadItemMetrics=!1,Object(ce.f)(12,{viewParameter:a}),Object(ce.c)({name:"GridBottomSpinnerStoppedTraceEvent"})),this.props.isFetching||(Object(ce.c)({name:"UserNavRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)}),Object(ce.c)({name:"UserNavRegisterGridItemsPositionedTraceEvent"}),Object(ce.f)(3),Object(ce.f)(2),Object(ce.f)(102)),this.checkViewportFilled()&&Object(ce.c)({name:"PageLoadRegisterGridImagesTraceEvent",gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this),viewportFilled:!0}),n&&i!==e.items&&this.updateRoutePins()}updateRoutePins(){const e=this.props,t=e.currentHistoryEntry,n=e.setRoutePins,i=e.items;if(t&&i){n(le(i),t.location)}}checkViewportFilled(){const e=this.props,t=e.cacheKey,n=e.useMasonry9,i=pe(t,n);if(i&&this.gridVisibleHeight)if(n){if(i.layout&&i.layout.contentFilledSize){return i.layout.contentFilledSize.height>this.gridVisibleHeight}}else if(i.columnHeights)return Math.min(...i.columnHeights)>this.gridVisibleHeight;return!1}render(){const e=this.props,t=e.cacheKey,n=e.columnWidth,i=e.fetchBoundsOffset,o=e.flexible,r=e.gutterWidth,s=e.items,l=e.masonryRef,c=e.paddingStyle,d=e.scrollContainer,u=e.serverRender,p=e.useMasonry9,m=e.virtualize,h=e.widthOffset,g=e.isGridCentered;return a.a.createElement(X.a,{name:"web_grid_immersive"},({anyEnabled:e,group:b})=>{const f=e&&"enabled_all_grids_old_gutters"!==b&&"dense"!==c?"lego":c;return a.a.createElement(re,{columnWidth:n,comp:this.renderItem,fetchBoundsOffset:i,flexible:o,gutterWidth:r,items:s,loadItems:this.loadItems,masonryRef:l,measurementStore:pe(t,p),paddingStyle:f,scrollContainer:d||me,serverRender:u,useMasonry9:p,virtualize:m,widthOffset:h,isGridCentered:g})})}}function ge(e){const t=Object(te.d)(),n=e.useMasonry9||new ee.c(t,"web_masonry9").enabled(),i=e.fetchBoundsOffset||(n?100:0);return a.a.createElement(he,Object.assign({},e,{useMasonry9:n,fetchBoundsOffset:i}))}de(he,"defaultProps",{saveRoutePins:!1,serverRender:!0,useMasonry9:!1,isGridCentered:!0}),ge.displayName="MasonryPerfTiming";t.default=Object(s.connect)(({pins:e,history:t},{mapPinUrlsToItems:n,items:i})=>({currentHistoryEntry:t.current,itemsNormalizedTracing:n?n(e,i):null}),e=>({setRoutePins:(t,n)=>e(((e,t)=>({type:"SET_ROUTE_PINS",payload:{location:t,routePins:e}}))(t,n))}))(ge)},xk7t:function(e,t){var n="undefined"==typeof window?null:window.document,i=n?n.getElementsByTagName("head")[0]:null,a=/^https?:\/\//,o={},r={},s={},l="",c={},d=!1,u="push",p="onreadystatechangeName";function m(e,t){for(var n=0,i=e.length;n<i;++n)if(!t(e[n]))return d;return!0}function h(e,t){return m(e,function(e){return!t(e)}),d}function g(e,t,n){e=e[u]?e:[e];var i=t&&"function"==typeof t,d=i?t:n,p=i?e.join(""):t,f=e.length;function y(e){return e.call?e():o[e]}function v(){if(!--f){if(o[p]=1,d)d();for(var e in s)m(e.split("|"),y)&&!h(s[e],y)&&(s[e]=[])}}return setTimeout(function(){h(e,function(e){return null===e?v():c[e]?(p&&(r[p]=1),2==c[e]&&v()):(c[e]=1,p&&(r[p]=1),void b(!a.test(e)&&l?l+e+".js":e,v))})},0),g}function b(e,t){var a=!1,o=function(e,t){a||("loaded"===e.readyState||"completed"===e.readyState?t():setTimeout(function(){o(e,t)},100))},r=n.createElement("script"),s=r.onload=r.onerror=r[p]=function(){a||(a=!0,r.readyState&&!/^c|loade/.test(r.readyState)||(r.onload=r[p]=null,1,c[e]=2,t()))};o(r,s),r.async=1,r.src=e,i.insertBefore(r,i.firstChild)}n&&!n.readyState&&n.addEventListenerName&&(n.addEventListenerName("DOMContentLoaded",function e(){n.removeEventListener("DOMContentLoaded",e,d),n.readyState="complete"},d),n.readyState="loading"),g.get=b,g.order=function(e,t,n){!function i(){var a=e.shift();e.length?g(a,i):g(a,t,n)}()},g.path=function(e){l=e},g.ready=function(e,t,n){e=e[u]?e:[e];var i,a=[];return!h(e,function(e){o[e]||a.push(e)})&&m(e,function(e){return o[e]})?t():(i=e.join("|"),s[i]||(s[i]=[]),s[i][u](t),n&&n(a)),g},g.done=function(e){g([null],e)},e.exports=g},"y+cA":function(e,t,n){var i=n("GyhR"),a=n("+U6O");t.a=(({children:e})=>i.createElement(a.b,{width:"100%",role:"list"},e))},yJaP:function(e,t,n){n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var i=n("M48n");const a=Object(i.a)("TrackingParameters"),o=a.Provider,r=(a.HOC,a.RenderProp,a.hook)},yKZJ:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("iJ35"),r=n("NmHc"),s=n("Evf7"),l=n.n(s),c=n("cNuv"),d=n("+U6O");const u=1,p=2,m={[u]:"In stock",[p]:"Out of stock",3:"Preorder",4:"Unavailable"};function h(e){const t=e.buyableProduct,n=e.hideAvailability,a=e.merchantName,o=e.pinDescription,r=e.pinTitle,s=e.richSummary,h=e.showProductIcon,g=e.showPrice,b=e.showDescription,f=t||{},y=f.is_available,v=f.display_active_min_price,w=f.display_active_max_price,E=v===w?v:`${v} - ${w}`,_=l()(s,["products","0","offer_summary","price"]),C=E||_,O=y?u:p,S=l()(s,["products","0","offer_summary","availability"]),x=t&&null!=y?O:S,k=!n&&m[x];return i.createElement(d.b,{marginTop:1},h&&i.createElement(d.b,{paddingY:1,display:"flex"},i.createElement(c.a,{text:a,icon:"tag"})),!!C&&g&&i.createElement(d.b,{display:"flex",paddingY:1},i.createElement(d.b,{marginRight:2},i.createElement(d.J,{size:"sm"},C)),k&&x===p&&i.createElement(d.J,{size:"sm",color:"gray"},k)),b&&i.createElement(d.b,{paddingY:1},i.createElement(d.J,{bold:!0,size:"sm"},r||o)))}var g=n("z8CG"),b=n("LCmp"),f=n("4OrY"),y=n("kR61"),v=n("NmcB"),w=n("3hnx");function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const _={"236x":236,"474x":474};function C(e){const t=E(Object(i.useState)(!1),2),n=t[0],s=t[1],l=Object(i.useCallback)(()=>s(!0),[s]),c=Object(i.useCallback)(()=>s(!1),[s]),u=e.badgeText,p=e.compact,m=e.containerWidth,C=e.link,O=e.pin,S=e.productPinView,x=void 0===S?"standard":S,k=e.onClick,I=e.showOverlay,P=void 0!==I&&I,T=e.showPrice,j=void 0!==T&&T,R=e.showProductIcon,D=void 0!==R&&R,L=e.imageSizeKey,A=void 0===L?"474x":L,M=e.squared,B=void 0!==M&&M,F=e.enableLink,N=void 0!==F&&F,U=e.inCarousel,z=void 0!==U&&U,H=e.viewportSize,V=O.description,G=O.domain,W=O.title,Y=O.buyable_product,q=O.id,J=O.link,$=O.rich_summary,Q=O.images[A],K=Q.height,X=Q.width,Z=Q.url,ee=W||Y&&Y.title||$&&$.display_name;let te,ne;if(B)te=_[A],ne=_[A];else if(m)ne=(te=(m-w.l*(w.p-1))/w.p)*w.h;else{const e="lego"===x,t=e?w.o:w.m;te=p?w.e:t,ne=e?w.n:te}const ie=p?w.c:w.d,ae=Object(y.b)(O),oe=ae&&Object(f.a)(ae,{maxLength:te/w.i}),re=a.a.createElement(d.b,{shape:"rounded",position:"relative",padding:2},a.a.createElement(d.b,{maxWidth:te},a.a.createElement(d.d,{onMouseEnter:l,onMouseLeave:c,active:n&&N&&!z},a.a.createElement(d.b,{position:"relative"},a.a.createElement(o.b,{to:C,onClick:k},a.a.createElement(d.t,{shape:"rounded",height:ne,width:te,wash:!0},a.a.createElement(d.o,{alt:ee||V,naturalHeight:K,naturalWidth:X,src:Z,fit:"cover"}))),n&&N&&!z&&a.a.createElement(d.b,{shape:"rounded",bottom:!0,left:!0,position:"absolute",right:!0,top:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,0.3)",pointerEvents:"none"}}},a.a.createElement(d.b,{position:"absolute",padding:2,left:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:n?"auto":"none"}}},a.a.createElement(r.a,{pinId:q,sourceUrl:J,domain:G,onClick:()=>{const t=e.componentType,n=e.viewData,i=e.viewType,a=e.viewParameter;Object(v.a)(12,{component:t,objectId:q,view:i,viewParameter:a,viewData:n})},bgColor:"transparentDarkGray",iconColor:"white",size:"sm"}))),u&&a.a.createElement(d.b,{position:"absolute",shape:"pill",color:"white",top:!0,left:!0,margin:2},a.a.createElement(d.J,{bold:!0,size:"xs"},u))),a.a.createElement(o.b,{to:C,onClick:k},a.a.createElement(h,{buyableProduct:Y,hideAvailability:p,pinDescription:V&&Object(b.a)(V.trim(),ie)||"",pinTitle:ee&&Object(b.a)(ee.trim(),ie)||"",richSummary:$,merchantName:oe,showDescription:"wide"===H,showProductIcon:D,showPrice:j}))))),se=a.a.createElement(d.b,{position:"relative",padding:2},a.a.createElement(d.d,{onMouseEnter:l,onMouseLeave:c,active:n&&N&&!z},a.a.createElement(o.b,{to:C,onClick:k},a.a.createElement(d.b,{maxWidth:te},a.a.createElement(d.t,{shape:"rounded",height:ne,width:te,wash:!0},a.a.createElement(d.o,{alt:ee||V,naturalHeight:K,naturalWidth:X,src:Z,fit:"cover"}),a.a.createElement(g.a,{overlayOpacity:n&&N&&!z?w.j:0}))))));return P?se:re}var O=n("jCHc"),S=n("9SSN"),x=n("4mdS"),k=n("Qo1m"),I=n("/mke"),P=n("b7z0");function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){j(e,t,n[t])})}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const D={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"18px",height:"32px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},text:{color:"#333333"}},L=72,A=58;function M({pinId:e,sourceUrl:t,domain:n,onClick:r,sourceLinkStyle:s,maxWidth:l}){const c=R(Object(i.useState)(!1),2),u=c[0],p=c[1],m=Object(i.useCallback)(()=>p(!0),[p]),h=Object(i.useCallback)(()=>p(!1),[p]),g=2*l/3;return g<L&&(s="icon-only"),"icon-only"===s?a.a.createElement(o.b,{onClick:r,pinId:e,to:t},a.a.createElement(I.a,{accessibilityLabel:k.a._("link","Website url link"),bgColor:"white",icon:"arrow-up-right",iconColor:"darkGray",iconSize:12,size:g>A?"sm":"xs"})):a.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:T({},D.container,u?D.containerHovered:{})},onMouseEnter:m,onMouseLeave:h,position:"relative",maxWidth:g},a.a.createElement(o.b,{onClick:r,pinId:e,to:t},a.a.createElement(d.b,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:D.text},display:"flex",justifyContent:"between"},a.a.createElement(d.b,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3},a.a.createElement(d.m,{accessibilityLabel:k.a._("link","Website url link"),color:"darkGray",icon:"arrow-up-right",size:9})),a.a.createElement(d.b,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden"},a.a.createElement(P.b,{color:"darkGray",size:"sm",weight:"semibold",truncate:!0},n)))))}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const F={visualOverlay:{backgroundColor:"#000",opacity:w.k}},N=120;function U(e){const t=B(Object(i.useState)(!1),2),n=t[0],r=t[1],s=Object(i.useCallback)(()=>r(!0),[r]),l=Object(i.useCallback)(()=>r(!1),[r]),c=e.boxHeight,u=e.boxWidth,p=e.compact,m=e.enableLink,g=e.imageSizeKey,E=e.link,_=e.onClick,C=e.pin,k=e.showPrice,I=e.showProductIcon,P=e.viewportSize,T=C.description,j=C.domain,R=C.title,D=C.buyable_product,L=C.id,A=C.link,U=C.rich_summary,z=C.images[g],H=z.height,V=z.width,G=z.url,W=R||D&&D.title||U&&U.display_name,Y=Object(y.b)(C),q=Y&&Object(f.a)(Y,{maxLength:u/w.i}),J=p?w.c:w.d;return a.a.createElement(d.b,{width:u,position:"relative",onMouseEnter:s,onMouseLeave:l},a.a.createElement(d.b,{position:"relative"},a.a.createElement(o.b,{to:E,onClick:_},a.a.createElement(d.t,{shape:"rounded",height:c,width:u,wash:!0},a.a.createElement(d.o,{alt:W||T,naturalHeight:H,naturalWidth:V,src:G,fit:"cover"}),n&&m&&a.a.createElement(S.a,{visibility:"visible"},a.a.createElement(O.a,{additionalStyles:F.visualOverlay})))),a.a.createElement(d.b,{position:"absolute",margin:2,left:!0,right:!0,top:!0},a.a.createElement(x.a,{pin:C,allowShoppingPriceIndicator:!0})),n&&m&&a.a.createElement(d.b,{display:"flex",position:"absolute",margin:3,left:!0,right:!0,bottom:!0},A&&a.a.createElement(M,{pinId:L,sourceUrl:A,domain:j,sourceLinkStyle:"narrow"===P?"icon-only":"default",maxWidth:u,onClick:()=>{const t=e.componentType,n=e.viewData,i=e.viewType,a=e.viewParameter;Object(v.a)(12,{component:t,objectId:L,view:i,viewParameter:a,viewData:n})}}))),a.a.createElement(o.b,{to:E,onClick:_,stopPropagation:!0},a.a.createElement(h,{buyableProduct:D,hideAvailability:p,pinDescription:T&&Object(b.a)(T.trim(),J)||"",pinTitle:W&&Object(b.a)(W.trim(),J)||"",richSummary:U,merchantName:q,showProductIcon:I,showPrice:k,showDescription:u>N})))}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function H(e){const t=z(Object(i.useState)(!1),2),n=t[0],r=t[1],s=Object(i.useCallback)(()=>r(!0),[r]),l=Object(i.useCallback)(()=>r(!1),[r]),c=e.boxHeight,u=e.boxWidth,p=e.enableLink,m=e.imageSizeKey,h=e.link,b=e.onClick,f=e.pin,y=f.description,v=f.title,E=f.buyable_product,_=f.rich_summary,C=f.images[m],O=C.height,S=C.width,x=C.url,k=v||E&&E.title||_&&_.display_name;return a.a.createElement(d.b,{width:u,position:"relative",onMouseEnter:s,onMouseLeave:l},a.a.createElement(o.b,{to:h,onClick:b},a.a.createElement(d.t,{shape:"rounded",height:c,width:u,wash:!0},a.a.createElement(d.o,{alt:k||y,naturalHeight:O,naturalWidth:S,src:x,fit:"cover"}),a.a.createElement(g.a,{overlayOpacity:n&&p?w.k:0}))))}var V=n("UmN8");const G={"236x":236,"474x":474};function W(e){const t=e.compact,n=e.containerWidth,i=e.link,o=e.pin,r=e.productPinView,s=void 0===r?"standard":r,l=e.onClick,c=e.showOverlay,d=void 0!==c&&c,u=e.showPrice,p=void 0!==u&&u,m=e.showProductIcon,h=void 0!==m&&m,g=e.imageSizeKey,b=void 0===g?"474x":g,f=e.squared,y=void 0!==f&&f,v=e.viewportSize,E=e.enableLink,_=void 0===E||E,C=e.componentType,O=e.viewData,S=e.viewType,x=e.viewParameter;let k,I;if(y)k=G[b],I=G[b];else if(n)k=(n-w.l*(w.p-1))/w.p,I=k*w.h;else{const e="lego"===s,n=e?w.o:w.m;k=t?w.e:n,I=e?w.n:k}return d?a.a.createElement(H,{boxHeight:I,boxWidth:k,enableLink:_,imageSizeKey:b,link:i,onClick:l,pin:o}):a.a.createElement(V.a,{name:"web_shopping_surface_price_pill",activate:!1},({anyEnabled:e})=>a.a.createElement(U,{boxHeight:I,boxWidth:k,compact:t,enableLink:_,imageSizeKey:b,link:i,onClick:l,pin:o,showPrice:!e&&p,showProductIcon:h,viewportSize:v,componentType:C,viewData:O,viewType:S,viewParameter:x}))}function Y(e){return a.a.createElement(V.a,{name:"web_grid_immersive"},({anyEnabled:t})=>a.a.createElement(V.a,{name:"web_product_pin_hover_link"},({anyEnabled:n})=>t?a.a.createElement(W,Object.assign({enableLink:n},e)):a.a.createElement(C,Object.assign({enableLink:n},e))))}n.d(t,"a",function(){return Y})},yVWI:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Ivf5"),r=n("167h"),s=n("+U6O"),l=n("NoZx"),c=n("H5Gu"),d=n("9Y9K");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(o.connect)(null,e=>({createActivityItem:Object(d.bindActionCreators)(c.a,e)}))(class extends i.PureComponent{constructor(...e){super(...e),u(this,"state",{inCreationMode:!1}),u(this,"handleOnAddItem",e=>{const t=this.props,n=t.createActivityItem,i=t.activityItem;this.setState({inCreationMode:!1}),n({imageSignatures:e.imageSignatures,objectIds:e.objectIds,parentId:i.id,parentType:i.type,text:e.contentMarkdown,tags:e.tags})}),u(this,"handleOnCancelItem",()=>this.setState({inCreationMode:!1})),u(this,"handleOnStartItemCreation",()=>this.setState({inCreationMode:!0}))}render(){const e=this.props.board,t=void 0===e?{}:e,n=this.state.inCreationMode;return a.a.createElement(s.b,{column:12,marginBottom:10},a.a.createElement(r.a,{hideAddObjects:!0,onAddItem:this.handleOnAddItem,onCancelItem:this.handleOnCancelItem,onEnter:this.handleOnStartItemCreation,objectType:l.a.BOARD_ACTIVITY_COMMENT,parentObjectId:t.id,replyToObject:null,statusType:n?"textInflightCreation":"textStaticDisplay"}))}})},yXM0:function(e,t,n){function i(e){const t=Math.round(e/1e3),n=t%60;return Math.floor(t/60)+":"+(n<10?"0":"")+n}n.d(t,"a",function(){return i})},ykrh:function(e,t,n){var i=n("GyhR"),a=n("Qo1m"),o=n("+U6O");function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=16,c=32,d=4;class u extends i.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"handleMouseEnter",()=>this.setState({isHovering:!0})),s(this,"handleMouseLeave",()=>this.setState({isHovering:!1}))}render(){const e=this.props,t=e.forwardedRef,n=e.icon,s=e.onClick,u=e.onMouseDown,p=e.onMouseUp,m=e.selected,h=e.style,g=e.text,b=e.x,f=e.y,y=e.zIndex,v=e.backdropDiameter,w=void 0===v?c:v,E=e.dotDiameter,_=void 0===E?l:E,C=this.state.isHovering?w+d:w,O={zIndex:y,position:"absolute",top:f-C/2,left:b-C/2,outline:"none"},S={backgroundColor:"rgba(0, 0, 0, 0.1)",width:C,height:C,border:"none",borderRadius:C},x={backgroundColor:"#fff",boxShadow:m?"0 0 0 3px #e60023":"none",width:_,height:_,border:"none",borderRadius:_,position:"absolute",top:(C-_)/2,left:(C-_)/2,padding:0,display:"flex",alignItems:"center",justifyContent:"center"};return i.createElement("div",{onClick:s,onKeyPress:s,onMouseDown:u,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:p,ref:t,role:"button",style:O,tabIndex:"0"},i.createElement("div",{style:r({},S,h)},i.createElement("div",{style:x},!!g&&i.createElement(o.J,{align:"center",color:"darkGray",size:"xs",bold:!0,inline:!0},g),n&&i.createElement(o.m,{accessibilityLabel:a.a._("Tag anchor","accessibility label for an anchor for an object in a pin"),color:"red",icon:n,size:_/2,inline:!0}))))}}t.a=i.forwardRef((e,t)=>i.createElement(u,Object.assign({},e,{forwardedRef:t})))},yzmC:function(e,t,n){var i=n("GyhR");const a=i.createContext({showCloseupContentRight:!0,showLegoUpdates:!1,viewportSize:"wide"});t.a=a},"z/1d":function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("p968"),r=n("2YES");t.a=(({currency:e,maximumFractionDigits:t,minimumFractionDigits:n,shortform:i,shortformMaximumFractionDigits:s,formatStyle:l,uplimit:c,value:d})=>a.a.createElement(r.a,null,a=>Object(o.d)(a.locale,d,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:n,shortform:i,shortform_maximum_fraction_digits:s,style:l,uplimit:c})))},"z/cr":function(e,t,n){n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"k",function(){return l}),n.d(t,"i",function(){return c}),n.d(t,"j",function(){return d}),n.d(t,"h",function(){return u}),n.d(t,"a",function(){return p}),n.d(t,"l",function(){return m}),n.d(t,"m",function(){return h}),n.d(t,"g",function(){return g});const i="employees",a="enabled_icon",o="enabled_nux",r="enabled_underline",s="enabled_updates",l=[i,s,o,"enabled_holdout"],c=1016,d=508,u=40,p=72,m=740,h=542,g={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},z55A:function(e,t,n){n.d(t,"a",function(){return s});var i=n("GyhR"),a=n.n(i),o=n("p968"),r=n("2YES");const s=o.b.DateFormatType;t.b=(({dateFormatType:e,useUTC:t=!0,value:n})=>a.a.createElement(r.a,null,i=>o.b.formatDate(i.locale,n,e,t)))},z8CG:function(e,t,n){var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("+U6O");t.a=(({overlayOpacity:e=0})=>a.a.createElement(r.b,null,a.a.createElement(r.b,{display:"flex",position:"absolute",top:!0,right:!0,bottom:!0,left:!0,shape:"rounded",dangerouslySetInlineStyle:{__style:{cursor:"pointer",backgroundColor:"#000",opacity:.55+e}}}),a.a.createElement(r.b,{display:"flex",position:"absolute",justifyContent:"center",alignContent:"center",alignItems:"center",top:!0,right:!0,bottom:!0,left:!0,color:"white",dangerouslySetInlineStyle:{__style:{background:"transparent"}}},a.a.createElement(r.l,{size:"xs",color:"white"},o.a._("See all","View mask for showing more related products")))))},zBQm:function(e,t,n){function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"i",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"j",function(){return p}),n.d(t,"a",function(){return m}),n.d(t,"c",function(){return h});const o=e=>!!e&&e.video_list,r=(e,t)=>{const n=e||t&&t.embed;return n&&n.src&&!n.type},s=e=>e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products.length>0,l=e=>!!e.promoter&&!e.is_downstream_promotion,c=e=>{const t=e.embed||e.attribution&&e.attribution.embed||null;return t&&"gif"===t.type},d=e=>!!e.video_status&&5!==e.video_status,u=(e,t)=>t?`/pin/${e}/analytics`:`/pin/${e}/`,p=(e,t)=>{const n=i({},t.organicVideosAutoplaying,t.promotedVideosAutoplaying);return!!n[e]&&!n[e].paused},m=(e,t)=>{const n=i({},t.organicVideosAutoplaying,t.promotedVideosAutoplaying);for(const i in n){const t=n[i].paused;if(i!==e&&!t)return!1}return!0},h=(e,t)=>{const n=i({},t.organicVideosAutoplaying,t.promotedVideosAutoplaying);return n[e]&&n[e].currentTime}},zPDt:function(e,t,n){n.d(t,"a",function(){return c});var i=n("GyhR"),a=n.n(i),o=n("Qo1m"),r=n("d9lF"),s=n("Mce2"),l=n("Oeu6");const c=({handlePinEditButtonClick:e})=>a.a.createElement(s.a,{id:"closeup-pin-edit-button"},a.a.createElement(r.a,{accessibilityLabel:o.a._("Edit","edit button on pin"),onClick:t=>e&&e(t),icon:"edit"}));t.b=Object(l.a)(c)}},0,["CreateFlowSterling~DuplicationPageWrapperSterling~PersistentOneClickSaveCommon~PinBetterSaveCommon~P~88576141",5,11,"PinBetterSaveCommon","PinRepEditButtonCommon","PinSaveButtonCommon","NuxOneClickSaveButtonCommon","PinPromoteButtonCommon","PinRepSendShareFlyoutButtonCommon","PinRepSendShareLinkButtonCommon"]]);
//# sourceMappingURL=pjs-CloseupPageDesktop-75cc9933c3b30a2bb039.mjs.map
